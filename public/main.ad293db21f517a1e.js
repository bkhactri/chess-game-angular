(self.webpackChunkchess_game=self.webpackChunkchess_game||[]).push([[792],{76:(Hi,Gr,Pt)=>{"use strict";Pt.d(Gr,{Am:()=>Cc,Bd:()=>Re,FA:()=>Le,Fy:()=>oi,I9:()=>cs,Im:()=>as,Ku:()=>Zo,Ll:()=>Pn,T9:()=>mn,Uj:()=>Qt,XA:()=>rn,ZQ:()=>ht,bD:()=>bi,c1:()=>Gn,cY:()=>sn,eX:()=>ge,g:()=>pe,gR:()=>Vn,hp:()=>Ac,jZ:()=>Pr,lT:()=>zi,lV:()=>Fs,mS:()=>Yt,nr:()=>yi,p7:()=>er,sr:()=>os,tD:()=>Yn,u:()=>Te,zW:()=>Y,zw:()=>tt});const ve=function(V){const U=[];let G=0;for(let ie=0;ie<V.length;ie++){let le=V.charCodeAt(ie);le<128?U[G++]=le:le<2048?(U[G++]=le>>6|192,U[G++]=63&le|128):55296==(64512&le)&&ie+1<V.length&&56320==(64512&V.charCodeAt(ie+1))?(le=65536+((1023&le)<<10)+(1023&V.charCodeAt(++ie)),U[G++]=le>>18|240,U[G++]=le>>12&63|128,U[G++]=le>>6&63|128,U[G++]=63&le|128):(U[G++]=le>>12|224,U[G++]=le>>6&63|128,U[G++]=63&le|128)}return U},fn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,U){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let le=0;le<V.length;le+=3){const Qe=V[le],Ke=le+1<V.length,Bn=Ke?V[le+1]:0,Yr=le+2<V.length,mt=Yr?V[le+2]:0;let Ei=(15&Bn)<<2|mt>>6,Co=63&mt;Yr||(Co=64,Ke||(Ei=64)),ie.push(G[Qe>>2],G[(3&Qe)<<4|Bn>>4],G[Ei],G[Co])}return ie.join("")},encodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(V):this.encodeByteArray(ve(V),U)},decodeString(V,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(V):function(V){const U=[];let G=0,ie=0;for(;G<V.length;){const le=V[G++];if(le<128)U[ie++]=String.fromCharCode(le);else if(le>191&&le<224){const Qe=V[G++];U[ie++]=String.fromCharCode((31&le)<<6|63&Qe)}else if(le>239&&le<365){const Yr=((7&le)<<18|(63&V[G++])<<12|(63&V[G++])<<6|63&V[G++])-65536;U[ie++]=String.fromCharCode(55296+(Yr>>10)),U[ie++]=String.fromCharCode(56320+(1023&Yr))}else{const Qe=V[G++],Ke=V[G++];U[ie++]=String.fromCharCode((15&le)<<12|(63&Qe)<<6|63&Ke)}}return U.join("")}(this.decodeStringToByteArray(V,U))},decodeStringToByteArray(V,U){this.init_();const G=U?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let le=0;le<V.length;){const Qe=G[V.charAt(le++)],Bn=le<V.length?G[V.charAt(le)]:0;++le;const mt=le<V.length?G[V.charAt(le)]:64;++le;const gt=le<V.length?G[V.charAt(le)]:64;if(++le,null==Qe||null==Bn||null==mt||null==gt)throw new lr;ie.push(Qe<<2|Bn>>4),64!==mt&&(ie.push(Bn<<4&240|mt>>2),64!==gt&&ie.push(mt<<6&192|gt))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}};class lr extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qt=function(V){return function(V){const U=ve(V);return fn.encodeByteArray(U,!0)}(V).replace(/\./g,"")},Te=function(V){try{return fn.decodeString(V,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function tt(V,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return U}for(const G in U)!U.hasOwnProperty(G)||!Ot(G)||(V[G]=tt(V[G],U[G]));return V}function Ot(V){return"__proto__"!==V}function Yt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Ut=()=>{try{return Yt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=V&&Te(V[1]);return U&&JSON.parse(U)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},mn=()=>{var V;return null===(V=Ut())||void 0===V?void 0:V.config},rn=V=>{var U;return null===(U=Ut())||void 0===U?void 0:U[`_${V}`]};class sn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,G)=>{this.resolve=U,this.reject=G})}wrapCallback(U){return(G,ie)=>{G?this.reject(G):this.resolve(ie),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(G):U(G,ie))}}}function oi(V,U){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=U||"demo-project",le=V.iat||0,Qe=V.sub||V.user_id;if(!Qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:le,exp:le+3600,auth_time:le,sub:Qe,user_id:Qe,firebase:{sign_in_provider:"custom",identities:{}}},V);return[Qt(JSON.stringify({alg:"none",type:"JWT"})),Qt(JSON.stringify(Ke)),""].join(".")}function ht(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pr(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function Pn(){var V;const U=null===(V=Ut())||void 0===V?void 0:V.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Re(){return typeof window<"u"||er()}function er(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Gn(){return typeof navigator<"u"&&"Cloudflare-Workers"===navigator.userAgent}function os(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Fs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zi(){const V=ht();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function yi(){return!Pn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"==typeof indexedDB}catch{return!1}}function ge(){return new Promise((V,U)=>{try{let G=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(ie);le.onsuccess=()=>{le.result.close(),G||self.indexedDB.deleteDatabase(ie),V(!0)},le.onupgradeneeded=()=>{G=!1},le.onerror=()=>{var Qe;U((null===(Qe=le.error)||void 0===Qe?void 0:Qe.message)||"")}}catch(G){U(G)}})}class pe extends Error{constructor(U,G,ie){super(G),this.code=U,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Le.prototype.create)}}class Le{constructor(U,G,ie){this.service=U,this.serviceName=G,this.errors=ie}create(U,...G){const ie=G[0]||{},le=`${this.service}/${U}`,Qe=this.errors[U],Ke=Qe?function Me(V,U){return V.replace(Mt,(G,ie)=>{const le=U[ie];return null!=le?String(le):`<${ie}?>`})}(Qe,ie):"Error";return new pe(le,`${this.serviceName}: ${Ke} (${le}).`,ie)}}const Mt=/\{\$([^}]+)}/g;function Vn(V,U){return Object.prototype.hasOwnProperty.call(V,U)}function as(V){for(const U in V)if(Object.prototype.hasOwnProperty.call(V,U))return!1;return!0}function bi(V,U){if(V===U)return!0;const G=Object.keys(V),ie=Object.keys(U);for(const le of G){if(!ie.includes(le))return!1;const Qe=V[le],Ke=U[le];if(Ls(Qe)&&Ls(Ke)){if(!bi(Qe,Ke))return!1}else if(Qe!==Ke)return!1}for(const le of ie)if(!G.includes(le))return!1;return!0}function Ls(V){return null!==V&&"object"==typeof V}function Cc(V){const U=[];for(const[G,ie]of Object.entries(V))Array.isArray(ie)?ie.forEach(le=>{U.push(encodeURIComponent(G)+"="+encodeURIComponent(le))}):U.push(encodeURIComponent(G)+"="+encodeURIComponent(ie));return U.length?"&"+U.join("&"):""}function cs(V){const U={};return V.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[le,Qe]=ie.split("=");U[decodeURIComponent(le)]=decodeURIComponent(Qe)}}),U}function Ac(V){const U=V.indexOf("?");if(!U)return"";const G=V.indexOf("#",U);return V.substring(U,G>0?G:void 0)}function Yn(V,U){const G=new Pi(V,U);return G.subscribe.bind(G)}class Pi{constructor(U,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{U(this)}).catch(ie=>{this.error(ie)})}next(U){this.forEachObserver(G=>{G.next(U)})}error(U){this.forEachObserver(G=>{G.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,G,ie){let le;if(void 0===U&&void 0===G&&void 0===ie)throw new Error("Missing Observer.");le=function Vs(V,U){if("object"!=typeof V||null===V)return!1;for(const G of U)if(G in V&&"function"==typeof V[G])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:G,complete:ie},void 0===le.next&&(le.next=dr),void 0===le.error&&(le.error=dr),void 0===le.complete&&(le.complete=dr);const Qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch{}}),this.observers.push(le),Qe}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,U)}sendOne(U,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{G(this.observers[U])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dr(){}function Zo(V){return V&&V._delegate?V._delegate:V}},92:(Hi,Gr,Pt)=>{"use strict";function k(n){return"function"==typeof n}function O(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Je=O(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ve(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof Je?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{qr(s)}catch(o){e=e??[],o instanceof Je?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Je(e)}}add(e){var t;if(e&&e!==this)if(this.closed)qr(e);else{if(e instanceof Bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ve(t,e)}remove(e){const{_finalizers:t}=this;t&&ve(t,e),e instanceof Bt&&e._removeParent(this)}}Bt.EMPTY=(()=>{const n=new Bt;return n.closed=!0,n})();const fn=Bt.EMPTY;function lr(n){return n instanceof Bt||n&&"closed"in n&&k(n.remove)&&k(n.add)&&k(n.unsubscribe)}function qr(n){k(n)?n():n.unsubscribe()}const Qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Te={setTimeout(n,e,...t){const{delegate:r}=Te;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Te;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ne(n){Te.setTimeout(()=>{const{onUnhandledError:e}=Qt;if(!e)throw n;e(n)})}function tt(){}const Ot=Nt("C",void 0,void 0);function Nt(n,e,t){return{kind:n,value:e,error:t}}let lt=null;function Ut(n){if(Qt.useDeprecatedSynchronousErrorHandling){const e=!lt;if(e&&(lt={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=lt;if(lt=null,t)throw r}}else n()}class br extends Bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,lr(e)&&e.add(this)):this.destination=Re}static create(e,t,r){return new oi(e,t,r)}next(e){this.isStopped?Pn(function Kr(n){return Nt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pn(function Yt(n){return Nt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pn(Ot,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mn=Function.prototype.bind;function rn(n,e){return mn.call(n,e)}class sn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ht(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ht(r)}else ht(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ht(t)}}}class oi extends br{constructor(e,t,r){let i;if(super(),k(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Qt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rn(e.next,s),error:e.error&&rn(e.error,s),complete:e.complete&&rn(e.complete,s)}):i=e}this.destination=new sn(i)}}function ht(n){Qt.useDeprecatedSynchronousErrorHandling?function Wn(n){Qt.useDeprecatedSynchronousErrorHandling&&lt&&(lt.errorThrown=!0,lt.error=n)}(n):Ne(n)}function Pn(n,e){const{onStoppedNotification:t}=Qt;t&&Te.setTimeout(()=>t(n,e))}const Re={closed:!0,next:tt,error:function Pr(n){throw n},complete:tt},er="function"==typeof Symbol&&Symbol.observable||"@@observable";function Gn(n){return n}function Fs(n){return 0===n.length?Gn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let It=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Is(n){return n&&n instanceof br||function nl(n){return n&&k(n.next)&&k(n.error)&&k(n.complete)}(n)&&lr(n)}(t)?t:new oi(t,r,i);return Ut(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=zi(r))((i,s)=>{const o=new oi({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[er](){return this}pipe(...t){return Fs(t)(this)}toPromise(t){return new(t=zi(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function zi(n){var e;return null!==(e=n??Qt.Promise)&&void 0!==e?e:Promise}const yi=O(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Y=(()=>{class n extends It{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ge(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new yi}next(t){Ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ut(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?fn:(this.currentObservers=null,s.push(t),new Bt(()=>{this.currentObservers=null,ve(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new It;return t.source=this,t}}return n.create=(e,t)=>new ge(e,t),n})();class ge extends Y{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:fn}}function Ie(n){return k(n?.lift)}function te(n){return e=>{if(Ie(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(n,e,t,r,i){return new Le(n,e,t,r,i)}class Le extends br{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Me(n,e){return te((t,r)=>{let i=0;t.subscribe(pe(r,s=>{r.next(n.call(e,s,i++))}))})}var Mt=Pt(635);const _n=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function pt(n){return k(n?.then)}function ln(n){return k(n[er])}function ur(n){return Symbol.asyncIterator&&k(n?.[Symbol.asyncIterator])}function Mr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Qr=function en(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Vn(n){return k(n?.[Qr])}function vi(n){return(0,Mt.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Mt.N3)(t.read());if(i)return yield(0,Mt.N3)(void 0);yield yield(0,Mt.N3)(r)}}finally{t.releaseLock()}})}function as(n){return k(n?.getReader)}function tr(n){if(n instanceof It)return n;if(null!=n){if(ln(n))return function bi(n){return new It(e=>{const t=n[er]();if(k(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(_n(n))return function Ls(n){return new It(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(pt(n))return function Ic(n){return new It(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ne)})}(n);if(ur(n))return cs(n);if(Vn(n))return function Cc(n){return new It(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(as(n))return function Ac(n){return cs(vi(n))}(n)}throw Mr(n)}function cs(n){return new It(e=>{(function Ri(n,e){var t,r,i,s;return(0,Mt.sH)(this,void 0,void 0,function*(){try{for(t=(0,Mt.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Yn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function nr(n,e,t=1/0){return k(e)?nr((r,i)=>Me((s,o)=>e(r,s,i,o))(tr(n(r,i))),t):("number"==typeof e&&(t=e),te((r,i)=>function Pi(n,e,t,r,i,s,o,a){const c=[];let h=0,m=0,v=!1;const w=()=>{v&&!c.length&&!h&&e.complete()},A=M=>h<r?S(M):c.push(M),S=M=>{s&&e.next(M),h++;let N=!1;tr(t(M,m++)).subscribe(pe(e,ne=>{i?.(ne),s?A(ne):e.next(ne)},()=>{N=!0},void 0,()=>{if(N)try{for(h--;c.length&&h<r;){const ne=c.shift();o?Yn(e,o,()=>S(ne)):S(ne)}w()}catch(ne){e.error(ne)}}))};return n.subscribe(pe(e,A,()=>{v=!0,w()})),()=>{a?.()}}(r,i,n,t)))}function Vs(n=1/0){return nr(Gn,n)}const dr=new It(n=>n.complete());function Qo(n){return n&&k(n.schedule)}function Mi(n){return n[n.length-1]}function Yo(n){return k(Mi(n))?n.pop():void 0}function Fa(n){return Qo(Mi(n))?n.pop():void 0}function Cs(n,e=0){return te((t,r)=>{t.subscribe(pe(r,i=>Yn(r,n,()=>r.next(i),e),()=>Yn(r,n,()=>r.complete(),e),i=>Yn(r,n,()=>r.error(i),e)))})}function Wi(n,e=0){return te((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function il(n,e){if(!n)throw new Error("Iterable cannot be null");return new It(t=>{Yn(t,e,()=>{const r=n[Symbol.asyncIterator]();Yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function V(n,e){return e?function Zo(n,e){if(null!=n){if(ln(n))return function La(n,e){return tr(n).pipe(Wi(e),Cs(e))}(n,e);if(_n(n))return function Tc(n,e){return new It(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(pt(n))return function rl(n,e){return tr(n).pipe(Wi(e),Cs(e))}(n,e);if(ur(n))return il(n,e);if(Vn(n))return function cd(n,e){return new It(t=>{let r;return Yn(t,e,()=>{r=n[Qr](),Yn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}(n,e);if(as(n))return function Dc(n,e){return il(vi(n),e)}(n,e)}throw Mr(n)}(n,e):tr(n)}function U(...n){const e=Fa(n),t=function $i(n,e){return"number"==typeof Mi(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?tr(r[0]):Vs(t)(V(r,e)):dr}class G extends Y{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function ie(...n){return V(n,Fa(n))}function le(n={}){const{connector:e=(()=>new Y),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,h=0,m=!1,v=!1;const w=()=>{a?.unsubscribe(),a=void 0},A=()=>{w(),o=c=void 0,m=v=!1},S=()=>{const M=o;A(),M?.unsubscribe()};return te((M,N)=>{h++,!v&&!m&&w();const ne=c=c??e();N.add(()=>{h--,0===h&&!v&&!m&&(a=Qe(S,i))}),ne.subscribe(N),!o&&h>0&&(o=new oi({next:W=>ne.next(W),error:W=>{v=!0,w(),a=Qe(A,t,W),ne.error(W)},complete:()=>{m=!0,w(),a=Qe(A,r),ne.complete()}}),tr(M).subscribe(o))})(s)}}function Qe(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new oi({next:()=>{r.unsubscribe(),n()}});return tr(e(...t)).subscribe(r)}function Ke(n,e){return te((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(pe(r,c=>{i?.unsubscribe();let h=0;const m=s++;tr(n(c,m)).subscribe(i=pe(r,v=>r.next(e?e(c,v,m,h++):v),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Bn(n,e=Gn){return n=n??Yr,te((t,r)=>{let i,s=!0;t.subscribe(pe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function Yr(n,e){return n===e}function mt(n){for(let e in n)if(n[e]===mt)return e;throw Error("Could not find renamed property on target object.")}function kr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function gt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(gt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Ei(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Co=mt({__forward_ref__:mt});function wn(n){return n.__forward_ref__=wn,n.toString=function(){return gt(this())},n}function bt(n){return Ao(n)?n():n}function Ao(n){return"function"==typeof n&&n.hasOwnProperty(Co)&&n.__forward_ref__===wn}function sl(n){return n&&!!n.\u0275providers}const Xo="https://g.co/ng/security#xss";class _e extends Error{constructor(e,t){super(function me(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function z(n){return"string"==typeof n?n:null==n?"":String(n)}function kt(n,e){throw new _e(-201,!1)}function Us(n,e){null==n&&function Et(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ue(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Jo(n){return dd(n,ol)||dd(n,Va)}function dd(n,e){return n.hasOwnProperty(e)?n[e]:null}function Kl(n){return n&&(n.hasOwnProperty(hd)||n.hasOwnProperty(Pm))?n[hd]:null}const ol=mt({\u0275prov:mt}),hd=mt({\u0275inj:mt}),Va=mt({ngInjectableDef:mt}),Pm=mt({ngInjectorDef:mt});var qt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(qt||{});let mf;function ls(n){const e=mf;return mf=n,e}function fd(n,e,t){const r=Jo(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&qt.Optional?null:void 0!==e?e:void kt(gt(n))}const Mn=globalThis;class ke{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const al={},Zl="__NG_DI_FLAG__",rr="ngTempTokenPath",Sc=/\n/gm,Ts="__source";let wi;function ea(n){const e=wi;return wi=n,e}function gd(n,e=qt.Default){if(void 0===wi)throw new _e(-203,!1);return null===wi?fd(n,void 0,e):wi.get(n,e&qt.Optional?null:void 0,e)}function he(n,e=qt.Default){return(function Ql(){return mf}()||gd)(bt(n),e)}function Ge(n,e=qt.Default){return he(n,ki(e))}function ki(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Jl(n){const e=[];for(let t=0;t<n.length;t++){const r=bt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new _e(900,!1);let i,s=qt.Default;for(let o=0;o<r.length;o++){const a=r[o],c=Ny(a);"number"==typeof c?-1===c?i=a.token:s|=c:i=a}e.push(he(i,s))}else e.push(he(r))}return e}function Er(n,e){return n[Zl]=e,n.prototype[Zl]=e,n}function Ny(n){return n[Zl]}function no(n){return{toString:n}.toString()}var Ba=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(Ba||{}),Ft=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ft||{});const wr={},Kt=[],eu=mt({\u0275cmp:mt}),cl=mt({\u0275dir:mt}),_d=mt({\u0275pipe:mt}),Bm=mt({\u0275mod:mt}),us=mt({\u0275fac:mt}),ll=mt({__NG_ELEMENT_ID__:mt}),Ua=mt({__NG_ENV_ID__:mt});function ja(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function yd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];ds(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function tu(n){return 3===n||4===n||6===n}function ds(n){return 64===n.charCodeAt(0)}function Ha(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||vd(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function vd(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const nu="ng-template";function bd(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==ja(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function ru(n){return 4===n.type&&n.value!==nu}function Ed(n,e,t){return e===(4!==n.type||t?n.value:nu)}function Fy(n,e,t){let r=4;const i=n.attrs||[],s=function wd(n){for(let e=0;e<n.length;e++)if(tu(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!Ed(n,c,t)||""===c&&1===e.length){if(hs(r))return!1;o=!0}}else{const h=8&r?c:e[++a];if(8&r&&null!==n.attrs){if(!bd(n.attrs,h,t)){if(hs(r))return!1;o=!0}continue}const v=Gi(8&r?"class":c,i,ru(n),t);if(-1===v){if(hs(r))return!1;o=!0;continue}if(""!==h){let w;w=v>s?"":i[v+1].toLowerCase();const A=8&r?w:null;if(A&&-1!==ja(A,h,0)||2&r&&h!==w){if(hs(r))return!1;o=!0}}}}else{if(!o&&!hs(r)&&!hs(c))return!1;if(o&&hs(c))continue;o=!1,r=c|1&r}}return hs(r)||o}function hs(n){return 0==(1&n)}function Gi(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function yf(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function ul(n,e,t=!1){for(let r=0;r<e.length;r++)if(Fy(n,e[r],t))return!0;return!1}function vf(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function bf(n,e){return n?":not("+e.trim()+")":e}function Ef(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!hs(o)&&(e+=bf(s,i),i=""),r=o,s=s||!hs(r);t++}return""!==i&&(e+=bf(s,i)),e}function Zr(n){return no(()=>{const e=jm(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Ba.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ft.Emulated,styles:n.styles||Kt,_:null,schemas:n.schemas||null,tView:null,id:""};Cd(t);const r=n.dependencies;return t.directiveDefs=Ad(r,!1),t.pipeDefs=Ad(r,!0),t.id=function Td(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function Um(n){return on(n)||ir(n)}function iu(n){return null!==n}function On(n){return no(()=>({type:n.type,bootstrap:n.bootstrap||Kt,declarations:n.declarations||Kt,imports:n.imports||Kt,exports:n.exports||Kt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function su(n,e){if(null==n)return wr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function Ye(n){return no(()=>{const e=jm(n);return Cd(e),e})}function li(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function on(n){return n[eu]||null}function ir(n){return n[cl]||null}function Nn(n){return n[_d]||null}function qi(n,e){const t=n[Bm]||null;if(!t&&!0===e)throw new Error(`Type ${gt(n)} does not have '\u0275mod' property.`);return t}function jm(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||wr,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Kt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:su(n.inputs,e),outputs:su(n.outputs)}}function Cd(n){n.features?.forEach(e=>e(n))}function Ad(n,e){if(!n)return null;const t=e?Nn:Um;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(iu)}const Q=0,Z=1,ee=2,Ve=3,ct=4,un=5,an=6,vn=7,fr=8,xo=9,Ii=10,At=11,xc=12,Rc=13,ro=14,sr=15,dn=16,dl=17,Ds=18,$a=19,Dd=20,Wa=21,io=22,Ga=23,fs=24,zt=25,Pc=1,ou=2,so=7,qa=9,pr=11;function ps(n){return Array.isArray(n)&&"object"==typeof n[Pc]}function Ki(n){return Array.isArray(n)&&!0===n[Pc]}function Hm(n){return 0!=(4&n.flags)}function ra(n){return n.componentOffset>-1}function hl(n){return 1==(1&n.flags)}function Qi(n){return!!n.template}function Tf(n){return 0!=(512&n[ee])}function Ro(n,e){return n.hasOwnProperty(us)?n[us]:null}let Dn=null,kc=!1;function mr(n){const e=Dn;return Dn=n,e}const jt={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Or(n){if(!pl(n)||n.dirty){if(!n.producerMustRecompute(n)&&!Qm(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Km(n){n.dirty=!0,function qm(n){if(void 0===n.liveConsumerNode)return;const e=kc;kc=!0;try{for(const t of n.liveConsumerNode)t.dirty||Km(t)}finally{kc=e}}(n),n.consumerMarkedDirty?.(n)}function cu(n){return n&&(n.nextProducerIndex=0),mr(n)}function Pf(n,e){if(mr(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(pl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Oc(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qm(n){Mo(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Or(t),r!==t.version))return!0}return!1}function Mf(n){if(Mo(n),pl(n))for(let e=0;e<n.producerNode.length;e++)Oc(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Oc(n,e){if(function lu(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Mo(n),1===n.liveConsumerNode.length)for(let r=0;r<n.producerNode.length;r++)Oc(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Mo(i),i.producerIndexOfThis[r]=e}}function pl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Mo(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let Of=null;function tg(n){const e=mr(null);try{return n()}finally{mr(e)}}const ml=()=>{},du=(()=>({...jt,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:ml}))();class Wy{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Xi(){return Ff}function Ff(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lf),sa}function sa(){const n=Ji(this),e=n?.current;if(e){const t=n.previous;if(t===wr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Lf(n,e,t,r){const i=this.declaredInputs[t],s=Ji(n)||function Gy(n,e){return n[Ka]=e}(n,{previous:wr,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[i];o[i]=new Wy(c&&c.currentValue,e,a===wr),n[r]=e}Xi.ngInherit=!0;const Ka="__ngSimpleChanges__";function Ji(n){return n[Ka]||null}const Oi=function(n,e,t){},oa="svg";function Sn(n){for(;Array.isArray(n);)n=n[Q];return n}function kd(n,e){return Sn(e[n])}function Ci(n,e){return Sn(e[n.index])}function Oo(n,e){return n.data[e]}function aa(n,e){return n[e]}function Ir(n,e){const t=e[n];return ps(t)?t:t[Q]}function No(n,e){return null==e?null:n[e]}function Ni(n){n[dl]=0}function Bf(n){1024&n[ee]||(n[ee]|=1024,rg(n,1))}function Nd(n){1024&n[ee]&&(n[ee]&=-1025,rg(n,-1))}function rg(n,e){let t=n[Ve];if(null===t)return;t[un]+=e;let r=t;for(t=t[Ve];null!==t&&(1===e&&1===r[un]||-1===e&&0===r[un]);)t[un]+=e,r=t,t=t[Ve]}const wt={lFrame:yl(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ld(){return wt.bindingsEnabled}function Za(){return null!==wt.skipHydrationRootTNode}function xe(){return wt.lFrame.lView}function cn(){return wt.lFrame.tView}function Xr(n){return wt.lFrame.contextLView=n,n[fr]}function Jr(n){return wt.lFrame.contextLView=null,n}function di(){let n=gu();for(;null!==n&&64===n.type;)n=n.parent;return n}function gu(){return wt.lFrame.currentTNode}function Ss(n,e){const t=wt.lFrame;t.currentTNode=n,t.isParent=e}function _u(){return wt.lFrame.isParent}function Vd(){wt.lFrame.isParent=!1}function Fi(){const n=wt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function la(){return wt.lFrame.bindingIndex++}function ag(n,e){const t=wt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Nc(e)}function Nc(n){wt.lFrame.currentDirectiveIndex=n}function cg(){return wt.lFrame.currentQueryIndex}function vu(n){wt.lFrame.currentQueryIndex=n}function zs(n){const e=n[Z];return 2===e.type?e.declTNode:1===e.type?n[an]:null}function lg(n,e,t){if(t&qt.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&qt.Host||(i=zs(s),null===i||(s=s[ro],10&i.type))););if(null===i)return!1;e=i,n=s}const r=wt.lFrame=Hd();return r.currentTNode=e,r.lView=n,!0}function Fc(n){const e=Hd(),t=n[Z];wt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Hd(){const n=wt.lFrame,e=null===n?null:n.child;return null===e?yl(n):e}function yl(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Wf(){const n=wt.lFrame;return wt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ms=Wf;function Lo(){const n=Wf();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function hi(){return wt.lFrame.selectedIndex}function Xa(n){wt.lFrame.selectedIndex=n}function Zn(){const n=wt.lFrame;return Oo(n.tView,n.selectedIndex)}function Ja(){wt.lFrame.currentNamespace=oa}let ua=!0;function vl(){return ua}function da(n){ua=n}function $d(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:h,ngOnDestroy:m}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),h&&((n.viewHooks??=[]).push(t,h),(n.viewCheckHooks??=[]).push(t,h)),null!=m&&(n.destroyHooks??=[]).push(t,m)}}function Wd(n,e,t){bu(n,e,3,t)}function Gd(n,e,t,r){(3&n[ee])===t&&bu(n,e,t,r)}function bl(n,e){let t=n[ee];(3&t)===e&&(t&=8191,t+=1,n[ee]=t)}function bu(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let c=void 0!==r?65535&n[dl]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[dl]+=65536),(a<s||-1==s)&&(qd(n,t,e,c),n[dl]=(4294901760&n[dl])+c+2),c++}function hg(n,e){Oi(4,n,e);const t=mr(null);try{e.call(n)}finally{mr(t),Oi(5,n,e)}}function qd(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[ee]>>13<n[dl]>>16&&(3&n[ee])===e&&(n[ee]+=8192,hg(a,s)):hg(a,s)}const Lc=-1;class ai{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Eu(n){return n!==Lc}function Vo(n){return 32767&n}function Iu(n,e){let t=function wu(n){return n>>16}(n),r=e;for(;t>0;)r=r[ro],t--;return r}let Qd=!0;function Cu(n){const e=Qd;return Qd=n,e}const Zf=255,Zd=5;let Xf=0;const ci={};function Au(n,e){const t=Jf(n,e);if(-1!==t)return t;const r=e[Z];r.firstCreatePass&&(n.injectorIndex=e.length,nc(r.data,n),nc(e,null),nc(r.blueprint,null));const i=rc(n,e),s=n.injectorIndex;if(Eu(i)){const o=Vo(i),a=Iu(i,e),c=a[Z].data;for(let h=0;h<8;h++)e[s+h]=a[o+h]|c[o+h]}return e[s+8]=i,s}function nc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Jf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function rc(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Su(i),null===r)return Lc;if(t++,i=i[ro],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Lc}function ep(n,e,t){!function Yy(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(ll)&&(r=t[ll]),null==r&&(r=t[ll]=Xf++);const i=r&Zf;e.data[n+(i>>Zd)]|=1<<i}(n,e,t)}function $s(n,e,t){if(t&qt.Optional||void 0!==n)return n;kt()}function tp(n,e,t,r){if(t&qt.Optional&&void 0===r&&(r=null),!(t&(qt.Self|qt.Host))){const i=n[xo],s=ls(void 0);try{return i?i.get(e,r,t&qt.Optional):fd(e,r,t&qt.Optional)}finally{ls(s)}}return $s(r,0,t)}function np(n,e,t,r=qt.Default,i){if(null!==n){if(2048&e[ee]&&!(r&qt.Self)){const o=function Bc(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ee]&&!(512&o[ee]);){const a=Xd(s,o,t,r|qt.Self,ci);if(a!==ci)return a;let c=s.parent;if(!c){const h=o[Dd];if(h){const m=h.get(t,ci,r);if(m!==ci)return m}c=Su(o),o=o[ro]}s=c}return i}(n,e,t,r,ci);if(o!==ci)return o}const s=Xd(n,e,t,r,ci);if(s!==ci)return s}return tp(e,t,r,i)}function Xd(n,e,t,r,i){const s=function ha(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ll)?n[ll]:void 0;return"number"==typeof e?e>=0?e&Zf:_t:e}(t);if("function"==typeof s){if(!lg(e,n,r))return r&qt.Host?$s(i,0,r):tp(e,t,r,i);try{let o;if(o=s(r),null!=o||r&qt.Optional)return o;kt()}finally{ms()}}else if("number"==typeof s){let o=null,a=Jf(n,e),c=Lc,h=r&qt.Host?e[sr][an]:null;for((-1===a||r&qt.SkipSelf)&&(c=-1===a?rc(n,e):e[a+8],c!==Lc&&Tu(r,!1)?(o=e[Z],a=Vo(c),e=Iu(c,e)):a=-1);-1!==a;){const m=e[Z];if(eh(s,a,m.data)){const v=gg(a,e,t,o,r,h);if(v!==ci)return v}c=e[a+8],c!==Lc&&Tu(r,e[Z].data[a+8]===h)&&eh(s,a,e)?(o=m,a=Vo(c),e=Iu(c,e)):a=-1}}return i}function gg(n,e,t,r,i,s){const o=e[Z],a=o.data[n+8],m=Jd(a,o,t,null==r?ra(a)&&Qd:r!=o&&0!=(3&a.type),i&qt.Host&&s===a);return null!==m?Vc(e,o,m,a):ci}function Jd(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,m=s>>20,w=i?a+m:n.directiveEnd;for(let A=r?a:a+m;A<w;A++){const S=o[A];if(A<c&&t===S||A>=c&&S.type===t)return A}if(i){const A=o[c];if(A&&Qi(A)&&A.type===t)return c}return null}function Vc(n,e,t,r){let i=n[t];const s=e.data;if(function co(n){return n instanceof ai}(i)){const o=i;o.resolving&&function $e(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new _e(-200,`Circular dependency in DI detected for ${n}${t}`)}(function fe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():z(n)}(s[t]));const a=Cu(o.canSeeViewProviders);o.resolving=!0;const h=o.injectImpl?ls(o.injectImpl):null;lg(n,r,qt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function Kf(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Ff(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==h&&ls(h),Cu(a),o.resolving=!1,ms()}}return i}function eh(n,e,t){return!!(t[e+(n>>Zd)]&1<<n)}function Tu(n,e){return!(n&qt.Self||n&qt.Host&&e)}class ei{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return np(this._tNode,this._lView,e,ki(r),t)}}function _t(){return new ei(di(),xe())}function Cr(n){return no(()=>{const e=n.prototype.constructor,t=e[us]||Du(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[us]||Du(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Du(n){return Ao(n)?()=>{const e=Du(bt(n));return e&&e()}:Ro(n)}function Su(n){const e=n[Z],t=e.type;return 2===t?e.declTNode:1===t?n[an]:null}const Fr="__parameters__";function wl(n,e,t){return no(()=>{const r=function nh(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(c,h,m){const v=c.hasOwnProperty(Fr)?c[Fr]:Object.defineProperty(c,Fr,{value:[]})[Fr];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Bo(n,e){n.forEach(t=>Array.isArray(t)?Bo(t,e):e(t))}function sp(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ru(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function oc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Ar(n,e,t){let r=Hc(n,e);return r>=0?n[1|r]=t:(r=~r,function ap(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Pu(n,e){const t=Hc(n,e);if(t>=0)return n[1|t]}function Hc(n,e){return function lp(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const ku=Er(wl("Optional"),8),sh=Er(wl("SkipSelf"),4);function Dg(n){return 128==(128&n.flags)}var ac=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ac||{});const iv=new Map;let LA=0;const ov="__ngContext__";function _s(n,e){ps(e)?(n[ov]=e[$a],function BA(n){iv.set(n[$a],n)}(e)):n[ov]=e}let av;function xg(n,e){return av(n,e)}function _p(n){const e=n[Ve];return Ki(e)?e[Ve]:e}function M0(n){return k0(n[xc])}function yp(n){return k0(n[ct])}function k0(n){for(;null!==n&&!Ki(n);)n=n[ct];return n}function uh(n,e,t,r,i){if(null!=r){let s,o=!1;Ki(r)?s=r:ps(r)&&(o=!0,r=r[Q]);const a=Sn(r);0===n&&null!==t?null==i?V0(e,t,a):Nu(e,t,a,i||null,!0):1===n&&null!==t?Nu(e,t,a,i||null,!0):2===n?function Bg(n,e,t){const r=Fg(n,e);r&&function Ng(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function tT(n,e,t,r,i){const s=t[so];s!==Sn(t)&&uh(e,n,r,s,i);for(let a=pr;a<t.length;a++){const c=t[a];wp(c[Z],c,n,e,r,s)}}(e,n,s,t,i)}}function Pg(n,e,t){return n.createElement(e,t)}function N0(n,e){const t=n[qa],r=t.indexOf(e);Nd(e),t.splice(r,1)}function vp(n,e){if(n.length<=pr)return;const t=pr+e,r=n[t];if(r){const i=r[dn];null!==i&&i!==n&&N0(i,r),e>0&&(n[t-1][ct]=r[ct]);const s=Ru(n,pr+e);!function KA(n,e){wp(n,e,e[At],2,null,null),e[Q]=null,e[an]=null}(r[Z],r);const o=s[Ds];null!==o&&o.detachView(s[Z]),r[Ve]=null,r[ct]=null,r[ee]&=-129}return r}function kg(n,e){if(!(256&e[ee])){const t=e[At];e[Ga]&&Mf(e[Ga]),e[fs]&&Mf(e[fs]),t.destroyNode&&wp(n,e,t,3,null,null),function ZA(n){let e=n[xc];if(!e)return bp(n[Z],n);for(;e;){let t=null;if(ps(e))t=e[xc];else{const r=e[pr];r&&(t=r)}if(!t){for(;e&&!e[ct]&&e!==n;)ps(e)&&bp(e[Z],e),e=e[Ve];null===e&&(e=n),ps(e)&&bp(e[Z],e),t=e&&e[ct]}e=t}}(e)}}function bp(n,e){if(!(256&e[ee])){e[ee]&=-129,e[ee]|=256,function L0(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof ai)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],c=s[o+1];Oi(4,a,c);try{c.call(a)}finally{Oi(5,a,c)}}else{Oi(4,i,s);try{s.call(i)}finally{Oi(5,i,s)}}}}}(n,e),function F0(n,e){const t=n.cleanup,r=e[vn];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[vn]=null);const i=e[Wa];if(null!==i){e[Wa]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[Z].type&&e[At].destroy();const t=e[dn];if(null!==t&&Ki(e[Ve])){t!==e[Ve]&&N0(t,e);const r=e[Ds];null!==r&&r.detachView(n)}!function C0(n){iv.delete(n[$a])}(e)}}function Og(n,e,t){return function lv(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[Q];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ft.None||s===Ft.Emulated)return null}return Ci(r,t)}}(n,e.parent,t)}function Nu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function V0(n,e,t){n.appendChild(e,t)}function B0(n,e,t,r,i){null!==r?Nu(n,e,t,r,i):V0(n,e,t)}function Fg(n,e){return n.parentNode(e)}function Lg(n,e,t){return U0(n,e,t)}let hv,ts,mv,Ug,U0=function dv(n,e,t){return 40&n.type?Ci(n,t):null};function Vg(n,e,t,r){const i=Og(n,r,e),s=e[At],a=Lg(r.parent||e[an],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)B0(s,i,t[c],a,!1);else B0(s,i,t,a,!1);void 0!==hv&&hv(s,r,e,t,i)}function Ep(n,e){if(null!==e){const t=e.type;if(3&t)return Ci(e,n);if(4&t)return fv(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ep(n,r);{const i=n[e.index];return Ki(i)?fv(-1,i):Sn(i)}}if(32&t)return xg(e,n)()||Sn(n[e.index]);{const r=H0(n,e);return null!==r?Array.isArray(r)?r[0]:Ep(_p(n[sr]),r):Ep(n,e.next)}}return null}function H0(n,e){return null!==e?n[sr][an].projection[e.projection]:null}function fv(n,e){const t=pr+n+1;if(t<e.length){const r=e[t],i=r[Z].firstChild;if(null!==i)return Ep(r,i)}return e[so]}function pv(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],c=t.type;if(o&&0===e&&(a&&_s(Sn(a),r),t.flags|=2),32!=(32&t.flags))if(8&c)pv(n,e,t.child,r,i,s,!1),uh(e,n,i,a,s);else if(32&c){const h=xg(t,r);let m;for(;m=h();)uh(e,n,i,m,s);uh(e,n,i,a,s)}else 16&c?Uo(n,e,r,t,i,s):uh(e,n,i,a,s);t=o?t.projectionNext:t.next}}function wp(n,e,t,r,i,s){pv(t,r,n.firstChild,e,i,s,!1)}function Uo(n,e,t,r,i,s){const o=t[sr],c=o[an].projection[r.projection];if(Array.isArray(c))for(let h=0;h<c.length;h++)uh(e,n,i,c[h],s);else{let h=c;const m=o[Ve];Dg(r)&&(h.flags|=128),pv(n,e,h,m,i,s,!0)}}function Vt(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $0(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&yd(n,e,r),null!==i&&Vt(n,e,i),null!==s&&function Fu(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function dh(n){return function Lr(){if(void 0===ts&&(ts=null,Mn.trustedTypes))try{ts=Mn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ts}()?.createHTML(n)||n}function Cl(){if(void 0!==mv)return mv;if(typeof document<"u")return document;throw new _e(210,!1)}function ga(){if(void 0===Ug&&(Ug=null,Mn.trustedTypes))try{Ug=Mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ug}function gv(n){return ga()?.createHTML(n)||n}function Dr(n){return ga()?.createScriptURL(n)||n}class qn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Xo})`}}class W0 extends qn{getTypeName(){return"HTML"}}class oT extends qn{getTypeName(){return"Style"}}class aT extends qn{getTypeName(){return"Script"}}class cT extends qn{getTypeName(){return"URL"}}class lT extends qn{getTypeName(){return"ResourceURL"}}function uo(n){return n instanceof qn?n.changingThisBreaksApplicationSecurity:n}function cc(n,e){const t=function G0(n){return n instanceof qn&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Xo})`)}return t===e}class hh{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(dh(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class dT{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=dh(e),t}}const fT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hg(n){return(n=String(n)).match(fT)?n:"unsafe:"+n}function Wc(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function fh(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const lc=Wc("area,br,col,hr,img,wbr"),Wt=Wc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yv=Wc("rp,rt"),An=fh(lc,fh(Wt,Wc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fh(yv,Wc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fh(yv,Wt)),vv=Wc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),K0=fh(vv,Wc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),gT=Wc("script,style,template");class _T{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!An.hasOwnProperty(t))return this.sanitizedSomething=!0,!gT.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const s=r.item(i),o=s.name,a=o.toLowerCase();if(!K0.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;vv[a]&&(c=Hg(c)),this.buf.push(" ",o,'="',Q0(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();An.hasOwnProperty(t)&&!lc.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Q0(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const yT=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,vT=/([^\#-~ |!])/g;function Q0(n){return n.replace(/&/g,"&amp;").replace(yT,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(vT,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zg;function Y0(n,e){let t=null;try{zg=zg||function Ws(n){const e=new dT(n);return function hT(){try{return!!(new window.DOMParser).parseFromString(dh(""),"text/html")}catch{return!1}}()?new hh(e):e}(n);let r=e?String(e):"";t=zg.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=zg.getInertBodyElement(r)}while(r!==s);return dh((new _T).sanitizeChildren(Ev(t)||t))}finally{if(t){const r=Ev(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Ev(n){return"content"in n&&function bT(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var jo=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(jo||{});function Z0(n){const e=Ap();return e?gv(e.sanitize(jo.HTML,n)||""):cc(n,"HTML")?gv(uo(n)):Y0(Cl(),z(n))}function Al(n){const e=Ap();return e?e.sanitize(jo.URL,n)||"":cc(n,"URL")?uo(n):Hg(z(n))}function $g(n){const e=Ap();if(e)return Dr(e.sanitize(jo.RESOURCE_URL,n)||"");if(cc(n,"ResourceURL"))return Dr(uo(n));throw new _e(904,!1)}function Ap(){const n=xe();return n&&n[Ii].sanitizer}const Tp=new ke("ENVIRONMENT_INITIALIZER"),Iv=new ke("INJECTOR",-1),X0=new ke("INJECTOR_DEF_TYPES");class Cv{get(e,t=al){if(t===al){const r=new Error(`NullInjectorError: No provider for ${gt(e)}!`);throw r.name="NullInjectorError",r}return t}}function ew(...n){return{\u0275providers:tw(0,n),\u0275fromNgModule:!0}}function tw(n,...e){const t=[],r=new Set;let i;const s=o=>{t.push(o)};return Bo(e,o=>{const a=o;Wg(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&nw(i,s),t}function nw(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];Gg(i,s=>{e(s,r)})}}function Wg(n,e,t,r){if(!(n=bt(n)))return!1;let i=null,s=Kl(n);const o=!s&&on(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const c=n.ngModule;if(s=Kl(c),!s)return!1;i=c}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const h of c)Wg(h,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let h;r.add(i);try{Bo(s.imports,m=>{Wg(m,e,t,r)&&(h||=[],h.push(m))})}finally{}void 0!==h&&nw(h,e)}if(!a){const h=Ro(i)||(()=>new i);e({provide:i,useFactory:h,deps:Kt},i),e({provide:X0,useValue:i,multi:!0},i),e({provide:Tp,useValue:()=>he(i),multi:!0},i)}const c=s.providers;if(null!=c&&!a){const h=n;Gg(c,m=>{e(m,h)})}}}return i!==n&&void 0!==n.providers}function Gg(n,e){for(let t of n)sl(t)&&(t=t.\u0275providers),Array.isArray(t)?Gg(t,e):e(t)}const TT=mt({provide:String,useValue:mt});function Av(n){return null!==n&&"object"==typeof n&&TT in n}function Ho(n){return"function"==typeof n}const Tv=new ke("Set Injector scope."),qg={},ST={};let Dv;function Dp(){return void 0===Dv&&(Dv=new Cv),Dv}class fo{}class ph extends fo{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xv(e,o=>this.processProvider(o)),this.records.set(Iv,mh(void 0,this)),i.has("environment")&&this.records.set(fo,mh(void 0,this));const s=this.records.get(Tv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(X0.multi,Kt,qt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=ea(this),r=ls(void 0);try{return e()}finally{ea(t),ls(r)}}get(e,t=al,r=qt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Ua))return e[Ua](this);r=ki(r);const s=ea(this),o=ls(void 0);try{if(!(r&qt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const h=function kT(n){return"function"==typeof n||"object"==typeof n&&n instanceof ke}(e)&&Jo(e);c=h&&this.injectableDefInScope(h)?mh(Sv(e),qg):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&qt.Self?Dp():this.parent).get(e,t=r&qt.Optional&&t===al?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[rr]=a[rr]||[]).unshift(gt(e)),s)throw a;return function Vm(n,e,t,r){const i=n[rr];throw e[Ts]&&i.unshift(e[Ts]),n.message=function js(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=gt(e);if(Array.isArray(e))i=e.map(gt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):gt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(Sc,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[rr]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{ls(o),ea(s)}}resolveInjectorInitializers(){const e=ea(this),t=ls(void 0);try{const i=this.get(Tp.multi,Kt,qt.Self);for(const s of i)s()}finally{ea(e),ls(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=Ho(e=bt(e))?e:bt(e&&e.provide);const r=function RT(n){return Av(n)?mh(void 0,n.useValue):mh(sw(n),qg)}(e);if(Ho(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=mh(void 0,qg,!0),i.factory=()=>Jl(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===qg&&(t.value=ST,t.value=t.factory()),"object"==typeof t.value&&t.value&&function MT(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=bt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Sv(n){const e=Jo(n),t=null!==e?e.factory:Ro(n);if(null!==t)return t;if(n instanceof ke)throw new _e(204,!1);if(n instanceof Function)return function xT(n){const e=n.length;if(e>0)throw oc(e,"?"),new _e(204,!1);const t=function Rm(n){return n&&(n[ol]||n[Va])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new _e(204,!1)}function sw(n,e,t){let r;if(Ho(n)){const i=bt(n);return Ro(i)||Sv(i)}if(Av(n))r=()=>bt(n.useValue);else if(function iw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Jl(n.deps||[]));else if(function rw(n){return!(!n||!n.useExisting)}(n))r=()=>he(bt(n.useExisting));else{const i=bt(n&&(n.useClass||n.provide));if(!function PT(n){return!!n.deps}(n))return Ro(i)||Sv(i);r=()=>new i(...Jl(n.deps))}return r}function mh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function xv(n,e){for(const t of n)Array.isArray(t)?xv(t,e):t&&sl(t)?xv(t.\u0275providers,e):e(t)}const Kg=new ke("AppId",{providedIn:"root",factory:()=>OT}),OT="ng",ow=new ke("Platform Initializer"),uc=new ke("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gh=new ke("AnimationModuleType"),Rv=new ke("CSP nonce",{providedIn:"root",factory:()=>Cl().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let aw=(n,e,t)=>null;function Fv(n,e,t=!1){return aw(n,e,t)}class Uv{}class n_{}class HT{resolveComponentFactory(e){throw function jT(n){const e=Error(`No component factory found for ${gt(n)}.`);return e.ngComponent=n,e}(e)}}let Rp=(()=>{class n{static{this.NULL=new HT}}return n})();function zT(){return bh(di(),xe())}function bh(n,e){return new Vr(Ci(n,e))}let Vr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=zT}}return n})();function $T(n){return n instanceof Vr?n.nativeElement:n}class Pp{}let Gc=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function WT(){const n=xe(),t=Ir(di().index,n);return(ps(t)?t:n)[At]}()}}return n})(),GT=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>null})}}return n})();class Tl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const dw=new Tl("16.2.12"),jv={};function B(n,e=null,t=null,r){const i=K(n,e,t,r);return i.resolveInjectorInitializers(),i}function K(n,e=null,t=null,r,i=new Set){const s=[t||Kt,ew(n)];return r=r||("object"==typeof n?void 0:gt(n)),new ph(s,e||Dp(),r||null,i)}let J=(()=>{class n{static{this.THROW_IF_NOT_FOUND=al}static{this.NULL=new Cv}static create(t,r){if(Array.isArray(t))return B({name:""},r,t,"");{const i=t.name??"";return B({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Ue({token:n,providedIn:"any",factory:()=>he(Iv)})}static{this.__NG_ELEMENT_ID__=-1}}return n})();function Oe(n){return n.ngOriginalError}class He{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Oe(e);for(;t&&Oe(t);)t=Oe(t);return t||null}}function nn(n){return e=>{setTimeout(n,void 0,e)}}const Xe=class Dt extends Y{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=nn(s),i&&(i=nn(i)),o&&(o=nn(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Bt&&e.add(a),a}};function Gs(...n){}class nt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Rs(){const n="function"==typeof Mn.requestAnimationFrame;let e=Mn[n?"requestAnimationFrame":"setTimeout"],t=Mn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);const i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function RW(n){const e=()=>{!function fw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,QT(n),n.isCheckStableRunning=!0,va(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),QT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(function MW(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(i,s,o,a);try{return $1(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),W1(n)}},onInvoke:(t,r,i,s,o,a,c)=>{try{return $1(n),t.invoke(i,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),W1(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,QT(n),va(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nt.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(nt.isInAngularZone())throw new _e(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ya,Gs,Gs);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const ya={};function va(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function QT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function $1(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function W1(n){n._nesting--,va(n)}class PW{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const G1=new ke("",{providedIn:"root",factory:q1});function q1(){const n=Ge(nt);let e=!0;return U(new It(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new It(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{nt.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(le()))}function Lu(n){return n instanceof Function?n():n}let YT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function zv(n){for(;n;){n[ee]|=64;const e=_p(n);if(Tf(n)&&!e)return n;n=e}return null}const X1=new ke("",{providedIn:"root",factory:()=>!1});let mw=null;function nk(n,e){return n[e]??sk()}function rk(n,e){const t=sk();t.producerNode?.length&&(n[e]=mw,t.lView=n,mw=ik())}const HW={...jt,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{zv(n.lView)},lView:null};function ik(){return Object.create(HW)}function sk(){return mw??=ik(),mw}const Gt={};function Ht(n){ok(cn(),xe(),hi()+n,!1)}function ok(n,e,t,r){if(!r)if(3==(3&e[ee])){const s=n.preOrderCheckHooks;null!==s&&Wd(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Gd(e,s,0,t)}Xa(t)}function be(n,e=qt.Default){const t=xe();return null===t?he(n,e):np(di(),t,bt(n),e)}function ZT(){throw new Error("invalid")}function gw(n,e,t,r,i,s,o,a,c,h,m){const v=e.blueprint.slice();return v[Q]=i,v[ee]=140|r,(null!==h||n&&2048&n[ee])&&(v[ee]|=2048),Ni(v),v[Ve]=v[ro]=n,v[fr]=t,v[Ii]=o||n&&n[Ii],v[At]=a||n&&n[At],v[xo]=c||n&&n[xo]||null,v[an]=s,v[$a]=function VA(){return LA++}(),v[io]=m,v[Dd]=h,v[sr]=2==e.type?n[sr]:v,v}function s_(n,e,t,r,i){let s=n.data[e];if(null===s)s=function XT(n,e,t,r,i){const s=gu(),o=_u(),c=n.data[e]=function YW(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Za()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,r,i),function Ud(){return wt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function _l(){const n=wt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ss(s,!0),s}function $v(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ak(n,e,t,r,i){const s=nk(e,Ga),o=hi(),a=2&r;try{Xa(-1),a&&e.length>zt&&ok(n,e,zt,!1),Oi(a?2:0,i);const h=a?s:null,m=cu(h);try{null!==h&&(h.dirty=!1),t(r,i)}finally{Pf(h,m)}}finally{a&&null===e[Ga]&&rk(e,Ga),Xa(o),Oi(a?3:1,i)}}function JT(n,e,t){if(Hm(e)){const r=mr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{mr(r)}}}function eD(n,e,t){Ld()&&(function r3(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ra(t)&&function d3(n,e,t){const r=Ci(e,n),i=ck(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=_w(n,gw(n,i,null,o,r,e,null,n[Ii].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Au(t,e),_s(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const c=n.data[a],h=Vc(e,n,a,t);_s(h,e),null!==o&&h3(0,a-i,h,c,0,o),Qi(c)&&(Ir(t.index,e)[fr]=Vc(e,n,a,t))}}(n,e,t,Ci(t,e)),64==(64&t.flags)&&fk(n,e,t))}function tD(n,e,t=Ci){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function ck(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=nD(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function nD(n,e,t,r,i,s,o,a,c,h,m){const v=zt+r,w=v+i,A=function $W(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Gt);return t}(v,w),S="function"==typeof h?h():h;return A[Z]={type:n,blueprint:A,template:t,queries:null,viewQuery:a,declTNode:e,data:A.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:S,incompleteFirstPass:!1,ssrId:m}}let lk=n=>null;function uk(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?dk(t,e,i,s):r.hasOwnProperty(i)&&dk(t,e,r[i],s)}return t}function dk(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function rD(n,e,t,r){if(Ld()){const i=null===r?null:{"":-1},s=function o3(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(ul(e,o.selectors,!1))if(r||(r=[]),Qi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),iD(n,e,a.length)}else r.unshift(o),iD(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&hk(n,e,t,o,i,a),i&&function a3(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new _e(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=Ha(t.mergedAttrs,t.attrs)}function hk(n,e,t,r,i,s){for(let h=0;h<r.length;h++)ep(Au(t,e),n,r[h].type);!function l3(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let h=0;h<r.length;h++){const m=r[h];m.providersResolver&&m.providersResolver(m)}let o=!1,a=!1,c=$v(n,e,r.length,null);for(let h=0;h<r.length;h++){const m=r[h];t.mergedAttrs=Ha(t.mergedAttrs,m.hostAttrs),u3(n,t,e,c,m),c3(c,m,i),null!==m.contentQueries&&(t.flags|=4),(null!==m.hostBindings||null!==m.hostAttrs||0!==m.hostVars)&&(t.flags|=64);const v=m.type.prototype;!o&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function ZW(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,h=null;for(let m=e.directiveStart;m<i;m++){const v=s[m],w=t?t.get(v):null,S=w?w.outputs:null;c=uk(v.inputs,m,c,w?w.inputs:null),h=uk(v.outputs,m,h,S);const M=null===c||null===o||ru(e)?null:f3(c,m,o);a.push(M)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=h}(n,t,s)}function fk(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function $f(){return wt.lFrame.currentDirectiveIndex}();try{Xa(s);for(let a=r;a<i;a++){const c=n.data[a],h=e[a];Nc(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&s3(c,h)}}finally{Xa(-1),Nc(o)}}function s3(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function iD(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c3(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Qi(e)&&(t[""]=n)}}function u3(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=Ro(i.type)),o=new ai(s,Qi(i),be);n.blueprint[r]=o,t[r]=o,function t3(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function n3(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,$v(n,t,i.hostVars,Gt),i)}function Dl(n,e,t,r,i,s){const o=Ci(n,e);!function sD(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?z(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[At],o,s,n.value,t,r,i)}function h3(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)pk(r,t,o[a++],o[a++],o[a++])}function pk(n,e,t,r,i){const s=mr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{mr(s)}}function f3(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function mk(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function gk(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];vu(t[r]),o.contentQueries(2,e[s],s)}}}function _w(n,e){return n[xc]?n[Rc][ct]=e:n[xc]=e,n[Rc]=e,e}function oD(n,e,t){vu(0);const r=mr(null);try{e(n,t)}finally{mr(r)}}function _k(n){return n[vn]||(n[vn]=[])}function yk(n){return n.cleanup||(n.cleanup=[])}function bk(n,e){const t=n[xo],r=t?t.get(He,null):null;r&&r.handleError(e)}function aD(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];pk(n.data[o],e[o],r,a,i)}}function p3(n,e){const t=Ir(e,n),r=t[Z];!function m3(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[Q];null!==i&&null===t[io]&&(t[io]=Fv(i,t[xo])),cD(r,t,t[fr])}function cD(n,e,t){Fc(e);try{const r=n.viewQuery;null!==r&&oD(1,r,t);const i=n.template;null!==i&&ak(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&gk(n,e),n.staticViewQueries&&oD(2,n.viewQuery,t);const s=n.components;null!==s&&function g3(n,e){for(let t=0;t<e.length;t++)p3(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,Lo()}}let Ek=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=function $y(n,e,t){const r=Object.create(du);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;const i=o=>{r.cleanupFn=o};return r.ref={notify:()=>Km(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Qm(r))return;r.hasRun=!0;const o=cu(r);try{r.cleanupFn(),r.cleanupFn=ml,r.fn(i)}finally{Pf(r,o)}},cleanup:()=>r.cleanupFn()},r.ref}(t,h=>{this.all.has(h)&&this.queue.set(h,s)},i);let a;this.all.add(o),o.notify();const c=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new n})}}return n})();function yw(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Ei(i,a):2==s&&(r=Ei(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Wv(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];null!==s&&r.push(Sn(s)),Ki(s)&&wk(s,r);const o=t.type;if(8&o)Wv(n,e,t.child,r);else if(32&o){const a=xg(t,e);let c;for(;c=a();)r.push(c)}else if(16&o){const a=H0(e,t);if(Array.isArray(a))r.push(...a);else{const c=_p(e[sr]);Wv(c[Z],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function wk(n,e){for(let t=pr;t<n.length;t++){const r=n[t],i=r[Z].firstChild;null!==i&&Wv(r[Z],r,i,e)}n[so]!==n[Q]&&e.push(n[so])}function vw(n,e,t,r=!0){const i=e[Ii],s=i.rendererFactory,o=i.afterRenderEventManager;s.begin?.(),o?.begin();try{Ik(n,e,n.template,t)}catch(c){throw r&&bk(e,c),c}finally{s.end?.(),i.effectManager?.flush(),o?.end()}}function Ik(n,e,t,r){const i=e[ee];if(256!=(256&i)){e[Ii].effectManager?.flush(),Fc(e);try{Ni(e),function zf(n){return wt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&ak(n,e,t,2,r);const o=3==(3&i);if(o){const h=n.preOrderCheckHooks;null!==h&&Wd(e,h,null)}else{const h=n.preOrderHooks;null!==h&&Gd(e,h,0,null),bl(e,0)}if(function v3(n){for(let e=M0(n);null!==e;e=yp(e)){if(!e[ou])continue;const t=e[qa];for(let r=0;r<t.length;r++){Bf(t[r])}}}(e),Ck(e,2),null!==n.contentQueries&&gk(n,e),o){const h=n.contentCheckHooks;null!==h&&Wd(e,h)}else{const h=n.contentHooks;null!==h&&Gd(e,h,1),bl(e,1)}!function zW(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=nk(e,fs);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)Xa(~s);else{const o=s,a=t[++i],c=t[++i];ag(a,o),r.dirty=!1;const h=cu(r);try{c(2,e[o])}finally{Pf(r,h)}}}}finally{null===e[fs]&&rk(e,fs),Xa(-1)}}(n,e);const a=n.components;null!==a&&Tk(e,a,0);const c=n.viewQuery;if(null!==c&&oD(2,c,r),o){const h=n.viewCheckHooks;null!==h&&Wd(e,h)}else{const h=n.viewHooks;null!==h&&Gd(e,h,2),bl(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[ee]&=-73,Nd(e)}finally{Lo()}}}function Ck(n,e){for(let t=M0(n);null!==t;t=yp(t))for(let r=pr;r<t.length;r++)Ak(t[r],e)}function b3(n,e,t){Ak(Ir(e,n),t)}function Ak(n,e){if(!function Od(n){return 128==(128&n[ee])}(n))return;const t=n[Z],r=n[ee];if(80&r&&0===e||1024&r||2===e)Ik(t,n,t.template,n[fr]);else if(n[un]>0){Ck(n,1);const i=t.components;null!==i&&Tk(n,i,1)}}function Tk(n,e,t){for(let r=0;r<e.length;r++)b3(n,e[r],t)}class Gv{get rootNodes(){const e=this._lView,t=e[Z];return Wv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[fr]}set context(e){this._lView[fr]=e}get destroyed(){return 256==(256&this._lView[ee])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ve];if(Ki(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(vp(e,r),Ru(t,r))}this._attachedToViewContainer=!1}kg(this._lView[Z],this._lView)}onDestroy(e){!function Fd(n,e){if(256==(256&n[ee]))throw new _e(911,!1);null===n[Wa]&&(n[Wa]=[]),n[Wa].push(e)}(this._lView,e)}markForCheck(){zv(this._cdRefInjectingView||this._lView)}detach(){this._lView[ee]&=-129}reattach(){this._lView[ee]|=128}detectChanges(){vw(this._lView[Z],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YA(n,e){wp(n,e,e[At],2,null,null)}(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class E3 extends Gv{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;vw(e[Z],e,e[fr],!1)}checkNoChanges(){}get context(){return null}}class Dk extends Rp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=on(e);return new qv(t,this.ngModule)}}function Sk(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class I3{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ki(r);const i=this.injector.get(e,jv,r);return i!==jv||t===jv?i:this.parentInjector.get(e,t,r)}}class qv extends n_{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=Sk(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Sk(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Id(n){return n.map(Ef).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof fo?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new I3(e,s):e,a=o.get(Pp,null);if(null===a)throw new _e(407,!1);const v={rendererFactory:a,sanitizer:o.get(GT,null),effectManager:o.get(Ek,null),afterRenderEventManager:o.get(YT,null)},w=a.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=r?function WW(n,e,t,r){const s=r.get(X1,!1)||t===Ft.ShadowDom,o=n.selectRootElement(e,s);return function GW(n){lk(n)}(o),o}(w,r,this.componentDef.encapsulation,o):Pg(w,A,function w3(n){const e=n.toLowerCase();return"svg"===e?oa:"math"===e?"math":null}(A)),ne=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let W=null;null!==S&&(W=Fv(S,o,!0));const de=nD(0,null,null,1,0,null,null,null,null,null,null),Ae=gw(null,de,null,ne,null,null,v,w,o,null,W);let Be,it;Fc(Ae);try{const q=this.componentDef;let L,H=null;q.findHostDirectiveDefs?(L=[],H=new Map,q.findHostDirectiveDefs(q,L,H),L.push(q)):L=[q];const X=function A3(n,e){const t=n[Z],r=zt;return n[r]=e,s_(t,r,2,"#host",null)}(Ae,S),se=function T3(n,e,t,r,i,s,o){const a=i[Z];!function D3(n,e,t,r){for(const i of n)e.mergedAttrs=Ha(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(yw(e,e.mergedAttrs,!0),null!==t&&$0(r,t,e))}(r,n,e,o);let c=null;null!==e&&(c=Fv(e,i[xo]));const h=s.rendererFactory.createRenderer(e,t);let m=16;t.signals?m=4096:t.onPush&&(m=64);const v=gw(i,ck(t),null,m,i[n.index],n,s,h,null,null,c);return a.firstCreatePass&&iD(a,n,r.length-1),_w(i,v),i[n.index]=v}(X,S,q,L,Ae,v,w);it=Oo(de,zt),S&&function x3(n,e,t,r){if(r)yd(n,t,["ng-version",dw.full]);else{const{attrs:i,classes:s}=function wf(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!hs(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&yd(n,t,i),s&&s.length>0&&Vt(n,t,s.join(" "))}}(w,q,S,r),void 0!==t&&function R3(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(it,this.ngContentSelectors,t),Be=function S3(n,e,t,r,i,s){const o=di(),a=i[Z],c=Ci(o,i);hk(a,i,o,t,null,r);for(let m=0;m<t.length;m++)_s(Vc(i,a,o.directiveStart+m,o),i);fk(a,i,o),c&&_s(c,i);const h=Vc(i,a,o.directiveStart+o.componentOffset,o);if(n[fr]=i[fr]=h,null!==s)for(const m of s)m(h,e);return JT(a,o,n),h}(se,q,L,H,Ae,[P3]),cD(de,Ae,null)}finally{Lo()}return new C3(this.componentType,Be,bh(it,Ae),Ae,it)}}class C3 extends Uv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new E3(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;aD(s[Z],s,i,e,t),this.previousInputValues.set(e,t),zv(Ir(this._tNode.index,s))}}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function P3(){const n=di();$d(xe()[Z],n)}function Fn(n){let e=function xk(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Qi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=bw(n.inputs),o.inputTransforms=bw(n.inputTransforms),o.declaredInputs=bw(n.declaredInputs),o.outputs=bw(n.outputs);const a=i.hostBindings;a&&N3(n,a);const c=i.viewQuery,h=i.contentQueries;if(c&&k3(n,c),h&&O3(n,h),kr(n.inputs,i.inputs),kr(n.declaredInputs,i.declaredInputs),kr(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),kr(o.inputTransforms,i.inputTransforms)),Qi(i)&&i.data.animation){const m=n.data;m.animation=(m.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function M3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ha(i.hostAttrs,t=Ha(t,i.hostAttrs))}}(r)}function bw(n){return n===wr?{}:n===Kt?[]:n}function k3(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function O3(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function N3(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function Ew(n){return!!lD(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function lD(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Sl(n,e,t){return n[e]=t}function qs(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function po(n,e,t,r){const i=xe();return qs(i,la(),e)&&(cn(),Dl(Zn(),i,n,e,t,r)),po}function Br(n,e,t,r,i,s,o,a){const c=xe(),h=cn(),m=n+zt,v=h.firstCreatePass?function oG(n,e,t,r,i,s,o,a,c){const h=e.consts,m=s_(e,n,4,o||null,No(h,a));rD(e,t,m,No(h,c)),$d(e,m);const v=m.tView=nD(2,m,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,h,null);return null!==e.queries&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}(m,h,c,e,t,r,i,s,o):h.data[m];Ss(v,!1);const w=Gk(h,c,v,n);vl()&&Vg(h,c,w,v),_s(w,c),_w(c,c[m]=mk(w,c,w,v)),hl(v)&&eD(h,c,v),null!=o&&tD(c,v,a)}let Gk=function qk(n,e,t,r){return da(!0),e[At].createComment("")};function Tw(n){return aa(function Bd(){return wt.lFrame.contextLView}(),zt+n)}function hn(n,e,t){const r=xe();return qs(r,la(),e)&&function ba(n,e,t,r,i,s,o,a){const c=Ci(e,t);let m,h=e.inputs;!a&&null!=h&&(m=h[r])?(aD(n,t,m,r,i),ra(e)&&function JW(n,e){const t=Ir(e,n);16&t[ee]||(t[ee]|=64)}(t,e.index)):3&e.type&&(r=function XW(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(c,r,i))}(cn(),Zn(),r,n,e,r[At],t,!1),hn}function mD(n,e,t,r,i){const o=i?"class":"style";aD(n,t,e.inputs[o],o,r)}function yt(n,e,t,r){const i=xe(),s=cn(),o=zt+n,a=i[At],c=s.firstCreatePass?function uG(n,e,t,r,i,s){const o=e.consts,c=s_(e,n,2,r,No(o,i));return rD(e,t,c,No(o,s)),null!==c.attrs&&yw(c,c.attrs,!1),null!==c.mergedAttrs&&yw(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,e,t,r):s.data[o],h=Kk(s,i,c,a,e,n);i[o]=h;const m=hl(c);return Ss(c,!0),$0(a,h,c),32!=(32&c.flags)&&vl()&&Vg(s,i,h,c),0===function fu(){return wt.lFrame.elementDepthCount}()&&_s(h,i),function Ky(){wt.lFrame.elementDepthCount++}(),m&&(eD(s,i,c),JT(s,c,i)),null!==r&&tD(i,c),yt}function Ct(){let n=di();_u()?Vd():(n=n.parent,Ss(n,!1));const e=n;(function mu(n){return wt.skipHydrationRootTNode===n})(e)&&function og(){wt.skipHydrationRootTNode=null}(),function pu(){wt.lFrame.elementDepthCount--}();const t=cn();return t.firstCreatePass&&($d(t,n),Hm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function tc(n){return 0!=(8&n.flags)}(e)&&mD(t,e,xe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Yf(n){return 0!=(16&n.flags)}(e)&&mD(t,e,xe(),e.stylesWithoutHost,!1),Ct}function Vi(n,e,t,r){return yt(n,e,t,r),Ct(),Vi}let Kk=(n,e,t,r,i,s)=>(da(!0),Pg(r,i,function dg(){return wt.lFrame.currentNamespace}()));function Eh(){return xe()}function Xv(n){return!!n&&"function"==typeof n.then}function Zk(n){return!!n&&"function"==typeof n.subscribe}function Kn(n,e,t,r){const i=xe(),s=cn(),o=di();return function Jk(n,e,t,r,i,s,o){const a=hl(r),h=n.firstCreatePass&&yk(n),m=e[fr],v=_k(e);let w=!0;if(3&r.type||o){const M=Ci(r,e),N=o?o(M):M,ne=v.length,W=o?Ae=>o(Sn(Ae[r.index])):r.index;let de=null;if(!o&&a&&(de=function gG(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[vn],c=i[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==de)(de.__ngLastListenerFn__||de).__ngNextListenerFn__=s,de.__ngLastListenerFn__=s,w=!1;else{s=tO(r,e,m,s,!1);const Ae=t.listen(N,i,s);v.push(s,Ae),h&&h.push(i,W,ne,ne+1)}}else s=tO(r,e,m,s,!1);const A=r.outputs;let S;if(w&&null!==A&&(S=A[i])){const M=S.length;if(M)for(let N=0;N<M;N+=2){const Be=e[S[N]][S[N+1]].subscribe(s),it=v.length;v.push(s,Be),h&&h.push(i,r.index,it,-(it+1))}}}(s,i,i[At],o,n,e,r),Kn}function eO(n,e,t,r){try{return Oi(6,e,t),!1!==t(r)}catch(i){return bk(n,i),!1}finally{Oi(7,e,t)}}function tO(n,e,t,r,i){return function s(o){if(o===Function)return r;zv(n.componentOffset>-1?Ir(n.index,e):e);let c=eO(e,t,r,o),h=s.__ngNextListenerFn__;for(;h;)c=eO(e,t,h,o)&&c,h=h.__ngNextListenerFn__;return i&&!1===c&&o.preventDefault(),c}}function xn(n=1){return function Gf(n){return(wt.lFrame.contextLView=function ug(n,e){for(;n>0;)e=e[ro],n--;return e}(n,wt.lFrame.contextLView))[fr]}(n)}function _G(n,e){let t=null;const r=function za(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?ul(n,s,!0):vf(r,s))return i}else t=i}return t}function m_(n){const e=xe()[sr][an];if(!e.projection){const r=e.projection=oc(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?_G(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function Ea(n,e=0,t){const r=xe(),i=cn(),s=s_(i,zt+n,16,null,t||null);null===s.projection&&(s.projection=e),Vd(),(!r[io]||Za())&&32!=(32&s.flags)&&function eT(n,e,t){Uo(e[At],0,e,t,Og(n,t,e),Lg(t.parent||e[an],t,e))}(i,r,s)}function Dw(n,e){return n<<17|e<<2}function wh(n){return n>>17&32767}function vD(n){return 2|n}function kp(n){return(131068&n)>>2}function bD(n,e){return-131069&n|e<<2}function ED(n){return 1|n}function dO(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?wh(s):kp(s),c=!1;for(;0!==a&&(!1===c||o);){const m=n[a+1];IG(n[a],e)&&(c=!0,n[a+1]=r?ED(m):vD(m)),a=r?wh(m):kp(m)}c&&(n[t+1]=r?vD(s):ED(s))}function IG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Hc(n,e)>=0}function Bu(n,e,t){return qc(n,e,t,!1),Bu}function wa(n,e){return qc(n,e,null,!0),wa}function qc(n,e,t,r){const i=xe(),s=cn(),o=function Fo(n){const e=wt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function vO(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[hi()],o=function yO(n,e){return e>=n.expandoStartIndex}(n,t);(function IO(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function MG(n,e,t,r){const i=function jd(n){const e=wt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Jv(t=wD(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=wD(i,n,e,t,r),null===s){let c=function kG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==kp(r))return n[wh(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=wD(null,n,e,c[1],r),c=Jv(c,e.attrs,r),function OG(n,e,t,r){n[wh(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else s=function NG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Jv(r,n[s].hostAttrs,t);return Jv(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function EG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wh(o),c=kp(o);n[r]=t;let m,h=!1;if(Array.isArray(t)?(m=t[1],(null===m||Hc(t,m)>0)&&(h=!0)):m=t,i)if(0!==c){const w=wh(n[a+1]);n[r+1]=Dw(w,a),0!==w&&(n[w+1]=bD(n[w+1],r)),n[a+1]=function vG(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Dw(a,0),0!==a&&(n[a+1]=bD(n[a+1],r)),a=r;else n[r+1]=Dw(c,0),0===a?a=r:n[c+1]=bD(n[c+1],r),c=r;h&&(n[r+1]=vD(n[r+1])),dO(n,m,r,!0),dO(n,m,r,!1),function wG(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Hc(s,e)>=0&&(t[r+1]=ED(t[r+1]))}(e,m,n,r,s),o=Dw(a,c),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Gt&&qs(i,o,e)&&function EO(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const c=n.data,h=c[a+1],m=function bG(n){return 1==(1&n)}(h)?wO(c,e,t,i,kp(h),o):void 0;Sw(m)||(Sw(s)||function yG(n){return 2==(2&n)}(h)&&(s=wO(c,null,t,i,a,o)),function nT(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:ac.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ac.Important),n.setStyle(t,r,i,s))}}(r,o,kd(hi(),t),i,s))}(s,s.data[hi()],i,i[At],n,i[o+1]=function BG(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=gt(uo(n)))),n}(e,t),r,o)}function wD(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Jv(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Jv(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ar(n,o,!!t||e[++s]))}return void 0===n?null:n}function wO(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const c=n[i],h=Array.isArray(c),m=h?c[1]:c,v=null===m;let w=t[i+1];w===Gt&&(w=v?Kt:void 0);let A=v?Pu(w,r):m===r?w:void 0;if(h&&!Sw(A)&&(A=Pu(c,r)),Sw(A)&&(a=A,o))return a;const S=n[i+1];i=o?wh(S):kp(S)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=Pu(c,r))}return a}function Sw(n){return void 0!==n}function Rn(n,e=""){const t=xe(),r=cn(),i=n+zt,s=r.firstCreatePass?s_(r,i,1,e,null):r.data[i],o=CO(r,t,s,e,n);t[i]=o,vl()&&Vg(r,t,o,s),Ss(s,!1)}let CO=(n,e,t,r,i)=>(da(!0),function Rg(n,e){return n.createText(e)}(e[At],r));function xw(n){return Ih("",n,""),xw}function Ih(n,e,t){const r=xe(),i=function a_(n,e,t,r){return qs(n,la(),t)?e+z(t)+r:Gt}(r,n,e,t);return i!==Gt&&function Vu(n,e,t){const r=kd(e,n);!function O0(n,e,t){n.setValue(e,t)}(n[At],r,t)}(r,hi(),i),Ih}const y_="en-US";let GO=y_;function AD(n,e,t,r,i){if(n=bt(n),Array.isArray(n))for(let s=0;s<n.length;s++)AD(n[s],e,t,r,i);else{const s=cn(),o=xe(),a=di();let c=Ho(n)?n:bt(n.provide);const h=sw(n),m=1048575&a.providerIndexes,v=a.directiveStart,w=a.providerIndexes>>20;if(Ho(n)||!n.multi){const A=new ai(h,i,be),S=DD(c,e,i?m:m+w,v);-1===S?(ep(Au(a,o),s,c),TD(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(A),o.push(A)):(t[S]=A,o[S]=A)}else{const A=DD(c,e,m+w,v),S=DD(c,e,m,m+w),N=S>=0&&t[S];if(i&&!N||!i&&!(A>=0&&t[A])){ep(Au(a,o),s,c);const ne=function aq(n,e,t,r,i){const s=new ai(n,t,be);return s.multi=[],s.index=e,s.componentProviders=0,_N(s,i,r&&!t),s}(i?oq:sq,t.length,i,r,h);!i&&N&&(t[S].providerFactory=ne),TD(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(ne),o.push(ne)}else TD(s,n,A>-1?A:S,_N(t[i?S:A],h,!i&&r));!i&&r&&N&&t[S].componentProviders++}}}function TD(n,e,t,r){const i=Ho(e),s=function DT(n){return!!n.useClass}(e);if(i||s){const c=(s?bt(e.useClass):e).prototype.ngOnDestroy;if(c){const h=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const m=h.indexOf(t);-1===m?h.push(t,[r,c]):h[m+1].push(r,c)}else h.push(t,c)}}}function _N(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function DD(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function sq(n,e,t,r){return SD(this.multi,[])}function oq(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Vc(t,t[Z],this.providerFactory.index,r);s=a.slice(0,o),SD(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],SD(i,s);return s}function SD(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Qn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function iq(n,e,t){const r=cn();if(r.firstCreatePass){const i=Qi(n);AD(t,r.data,r.blueprint,i,!0),AD(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class Np{}class yN{}class xD extends Np{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dk(this);const i=qi(e);this._bootstrapComponents=Lu(i.bootstrap),this._r3Injector=K(e,t,[{provide:Np,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver},...r],gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class RD extends yN{constructor(e){super(),this.moduleType=e}create(e){return new xD(this.moduleType,e,[])}}class vN extends Np{constructor(e){super(),this.componentFactoryResolver=new Dk(this),this.instance=null;const t=new ph([...e.providers,{provide:Np,useValue:this},{provide:Rp,useValue:this.componentFactoryResolver}],e.parent||Dp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function PD(n,e,t=null){return new vN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let uq=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=tw(0,t.type),i=r.length>0?PD([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Ue({token:n,providedIn:"environment",factory:()=>new n(he(fo))})}}return n})();function bN(n){n.getStandaloneInjector=e=>e.get(uq).getOrCreateStandaloneInjector(n)}function SN(n,e,t,r,i,s){const o=e+t;return qs(n,o,i)?Sl(n,o+1,s?r.call(s,i):r(i)):function sb(n,e){const t=n[e];return t===Gt?void 0:t}(n,o+1)}function kD(n,e){const t=cn();let r;const i=n+zt;t.firstCreatePass?(r=function Sq(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const s=r.factory||(r.factory=Ro(r.type)),a=ls(be);try{const c=Cu(!1),h=s();return Cu(c),function lG(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,xe(),i,h),h}finally{ls(a)}}function OD(n,e,t){const r=n+zt,i=xe(),s=aa(i,r);return function ob(n,e){return n[Z].data[e].pure}(i,r)?SN(i,Fi(),e,s.transform,t,s):s.transform(t)}function kq(){return this._results[Symbol.iterator]()}class ab{get changes(){return this._changes||(this._changes=new Xe)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ab.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=kq)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function ar(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Jy(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Nq(n,e,t,r=!0){const i=e[Z];if(function XA(n,e,t,r){const i=pr+r,s=t.length;r>0&&(t[i-1][ct]=e),r<s-pr?(e[ct]=t[i],sp(t,pr+r,e)):(t.push(e),e[ct]=null),e[Ve]=t;const o=e[dn];null!==o&&t!==o&&function Mg(n,e){const t=n[qa];e[sr]!==e[Ve][Ve][sr]&&(n[ou]=!0),null===t?n[qa]=[e]:t.push(e)}(o,e);const a=e[Ds];null!==a&&a.insertView(n),e[ee]|=128}(i,e,n,t),r){const s=fv(t,n),o=e[At],a=Fg(o,n[so]);null!==a&&function QA(n,e,t,r,i,s){r[Q]=i,r[an]=e,wp(n,r,t,1,i,s)}(i,n[an],o,e,a,s)}}let Qc=(()=>{class n{static{this.__NG_ELEMENT_ID__=Vq}}return n})();const Fq=Qc,Lq=class extends Fq{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=function Oq(n,e,t,r){const i=e.tView,a=gw(n,i,t,4096&n[ee]?4096:16,null,e,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[dn]=n[e.index];const h=n[Ds];return null!==h&&(a[Ds]=h.createEmbeddedView(i)),cD(i,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:r});return new Gv(i)}};function Vq(){return Ow(di(),xe())}function Ow(n,e){return 4&n.type?new Lq(e,n,bh(n,e)):null}let hc=(()=>{class n{static{this.__NG_ELEMENT_ID__=$q}}return n})();function $q(){return BN(di(),xe())}const Wq=hc,LN=class extends Wq{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return bh(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){const e=rc(this._hostTNode,this._hostLView);if(Eu(e)){const t=Iu(e,this._hostLView),r=Vo(e);return new ei(t[Z].data[r+8],t)}return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=VN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-pr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function sc(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const M=t||{};a=M.index,r=M.injector,i=M.projectableNodes,s=M.environmentInjector||M.ngModuleRef}const c=o?e:new qv(on(e)),h=r||this.parentInjector;if(!s&&null==c.ngModule){const N=(o?h:this.parentInjector).get(fo,null);N&&(s=N)}on(c.componentType??{});const A=c.create(h,i,null,s);return this.insertImpl(A.hostView,a,false),A}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView;if(function ca(n){return Ki(n[Ve])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const h=i[Ve],m=new LN(h,h[an],h[Ve]);m.detach(m.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return Nq(a,i,o,!r),e.attachToViewContainerRef(),sp(ND(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=VN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=vp(this._lContainer,t);r&&(Ru(ND(this._lContainer),t),kg(r[Z],r))}detach(e){const t=this._adjustIndex(e,-1),r=vp(this._lContainer,t);return r&&null!=Ru(ND(this._lContainer),t)?new Gv(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function VN(n){return n[8]}function ND(n){return n[8]||(n[8]=[])}function BN(n,e){let t;const r=e[n.index];return Ki(r)?t=r:(t=mk(r,e,null,n),e[n.index]=t,_w(e,t)),UN(t,e,n,r),new LN(t,n,e)}let UN=function jN(n,e,t,r){if(n[so])return;let i;i=8&t.type?Sn(r):function Gq(n,e){const t=n[At],r=t.createComment(""),i=Ci(e,n);return Nu(t,Fg(t,i),r,function JA(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[so]=i};class FD{constructor(e){this.queryList=e,this.matches=null}clone(){return new FD(this.queryList)}setDirty(){this.queryList.setDirty()}}class LD{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new LD(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==GN(e,t).matches&&this.queries[t].setDirty()}}class HN{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class VD{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new VD(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class BD{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new BD(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,Qq(t,s)),this.matchTNodeWithReadOption(e,t,Jd(t,e,s,!1,!1))}else r===Qc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Jd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Vr||i===hc||i===Qc&&4&t.type)this.addMatch(t.index,-2);else{const s=Jd(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Qq(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Zq(n,e,t,r){return-1===t?function Yq(n,e){return 11&n.type?bh(n,e):4&n.type?Ow(n,e):null}(e,n):-2===t?function Xq(n,e,t){return t===Vr?bh(e,n):t===Qc?Ow(e,n):t===hc?BN(e,n):void 0}(n,e,r):Vc(n,n[Z],t,e)}function zN(n,e,t,r){const i=e[Ds].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){const h=o[c];a.push(h<0?null:Zq(e,s[h],o[c+1],t.metadata.read))}i.matches=a}return i.matches}function UD(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=zN(n,e,i,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)r.push(o[a/2]);else{const h=s[a+1],m=e[-c];for(let v=pr;v<m.length;v++){const w=m[v];w[dn]===w[Ve]&&UD(w[Z],w,h,r)}if(null!==m[qa]){const v=m[qa];for(let w=0;w<v.length;w++){const A=v[w];UD(A[Z],A,h,r)}}}}}return r}function Ia(n){const e=xe(),t=cn(),r=cg();vu(r+1);const i=GN(t,r);if(n.dirty&&function Vf(n){return 4==(4&n[ee])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?UD(t,e,r,[]):zN(t,e,i,r);n.reset(s,$T),n.notifyOnChanges()}return!0}return!1}function Ch(n,e,t){const r=cn();r.firstCreatePass&&(WN(r,new HN(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),$N(r,xe(),e)}function v_(n,e,t,r){const i=cn();if(i.firstCreatePass){const s=di();WN(i,new HN(e,t,r),s.index),function e8(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}$N(i,xe(),t)}function Ca(){return function Jq(n,e){return n[Ds].queries[e].queryList}(xe(),cg())}function $N(n,e,t){const r=new ab(4==(4&t));(function QW(n,e,t,r){const i=_k(e);i.push(t),n.firstCreatePass&&yk(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Ds]&&(e[Ds]=new LD),e[Ds].queries.push(new FD(r))}function WN(n,e,t){null===n.queries&&(n.queries=new VD),n.queries.track(new BD(e,t))}function GN(n,e){return n.queries.getByIndex(e)}function qN(n,e){return Ow(n,e)}const GD=new ke("Application Initializer");let qD=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Ge(GD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(Xv(s))t.push(s);else if(Zk(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uF=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();const Pl=new ke("LocaleId",{providedIn:"root",factory:()=>Ge(Pl,qt.Optional|qt.SkipSelf)||function E8(){return typeof $localize<"u"&&$localize.locale||y_}()});let dF=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new G(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class C8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let hF=(()=>{class n{compileModuleSync(t){return new RD(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Lu(qi(t).declarations).reduce((o,a)=>{const c=on(a);return c&&o.push(new qv(c)),o},[]);return new C8(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const gF=new ke(""),Vw=new ke("");let XD,YD=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,XD||(function G8(n){XD=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(he(nt),he(ZD),he(Vw))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),ZD=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return XD?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),Ah=null;const _F=new ke("AllowMultipleToken"),JD=new ke("PlatformDestroyListeners"),eS=new ke("appBootstrapListener");class vF{constructor(e,t){this.name=e,this.token=t}}function EF(n,e,t=[]){const r=`Platform: ${e}`,i=new ke(r);return(s=[])=>{let o=tS();if(!o||o.injector.get(_F,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Q8(n){if(Ah&&!Ah.get(_F,!1))throw new _e(400,!1);(function yF(){!function jy(n){Of=n}(()=>{throw new _e(600,!1)})})(),Ah=n;const e=n.get(IF);(function bF(n){n.get(ow,null)?.forEach(t=>t())})(n)}(function wF(n=[],e){return J.create({name:e,providers:[{provide:Tv,useValue:"platform"},{provide:JD,useValue:new Set([()=>Ah=null])},...n]})}(a,r))}return function Z8(n){const e=tS();if(!e)throw new _e(401,!1);return e}()}}function tS(){return Ah?.get(IF)??null}let IF=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function X8(n="zone.js",e){return"noop"===n?new PW:"zone.js"===n?new nt(e):n}(r?.ngZone,function CF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function lq(n,e,t){return new xD(n,e,t)}(t.moduleType,this.injector,function xF(n){return[{provide:nt,useFactory:n},{provide:Tp,multi:!0,useFactory:()=>{const e=Ge(e6,{optional:!0});return()=>e.initialize()}},{provide:SF,useFactory:J8},{provide:G1,useFactory:q1}]}(()=>i)),o=s.injector.get(He,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{Bw(this._modules,s),a.unsubscribe()})}),function AF(n,e,t){try{const r=t();return Xv(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(qD);return a.runInitializers(),a.donePromise.then(()=>(function qO(n){Us(n,"Expected localeId to be defined"),"string"==typeof n&&(GO=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Pl,y_)||y_),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=TF({},r);return function q8(n,e,t){const r=new RD(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Th);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new _e(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(JD,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(he(J))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function TF(n,e){return Array.isArray(e)?e.reduce(TF,n):{...n,...e}}let Th=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ge(SF),this.zoneIsStable=Ge(G1),this.componentTypes=[],this.components=[],this.isStable=Ge(dF).hasPendingTasks.pipe(Ke(t=>t?ie(!1):this.zoneIsStable),Bn(),le()),this._injector=Ge(fo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof n_;if(!this._injector.get(qD).done)throw!i&&function ta(n){const e=on(n)||ir(n)||Nn(n);return null!==e&&e.standalone}(t),new _e(405,!1);let o;o=i?t:this._injector.get(Rp).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function K8(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Np),h=o.create(J.NULL,[],r||o.selector,a),m=h.location.nativeElement,v=h.injector.get(gF,null);return v?.registerApplication(m),h.onDestroy(()=>{this.detachView(h.hostView),Bw(this.components,h),v?.unregisterApplication(m)}),this._loadComponent(h),h}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Bw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(eS,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Bw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const SF=new ke("",{providedIn:"root",factory:()=>Ge(He).handleError.bind(void 0)});function J8(){const n=Ge(nt),e=Ge(He);return t=>n.runOutsideAngular(()=>e.handleError(t))}let e6=(()=>{class n{constructor(){this.zone=Ge(nt),this.applicationRef=Ge(Th)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();let w_=(()=>{class n{static{this.__NG_ELEMENT_ID__=n6}}return n})();function n6(n){return function r6(n,e,t){if(ra(n)&&!t){const r=Ir(n.index,e);return new Gv(r,r)}return 47&n.type?new Gv(e[sr],e):null}(di(),xe(),16==(16&n))}class NF{constructor(){}supports(e){return Ew(e)}create(e){return new c6(e)}}const a6=(n,e)=>e;class c6{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||a6}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<LF(r,i,s)?t:r,a=LF(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const h=a-i,m=c-i;if(h!=m){for(let w=0;w<h;w++){const A=w<s.length?s[w]:s[w]=0,S=A+w;m<=S&&S<h&&(s[w]=A+1)}s[o.previousIndex]=m-h}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ew(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function H3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new l6(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new FF),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class l6{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class u6{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class FF{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new u6,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LF(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class VF{constructor(){}supports(e){return e instanceof Map||lD(e)}create(){return new d6}}class d6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||lD(e)))throw new _e(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}const r=new h6(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class h6{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function BF(){return new Hw([new NF])}let Hw=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:BF})}constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||BF()),deps:[[n,new sh,new ku]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new _e(901,!1)}}return n})();function UF(){return new ub([new VF])}let ub=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:UF})}constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||UF()),deps:[[n,new sh,new ku]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new _e(901,!1)}}return n})();const m6=EF(null,"core",[]);let g6=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(he(Th))}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})(),aS=null;function Dh(){return aS}class R6{}const In=new ke("DocumentToken");let cS=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Ge(M6)},providedIn:"platform"})}}return n})();const P6=new ke("Location Initialized");let M6=(()=>{class n extends cS{constructor(){super(),this._doc=Ge(In),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dh().getBaseHref(this._doc)}onPopState(t){const r=Dh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Dh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return new n},providedIn:"platform"})}}return n})();function lS(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function QF(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Uu(n){return n&&"?"!==n[0]?"?"+n:n}let Lp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Ge(ZF)},providedIn:"root"})}}return n})();const YF=new ke("appBaseHref");let ZF=(()=>{class n extends Lp{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ge(In).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lS(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Uu(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Uu(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Uu(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(he(cS),he(YF,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),k6=(()=>{class n extends Lp{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=lS(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Uu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Uu(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(he(cS),he(YF,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),$w=(()=>{class n{constructor(t){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function F6(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(QF(XF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Uu(r))}normalize(t){return n.stripTrailingSlash(function N6(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,XF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uu(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Uu(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Uu}static{this.joinWithSlash=lS}static{this.stripTrailingSlash=QF}static{this.\u0275fac=function(r){return new(r||n)(he(Lp))}}static{this.\u0275prov=Ue({token:n,factory:function(){return function O6(){return new $w(he(Lp))}()},providedIn:"root"})}}return n})();function XF(n){return n.replace(/\/index.html$/,"")}const vS=/\s+/,aL=[];let cL=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this.initialClasses=aL,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(vS):aL}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(vS):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){const i=this.stateMap.get(t);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(vS).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(be(Hw),be(ub),be(Vr),be(Gc))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();class w9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let uL=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new w9(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),dL(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{dL(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(be(hc),be(Qc),be(Hw))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function dL(n,e){n.context.$implicit=e.item}let fb=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new I9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(be(hc),be(Qc))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})();class I9{constructor(){this.$implicit=null,this.ngIf=null}}function hL(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${gt(e)}'.`)}let pL=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split("."),o=-1===i.indexOf("-")?void 0:ac.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(be(Vr),be(ub),be(Gc))}}static{this.\u0275dir=Ye({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();class D9{createSubscription(e,t){return tg(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){tg(()=>e.unsubscribe())}}class S9{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const x9=new S9,R9=new D9;let mL=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Xv(t))return x9;if(Zk(t))return R9;throw function Zc(n,e){return new _e(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(be(w_,16))}}static{this.\u0275pipe=li({name:"async",type:n,pure:!1,standalone:!0})}}return n})(),tI=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})();const _L="browser";function nI(n){return"server"===n}let X9=(()=>{class n{static{this.\u0275prov=Ue({token:n,providedIn:"root",factory:()=>new J9(he(In),window)})}}return n})();class J9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function eK(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class CK extends R6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class TS extends CK{static makeCurrent(){!function x6(n){aS||(aS=n)}(new TS)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function AK(){return mb=mb||document.querySelector("base"),mb?mb.getAttribute("href"):null}();return null==t?null:function TK(n){sI=sI||document.createElement("a"),sI.setAttribute("href",n);const e=sI.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){mb=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function b9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let sI,mb=null,SK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const DS=new ke("EventManagerPlugins");let wL=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new _e(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(he(DS),he(nt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class IL{constructor(e){this._doc=e}}const SS="ng-app-id";let CL=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=nI(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${SS}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(SS),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(SS,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(Kg),he(Rv,8),he(uc))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const xS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},RS=/%COMP%/g,MK=new ke("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function TL(n,e){return e.map(t=>t.replace(RS,n))}let PS=(()=>{class n{constructor(t,r,i,s,o,a,c,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=nI(a),this.defaultRenderer=new MS(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ft.ShadowDom&&(r={...r,encapsulation:Ft.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof SL?i.applyToHost(t):i instanceof kS&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,v=this.platformIsServer;switch(r.encapsulation){case Ft.Emulated:s=new SL(c,h,r,this.appId,m,o,a,v);break;case Ft.ShadowDom:return new FK(c,h,t,r,o,a,this.nonce,v);default:s=new kS(c,h,r,m,o,a,v)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(he(wL),he(CL),he(Kg),he(MK),he(In),he(uc),he(nt),he(Rv))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class MS{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DL(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DL(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new _e(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=xS[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xS[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ac.DashCase|ac.Important)?e.style.setProperty(t,r,i&ac.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ac.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Dh().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function DL(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class FK extends MS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=TL(i.id,i.styles);for(const m of h){const v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class kS extends MS{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?TL(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class SL extends kS{constructor(e,t,r,i,s,o,a,c){const h=i+"-"+r.id;super(e,t,r,s,o,a,c,h),this.contentAttr=function kK(n){return"_ngcontent-%COMP%".replace(RS,n)}(h),this.hostAttr=function OK(n){return"_nghost-%COMP%".replace(RS,n)}(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let LK=(()=>{class n extends IL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const xL=["alt","control","meta","shift"],VK={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},BK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let UK=(()=>{class n extends IL{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dh().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),xL.forEach(h=>{const m=r.indexOf(h);m>-1&&(r.splice(m,1),o+=h+".")}),o+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=VK[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),xL.forEach(o=>{o!==i&&(0,BK[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();const $K=EF(m6,"browser",[{provide:uc,useValue:_L},{provide:ow,useValue:function jK(){TS.makeCurrent()},multi:!0},{provide:In,useFactory:function zK(){return function sT(n){mv=n}(document),document},deps:[]}]),WK=new ke(""),ML=[{provide:Vw,useClass:class DK{addToWindow(e){Mn.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new _e(5103,!1);return s},Mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mn.getAllAngularRootElements=()=>e.getAllRootElements(),Mn.frameworkStabilizers||(Mn.frameworkStabilizers=[]),Mn.frameworkStabilizers.push(r=>{const i=Mn.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(c){o=o||c,s--,0==s&&r(o)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Dh().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:gF,useClass:YD,deps:[nt,ZD,Vw]},{provide:YD,useClass:YD,deps:[nt,ZD,Vw]}],kL=[{provide:Tv,useValue:"root"},{provide:He,useFactory:function HK(){return new He},deps:[]},{provide:DS,useClass:LK,multi:!0,deps:[In,nt,uc]},{provide:DS,useClass:UK,multi:!0,deps:[In]},PS,CL,wL,{provide:Pp,useExisting:PS},{provide:class tK{},useClass:SK,deps:[]},[]];let OL=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Kg,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(he(WK,12))}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({providers:[...kL,...ML],imports:[tI,g6]})}}return n})(),NL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(he(In))}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new r:function qK(){return new NL(he(In))}(),i},providedIn:"root"})}}return n})();typeof window<"u"&&window;let NS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new(r||n):he(VL),i},providedIn:"root"})}}return n})(),VL=(()=>{class n extends NS{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case jo.NONE:return r;case jo.HTML:return cc(r,"HTML")?uo(r):Y0(this._doc,String(r)).toString();case jo.STYLE:return cc(r,"Style")?uo(r):r;case jo.SCRIPT:if(cc(r,"Script"))return uo(r);throw new _e(5200,!1);case jo.URL:return cc(r,"URL")?uo(r):Hg(String(r));case jo.RESOURCE_URL:if(cc(r,"ResourceURL"))return uo(r);throw new _e(5201,!1);default:throw new _e(5202,!1)}}bypassSecurityTrustHtml(t){return function Cp(n){return new W0(n)}(t)}bypassSecurityTrustStyle(t){return function _v(n){return new oT(n)}(t)}bypassSecurityTrustScript(t){return function uT(n){return new aT(n)}(t)}bypassSecurityTrustUrl(t){return function q0(n){return new cT(n)}(t)}bypassSecurityTrustResourceUrl(t){return function jg(n){return new lT(n)}(t)}static{this.\u0275fac=function(r){return new(r||n)(he(In))}}static{this.\u0275prov=Ue({token:n,factory:function(r){let i=null;return i=r?new r:function ZK(n){return new VL(n.get(In))}(he(J)),i},providedIn:"root"})}}return n})();function mc(n){return null!=n&&"false"!=`${n}`}function gb(n){return Array.isArray(n)?n:[n]}function Ui(n){return null==n?"":"string"==typeof n?n:`${n}px`}function rs(n){return n instanceof Vr?n.nativeElement:n}const{isArray:JK}=Array;function FS(n){return Me(e=>function e7(n,e){return JK(e)?n(...e):n(e)}(n,e))}const t7=["addListener","removeListener"],n7=["addEventListener","removeEventListener"],r7=["on","off"];function LS(n,e,t,r){if(k(t)&&(r=t,t=void 0),r)return LS(n,e,t).pipe(FS(r));const[i,s]=function o7(n){return k(n.addEventListener)&&k(n.removeEventListener)}(n)?n7.map(o=>a=>n[o](e,a,t)):function i7(n){return k(n.addListener)&&k(n.removeListener)}(n)?t7.map(jL(n,e)):function s7(n){return k(n.on)&&k(n.off)}(n)?r7.map(jL(n,e)):[];if(!i&&_n(n))return nr(o=>LS(o,e,t))(tr(n));if(!i)throw new TypeError("Invalid event target");return new It(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return i(a),()=>s(a)})}function jL(n,e){return t=>r=>n[t](e,r)}class a7 extends Bt{constructor(e,t){super()}schedule(e,t=0){return this}}const oI={setInterval(n,e,...t){const{delegate:r}=oI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=oI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class aI extends a7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return oI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&oI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ve(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const _b={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=_b;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new Bt(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=_b;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=_b;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},VS={now:()=>(VS.delegate||Date).now(),delegate:void 0};class yb{constructor(e,t=yb.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}yb.now=VS.now;class cI extends yb{constructor(e,t=yb.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const HL=new class l7 extends cI{flush(e){let t;this._active=!0,e?t=e.id:(t=this._scheduled,this._scheduled=void 0);const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class c7 extends aI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=_b.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&t===e._scheduled&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(_b.cancelAnimationFrame(t),e._scheduled=void 0)}});let BS,u7=1;const lI={};function zL(n){return n in lI&&(delete lI[n],!0)}const d7={setImmediate(n){const e=u7++;return lI[e]=!0,BS||(BS=Promise.resolve()),BS.then(()=>zL(e)&&n()),e},clearImmediate(n){zL(n)}},{setImmediate:h7,clearImmediate:f7}=d7,uI={setImmediate(...n){const{delegate:e}=uI;return(e?.setImmediate||h7)(...n)},clearImmediate(n){const{delegate:e}=uI;return(e?.clearImmediate||f7)(n)},delegate:void 0},A_=(new class m7 extends cI{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class p7 extends aI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=uI.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var i;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:s}=e;null!=t&&(null===(i=s[s.length-1])||void 0===i?void 0:i.id)!==t&&(uI.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}}),new cI(aI)),_7=A_;function $L(n=0,e,t=_7){let r=-1;return null!=e&&(Qo(e)?t=e:r=e),new It(i=>{let s=function v7(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function WL(n,e=A_){return function y7(n){return te((e,t)=>{let r=!1,i=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;const h=i;i=null,t.next(h)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(pe(t,h=>{r=!0,i=h,s||tr(n(h)).subscribe(s=pe(t,a,c))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>$L(n,e))}function yo(n,e){return te((t,r)=>{let i=0;t.subscribe(pe(r,s=>n.call(e,s,i++)&&r.next(s)))})}let US;try{US=typeof Intl<"u"&&Intl.v8BreakIterator}catch{US=!1}let vb,Bp,jS,Ta=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Z9(n){return n===_L}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!US)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(r){return new(r||n)(he(uc))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Vp(n){return function b7(){if(null==vb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vb=!0}))}finally{vb=vb||!1}return vb}()?n:!!n.capture}function E7(){if(null==Bp){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Bp=!1,Bp;if("scrollBehavior"in document.documentElement.style)Bp=!0;else{const n=Element.prototype.scrollTo;Bp=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Bp}function HS(n){if(function w7(){if(null==jS){const n=typeof document<"u"?document.head:null;jS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jS}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gc(n){return n.composedPath?n.composedPath()[0]:n.target}function zS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const I7=new ke("cdk-dir-doc",{providedIn:"root",factory:function C7(){return Ge(In)}}),A7=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $S=(()=>{class n{constructor(t){this.value="ltr",this.change=new Xe,t&&(this.value=function T7(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?A7.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(r){return new(r||n)(he(I7,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),bb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})(),qL=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Y,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new It(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(WL(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ie()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(yo(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=rs(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>LS(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(r){return new(r||n)(he(nt),he(Ta),he(In,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),WS=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Y,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(WL(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(r){return new(r||n)(he(Ta),he(nt),he(In,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})(),KL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[bb,GS,bb,GS]})}}return n})();function is(n,e,t){const r=k(n)||e||t?{next:n,error:e,complete:t}:n;return r?te((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(pe(s,c=>{var h;null===(h=r.next)||void 0===h||h.call(r,c),s.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var h;a=!1,null===(h=r.error)||void 0===h||h.call(r,c),s.error(c)},()=>{var c,h;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(h=r.finalize)||void 0===h||h.call(r)}))}):Gn}function Xc(n){return n<=0?()=>dr:te((e,t)=>{let r=0;e.subscribe(pe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function YL(n){return yo((e,t)=>n<=t)}function xh(n){return te((e,t)=>{tr(n).subscribe(pe(t,()=>t.complete(),tt)),!t.closed&&e.subscribe(t)})}const{isArray:K7}=Array,{getPrototypeOf:Q7,prototype:Y7,keys:Z7}=Object;function ZL(n){if(1===n.length){const e=n[0];if(K7(e))return{args:e,keys:null};if(function X7(n){return n&&"object"==typeof n&&Q7(n)===Y7}(e)){const t=Z7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function XL(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function hI(...n){const e=Fa(n),t=Yo(n),{args:r,keys:i}=ZL(n);if(0===r.length)return V([],e);const s=new It(function J7(n,e,t=Gn){return r=>{JL(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let c=0;c<i;c++)JL(e,()=>{const h=V(n[c],e);let m=!1;h.subscribe(pe(r,v=>{s[c]=v,m||(m=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>XL(i,o):Gn));return t?s.pipe(FS(t)):s}function JL(n,e,t){n?Yn(t,n,e):e()}function fI(...n){return function eQ(){return Vs(1)}()(V(n,Fa(n)))}function Rh(...n){const e=Fa(n);return te((t,r)=>{(e?fI(n,t,e):fI(n,t)).subscribe(r)})}const eV=new Set;let Up,tQ=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rQ}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function nQ(n,e){if(!eV.has(n))try{Up||(Up=document.createElement("style"),e&&(Up.nonce=e),Up.setAttribute("type","text/css"),document.head.appendChild(Up)),Up.sheet&&(Up.sheet.insertRule(`@media ${n} {body{ }}`,0),eV.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static{this.\u0275fac=function(r){return new(r||n)(he(Ta),he(Rv,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function rQ(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let iQ=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Y}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return tV(gb(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=hI(tV(gb(t)).map(o=>this._registerQuery(o).observable));return s=fI(s.pipe(Xc(1)),s.pipe(YL(1),function QL(n,e=A_){return te((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const h=s;s=null,r.next(h)}};function c(){const h=o+n,m=e.now();if(m<h)return i=this.schedule(void 0,h-m),void r.add(i);a()}t.subscribe(pe(r,h=>{s=h,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))),s.pipe(Me(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:h})=>{a.matches=a.matches||c,a.breakpoints[h]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new It(o=>{const a=c=>this._zone.run(()=>o.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Rh(r),Me(({matches:o})=>({query:t,matches:o})),xh(this._destroySubject)),mql:r};return this._queries.set(t,s),s}static{this.\u0275fac=function(r){return new(r||n)(he(tQ),he(nt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tV(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function qS(n){return 0===n.buttons||0===n.detail}function KS(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const pQ=new ke("cdk-input-modality-detector-options"),mQ={ignoreKeys:[18,17,224,91,16]},D_=Vp({passive:!0,capture:!0});let gQ=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new G(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=gc(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(qS(o)?"keyboard":"mouse"),this._mostRecentTarget=gc(o))},this._onTouchstart=o=>{KS(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gc(o))},this._options={...mQ,...s},this.modalityDetected=this._modality.pipe(YL(1)),this.modalityChanged=this.modalityDetected.pipe(Bn()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,D_),i.addEventListener("mousedown",this._onMousedown,D_),i.addEventListener("touchstart",this._onTouchstart,D_)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,D_),document.removeEventListener("mousedown",this._onMousedown,D_),document.removeEventListener("touchstart",this._onTouchstart,D_))}static{this.\u0275fac=function(r){return new(r||n)(he(Ta),he(nt),he(In),he(pQ,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const yQ=new ke("cdk-focus-monitor-default-options"),pI=Vp({passive:!0,capture:!0});let vQ=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Y,this._rootNodeFocusAndBlurListener=a=>{for(let h=gc(a);h;h=h.parentElement)"focus"===a.type?this._onFocus(a,h):this._onBlur(a,h)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=rs(t);if(!this._platform.isBrowser||1!==i.nodeType)return ie();const s=HS(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new Y,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=rs(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=rs(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=gc(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,pI),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,pI)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xh(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pI),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pI),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}static{this.\u0275fac=function(r){return new(r||n)(he(nt),he(Ta),he(gQ),he(In,8),he(yQ,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const oV="cdk-high-contrast-black-on-white",aV="cdk-high-contrast-white-on-black",QS="cdk-high-contrast-active";let bQ=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Ge(iQ).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(QS,oV,aV),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(QS,oV):2===r&&t.add(QS,aV)}}static{this.\u0275fac=function(r){return new(r||n)(he(Ta),he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YS(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function S_(n,e){const t=e?"":"none";YS(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function cV(n,e,t){YS(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function mI(n,e){return e&&"none"!=e?n+" "+e:n}function lV(n){const e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function ZS(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}function XS(n){const e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function JS(n,e,t){const{top:r,bottom:i,left:s,right:o}=n;return t>=r&&t<=i&&e>=s&&e<=o}function Eb(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function uV(n,e,t,r){const{top:i,right:s,bottom:o,left:a,width:c,height:h}=n,m=c*e,v=h*e;return r>i-v&&r<o+v&&t>a-m&&t<s+m}class dV{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:XS(t)})})}handleScroll(e){const t=gc(e),r=this.positions.get(t);if(!r)return null;const i=r.scrollPosition;let s,o;if(t===this._document){const h=this.getViewportScrollPosition();s=h.top,o=h.left}else s=t.scrollTop,o=t.scrollLeft;const a=i.top-s,c=i.left-o;return this.positions.forEach((h,m)=>{h.clientRect&&t!==m&&t.contains(m)&&Eb(h.clientRect,a,c)}),i.top=s,i.left=o,{top:a,left:c}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function hV(n){const e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return"canvas"===r?mV(n,e):("input"===r||"select"===r||"textarea"===r)&&pV(n,e),fV("canvas",n,e,mV),fV("input, textarea, select",n,e,pV),e}function fV(n,e,t,r){const i=e.querySelectorAll(n);if(i.length){const s=t.querySelectorAll(n);for(let o=0;o<i.length;o++)r(i[o],s[o])}}let IQ=0;function pV(n,e){"file"!==e.type&&(e.value=n.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${IQ++}`)}function mV(n,e){const t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}const gV=Vp({passive:!0}),gI=Vp({passive:!1}),ex=new Set(["position"]);class AQ{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=mc(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(r=>S_(r,t)))}constructor(e,t,r,i,s,o){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Y,this._pointerMoveSubscription=Bt.EMPTY,this._pointerUpSubscription=Bt.EMPTY,this._scrollSubscription=Bt.EMPTY,this._resizeSubscription=Bt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Y,this.started=new Y,this.released=new Y,this.ended=new Y,this.entered=new Y,this.exited=new Y,this.dropped=new Y,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&this._initializeDragSequence(c,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const c=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(c.x-this._pickupPositionOnPage.x)+Math.abs(c.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const A=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),S=this._dropContainer;if(!A)return void this._endDragSequence(a);(!S||!S.isDragging()&&!S.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const h=this._getConstrainedPointerPosition(c);if(this._hasMoved=!0,this._lastKnownPointerPosition=c,this._updatePointerDirectionDelta(h),this._dropContainer)this._updateActiveDropContainer(h,c);else{const m=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,v=this._activeTransform;v.x=h.x-m.x+this._passiveTransform.x,v.y=h.y-m.y+this._passiveTransform.y,this._applyRootElementTransform(v.x,v.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:h,event:a,distance:this._getDragDistance(h),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const c=this._getTargetHandle(a);c&&!this._disabledHandles.has(c)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new dV(r),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>rs(r)),this._handles.forEach(r=>S_(r,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=rs(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,gI),t.addEventListener("touchstart",this._pointerDown,gV),t.addEventListener("dragstart",this._nativeDragStart,gI)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?rs(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),S_(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),S_(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){wb(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const r=this._rootElement,i=r.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();i.insertBefore(o,r),this._initialTransform=r.style.transform||"",this._preview=this._createPreviewElement(),cV(r,!1,ex),this._document.body.appendChild(i.replaceChild(s,r)),this._getPreviewInsertionPoint(i,a).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const r=this.isDragging(),i=wb(t),s=!i&&0!==t.button,o=this._rootElement,a=gc(t),c=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),h=i?KS(t):qS(t);if(a&&a.draggable&&"mousedown"===t.type&&t.preventDefault(),r||s||c||h)return;if(this._handles.length){const w=o.style;this._rootElementTapHighlight=w.webkitTapHighlightColor||"",w.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(w=>this._updateOnScroll(w)),this._boundaryElement&&(this._boundaryRect=XS(this._boundaryElement));const m=this._previewTemplate;this._pickupPositionInElement=m&&m.template&&!m.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const v=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:v.x,y:v.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){cV(this._rootElement,!0,ex),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),s=this._getDragDistance(i),o=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:s,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,o,s,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,r=e?e.template:null;let i;if(r&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(r,e.context);o.detectChanges(),i=yV(o,this._document),this._previewRef=o,e.matchSize?vV(i,s):i.style.transform=_I(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=hV(this._rootElement),vV(i,this._initialClientRect),this._initialTransform&&(i.style.transform=this._initialTransform);return YS(i.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},ex),S_(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>i.classList.add(s)):i.classList.add(t)),i}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function wQ(n){const e=getComputedStyle(n),t=ZS(e,"transition-property"),r=t.find(a=>"transform"===a||"all"===a);if(!r)return 0;const i=t.indexOf(r),s=ZS(e,"transition-duration"),o=ZS(e,"transition-delay");return lV(s[i])+lV(o[i])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{const i=o=>{(!o||gc(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",i),r(),clearTimeout(s))},s=setTimeout(i,1.5*t);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=yV(this._placeholderRef,this._document)):r=hV(this._rootElement),r.style.pointerEvents="none",r.classList.add("cdk-drag-placeholder"),r}_getPointerPositionInElement(e,t,r){const i=t===this._rootElement?null:t,s=i?i.getBoundingClientRect():e,o=wb(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-a.left),y:s.top-e.top+(o.pageY-s.top-a.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),r=wb(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,s=r.pageY-t.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=s,a.matrixTransform(o.inverse())}}return{x:i,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===t)&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:c,height:h}=this._getPreviewRect(),m=a.top+o,v=a.bottom-(h-o);r=_V(r,a.left+s,a.right-(c-s)),i=_V(i,m,v)}return{x:r,y:i}}_updatePointerDirectionDelta(e){const{x:t,y:r}=e,i=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(t-s.x),a=Math.abs(r-s.y);return o>this._config.pointerDirectionChangeThreshold&&(i.x=t>s.x?1:-1,s.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>s.y?1:-1,s.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,S_(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,gI),e.removeEventListener("touchstart",this._pointerDown,gV),e.removeEventListener("dragstart",this._nativeDragStart,gI)}_applyRootElementTransform(e,t){const r=_I(e,t),i=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=i.transform&&"none"!=i.transform?i.transform:""),i.transform=mI(r,this._initialTransform)}_applyPreviewTransform(e,t){const r=this._previewTemplate?.template?void 0:this._initialTransform,i=_I(e,t);this._preview.style.transform=mI(i,r)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===r.width&&0===r.height)return;const s=i.left-r.left,o=r.right-i.right,a=i.top-r.top,c=r.bottom-i.bottom;i.width>r.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,i.height>r.height?(a>0&&(t+=a),c>0&&(t-=c)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:wb(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const r=gc(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Eb(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=HS(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const r=this._previewContainer||"global";if("parent"===r)return e;if("global"===r){const i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return rs(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function _I(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function _V(n,e,t){return Math.max(e,Math.min(t,n))}function wb(n){return"t"===n.type[0]}function yV(n,e){const t=n.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function vV(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=_I(e.left,e.top)}function Ib(n,e){return Math.max(0,Math.min(e,n))}class DQ{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,r,i){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,t,r,i);if(-1===o&&s.length>0)return null;const a="horizontal"===this.orientation,c=s.findIndex(N=>N.drag===e),h=s[o],v=h.clientRect,w=c>o?1:-1,A=this._getItemOffsetPx(s[c].clientRect,v,w),S=this._getSiblingOffsetPx(c,s,w),M=s.slice();return function TQ(n,e,t){const r=Ib(e,n.length-1),i=Ib(t,n.length-1);if(r===i)return;const s=n[r],o=i<r?-1:1;for(let a=r;a!==i;a+=o)n[a]=n[a+o];n[i]=s}(s,c,o),s.forEach((N,ne)=>{if(M[ne]===N)return;const W=N.drag===e,de=W?A:S,Ae=W?e.getPlaceholderElement():N.drag.getRootElement();N.offset+=de,a?(Ae.style.transform=mI(`translate3d(${Math.round(N.offset)}px, 0, 0)`,N.initialTransform),Eb(N.clientRect,0,de)):(Ae.style.transform=mI(`translate3d(0, ${Math.round(N.offset)}px, 0)`,N.initialTransform),Eb(N.clientRect,de,0))}),this._previousSwap.overlaps=JS(v,t,r),this._previousSwap.drag=h.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:c,currentIndex:o}}enter(e,t,r,i){const s=null==i||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,o=this._activeDraggables,a=o.indexOf(e),c=e.getPlaceholderElement();let h=o[s];if(h===e&&(h=o[s+1]),!h&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(h=o[0]),a>-1&&o.splice(a,1),h&&!this._dragDropRegistry.isDragging(h)){const m=h.getRootElement();m.parentElement.insertBefore(c,m),o.splice(s,0,e)}else rs(this._element).appendChild(c),o.push(e);c.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(r=>r.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Eb(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:XS(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getItemOffsetPx(e,t,r){const i="horizontal"===this.orientation;let s=i?t.left-e.left:t.top-e.top;return-1===r&&(s+=i?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,r){const i="horizontal"===this.orientation,s=t[e].clientRect,o=t[e+-1*r];let a=s[i?"width":"height"]*r;if(o){const c=i?"left":"top",h=i?"right":"bottom";-1===r?a-=o.clientRect[c]-s[h]:a+=s[c]-o.clientRect[h]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const r=this._itemPositions,i="horizontal"===this.orientation;if(r[0].drag!==this._activeDraggables[0]){const o=r[r.length-1].clientRect;return i?e>=o.right:t>=o.bottom}{const o=r[0].clientRect;return i?e<=o.left:t<=o.top}}_getItemIndexFromPointerPosition(e,t,r,i){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:a,clientRect:c})=>a!==e&&((!i||a!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?i.x:i.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(c.left)&&t<Math.floor(c.right):r>=Math.floor(c.top)&&r<Math.floor(c.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class SQ{constructor(e,t,r,i,s){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Y,this.entered=new Y,this.exited=new Y,this.dropped=new Y,this.sorted=new Y,this.receivingStarted=new Y,this.receivingStopped=new Y,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Bt.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Y,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function EQ(n=0,e=A_){return n<0&&(n=0),$L(n,n,e)}(0,HL).pipe(xh(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-a):2===this._verticalScrollDirection&&o.scrollBy(0,a),1===this._horizontalScrollDirection?o.scrollBy(-a,0):2===this._horizontalScrollDirection&&o.scrollBy(a,0)})},this.element=rs(e),this._document=r,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new dV(r),this._sortStrategy=new DQ(this.element,t),this._sortStrategy.withSortPredicate((o,a)=>this.sortPredicate(o,a,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,s,o,a,c={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:s,distance:o,dropPoint:a,event:c})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>-1===e.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=rs(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._clientRect||!uV(this._clientRect,.05,t,r))return;const s=this._sortStrategy.sort(e,t,r,i);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=0,s=0;if(this._parentPositions.positions.forEach((o,a)=>{a===this._document||!o.clientRect||r||uV(o.clientRect,.05,e,t)&&([i,s]=function xQ(n,e,t,r){const i=wV(e,r),s=IV(e,t);let o=0,a=0;if(i){const c=n.scrollTop;1===i?c>0&&(o=1):n.scrollHeight-c>n.clientHeight&&(o=2)}if(s){const c=n.scrollLeft;1===s?c>0&&(a=1):n.scrollWidth-c>n.clientWidth&&(a=2)}return[o,a]}(a,o.clientRect,e,t),(i||s)&&(r=a))}),!i&&!s){const{width:o,height:a}=this._viewportRuler.getViewportSize(),c={width:o,height:a,top:0,right:o,bottom:a,left:0};i=wV(c,t),s=IV(c,e),r=window}r&&(i!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=s,this._scrollNode=r,(i||s)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=rs(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=rs(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=rs(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&JS(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._clientRect||!JS(this._clientRect,t,r)||!this.enterPredicate(e,this))return!1;const i=this._getShadowRoot().elementFromPoint(t,r);if(!i)return!1;const s=rs(this.element);return i===s||s.contains(i)}_startReceiving(e,t){const r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=HS(rs(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function wV(n,e){const{top:t,bottom:r,height:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}function IV(n,e){const{left:t,right:r,width:i}=n,s=.05*i;return e>=t-s&&e<=t+s?1:e>=r-s&&e<=r+s?2:0}const yI=Vp({passive:!1,capture:!0});let RQ=(()=>{class n{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=i=>i.isDragging(),this.pointerMove=new Y,this.pointerUp=new Y,this.scroll=new Y,this._preventDefaultWhileDragging=i=>{this._activeDragInstances.length>0&&i.preventDefault()},this._persistentTouchmoveListener=i=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&i.preventDefault(),this.pointerMove.next(i))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,yI)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,yI)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const i=r.type.startsWith("touch");this._globalListeners.set(i?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:yI}),i||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:yI}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,o)=>{this._document.addEventListener(o,s.handler,s.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new It(i=>this._ngZone.runOutsideAngular(()=>{const o=a=>{this._activeDragInstances.length&&i.next(a)};return t.addEventListener("scroll",o,!0),()=>{t.removeEventListener("scroll",o,!0)}}))),U(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}static{this.\u0275fac=function(r){return new(r||n)(he(nt),he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const PQ={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let tx=(()=>{class n{constructor(t,r,i,s){this._document=t,this._ngZone=r,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,r=PQ){return new AQ(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new SQ(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(nt),he(WS),he(RQ))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const nx=new ke("CDK_DRAG_PARENT"),rx=new ke("CdkDragHandle"),CV=new ke("CdkDragPlaceholder"),AV=new ke("CdkDragPreview"),TV=new ke("CDK_DRAG_CONFIG"),DV=new ke("CdkDropList");let SV=(()=>{class n{static{this._dragInstances=[]}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=mc(t),this._dragRef.disabled=this._disabled}constructor(t,r,i,s,o,a,c,h,m,v,w){this.element=t,this.dropContainer=r,this._ngZone=s,this._viewContainerRef=o,this._dir=c,this._changeDetectorRef=m,this._selfHandle=v,this._parentDrag=w,this._destroyed=new Y,this.started=new Xe,this.released=new Xe,this.ended=new Xe,this.entered=new Xe,this.exited=new Xe,this.dropped=new Xe,this.moved=new It(A=>{const S=this._dragRef.moved.pipe(Me(M=>({source:this,pointerPosition:M.pointerPosition,event:M.event,delta:M.delta,distance:M.distance}))).subscribe(A);return()=>{S.unsubscribe()}}),this._dragRef=h.createDrag(t,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:a?.zIndex}),this._dragRef.data=this,n._dragInstances.push(this),a&&this._assignDefaults(a),r&&(this._dragRef._withDropContainer(r._dropListRef),r.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Xc(1),xh(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=n._dragInstances.indexOf(this);t>-1&&n._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let r=t;this.rootElementSelector&&(r=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):rs(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const r=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof i&&i?i:function UL(n,e=0){return function XK(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Xc(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let r=this.element.nativeElement.parentElement;for(;r;){if(r.classList.contains("cdk-drag")){t.withParent(n._dragInstances.find(i=>i.element.nativeElement===r)?._dragRef||null);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){const{lockAxis:r,dragStartDelay:i,constrainPosition:s,previewClass:o,boundaryElement:a,draggingDisabled:c,rootElementSelector:h,previewContainer:m}=t;this.disabled=c??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),s&&(this.constrainPosition=s),o&&(this.previewClass=o),a&&(this.boundaryElement=a),h&&(this.rootElementSelector=h),m&&(this.previewContainer=m)}_setupHandlesListener(){this._handles.changes.pipe(Rh(this._handles),is(t=>{const r=t.filter(i=>i._parentDrag===this).map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),Ke(t=>U(...t.map(r=>r._stateChanges.pipe(Rh(r))))),xh(this._destroyed)).subscribe(t=>{const r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static{this.\u0275fac=function(r){return new(r||n)(be(Vr),be(DV,12),be(In),be(nt),be(hc),be(TV,8),be($S,8),be(tx),be(w_),be(rx,10),be(nx,12))}}static{this.\u0275dir=Ye({type:n,selectors:[["","cdkDrag",""]],contentQueries:function(r,i,s){if(1&r&&(v_(s,AV,5),v_(s,CV,5),v_(s,rx,5)),2&r){let o;Ia(o=Ca())&&(i._previewTemplate=o.first),Ia(o=Ca())&&(i._placeholderTemplate=o.first),Ia(o=Ca())&&(i._handles=o)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){2&r&&wa("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[Qn([{provide:nx,useExisting:n}]),Xi]})}}return n})(),VQ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({providers:[tx],imports:[GS]})}}return n})();var BQ=Pt(376);const UQ=["myModal"];function jQ(n,e){if(1&n){const t=Eh();yt(0,"div",5)(1,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(1))}),Vi(2,"img",7),Ct(),yt(3,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(2))}),Vi(4,"img",8),Ct(),yt(5,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(3))}),Vi(6,"img",9),Ct(),yt(7,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(4))}),Vi(8,"img",10),Ct()()}if(2&n){const t=xn();Ht(2),hn("src",t.getPieceIcon("queen"),Al),Ht(2),hn("src",t.getPieceIcon("rook"),Al),Ht(2),hn("src",t.getPieceIcon("bishop"),Al),Ht(2),hn("src",t.getPieceIcon("knight"),Al)}}function HQ(n,e){if(1&n){const t=Eh();yt(0,"div",5)(1,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(1))}),Rn(2,"\u265b"),Ct(),yt(3,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(2))}),Rn(4,"\u265c"),Ct(),yt(5,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(3))}),Rn(6,"\u265d"),Ct(),yt(7,"div",6),Kn("click",function(){return Xr(t),Jr(xn().changeSelection(4))}),Rn(8,"\u265e"),Ct()()}}const zQ=["boardRef"],$Q=["modal"];function WQ(n,e){if(1&n){const t=Eh();yt(0,"div",11),Kn("cdkDragEnded",function(i){return Xr(t),Jr(xn().dragEnded(i))})("cdkDragMoved",function(i){return Xr(t),Jr(xn().dragMoved(i))})("cdkDragStarted",function(i){return Xr(t),Jr(xn().dragStart(i))}),Ct()}if(2&n){const t=e.$implicit,r=xn();Bu("transform","translate3d("+t.point.col*r.pieceSize+"px, "+t.point.row*r.pieceSize+"px,0px)")("max-height",r.pieceSize+"px")("font-size",.8*r.pieceSize+"px")("width",r.pieceSize+"px")("height",r.pieceSize+"px"),hn("cdkDragDisabled",r.engineFacade.dragDisabled)("innerHTML",r.engineFacade.pieceIconManager.isDefaultIcons()?t.constant.icon:"",Z0)("ngStyle",r.engineFacade.pieceIconManager.isDefaultIcons()?"":r.getCustomPieceIcons(t))}}function GQ(n,e){if(1&n&&(yt(0,"span",18),Rn(1),Ct()),2&n){const t=xn(2).index,r=xn();Bu("color",t%2==0?r.lightTileColor:r.darkTileColor)("font-size",r.pieceSize/4,"px"),Ht(1),Ih(" ",r.engineFacade.coords.yCoords[t]," ")}}function qQ(n,e){if(1&n&&(yt(0,"span",19),Rn(1),Ct()),2&n){const t=xn().index,r=xn(2);Bu("color",t%2==0?r.lightTileColor:r.darkTileColor)("font-size",r.pieceSize/4,"px"),Ht(1),Ih(" ",r.engineFacade.coords.xCoords[t]," ")}}function KQ(n,e){if(1&n&&(yt(0,"div",20),Vi(1,"div",21),Ct()),2&n){const t=xn(3);Ht(1),Bu("font-size",t.pieceSize+"px"),hn("ngClass","piece")}}function QQ(n,e){if(1&n&&(yt(0,"div",14),Br(1,GQ,2,5,"span",15),Br(2,qQ,2,5,"span",16),Br(3,KQ,2,3,"div",17),Ct()),2&n){const t=e.index,r=xn().index,i=xn();Bu("background-color",i.getTileBackgroundColor(r,t)),wa("current-selection",i.showActivePiece&&i.engineFacade.board.isXYInActiveMove(r,t))("king-check",i.engineFacade.board.isKingChecked(i.engineFacade.board.getPieceByPoint(r,t)))("point-circle",i.engineFacade.board.isXYInPointSelection(r,t))("possible-capture",i.showPossibleCaptures&&i.engineFacade.board.isXYInPossibleCaptures(r,t))("possible-point",i.engineFacade.board.isXYInPossibleMoves(r,t)&&i.showLegalMoves),Ht(1),hn("ngIf",i.showCoords&&7===t),Ht(1),hn("ngIf",i.showCoords&&7===r),Ht(1),hn("ngIf",i.engineFacade.board.getPieceByPoint(r,t))}}function YQ(n,e){if(1&n&&(yt(0,"div",12),Br(1,QQ,4,15,"div",13),Ct()),2&n){const t=e.$implicit;Ht(1),hn("ngForOf",t)}}function ZQ(n,e){if(1&n&&(Ja(),yt(0,"defs")(1,"marker",22),Vi(2,"path",23),Ct()()),2&n){const t=e.$implicit;Ht(1),hn("id",t+"Arrow"),Ht(1),Bu("fill",t)}}function XQ(n,e){if(1&n&&(Ja(),Vi(0,"line",24)),2&n){const t=e.$implicit;po("marker-end","url(#"+t.end.color+"Arrow)")("stroke",t.end.color)("x1",t.start.x)("x2",t.end.x)("y1",t.start.y)("y2",t.end.y)}}function JQ(n,e){if(1&n&&(Ja(),Vi(0,"circle",25)),2&n){const t=e.$implicit,r=xn();po("cx",t.drawPoint.x)("cy",t.drawPoint.y)("r",r.engineFacade.heightAndWidth/18)("stroke",t.drawPoint.color)}}const eY=function(){return["red","green","blue","orange"]};var F=function(n){return n[n.WHITE=0]="WHITE",n[n.BLACK=1]="BLACK",n}(F||{});class x_{constructor(e,t,r,i,s){this.checkPoints=[],this.color=t,this.constant=r,this.point=e,this.relValue=i,this.board=s}}class oe{constructor(e,t){this.row=e,this.col=t}isEqual(e){return e&&this.row===e.row&&this.col===e.col}hasCoordsEqual(e,t){return e&&t&&this.row===e&&this.col===t}isInRange(){return this.row>=0&&this.row<=7&&this.col>=0&&this.col<=7}clone(){return new oe(this.row,this.col)}}class ys extends x_{constructor(e,t,r,i){super(e,t,r,5,i),this.isMovedAlready=!1}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;for(let i=t+1;i<8&&this.board.isFieldEmpty(i,r);++i)e.push(new oe(i,r));for(let i=t-1;i>=0&&this.board.isFieldEmpty(i,r);--i)e.push(new oe(i,r));for(let i=r-1;i>=0&&this.board.isFieldEmpty(t,i);--i)e.push(new oe(t,i));for(let i=r+1;i<8&&this.board.isFieldEmpty(t,i);++i)e.push(new oe(t,i));return e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;for(let i=t+1;i<8;++i){if(this.board.isFieldTakenByEnemy(i,r,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(let i=t-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(i,r,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(let i=r-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(t,i,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(t,i));break}if(!this.board.isFieldEmpty(t,i))break}for(let i=r+1;i<8;++i){if(this.board.isFieldTakenByEnemy(t,i,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(t,i));break}if(!this.board.isFieldEmpty(t,i))break}return e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;for(let i=t+1;i<8;++i)if(this.board.isFieldEmpty(i,r))e.push(new oe(i,r));else if(!(this.board.getPieceByField instanceof zn)){e.push(new oe(i,r));break}for(let i=t-1;i>=0;--i)if(this.board.isFieldEmpty(i,r))e.push(new oe(i,r));else if(!(this.board.getPieceByField instanceof zn)){e.push(new oe(i,r));break}for(let i=r-1;i>=0;--i)if(this.board.isFieldEmpty(t,i))e.push(new oe(t,i));else if(!(this.board.getPieceByField instanceof zn)){e.push(new oe(t,i));break}for(let i=r+1;i<8;++i)if(this.board.isFieldEmpty(t,i))e.push(new oe(t,i));else if(!(this.board.getPieceByField instanceof zn)){e.push(new oe(t,i));break}return e}}class zn extends x_{constructor(e,t,r,i){super(e,t,r,0,i),this.castledAlready=!1,this.shortCastled=!1,this.longCastled=!1,this.isCastling=!1}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;if(this.board.isFieldEmpty(t,r-1)&&!this.board.isFieldUnderAttack(t,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t,r-1)),this.board.isFieldEmpty(t,r+1)&&!this.board.isFieldUnderAttack(t,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t,r+1)),this.board.isFieldEmpty(t+1,r)&&!this.board.isFieldUnderAttack(t+1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r)),this.board.isFieldEmpty(t-1,r)&&!this.board.isFieldUnderAttack(t-1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r)),this.board.isFieldEmpty(t-1,r-1)&&!this.board.isFieldUnderAttack(t-1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r-1)),this.board.isFieldEmpty(t-1,r+1)&&!this.board.isFieldUnderAttack(t-1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r+1)),this.board.isFieldEmpty(t+1,r-1)&&!this.board.isFieldUnderAttack(t+1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r-1)),this.board.isFieldEmpty(t+1,r+1)&&!this.board.isFieldUnderAttack(t+1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r+1)),!this.isMovedAlready){let i=!0;for(let o=r-1;o>0;--o)if(!this.board.isFieldEmpty(t,o)||this.board.isFieldUnderAttack(t,o,this.color===F.WHITE?F.BLACK:F.WHITE)){i=!1;break}if(i&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(t,0)){const o=this.board.getPieceByField(t,0);o instanceof ys&&(o.isMovedAlready||e.push(new oe(t,r-2)))}let s=!0;for(let o=r+1;o<7;++o)if(!this.board.isFieldEmpty(t,o)||this.board.isFieldUnderAttack(t,o,this.color===F.WHITE?F.BLACK:F.WHITE)){s=!1;break}if(s&&!this.board.isKingInCheck(this.color,this.board.pieces)&&this.board.getPieceByField(t,7)){const o=this.board.getPieceByField(t,7);o instanceof ys&&(o.isMovedAlready||e.push(new oe(t,r+2)))}}return e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;return this.board.isFieldTakenByEnemy(t,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t,r-1)),this.board.isFieldTakenByEnemy(t,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t,r+1)),this.board.isFieldTakenByEnemy(t+1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t+1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r)),this.board.isFieldTakenByEnemy(t-1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t-1,r,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r)),this.board.isFieldTakenByEnemy(t-1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t-1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r-1)),this.board.isFieldTakenByEnemy(t-1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t-1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r+1)),this.board.isFieldTakenByEnemy(t+1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t+1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r-1)),this.board.isFieldTakenByEnemy(t+1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&!this.board.isFieldUnderAttack(t+1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r+1)),e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;return e.push(new oe(t,r-1)),e.push(new oe(t,r+1)),e.push(new oe(t+1,r)),e.push(new oe(t-1,r)),e.push(new oe(t-1,r-1)),e.push(new oe(t-1,r+1)),e.push(new oe(t+1,r-1)),e.push(new oe(t+1,r+1)),e}}class _c extends x_{constructor(e,t,r,i){super(e,t,r,3,i)}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;for(let i=t-1,s=r-1;i>=0&&s>=0&&this.board.isFieldEmpty(i,s);--i,--s)e.push(new oe(i,s));for(let i=t-1,s=r+1;i>=0&&s<8&&this.board.isFieldEmpty(i,s);--i,++s)e.push(new oe(i,s));for(let i=t+1,s=r-1;i<8&&s>=0&&this.board.isFieldEmpty(i,s);++i,--s)e.push(new oe(i,s));for(let i=t+1,s=r+1;i<8&&s<8&&this.board.isFieldEmpty(i,s);++i,++s)e.push(new oe(i,s));return e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;for(let i=t-1,s=r-1;i>=0&&s>=0;--i,--s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t-1,s=r+1;i>=0&&s<8;--i,++s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t+1,s=r-1;i<8&&s>=0;++i,--s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t+1,s=r+1;i<8&&s<8;++i,++s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}return e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;for(let i=t-1,s=r-1;i>=0&&s>=0;--i,--s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t-1,s=r+1;i>=0&&s<8;--i,++s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t+1,s=r-1;i<8&&s>=0;++i,--s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t+1,s=r+1;i<8&&s<8;++i,++s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}return e}}class yc extends x_{constructor(e,t,r,i){super(e,t,r,3,i),this.isMovedAlready=!1}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;return this.board.isFieldEmpty(t-2,r-1)&&e.push(new oe(t-2,r-1)),this.board.isFieldEmpty(t-2,r+1)&&e.push(new oe(t-2,r+1)),this.board.isFieldEmpty(t-1,r-2)&&e.push(new oe(t-1,r-2)),this.board.isFieldEmpty(t-1,r+2)&&e.push(new oe(t-1,r+2)),this.board.isFieldEmpty(t+1,r-2)&&e.push(new oe(t+1,r-2)),this.board.isFieldEmpty(t+1,r+2)&&e.push(new oe(t+1,r+2)),this.board.isFieldEmpty(t+2,r-1)&&e.push(new oe(t+2,r-1)),this.board.isFieldEmpty(t+2,r+1)&&e.push(new oe(t+2,r+1)),e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;return this.board.isFieldTakenByEnemy(t-2,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-2,r-1)),this.board.isFieldTakenByEnemy(t-2,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-2,r+1)),this.board.isFieldTakenByEnemy(t-1,r-2,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r-2)),this.board.isFieldTakenByEnemy(t-1,r+2,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r+2)),this.board.isFieldTakenByEnemy(t+1,r-2,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r-2)),this.board.isFieldTakenByEnemy(t+1,r+2,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r+2)),this.board.isFieldTakenByEnemy(t+2,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+2,r-1)),this.board.isFieldTakenByEnemy(t+2,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+2,r+1)),e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;return e.push(new oe(t-2,r-1)),e.push(new oe(t-2,r+1)),e.push(new oe(t-1,r-2)),e.push(new oe(t-1,r+2)),e.push(new oe(t+1,r-2)),e.push(new oe(t+1,r+2)),e.push(new oe(t+2,r-1)),e.push(new oe(t+2,r+1)),e}}class vs extends x_{constructor(e,t,r,i){super(e,t,r,1,i),this.isMovedAlready=!1}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;return!this.board.reverted&&this.color===F.WHITE||this.board.reverted&&this.color===F.BLACK?this.board.isFieldEmpty(t-1,r)&&(e.push(new oe(t-1,r)),!this.isMovedAlready&&this.board.isFieldEmpty(t-2,r)&&e.push(new oe(t-2,r))):
/*!board.isFieldTakenByEnemy(row + 1, col, Color.WHITE) &&*/this.board.isFieldEmpty(t+1,r)&&(e.push(new oe(t+1,r)),!this.isMovedAlready&&this.board.isFieldEmpty(t+2,r)&&e.push(new oe(t+2,r))),e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;return!this.board.reverted&&this.color===F.WHITE||this.board.reverted&&this.color===F.BLACK?(this.board.isFieldTakenByEnemy(t-1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r-1)),this.board.isFieldTakenByEnemy(t-1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t-1,r+1))):(this.board.isFieldTakenByEnemy(t+1,r-1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r-1)),this.board.isFieldTakenByEnemy(t+1,r+1,this.color===F.WHITE?F.BLACK:F.WHITE)&&e.push(new oe(t+1,r+1))),this.board.enPassantPoint&&this.board.enPassantPiece.color===(this.color===F.WHITE?F.BLACK:F.WHITE)&&t===this.board.enPassantPiece.point.row&&1===Math.abs(this.board.enPassantPiece.point.col-r)&&e.push(this.board.enPassantPoint),e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;return!this.board.reverted&&this.color===F.WHITE||this.board.reverted&&this.color===F.BLACK?(e.push(new oe(t-1,r-1)),e.push(new oe(t-1,r+1))):(e.push(new oe(t+1,r-1)),e.push(new oe(t+1,r+1))),e}}class Ml extends x_{constructor(e,t,r,i){super(e,t,r,9,i)}getPossibleMoves(){const e=[],t=this.point.row,r=this.point.col;for(let i=t-1,s=r-1;i>=0&&s>=0&&this.board.isFieldEmpty(i,s);--i,--s)e.push(new oe(i,s));for(let i=t-1,s=r+1;i>=0&&s<8&&this.board.isFieldEmpty(i,s);--i,++s)e.push(new oe(i,s));for(let i=t+1,s=r-1;i<8&&s>=0&&this.board.isFieldEmpty(i,s);++i,--s)e.push(new oe(i,s));for(let i=t+1,s=r+1;i<8&&s<8&&this.board.isFieldEmpty(i,s);++i,++s)e.push(new oe(i,s));for(let i=t+1;i<8&&this.board.isFieldEmpty(i,r);++i)e.push(new oe(i,r));for(let i=t-1;i>=0&&this.board.isFieldEmpty(i,r);--i)e.push(new oe(i,r));for(let i=r-1;i>=0&&this.board.isFieldEmpty(t,i);--i)e.push(new oe(t,i));for(let i=r+1;i<8&&this.board.isFieldEmpty(t,i);++i)e.push(new oe(t,i));return e}getPossibleCaptures(){const e=[],t=this.point.row,r=this.point.col;for(let i=t-1,s=r-1;i>=0&&s>=0;--i,--s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t-1,s=r+1;i>=0&&s<8;--i,++s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t+1,s=r-1;i<8&&s>=0;++i,--s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t+1,s=r+1;i<8&&s<8;++i,++s){if(this.board.isFieldTakenByEnemy(i,s,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,s));break}if(!this.board.isFieldEmpty(i,s))break}for(let i=t+1;i<8;++i){if(this.board.isFieldTakenByEnemy(i,r,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(let i=t-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(i,r,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(i,r));break}if(!this.board.isFieldEmpty(i,r))break}for(let i=r-1;i>=0;--i){if(this.board.isFieldTakenByEnemy(t,i,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(t,i));break}if(!this.board.isFieldEmpty(t,i))break}for(let i=r+1;i<8;++i){if(this.board.isFieldTakenByEnemy(t,i,this.color===F.WHITE?F.BLACK:F.WHITE)){e.push(new oe(t,i));break}if(!this.board.isFieldEmpty(t,i))break}return e}getCoveredFields(){const e=[],t=this.point.row,r=this.point.col;for(let i=t+1;i<8;++i){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof zn||e.push(new oe(i,r));break}e.push(new oe(i,r))}for(let i=t-1;i>=0;--i){if(!this.board.isFieldEmpty(i,r)){this.board.getPieceByField(i,r)instanceof zn||e.push(new oe(i,r));break}e.push(new oe(i,r))}for(let i=r-1;i>=0;--i){if(!this.board.isFieldEmpty(t,i)){this.board.getPieceByField(t,i)instanceof zn||e.push(new oe(t,i));break}e.push(new oe(t,i))}for(let i=r+1;i<8;++i){if(!this.board.isFieldEmpty(t,i)){this.board.getPieceByField(t,i)instanceof zn||e.push(new oe(t,i));break}e.push(new oe(t,i))}for(let i=t-1,s=r-1;i>=0&&s>=0;--i,--s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t-1,s=r+1;i>=0&&s<8;--i,++s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t+1,s=r-1;i<8&&s>=0;++i,--s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}for(let i=t+1,s=r+1;i<8&&s<8;++i,++s){if(!this.board.isFieldEmpty(i,s)){this.board.getPieceByField(i,s)instanceof zn||e.push(new oe(i,s));break}e.push(new oe(i,s))}return e}}const xt={WHITE_KING:{name:"King",icon:"&#x2654;"},WHITE_QUEEN:{name:"Queen",icon:"&#x2655;"},WHITE_KNIGHT:{name:"Knight",icon:"&#x2658"},WHITE_ROOK:{name:"Rook",icon:"&#x2656"},WHITE_PAWN:{name:"Pawn",icon:"&#x2659"},WHITE_BISHOP:{name:"Bishop",icon:"&#x2657"},BLACK_KING:{name:"King",icon:"&#x265A"},BLACK_QUEEN:{name:"Queen",icon:"&#x265B"},BLACK_KNIGHT:{name:"Knight",icon:"&#x265E"},BLACK_ROOK:{name:"Rook",icon:"&#x265C"},BLACK_PAWN:{name:"Pawn",icon:"&#x265F"},BLACK_BISHOP:{name:"Bishop",icon:"&#x265D"}};class xV{process(e,t){let r=e;if(!e)throw Error("Incorrect FEN provided");{t.board.reverted=!1,t.board.pieces=[];const i=r.split("/");for(let s=0;s<8;++s){let o=0;for(let a=0;a<i[s].split(" ")[0].length;++a){const c=i[s].charAt(a);if(c.match(/[0-9]/))o+=Number(c);else{switch(c){case"r":t.board.pieces.push(new ys(new oe(s,o),F.BLACK,xt.BLACK_ROOK,t.board));break;case"n":t.board.pieces.push(new yc(new oe(s,o),F.BLACK,xt.BLACK_KNIGHT,t.board));break;case"b":t.board.pieces.push(new _c(new oe(s,o),F.BLACK,xt.BLACK_BISHOP,t.board));break;case"q":t.board.pieces.push(new Ml(new oe(s,o),F.BLACK,xt.BLACK_QUEEN,t.board));break;case"k":t.board.pieces.push(new zn(new oe(s,o),F.BLACK,xt.BLACK_KING,t.board));break;case"p":{const h=new vs(new oe(s,o),F.BLACK,xt.BLACK_PAWN,t.board);(h.color===F.BLACK&&1!==h.point.row||h.color===F.WHITE&&6!==h.point.row)&&(h.isMovedAlready=!0),t.board.pieces.push(h);break}case"R":t.board.pieces.push(new ys(new oe(s,o),F.WHITE,xt.WHITE_ROOK,t.board));break;case"N":t.board.pieces.push(new yc(new oe(s,o),F.WHITE,xt.WHITE_KNIGHT,t.board));break;case"B":t.board.pieces.push(new _c(new oe(s,o),F.WHITE,xt.WHITE_BISHOP,t.board));break;case"Q":t.board.pieces.push(new Ml(new oe(s,o),F.WHITE,xt.WHITE_QUEEN,t.board));break;case"K":t.board.pieces.push(new zn(new oe(s,o),F.WHITE,xt.WHITE_KING,t.board));break;case"P":{const h=new vs(new oe(s,o),F.WHITE,xt.WHITE_PAWN,t.board);(h.color===F.BLACK&&1!==h.point.row||h.color===F.WHITE&&6!==h.point.row)&&(h.isMovedAlready=!0),t.board.pieces.push(h);break}}++o}}}this.setCurrentPlayer(t.board,r),this.setCastles(t.board,r),this.setEnPassant(r),this.setFullMoveCount(r),t.board.fen=r}}setCurrentPlayer(e,t){if(t){const r=t.split(" ");e.currentWhitePlayer="w"===r[1]}}setCastles(e,t){if(t){const i=t.split(" ")[2];i.includes("K")||this.setRookAlreadyMoved(e,F.WHITE,7),i.includes("Q")||this.setRookAlreadyMoved(e,F.WHITE,0),i.includes("k")||this.setRookAlreadyMoved(e,F.BLACK,7),i.includes("q")||this.setRookAlreadyMoved(e,F.BLACK,0)}}setFullMoveCount(e){}setEnPassant(e){e&&e.split(" ")}setRookAlreadyMoved(e,t,r){const i=e.pieces.find(s=>s.color===t&&s instanceof ys&&s.point.col===r);i&&(i.isMovedAlready=!0)}}class tY{constructor(e,t,r){this._xAxis=e,this._yAxis=t,this._reverted=r}get xAxis(){return this._xAxis}set xAxis(e){this._xAxis=e}get yAxis(){return this._yAxis}set yAxis(e){this._yAxis=e}get reverted(){return this._reverted}set reverted(e){this._reverted=e}}class ft{static willMoveCauseCheck(e,t,r,i,s,o){const a=o.getPieceByField(t,r),c=o.getPieceByField(i,s);a&&(a.point.row=i,a.point.col=s),c&&(o.pieces=o.pieces.filter(m=>m!==c));const h=o.isKingInCheck(e,o.pieces);return a&&(a.point.col=r,a.point.row=t),c&&o.pieces.push(c),h}static format(e,t,r){if(r){const s=104-t.col;return String.fromCharCode(104-e.col)+(e.row+1)+String.fromCharCode(s)+(t.row+1)}return String.fromCharCode(e.col+97)+(Math.abs(e.row-7)+1)+String.fromCharCode(t.col+97)+(Math.abs(t.row-7)+1)}static translateCoordsToIndex(e,t){let r,i;return t?(r=104-e.charCodeAt(0),i=+e.charAt(1)-1):(r=e.charCodeAt(0)-97,i=Math.abs(+e.charAt(1)-8)),new tY(r,i,t)}static findPieceByPossibleMovesContaining(e,t,r){let i=this.translateCoordsToIndex(e,t.reverted),s=new oe(i.yAxis,i.xAxis),o=[];for(let a of t.pieces.filter(c=>c.color===r))for(let c of a.getPossibleMoves())!ft.willMoveCauseCheck(a.color,a.point.row,a.point.col,i.yAxis,i.xAxis,t)&&c.isEqual(s)&&o.push(a);return o}static findPieceByPossibleCapturesContaining(e,t,r){let i=this.translateCoordsToIndex(e,t.reverted),s=new oe(i.yAxis,i.xAxis),o=[];for(let a of t.pieces.filter(c=>c.color===r))for(let c of a.getPossibleCaptures())!ft.willMoveCauseCheck(a.color,a.point.row,a.point.col,i.yAxis,i.xAxis,t)&&c.isEqual(s)&&o.push(a);return o}static formatSingle(e,t){return t?String.fromCharCode(104-e.col)+(e.row+1):String.fromCharCode(e.col+97)+(Math.abs(e.row-7)+1)}static getFirstLetterPiece(e){return e instanceof vs?"P":e instanceof yc?"N":e instanceof _c?"B":e instanceof ys?"R":e instanceof zn?"K":e instanceof Ml?"Q":""}static reverse(e,t){return e.reverted?t+1:Math.abs(t-7)+1}static formatCol(e,t){return String.fromCharCode(e.reverted?104-t:97+t)}}class RV{static loadDefaultPieces(e){e.pieces=[];for(let t=0;t<8;++t)e.pieces.push(new vs(new oe(1,t),F.BLACK,xt.BLACK_PAWN,e));e.pieces.push(new ys(new oe(0,0),F.BLACK,xt.BLACK_ROOK,e)),e.pieces.push(new yc(new oe(0,1),F.BLACK,xt.BLACK_KNIGHT,e)),e.pieces.push(new _c(new oe(0,2),F.BLACK,xt.BLACK_BISHOP,e)),e.pieces.push(new Ml(new oe(0,3),F.BLACK,xt.BLACK_QUEEN,e)),e.pieces.push(new zn(new oe(0,4),F.BLACK,xt.BLACK_KING,e)),e.pieces.push(new _c(new oe(0,5),F.BLACK,xt.BLACK_BISHOP,e)),e.pieces.push(new yc(new oe(0,6),F.BLACK,xt.BLACK_KNIGHT,e)),e.pieces.push(new ys(new oe(0,7),F.BLACK,xt.BLACK_ROOK,e));for(let t=0;t<8;++t)e.pieces.push(new vs(new oe(6,t),F.WHITE,xt.WHITE_PAWN,e));e.pieces.push(new ys(new oe(7,0),F.WHITE,xt.WHITE_ROOK,e)),e.pieces.push(new yc(new oe(7,1),F.WHITE,xt.WHITE_KNIGHT,e)),e.pieces.push(new _c(new oe(7,2),F.WHITE,xt.WHITE_BISHOP,e)),e.pieces.push(new Ml(new oe(7,3),F.WHITE,xt.WHITE_QUEEN,e)),e.pieces.push(new zn(new oe(7,4),F.WHITE,xt.WHITE_KING,e)),e.pieces.push(new _c(new oe(7,5),F.WHITE,xt.WHITE_BISHOP,e)),e.pieces.push(new yc(new oe(7,6),F.WHITE,xt.WHITE_KNIGHT,e)),e.pieces.push(new ys(new oe(7,7),F.WHITE,xt.WHITE_ROOK,e)),e.calculateFEN()}}class nY{process(e,t){if(e){t.board.reverted=!1,t.board.pieces=[],t.reset(),RV.loadDefaultPieces(t.board);let r=this.extractMoves(e),i=-1;for(let s of r){++i,s=s.replace(/[+#]/g,"");let o="";s.includes("=")&&(o=this.resolvePromotion(s.substring(s.length-1)),s=s.substring(0,s.length-2));let a=0===i||i%2==0?F.WHITE:F.BLACK;if(/^[a-z]\d$/g.test(s)){let c=ft.findPieceByPossibleMovesContaining(s,t.board,a).find(h=>h instanceof vs);c||(c=ft.findPieceByPossibleCapturesContaining(s,t.board,a).find(h=>h instanceof vs)),c&&t.move(ft.formatSingle(c.point,!1)+s+o)}else if(/^[A-Z][a-h]\d$/g.test(s)){let h=ft.findPieceByPossibleMovesContaining(s.substring(1),t.board,a).find(m=>this.resolvePieceByFirstChar(s.charAt(0),m));h&&t.move(ft.formatSingle(h.point,!1)+s.substring(1)+o)}else if("O-O"===s)t.move(a===F.WHITE?"e1g1":"e8g8");else if(/^[a-z]x[a-z]\d$/g.test(s)){let h,c=ft.findPieceByPossibleCapturesContaining(s.substring(s.indexOf("x")+1),t.board,a).filter(m=>m instanceof vs);h=c.length>1?this.resolveByCol(c,s.substring(0,1)):c[0],h&&t.move(ft.formatSingle(h.point,!1)+s.substring(s.indexOf("x")+1)+o)}else if(/^[A-Z]x[a-z]\d$/g.test(s)){let c=ft.findPieceByPossibleCapturesContaining(s.substring(s.indexOf("x")+1),t.board,a).find(h=>this.resolvePieceByFirstChar(s.substring(0,1),h));c&&t.move(ft.formatSingle(c.point,!1)+s.substring(s.indexOf("x")+1)+o)}else if("O-O-O"===s)t.move(a===F.WHITE?"e1c1":"e8c8");else if(/^[A-Z]\dx[a-z]\d$/g.test(s)){let c=ft.findPieceByPossibleCapturesContaining(s.substring(s.indexOf("x")+1),t.board,a).filter(m=>this.resolvePieceByFirstChar(s.charAt(0),m)),h=this.resolveByRow(c,s.substring(1,2));h&&t.move(ft.formatSingle(h.point,!1)+s.substring(s.indexOf("x")+1)+o)}else if(/^[A-Z][a-z][a-z]\d$/g.test(s)){let c=ft.findPieceByPossibleMovesContaining(s.substring(2,4),t.board,a).filter(m=>this.resolvePieceByFirstChar(s.charAt(0),m)),h=this.resolveByCol(c,s.substring(1,2));h&&t.move(ft.formatSingle(h.point,!1)+s.substring(2,4)+o)}else if(/^[A-Z][a-z]x[a-z]\d$/g.test(s)){let c=ft.findPieceByPossibleCapturesContaining(s.substring(s.indexOf("x")+1),t.board,a).filter(m=>this.resolvePieceByFirstChar(s.charAt(0),m)),h=this.resolveByCol(c,s.substring(1,2));h&&t.move(ft.formatSingle(h.point,!1)+s.substring(s.indexOf("x")+1)+o)}else this.processR1f2(s,t,a,o)}}}processR1f2(e,t,r,i){if(/^[A-Z]\d[a-z]\d$/g.test(e)){let s=ft.findPieceByPossibleMovesContaining(e.substring(2,4),t.board,r).filter(a=>this.resolvePieceByFirstChar(e.charAt(0),a)),o=this.resolveByRow(s,e.substring(1,2));o&&t.move(ft.formatSingle(o.point,!1)+e.substring(2,4)+i)}}extractMoves(e){return e.substring(e.lastIndexOf("]")+1).replace(/[0-9]+\./g,"").replace(/\s+/g," ").replace(/{[^}]*}/g,"").trim().split(" ").filter(t=>t)}movePiece(e,t,r){let i=ft.translateCoordsToIndex(r,t.reverted);e.point.col=i.xAxis,e.point.row=i.yAxis}hasUpperCase(e){return/[A-Z]/.test(e)}resolvePieceByFirstChar(e,t){let r="";return t instanceof zn?r="K":t instanceof Ml?r="Q":t instanceof ys?r="R":t instanceof _c?r="B":t instanceof yc?r="N":t instanceof vs&&(r="P"),e===r}isShortCastle(e){return"O-O"===e}removePiece(e,t){let r=ft.translateCoordsToIndex(e,t.reverted);t.pieces=t.pieces.filter(i=>!i.point.isEqual(new oe(r.yAxis,r.xAxis)))}isLongCastle(e){return"O-O-O"===e}resolveByCol(e,t){let r=ft.formatSingle(e[0].point,!1);return ft.formatSingle(e[1].point,!1),r.substring(0,1)===t?e[0]:e[1]}resolveByRow(e,t){let r=ft.formatSingle(e[0].point,!1);return ft.formatSingle(e[1].point,!1),r.substring(1,2)===t?e[0]:e[1]}replacePromotion(e){return e.replace("=Q","1").replace("=R","2").replace("=B","3").replace("=K","4")}resolvePromotion(e){switch(e){case"Q":return"1";case"R":return"2";case"B":return"3";case"N":return"4"}return""}}class sx{static getProcessor(e){switch(e){case Cb.FEN:return new xV;case Cb.PGN:return new nY}}static getDefaultProcessor(){return new xV}}var Cb=function(n){return n[n.FEN=1]="FEN",n[n.PGN=2]="PGN",n}(Cb||{});class rY{constructor(e,t,r){this.x=e+.5,this.y=t+.5,this.color=r}isEqual(e){return e&&e.x===this.x&&this.y===e.y}}class ox{static getClickPoint(e,t,r,i,s){return new oe(Math.floor((e.y-t)/(r/8)),Math.floor((e.x-i)/(s/8)))}static getDrawingPoint(e,t,r,i,s,o,a,c,h){const m=e/8,v=Math.floor((r-c)/m),w=Math.floor((i-h)/m);let A=t.resolve(s,a,o);return new rY(Math.floor(v*m+m/2),Math.floor(w*m+m/2),A)}}class iY{constructor(e,t,r,i){this.move=e,this.piece=t,this.color=r,this.x=i}setGameStates(e,t,r){this.check=e,this.stalemate=t,this.mate=r}}class sY{constructor(){this.historyMovesSubject$=new G([])}get historyMoves(){return this.historyMovesSubject$.value}set historyMoves(e){this.historyMovesSubject$.next(e)}addMove(e){this.historyMoves=[...this.historyMoves,e]}pop(){const e=this.getLastMove();return this.historyMoves=this.historyMoves.filter(t=>t!==e),e}getAll(){return this.historyMoves}clear(){this.historyMoves=[]}getLastMove(){return this.historyMoves[this.getLastMoveIndex()]}getLastMoveIndex(){return this.historyMoves.length-1}}let zu=(()=>{class n{}return n.DEFAULT_DARK_TILE_COLOR="rgb(97, 84, 61)",n.DEFAULT_LIGHT_TILE_COLOR="#BAA378",n.DEFAULT_SIZE=500,n.MIN_BOARD_SIZE=100,n.MAX_BOARD_SIZE=4e3,n.DEFAULT_SOURCE_POINT_COLOR="rgba(146, 111, 26, 0.79)",n.DEFAULT_DESTINATION_POINT_COLOR="#b28e1a",n.DEFAULT_LEGAL_MOVE_POINT_COLOR="radial-gradient(#13262F 15%, transparent 20%);",n})();class oY{constructor(){this._defaultIcons=!1}get pieceIconInput(){return this._pieceIconInput}set pieceIconInput(e){this._pieceIconInput=e}get defaultIcons(){return this._defaultIcons}set defaultIcons(e){this._defaultIcons=e}isDefaultIcons(){return null==this.pieceIconInput}getPieceIcon(e){let t=e.color===F.WHITE;switch(e.constructor){case zn:return t?this.pieceIconInput.whiteKingUrl:this.pieceIconInput.blackKingUrl;case Ml:return t?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;case ys:return t?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;case _c:return t?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;case yc:return t?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl;case vs:return t?this.pieceIconInput.whitePawnUrl:this.pieceIconInput.blackPawnUrl}}loadDefaultData(){this.pieceIconInput={blackBishopUrl:"",blackKingUrl:"",blackKnightUrl:"",blackQueenUrl:"",blackRookUrl:"",whiteBishopUrl:"",whiteKingUrl:"",whiteKnightUrl:"",whitePawnUrl:"",whiteQueenUrl:"",whiteRookUrl:"",blackPawnUrl:"a"}}}class aY{constructor(){this.defaultXCoords=["a","b","c","d","e","f","g","h"],this.defaultYCoords=[8,7,6,5,4,3,2,1],this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}get xCoords(){return this.currentXCoords}get yCoords(){return this.currentYCoords}reverse(){this.currentXCoords=this.currentXCoords.reverse(),this.currentYCoords=this.currentYCoords.reverse()}reset(){this.init()}init(){this.currentXCoords=[...this.defaultXCoords],this.currentYCoords=[...this.defaultYCoords]}}class cY{dragEnded(e,t,r){t||r&&(e.source._dragRef.getRootElement().style.transform=r)}}class lY{constructor(){this.dragEndProcessor=new cY}process(e,t,r){this.dragEndProcessor.dragEnded(e,t,r)}setDragEndProcessor(e){this.dragEndProcessor=e}}class uY{dragStarted(e){const t=e.source.getRootElement().style;t.zIndex="1000",t.position="absolute"}}class dY{constructor(){this.dragStartProcessor=new uY}process(e){this.dragStartProcessor.dragStarted(e)}setDragStartProcessor(e){this.dragStartProcessor=e}}class hY{resolve(e,t,r){let i="green";return(e||t)&&(i="red"),r&&(i="blue"),(t||e)&&r&&(i="orange"),i}}class fY{constructor(){this.colorProcessor=new hY}resolve(e,t,r){return this.colorProcessor.resolve(e,t,r)}setColorProcessor(e){this.colorProcessor=e}}class pY{constructor(){this.arrowsSubject$=new G([]),this.circlesSubject$=new G([]),this.arrows$=this.arrowsSubject$.asObservable(),this.circles$=this.circlesSubject$.asObservable()}get circles(){return this.circlesSubject$.value}set circles(e){this.circlesSubject$.next(e)}get arrows(){return this.arrowsSubject$.value}set arrows(e){this.arrowsSubject$.next(e)}addCircle(e){this.circles=[...this.circles,e]}reomveCircle(e){this.circles=this.circles.filter(t=>!t.isEqual(e))}addArrow(e){this.arrows=[...this.arrows,e]}removeArrow(e){this.arrows=this.arrows.filter(t=>!t.isEqual(e))}containsCircle(e){return this.circles.some(t=>t.isEqual(e))}containsArrow(e){return this.arrows.some(t=>t.isEqual(e))}clear(){this.arrows=[],this.circles=[]}}class mY{constructor(){this.pgn=[],this.currentIndex=.5}getPGN(){return this.pgn.join(" ")}getLast(){return this.pgn[this.pgn.length-1]}appendToLast(e){this.pgn[this.pgn.length-1]=this.getLast()+e}processChecks(e,t,r){e?this.appendToLast("#"):t&&this.appendToLast("+")}reset(){this.pgn=[],this.currentIndex=.5}addPromotionChoice(e){switch(e){case 1:this.appendToLast("=Q");break;case 2:this.appendToLast("=R");break;case 3:this.appendToLast("=B");break;case 4:this.appendToLast("=N")}}removeLast(){this.pgn.pop(),this.currentIndex-=.5}}class gY extends mY{process(e,t,r,i){this.currentIndex+=.5;let s="";this.currentIndex%Math.floor(this.currentIndex)==0&&(s=this.currentIndex+". ");let o=[],a=[];i&&(o=ft.findPieceByPossibleCapturesContaining(ft.formatSingle(r,e.reverted),e,t.color).filter(c=>c.constructor.name===t.constructor.name)),a=ft.findPieceByPossibleMovesContaining(ft.formatSingle(r,e.reverted),e,t.color).filter(c=>c.constructor.name===t.constructor.name),t instanceof vs&&!i&&0===o.length?s+=ft.formatSingle(r,e.reverted):t instanceof vs&&i?s+=ft.formatSingle(t.point,e.reverted).substring(0,1)+"x"+ft.formatSingle(r,e.reverted):t instanceof zn&&2===Math.abs(t.point.col-r.col)?s+=e.reverted?r.col<2?"O-O":"O-O-O":r.col<3?"O-O-O":"O-O":!(t instanceof vs)&&0===o.length&&a.length<2?s+=ft.getFirstLetterPiece(t)+ft.formatSingle(r,e.reverted):a&&2===a.length&&0===o.length?this.isEqualByCol(a[0],a[1])?s+=ft.getFirstLetterPiece(t)+ft.reverse(e,t.point.row)+ft.formatSingle(r,e.reverted):s+=ft.getFirstLetterPiece(t)+ft.formatCol(e,t.point.col)+ft.formatSingle(r,e.reverted):o.length>1?this.isEqualByCol(o[0],o[1])?s+=ft.getFirstLetterPiece(t)+ft.reverse(e,t.point.row)+"x"+ft.formatSingle(r,e.reverted):s+=ft.getFirstLetterPiece(t)+ft.formatCol(e,t.point.col)+"x"+ft.formatSingle(r,e.reverted):s+=ft.getFirstLetterPiece(t)+"x"+ft.formatSingle(r,e.reverted),this.pgn.push(s)}resolvePieceByFirstChar(e,t){return ft.getFirstLetterPiece(t)===e}isEqualByCol(e,t){return e.point.col===t.point.col}}class _Y{constructor(e){this.dragStartStrategy=new dY,this.dragEndStrategy=new lY,this.pgnProcessor=new gY,this.colorStrategy=new fY,this.coords=new aY,this.heightAndWidth=zu.DEFAULT_SIZE,this.freeMode=!1,this.drawProvider=new pY,this.pieceIconManager=new oY,this.moveHistoryProvider=new sY,this.disabling=!1,this.board=e}checkIfPawnFirstMove(e){e instanceof vs&&(e.isMovedAlready=!0)}checkIfRookMoved(e){e instanceof ys&&(e.isMovedAlready=!0)}checkIfKingMoved(e){e instanceof zn&&(e.isMovedAlready=!0)}getMoveHistory(){return this.moveHistoryProvider.getAll()}}class yY{constructor(e,t){this.engineFacade=e,this.notationProcessor=t||sx.getDefaultProcessor()}addPieces(){RV.loadDefaultPieces(this.engineFacade.board)}loadFEN(e){this.notationProcessor.process(e,this.engineFacade)}loadPGN(e){this.notationProcessor.process(e,this.engineFacade)}setEngineFacade(e){this.engineFacade=e}setNotationProcessor(e){this.notationProcessor=e}}class PV{constructor(e){this.board=e}}class vY{constructor(){this.statesSubject$=new G([])}get states(){return this.statesSubject$.value}set states(e){this.statesSubject$.next(e)}addMove(e){this.states=[...this.states,e]}getStates(){return this.states}pop(){const e=this.getLastState();return this.states=this.states.filter(t=>t!==e),e}isEmpty(){return 0===this.states.length}clear(){this.states=[]}getLastState(){return this.states[this.getLastStateIndex()]}getLastStateIndex(){return this.states.length-1}}class bY{isEqual(e){return e&&this.start.isEqual(e.start)&&this.end.isEqual(e.end)}}class EY{isEqual(e){return e&&this.drawPoint.isEqual(e.drawPoint)}}class wY{constructor(e){this.piece=e}}class MV extends wY{constructor(e,t,r,i){super(e),this.pointClicked=t,this.color=r,this.board=i}getPossibleCaptures(){return this.piece.getPossibleCaptures().filter(e=>!ft.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,e.row,e.col,this.board))}getPossibleMoves(){return this.piece.getPossibleMoves().filter(e=>!ft.willMoveCauseCheck(this.color,this.pointClicked.row,this.pointClicked.col,e.row,e.col,this.board))}}class kV{static resolvePromotionChoice(e,t,r){const i=t.color===F.WHITE;switch(r){case 1:e.pieces.push(new Ml(t.point,t.color,i?xt.WHITE_QUEEN:xt.BLACK_QUEEN,e));break;case 2:e.pieces.push(new ys(t.point,t.color,i?xt.WHITE_ROOK:xt.BLACK_ROOK,e));break;case 3:e.pieces.push(new _c(t.point,t.color,i?xt.WHITE_BISHOP:xt.BLACK_BISHOP,e));break;case 4:e.pieces.push(new yc(t.point,t.color,i?xt.WHITE_KNIGHT:xt.BLACK_KNIGHT,e))}}}var jp=function(n){return n[n.KING=1]="KING",n[n.QUEEN=2]="QUEEN",n[n.BISHOP=3]="BISHOP",n[n.KNIGHT=4]="KNIGHT",n[n.ROOK=5]="ROOK",n[n.PAWN=6]="PAWN",n}(jp||{}),OV=function(n){return n[n.LIGHT=1]="LIGHT",n[n.DARK=2]="DARK",n}(OV||{});class IY{static create(e,t,r,i){let s,o=r===OV.LIGHT?F.WHITE:F.BLACK;switch(t){case jp.QUEEN:s=new Ml(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_QUEEN:xt.BLACK_QUEEN,i);break;case jp.KING:s=new zn(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_KING:xt.BLACK_KING,i);break;case jp.KNIGHT:s=new yc(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_KNIGHT:xt.BLACK_KNIGHT,i);break;case jp.BISHOP:s=new _c(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_BISHOP:xt.BLACK_BISHOP,i);break;case jp.ROOK:s=new ys(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_ROOK:xt.BLACK_ROOK,i);break;case jp.PAWN:s=new vs(new oe(e.yAxis,e.xAxis),o,o===F.WHITE?xt.WHITE_PAWN:xt.BLACK_PAWN,i)}return s}}class CY extends _Y{constructor(e,t){super(e),this._selected=!1,this.moveChange=t,this.boardLoader=new yY(this),this.boardLoader.addPieces(),this.boardStateProvider=new vY}reset(){this.boardStateProvider.clear(),this.moveHistoryProvider.clear(),this.boardLoader.addPieces(),this.board.reset(),this.coords.reset(),this.drawProvider.clear(),this.pgnProcessor.reset()}undo(){if(!this.boardStateProvider.isEmpty()){const e=this.boardStateProvider.pop().board;this.board.reverted&&e.reverse(),this.board=e,this.board.possibleCaptures=[],this.board.possibleMoves=[],this.board.activePiece=null,this.moveHistoryProvider.pop(),this.board.calculateFEN(),this.pgnProcessor.removeLast()}}saveMoveClone(){const e=this.board.clone();this.board.reverted&&e.reverse(),this.moveStateProvider.addMove(new PV(e))}move(e){if(e){const t=ft.translateCoordsToIndex(e.substring(0,2),this.board.reverted),r=ft.translateCoordsToIndex(e.substring(2,4),this.board.reverted),i=this.board.getPieceByPoint(t.yAxis,t.xAxis);if(i){if(this.board.currentWhitePlayer&&i.color===F.BLACK||!this.board.currentWhitePlayer&&i.color===F.WHITE)return;this.prepareActivePiece(i,i.point),this.board.isPointInPossibleMoves(new oe(r.yAxis,r.xAxis))||this.board.isPointInPossibleCaptures(new oe(r.yAxis,r.xAxis))?(this.saveClone(),this.movePiece(i,new oe(r.yAxis,r.xAxis),5===e.length?+e.substring(4,5):0),this.board.lastMoveSrc=new oe(t.yAxis,t.xAxis),this.board.lastMoveDest=new oe(r.yAxis,r.xAxis),this.disableSelection()):this.disableSelection()}}}prepareActivePiece(e,t){this.board.activePiece=e,this._selected=!0,this.board.possibleCaptures=new MV(e,t,this.board.currentWhitePlayer?F.WHITE:F.BLACK,this.board).getPossibleCaptures(),this.board.possibleMoves=new MV(e,t,this.board.currentWhitePlayer?F.WHITE:F.BLACK,this.board).getPossibleMoves()}onPieceClicked(e,t){this.board.currentWhitePlayer&&e.color===F.BLACK||!this.board.currentWhitePlayer&&e.color===F.WHITE||this.prepareActivePiece(e,t)}handleClickEvent(e,t){let r=!1;(this.board.isPointInPossibleMoves(e)||this.board.isPointInPossibleCaptures(e)||this.freeMode)&&e.isInRange()&&(this.saveClone(),this.board.lastMoveSrc=new oe(this.board.activePiece.point.row,this.board.activePiece.point.col),this.board.lastMoveDest=e.clone(),this.movePiece(this.board.activePiece,e),this.board.activePiece.point.isEqual(this.board.lastMoveSrc)||(r=!0)),(t||r)&&this.disableSelection(),this.disableSelection();const i=this.board.getPieceByPoint(e.row,e.col);i&&!r&&(this.onFreeMode(i),this.onPieceClicked(i,e))}onMouseDown(e,t,r,i){if(this.moveDone=!1,0!==e.button)return void(this.drawPoint=ox.getDrawingPoint(this.heightAndWidth,this.colorStrategy,e.x,e.y,e.ctrlKey,e.altKey,e.shiftKey,r,i));if(this.drawProvider.clear(),this.board.activePiece&&t.isEqual(this.board.activePiece.point))return void(this.disabling=!0);const s=this.board.getPieceByPoint(t.row,t.col);if(this.freeMode&&s){if(e.ctrlKey)return void(this.board.pieces=this.board.pieces.filter(o=>o!==s));this.board.currentWhitePlayer=s.color===F.WHITE}this.isPieceDisabled(s)||(this._selected?this.handleClickEvent(t,!0):s&&(this.onFreeMode(s),this.onPieceClicked(s,t)))}onMouseUp(e,t,r,i){if(this.moveDone=!1,0!==e.button&&!this.drawDisabled)return void this.addDrawPoint(e.x,e.y,e.ctrlKey,e.altKey,e.shiftKey,r,i);if(this.drawProvider.clear(),this.dragDisabled)return;if(this.board.activePiece&&t.isEqual(this.board.activePiece.point)&&this.disabling)return this.disableSelection(),void(this.disabling=!1);const s=this.board.getPieceByPoint(t.row,t.col);this.isPieceDisabled(s)||this._selected&&this.handleClickEvent(t,!1)}saveClone(){const e=this.board.clone();this.board.reverted&&e.reverse(),this.boardStateProvider.addMove(new PV(e))}movePiece(e,t,r){const i=this.board.pieces.find(s=>s.point.col===t.col&&s.point.row===t.row);if(this.pgnProcessor.process(this.board,e,t,i),i&&e.color!==i.color)this.board.pieces=this.board.pieces.filter(s=>s!==i);else if(i&&e.color===i.color)return;if(this.historyMoveCandidate=new iY(ft.format(e.point,t,this.board.reverted),e.constant.name,e.color===F.WHITE?"white":"black",!!i),this.moveHistoryProvider.addMove(this.historyMoveCandidate),e instanceof zn&&Math.abs(t.col-e.point.col)>1)if(t.col<3){const o=this.board.getPieceByField(e.point.row,0);this.freeMode||(o.point.col=this.board.reverted?2:3)}else{const o=this.board.getPieceByField(e.point.row,7);this.freeMode||(o.point.col=this.board.reverted?4:5)}e instanceof vs?(this.board.checkIfPawnTakesEnPassant(t),this.board.checkIfPawnEnpassanted(e,t)):(this.board.enPassantPoint=null,this.board.enPassantPiece=null),e.point=t,this.increaseFullMoveCount(),this.board.currentWhitePlayer=!this.board.currentWhitePlayer,this.checkForPawnPromote(e,r)||this.afterMoveActions()}checkForPawnPromote(e,t){if(e instanceof vs&&(0===e.point.row||7===e.point.row))return this.board.pieces=this.board.pieces.filter(r=>r!==e),t?(kV.resolvePromotionChoice(this.board,e,t),this.afterMoveActions(t)):this.openPromoteDialog(e),!0}afterMoveActions(e){this.checkIfPawnFirstMove(this.board.activePiece),this.checkIfRookMoved(this.board.activePiece),this.checkIfKingMoved(this.board.activePiece),this.board.blackKingChecked=this.board.isKingInCheck(F.BLACK,this.board.pieces),this.board.whiteKingChecked=this.board.isKingInCheck(F.WHITE,this.board.pieces);const t=this.board.blackKingChecked||this.board.whiteKingChecked,r=this.checkForPossibleMoves(F.BLACK)||this.checkForPossibleMoves(F.WHITE),i=this.checkForPat(F.BLACK)||this.checkForPat(F.WHITE);this.historyMoveCandidate.setGameStates(t,i,r),this.pgnProcessor.processChecks(r,t,i),this.pgnProcessor.addPromotionChoice(e),this.disabling=!1,this.board.calculateFEN();const s=this.moveHistoryProvider.getLastMove();s&&e&&(s.move+=e),this.moveChange.emit({...s,check:t,checkmate:r,stalemate:i,fen:this.board.fen,pgn:{pgn:this.pgnProcessor.getPGN()},freeMode:this.freeMode}),this.moveDone=!0}checkForPat(e){return e===F.WHITE&&!this.board.whiteKingChecked||e===F.BLACK&&!this.board.blackKingChecked?this.checkForPossibleMoves(e):void 0}openPromoteDialog(e){e.color===this.board.activePiece.color&&this.modal.open(t=>{kV.resolvePromotionChoice(this.board,e,t),this.afterMoveActions(t)})}checkForPossibleMoves(e){return!this.board.pieces.filter(t=>t.color===e).some(t=>t.getPossibleMoves().some(r=>!ft.willMoveCauseCheck(e,t.point.row,t.point.col,r.row,r.col,this.board))||t.getPossibleCaptures().some(r=>!ft.willMoveCauseCheck(e,t.point.row,t.point.col,r.row,r.col,this.board)))}disableSelection(){this._selected=!1,this.board.possibleCaptures=[],this.board.activePiece=null,this.board.possibleMoves=[]}onFreeMode(e){!this.freeMode||null==e||(this.board.currentWhitePlayer=e.color===F.WHITE)}isPieceDisabled(e){return!(e&&e.point&&this.board.possibleCaptures.find(r=>r.col===e.point.col&&r.row===e.point.row))&&e&&(this.lightDisabled&&e.color===F.WHITE||this.darkDisabled&&e.color===F.BLACK)}addDrawPoint(e,t,r,i,s,o,a){const c=ox.getDrawingPoint(this.heightAndWidth,this.colorStrategy,e,t,r,i,s,o,a);if(this.drawPoint.isEqual(c)){const h=new EY;h.drawPoint=c,this.drawProvider.containsCircle(h)?this.drawProvider.reomveCircle(h):this.drawProvider.addCircle(h)}else{const h=new bY;h.start=this.drawPoint,h.end=c,this.drawProvider.containsArrow(h)?this.drawProvider.removeArrow(h):this.drawProvider.addArrow(h)}}increaseFullMoveCount(){this.board.currentWhitePlayer||++this.board.fullMoveCount}addPiece(e,t,r){if(this.freeMode&&r&&e>0&&t>0){let i=ft.translateCoordsToIndex(r,this.board.reverted),s=this.board.getPieceByPoint(i.yAxis,i.xAxis);s&&(this.board.pieces=this.board.pieces.filter(a=>a!==s));let o=IY.create(i,e,t,this.board);this.saveClone(),this.board.pieces.push(o),this.afterMoveActions()}}}class AY{constructor(){this.board=[],this.pieces=[],this.enPassantPoint=null,this.enPassantPiece=null,this.lastMoveSrc=null,this.lastMoveDest=null,this.possibleCaptures=[],this.possibleMoves=[],this.currentWhitePlayer=!0,this.reverted=!1,this.fullMoveCount=1;for(let e=0;e<8;++e){this.board[e]=[];for(let t=0;t<8;++t)this.board[e][t]=0}}isXYInPossibleMoves(e,t){return this.possibleMoves.some(r=>r.row===e&&r.col===t)}isXYInPossibleCaptures(e,t){return this.possibleCaptures.some(r=>r.row===e&&r.col===t)}isXYInSourceMove(e,t){return this.lastMoveSrc&&this.lastMoveSrc.row===e&&this.lastMoveSrc.col===t}isXYInDestMove(e,t){return this.lastMoveDest&&this.lastMoveDest.row===e&&this.lastMoveDest.col===t}isXYInActiveMove(e,t){return this.activePiece&&this.activePiece.point.row===e&&this.activePiece.point.col===t}isPointInPossibleMoves(e){return this.possibleMoves.some(t=>t.row===e.row&&t.col===e.col)}isPointInPossibleCaptures(e){return this.possibleCaptures.some(t=>t.row===e.row&&t.col===e.col)}reset(){this.lastMoveDest=null,this.lastMoveSrc=null,this.whiteKingChecked=!1,this.blackKingChecked=!1,this.possibleCaptures=[],this.possibleMoves=[],this.activePiece=null,this.reverted=!1,this.currentWhitePlayer=!0,this.enPassantPoint=null,this.enPassantPiece=null,this.fullMoveCount=1,this.calculateFEN()}reverse(){this.reverted=!this.reverted,this.activePiece=null,this.possibleMoves=[],this.possibleCaptures=[],this.pieces.forEach(e=>this.reversePoint(e.point)),this.reversePoint(this.lastMoveSrc),this.reversePoint(this.lastMoveDest),this.enPassantPoint&&this.enPassantPiece&&this.reversePoint(this.enPassantPoint)}clone(){return(0,BQ.cloneDeep)(this)}isFieldTakenByEnemy(e,t,r){return!(e>7||e<0||t>7||t<0)&&this.pieces.some(i=>i.point.col===t&&i.point.row===e&&i.color===r)}isFieldEmpty(e,t){return!(e>7||e<0||t>7||t<0||this.pieces.some(r=>r.point.col===t&&r.point.row===e))}isFieldUnderAttack(e,t,r){return this.pieces.filter(i=>i.color===r).some(i=>i.getCoveredFields().some(s=>s.col===t&&s.row===e))}getPieceByField(e,t){if(!this.isFieldEmpty(e,t))return this.pieces.find(r=>r.point.col===t&&r.point.row===e)}isKingInCheck(e,t){const r=t.find(i=>i.color===e&&i instanceof zn);return!!r&&t.some(i=>i.getPossibleCaptures().some(s=>s.col===r.point.col&&s.row===r.point.row)&&i.color!==e)}getKingByColor(e){return this.pieces.find(t=>t instanceof zn&&t.color===e)}getCastleFENString(e){const t=this.getKingByColor(e);if(!t||t.isMovedAlready)return"";let r="";const i=this.getPieceByField(t.point.row,0),s=this.getPieceByField(t.point.row,7);return s instanceof ys&&s.color===e&&(s.isMovedAlready||(r+=this.reverted?"q":"k")),i instanceof ys&&i.color===e&&(i.isMovedAlready||(r+=this.reverted?"k":"q")),r=r.split("").sort().join(""),e===F.BLACK?r:r.toUpperCase()}getEnPassantFENString(){return this.enPassantPoint?this.reverted?String.fromCharCode(104-this.enPassantPoint.col)+(this.enPassantPoint.row+1):String.fromCharCode(97+this.enPassantPoint.col)+(Math.abs(this.enPassantPoint.row-7)+1):"-"}calculateFEN(){let e="";for(let s=0;s<8;++s){let o=0;for(let a=0;a<8;++a){const c=this.pieces.find(h=>h.point.col===a&&h.point.row===s);c?(o>0&&(e+=o,o=0),c instanceof ys?e+=c.color===F.BLACK?"r":"R":c instanceof yc?e+=c.color===F.BLACK?"n":"N":c instanceof _c?e+=c.color===F.BLACK?"b":"B":c instanceof Ml?e+=c.color===F.BLACK?"q":"Q":c instanceof zn?e+=c.color===F.BLACK?"k":"K":c instanceof vs&&(e+=c.color===F.BLACK?"p":"P")):++o}o>0&&(e+=o),e+="/"}e=e.substr(0,e.length-1),this.reverted&&(e=e.split("").reverse().join("")),e+=" "+(this.currentWhitePlayer?"w":"b");let i=this.getCastleFENString(F.WHITE)+this.getCastleFENString(F.BLACK);i||(i="-"),e+=" "+i,e+=" "+this.getEnPassantFENString(),e+=" 0",e+=" "+this.fullMoveCount,this.fen=e}isXYInPointSelection(e,t){return!1}reversePoint(e){e&&(e.row=Math.abs(e.row-7),e.col=Math.abs(e.col-7))}getPieceByPoint(e,t){return e=Math.floor(e),t=Math.floor(t),this.pieces.find(r=>r.point.col===t&&r.point.row===e)}checkIfPawnTakesEnPassant(e){e.isEqual(this.enPassantPoint)&&(this.pieces=this.pieces.filter(t=>t!==this.enPassantPiece),this.enPassantPoint=null,this.enPassantPiece=null)}checkIfPawnEnpassanted(e,t){Math.abs(e.point.row-t.row)>1?(this.enPassantPiece=e,this.enPassantPoint=new oe((e.point.row+t.row)/2,e.point.col)):(this.enPassantPoint=null,this.enPassantPiece=null)}isKingChecked(e){if(e instanceof zn)return e.color===F.WHITE?this.whiteKingChecked:this.blackKingChecked}getCurrentPlayerColor(){return this.currentWhitePlayer?F.WHITE:F.BLACK}}let NV=(()=>{class n{constructor(){this.componentMethodCallSource=new Y,this.componentMethodCalled$=this.componentMethodCallSource.asObservable()}reset(){this.componentMethodCallSource.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TY=(()=>{class n{constructor(){this.color="white",this.opened=!1}open(t){this.opened=!0,this.onCloseCallback=t,this.modal.nativeElement.style.display="block"}changeSelection(t){this.modal.nativeElement.style.display="none",this.opened=!1,this.onCloseCallback(t)}getPieceIcon(t){let r="";switch(t.toLowerCase()){case"queen":r="white"===this.color?this.pieceIconInput.whiteQueenUrl:this.pieceIconInput.blackQueenUrl;break;case"rook":r="white"===this.color?this.pieceIconInput.whiteRookUrl:this.pieceIconInput.blackRookUrl;break;case"bishop":r="white"===this.color?this.pieceIconInput.whiteBishopUrl:this.pieceIconInput.blackBishopUrl;break;case"knight":r="white"===this.color?this.pieceIconInput.whiteKnightUrl:this.pieceIconInput.blackKnightUrl}return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zr({type:n,selectors:[["app-piece-promotion-modal"]],viewQuery:function(t,r){if(1&t&&Ch(UQ,5),2&t){let i;Ia(i=Ca())&&(r.modal=i.first)}},inputs:{pieceIconInput:"pieceIconInput",color:"color"},decls:6,vars:2,consts:[[1,"container"],["myModal",""],[1,"wrapper"],[1,"content"],["class","piece-wrapper",4,"ngIf"],[1,"piece-wrapper"],[1,"piece",3,"click"],["alt","Queen",3,"src"],["alt","Rook",3,"src"],["alt","Bishop",3,"src"],["alt","Knight",3,"src"]],template:function(t,r){1&t&&(yt(0,"div",0,1)(2,"div",2)(3,"div",3),Br(4,jQ,9,4,"div",4),Br(5,HQ,9,0,"div",4),Ct()()()),2&t&&(Ht(4),hn("ngIf",r.pieceIconInput),Ht(1),hn("ngIf",!r.pieceIconInput))},dependencies:[fb],styles:[".container[_ngcontent-%COMP%]{display:none;position:absolute;z-index:9999;top:0;color:#000;width:100%;height:100%;overflow:auto;background-color:#0006}.wrapper[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.content[_ngcontent-%COMP%]{background-color:#fefefe;margin:auto;position:relative;top:30%;font-size:100%;height:40%;padding:10px;border:1px solid #888;width:90%}.piece[_ngcontent-%COMP%]{font-size:5rem;height:100%;width:25%;cursor:pointer;display:inline-block;text-align:center}.piece[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.piece[_ngcontent-%COMP%]:hover{background-color:#ccc;border-radius:5px}.piece-wrapper[_ngcontent-%COMP%]{height:80%;width:100%}#close-button[_ngcontent-%COMP%]{border-radius:4px;background-color:#4caf50;border:none;color:#fff;padding-left:5px;padding-right:5px;text-align:center;text-decoration:none;display:inline-block}.selected[_ngcontent-%COMP%]{border:2px solid #00B919;border-radius:4px;box-sizing:border-box}"]}),n})(),FV=(()=>{class n{constructor(t){this.ngxChessBoardService=t,this.darkTileColor=zu.DEFAULT_DARK_TILE_COLOR,this.lightTileColor=zu.DEFAULT_LIGHT_TILE_COLOR,this.showCoords=!0,this.sourcePointColor=zu.DEFAULT_SOURCE_POINT_COLOR,this.destinationPointColor=zu.DEFAULT_DESTINATION_POINT_COLOR,this.legalMovesPointColor=zu.DEFAULT_LEGAL_MOVE_POINT_COLOR,this.showLastMove=!0,this.showLegalMoves=!0,this.showActivePiece=!0,this.showPossibleCaptures=!0,this.moveChange=new Xe,this.checkmate=new Xe,this.stalemate=new Xe,this.selected=!1,this.isDragging=!1,this.startTransition="",this.engineFacade=new CY(new AY,this.moveChange)}set size(t){this.engineFacade.heightAndWidth=t&&t>=zu.MIN_BOARD_SIZE&&t<=zu.MAX_BOARD_SIZE?t:zu.DEFAULT_SIZE,this.engineFacade.drawProvider.clear(),this.calculatePieceSize()}set freeMode(t){this.engineFacade.freeMode=t}set dragDisabled(t){this.engineFacade.dragDisabled=t}set drawDisabled(t){this.engineFacade.drawDisabled=t}set pieceIcons(t){this.engineFacade.pieceIconManager.pieceIconInput=t}set lightDisabled(t){this.engineFacade.lightDisabled=t}set darkDisabled(t){this.engineFacade.darkDisabled=t}onRightClick(t){t.preventDefault()}ngOnChanges(t){(t.lightDisabled&&this.lightDisabled&&this.engineFacade.board.currentWhitePlayer||t.darkDisabled&&this.darkDisabled&&!this.engineFacade.board.currentWhitePlayer)&&(this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[])}ngOnInit(){this.ngxChessBoardService.componentMethodCalled$.subscribe(()=>{this.engineFacade.reset()})}ngAfterViewInit(){this.engineFacade.modal=this.modal,this.calculatePieceSize()}onMouseUp(t){this.engineFacade.onMouseUp(t,this.getClickPoint(t),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}reverse(){this.selected=!1,this.engineFacade.board.reverse(),this.engineFacade.coords.reverse()}updateBoard(t){this.engineFacade.board=t,this.boardLoader.setEngineFacade(this.engineFacade),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[]}setFEN(t){try{this.engineFacade.boardLoader.setNotationProcessor(sx.getProcessor(Cb.FEN)),this.engineFacade.boardLoader.loadFEN(t),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch{this.engineFacade.boardLoader.addPieces()}}setPGN(t){try{this.engineFacade.pgnProcessor.reset(),this.engineFacade.boardLoader.setNotationProcessor(sx.getProcessor(Cb.PGN)),this.engineFacade.boardLoader.loadPGN(t),this.engineFacade.board.possibleCaptures=[],this.engineFacade.board.possibleMoves=[],this.engineFacade.coords.reset()}catch(r){console.log(r),this.engineFacade.boardLoader.addPieces()}}getFEN(){return this.engineFacade.board.fen}dragEnded(t){this.isDragging=!1,this.engineFacade.dragEndStrategy.process(t,this.engineFacade.moveDone,this.startTransition)}dragStart(t){this.isDragging=!0;let r=t.source.getRootElement().style.transform.split(") ");this.startTransition=2===r.length?r[1]:r[0],this.engineFacade.dragStartStrategy.process(t)}onMouseDown(t){this.engineFacade.onMouseDown(t,this.getClickPoint(t),this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().top)}getClickPoint(t){return ox.getClickPoint(t,this.boardRef.nativeElement.getBoundingClientRect().top,this.boardRef.nativeElement.getBoundingClientRect().height,this.boardRef.nativeElement.getBoundingClientRect().left,this.boardRef.nativeElement.getBoundingClientRect().width)}calculatePieceSize(){this.pieceSize=this.engineFacade.heightAndWidth/8}getCustomPieceIcons(t){return JSON.parse(`{ "background-image": "url('${this.engineFacade.pieceIconManager.getPieceIcon(t)}')"}`)}move(t){this.engineFacade.move(t)}getMoveHistory(){return this.engineFacade.getMoveHistory()}reset(){this.engineFacade.reset()}undo(){this.engineFacade.undo()}addPiece(t,r,i){this.engineFacade.addPiece(t,r,i)}getPGN(){return this.engineFacade.pgnProcessor.getPGN()}dragMoved(t){let r=t.pointerPosition.x-t.source.getRootElement().parentElement.getBoundingClientRect().left-this.pieceSize/2,i=t.pointerPosition.y-t.source.getRootElement().parentElement.getBoundingClientRect().top-this.pieceSize/2;t.source.getRootElement().style.transform="translate3d("+r+"px, "+i+"px,0px)"}getTileBackgroundColor(t,r){let i=(t+r)%2==0?this.lightTileColor:this.darkTileColor;return this.showLastMove&&(this.engineFacade.board.isXYInSourceMove(t,r)&&(i=this.sourcePointColor),this.engineFacade.board.isXYInDestMove(t,r)&&(i=this.destinationPointColor)),i}}return n.\u0275fac=function(t){return new(t||n)(be(NV))},n.\u0275cmp=Zr({type:n,selectors:[["ngx-chess-board"]],viewQuery:function(t,r){if(1&t&&(Ch(zQ,5),Ch($Q,5)),2&t){let i;Ia(i=Ca())&&(r.boardRef=i.first),Ia(i=Ca())&&(r.modal=i.first)}},hostBindings:function(t,r){1&t&&Kn("contextmenu",function(s){return r.onRightClick(s)})},inputs:{darkTileColor:"darkTileColor",lightTileColor:"lightTileColor",showCoords:"showCoords",sourcePointColor:"sourcePointColor",destinationPointColor:"destinationPointColor",legalMovesPointColor:"legalMovesPointColor",showLastMove:"showLastMove",showLegalMoves:"showLegalMoves",showActivePiece:"showActivePiece",showPossibleCaptures:"showPossibleCaptures",size:"size",freeMode:"freeMode",dragDisabled:"dragDisabled",drawDisabled:"drawDisabled",pieceIcons:"pieceIcons",lightDisabled:"lightDisabled",darkDisabled:"darkDisabled"},outputs:{moveChange:"moveChange",checkmate:"checkmate",stalemate:"stalemate"},features:[Xi],decls:13,vars:18,consts:[["id","board",3,"pointerdown","pointerup"],["boardRef",""],["id","drag"],["class","single-piece","cdkDrag","",3,"cdkDragDisabled","innerHTML","ngStyle","transform","max-height","font-size","width","height","cdkDragEnded","cdkDragMoved","cdkDragStarted",4,"ngFor","ngForOf"],["class","board-row",4,"ngFor","ngForOf"],[2,"position","absolute","top","0","pointer-events","none"],[4,"ngFor","ngForOf"],["class","arrow",4,"ngFor","ngForOf"],["fill-opacity","0.0","stroke-width","2",4,"ngFor","ngForOf"],[3,"pieceIconInput","color"],["modal",""],["cdkDrag","",1,"single-piece",3,"cdkDragDisabled","innerHTML","ngStyle","cdkDragEnded","cdkDragMoved","cdkDragStarted"],[1,"board-row"],["class","board-col",3,"current-selection","king-check","point-circle","possible-capture","possible-point","background-color",4,"ngFor","ngForOf"],[1,"board-col"],["class","yCoord",3,"color","font-size",4,"ngIf"],["class","xCoord",3,"color","font-size",4,"ngIf"],["style","height:100%; width:100%",4,"ngIf"],[1,"yCoord"],[1,"xCoord"],[2,"height","100%","width","100%"],[3,"ngClass"],["markerHeight","13","markerWidth","13","orient","auto","refX","9","refY","6",3,"id"],["d","M2,2 L2,11 L10,6 L2,2"],[1,"arrow"],["fill-opacity","0.0","stroke-width","2"]],template:function(t,r){if(1&t){const i=Eh();yt(0,"div",0,1),Kn("pointerdown",function(o){return Xr(i),Jr(!Tw(12).opened&&r.onMouseDown(o))})("pointerup",function(o){return Xr(i),Jr(!Tw(12).opened&&r.onMouseUp(o))}),yt(2,"div",2),Br(3,WQ,1,13,"div",3),Br(4,YQ,2,1,"div",4),Ct(),Ja(),yt(5,"svg",5),Br(6,ZQ,3,3,"defs",6),Br(7,XQ,1,6,"line",7),kD(8,"async"),Br(9,JQ,1,4,"circle",8),kD(10,"async"),Ct(),function zd(){!function ec(){wt.lFrame.currentNamespace=null}()}(),Vi(11,"app-piece-promotion-modal",9,10),Ct()}2&t&&(Bu("height",r.engineFacade.heightAndWidth,"px")("width",r.engineFacade.heightAndWidth,"px"),Ht(3),hn("ngForOf",r.engineFacade.board.pieces),Ht(1),hn("ngForOf",r.engineFacade.board.board),Ht(1),po("height",r.engineFacade.heightAndWidth)("width",r.engineFacade.heightAndWidth),Ht(1),hn("ngForOf",function DN(n,e,t){const r=Fi()+n,i=xe();return i[r]===Gt?Sl(i,r,t?e.call(t):e()):function Kv(n,e){return n[e]}(i,r)}(17,eY)),Ht(1),hn("ngForOf",OD(8,13,r.engineFacade.drawProvider.arrows$)),Ht(2),hn("ngForOf",OD(10,15,r.engineFacade.drawProvider.circles$)),Ht(2),hn("pieceIconInput",r.engineFacade.pieceIconManager.pieceIconInput)("color",r.engineFacade.board.getCurrentPlayerColor()?"white":"black"))},dependencies:[TY,uL,SV,pL,fb,cL,mL],styles:['@charset "UTF-8";#board[_ngcontent-%COMP%]{font-family:Courier New,serif;position:relative}.board-row[_ngcontent-%COMP%]{display:block;width:100%;height:12.5%;position:relative}.board-col[_ngcontent-%COMP%]{position:relative;display:inline-block;width:12.5%;vertical-align:top;cursor:default;height:100%}.piece[_ngcontent-%COMP%]{height:100%;cursor:-webkit-grab;cursor:grab;width:100%;-moz-user-select:none;user-select:none;-webkit-user-select:none;background-size:cover;justify-content:center;text-align:center;color:#000!important;box-sizing:border-box}.piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}#drag[_ngcontent-%COMP%]{height:100%;width:100%}.possible-point[_ngcontent-%COMP%]{background:radial-gradient(#13262F 15%,transparent 20%)}.possible-point[_ngcontent-%COMP%]:hover, .possible-capture[_ngcontent-%COMP%]:hover{opacity:.4}.possible-capture[_ngcontent-%COMP%]{background:radial-gradient(transparent 0%,transparent 80%,#13262F 80%);opacity:.5;box-sizing:border-box;margin:0;padding:0}.king-check[_ngcontent-%COMP%]{background:radial-gradient(ellipse at center,red 0%,#e70000 25%,rgba(169,0,0,0) 89%,rgba(158,0,0,0) 100%)}.current-selection[_ngcontent-%COMP%]{background-color:#72620b!important}.yCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;right:.2em;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.xCoord[_ngcontent-%COMP%]{position:absolute;-moz-user-select:none;user-select:none;-webkit-user-select:none;cursor:pointer;left:.2em;bottom:0;font-family:Lucida Console,Courier,monospace;box-sizing:border-box}.hovering[_ngcontent-%COMP%]{background-color:red!important}.arrow[_ngcontent-%COMP%]{stroke-width:2}svg[_ngcontent-%COMP%]{filter:drop-shadow(1px 1px 0px #111) drop-shadow(-1px 1px 0px #111) drop-shadow(1px -1px 0px #111) drop-shadow(-1px -1px 0px #111)}[_nghost-%COMP%]{display:inline-block!important}.single-piece[_ngcontent-%COMP%]{position:absolute;z-index:999;justify-content:center;text-align:center;-moz-user-select:none;user-select:none;-webkit-user-select:none;color:#000!important;cursor:-webkit-grab;cursor:grab;background-size:cover}.single-piece[_ngcontent-%COMP%]:after{content:"\\200b";box-sizing:border-box}.cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-dragging){transition:transform .2s cubic-bezier(0,.3,.14,.49)}']}),n})(),DY=(()=>{class n{static forRoot(){return{ngModule:n,providers:[NV]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=On({type:n}),n.\u0275inj=yn({imports:[[tI,VQ]]}),n})();class LV{}class SY{}const $u="*";function BV(n,e=null){return{type:2,steps:n,options:e}}function Ab(n){return{type:6,styles:n,offset:null}}class Tb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HV{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function zV(n){return new _e(3e3,!1)}function Ph(n){switch(n.length){case 0:return new Tb;case 1:return n[0];default:return new HV(n)}}function $V(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(c=>{const h=c.get("offset"),m=h==o,v=m&&a||new Map;c.forEach((w,A)=>{let S=A,M=w;if("offset"!==A)switch(S=n.normalizePropertyName(S,i),M){case"!":M=t.get(A);break;case $u:M=r.get(A);break;default:M=n.normalizeStyleValue(A,S,M,i)}v.set(S,M)}),m||s.push(v),a=v,o=h}),i.length)throw function XY(n){return new _e(3502,!1)}();return s}function cx(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lx(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lx(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lx(t,"destroy",n)))}}function lx(n,e,t){const s=ux(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function ux(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Da(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function WV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const uZ=(()=>typeof document>"u"?null:document.documentElement)();function dx(n){const e=n.parentNode||n.host||null;return e===uZ?null:e}let Hp=null,GV=!1;function qV(n,e){for(;e;){if(e===n)return!0;e=dx(e)}return!1}function KV(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let QV=(()=>{class n{validateStyleProperty(t){return function hZ(n){Hp||(Hp=function fZ(){return typeof document<"u"?document.body:null}()||{},GV=!!Hp.style&&"WebkitAppearance"in Hp.style);let e=!0;return Hp.style&&!function dZ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Hp.style,!e&&GV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Hp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return qV(t,r)}getParentElement(t){return dx(t)}query(t,r,i){return KV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],c){return new Tb(i,s)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})(),hx=(()=>{class n{static{this.NOOP=new QV}}return n})();const pZ=1e3,fx="ng-enter",vI="ng-leave",bI="ng-trigger",EI=".ng-trigger",ZV="ng-animating",px=".ng-animating";function Wu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mx(parseFloat(e[1]),e[2])}function mx(n,e){return"s"===e?n*pZ:n}function wI(n,e,t){return n.hasOwnProperty("duration")?n:function gZ(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(zV()),{duration:0,delay:0,easing:""};i=mx(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(s=mx(parseFloat(c),a[4]));const h=a[5];h&&(o=h)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function RY(){return new _e(3100,!1)}()),a=!0),s<0&&(e.push(function PY(){return new _e(3101,!1)}()),a=!0),a&&e.splice(c,0,zV())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Db(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function XV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Mh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function kl(n,e,t){e.forEach((r,i)=>{const s=_x(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function zp(n,e){e.forEach((t,r)=>{const i=_x(r);n.style[i]=""})}function Sb(n){return Array.isArray(n)?1==n.length?n[0]:BV(n):n}const gx=new RegExp("{{\\s*(.+?)\\s*}}","g");function e2(n){let e=[];if("string"==typeof n){let t;for(;t=gx.exec(n);)e.push(t[1]);gx.lastIndex=0}return e}function xb(n,e,t){const r=n.toString(),i=r.replace(gx,(s,o)=>{let a=e[o];return null==a&&(t.push(function kY(n){return new _e(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function II(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const vZ=/-+([a-z0-9])/g;function _x(n){return n.replace(vZ,(...e)=>e[1].toUpperCase())}function Sa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function OY(n){return new _e(3004,!1)}()}}function t2(n,e){return window.getComputedStyle(n)[e]}const CI="*";function wZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function IZ(n,e,t){if(":"==n[0]){const c=function CZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function KY(n){return new _e(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function qY(n){return new _e(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(n2(i,o));"<"==s[0]&&!(i==CI&&o==CI)&&e.push(n2(o,i))}(r,t,e)):t.push(n),t}const AI=new Set(["true","1"]),TI=new Set(["false","0"]);function n2(n,e){const t=AI.has(n)||TI.has(n),r=AI.has(e)||TI.has(e);return(i,s)=>{let o=n==CI||n==i,a=e==CI||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?AI.has(n):TI.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?AI.has(e):TI.has(e)),o&&a}}const AZ=new RegExp("s*:selfs*,?","g");function yx(n,e,t,r){return new TZ(n).build(e,t,r)}class TZ{constructor(e){this._driver=e}build(e,t,r){const i=new xZ(t);return this._resetContextStyleTimingState(i),Sa(this,Sb(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function FY(){return new _e(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const c=a,h=c.name;h.toString().split(/\s*,\s*/).forEach(m=>{c.name=m,s.push(this.visitState(c,t))}),c.name=h}else if(1==a.type){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,o.push(c)}else t.errors.push(function LY(){return new _e(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{e2(c).forEach(h=>{o.hasOwnProperty(h)||s.add(h)})})}),s.size&&(II(s.values()),t.errors.push(function VY(n,e){return new _e(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Sa(this,Sb(e.animation),t);return{type:1,matchers:wZ(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$p(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Sa(this,r,t)),options:$p(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Sa(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:$p(e.options)}}visitAnimate(e,t){const r=function PZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return vx(wI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=vx(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=wI(t,e);return vx(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ab({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const h={};r.easing&&(h.easing=r.easing),o=Ab(h)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(o,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===$u?r.push(a):t.errors.push(new _e(3002,!1)):r.push(XV(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let c of a.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,c)=>{const h=t.collectedStyles.get(t.currentQuerySelector),m=h.get(c);let v=!0;m&&(s!=i&&s>=m.startTime&&i<=m.endTime&&(t.errors.push(function UY(n,e,t,r,i){return new _e(3010,!1)}()),v=!1),s=m.startTime),v&&h.set(c,{startTime:s,endTime:i}),t.options&&function yZ(n,e,t){const r=e.params||{},i=e2(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function MY(n){return new _e(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function jY(){return new _e(3011,!1)}()),r;let s=0;const o=[];let a=!1,c=!1,h=0;const m=e.steps.map(ne=>{const W=this._makeStyleAst(ne,t);let de=null!=W.offset?W.offset:function RZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(W.styles),Ae=0;return null!=de&&(s++,Ae=W.offset=de),c=c||Ae<0||Ae>1,a=a||Ae<h,h=Ae,o.push(Ae),W});c&&t.errors.push(function HY(){return new _e(3012,!1)}()),a&&t.errors.push(function zY(){return new _e(3200,!1)}());const v=e.steps.length;let w=0;s>0&&s<v?t.errors.push(function $Y(){return new _e(3202,!1)}()):0==s&&(w=1/(v-1));const A=v-1,S=t.currentTime,M=t.currentAnimateTimings,N=M.duration;return m.forEach((ne,W)=>{const de=w>0?W==A?1:w*W:o[W],Ae=de*N;t.currentTime=S+M.delay+Ae,M.duration=Ae,this._validateStyleAst(ne,t),ne.offset=de,r.styles.push(ne)}),r}visitReference(e,t){return{type:8,animation:Sa(this,Sb(e.animation),t),options:$p(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$p(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$p(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function DZ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(AZ,"")),n=n.replace(/@\*/g,EI).replace(/@\w+/g,t=>EI+"-"+t.slice(1)).replace(/:animating/g,px),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Da(t.collectedStyles,t.currentQuerySelector,new Map);const a=Sa(this,Sb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:$p(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function WY(){return new _e(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:wI(e.timings,t.errors,!0);return{type:12,animation:Sa(this,Sb(e.animation),t),timings:r,options:null}}}class xZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function $p(n){return n?(n=Db(n)).params&&(n.params=function SZ(n){return n?Db(n):null}(n.params)):n={},n}function vx(n,e,t){return{duration:n,delay:e,easing:t}}function bx(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class DI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const OZ=new RegExp(":enter","g"),FZ=new RegExp(":leave","g");function Ex(n,e,t,r,i,s=new Map,o=new Map,a,c,h=[]){return(new LZ).buildKeyframes(n,e,t,r,i,s,o,a,c,h)}class LZ{buildKeyframes(e,t,r,i,s,o,a,c,h,m=[]){h=h||new DI;const v=new wx(e,t,h,i,s,m,[]);v.options=c;const w=c.delay?Wu(c.delay):0;v.currentTimeline.delayNextStep(w),v.currentTimeline.setStyles([o],null,v.errors,c),Sa(this,r,v);const A=v.timelines.filter(S=>S.containsAnimation());if(A.length&&a.size){let S;for(let M=A.length-1;M>=0;M--){const N=A[M];if(N.element===t){S=N;break}}S&&!S.allowOnlyTimelineStyles()&&S.setStyles([a],null,v.errors,c)}return A.length?A.map(S=>S.buildKeyframes()):[bx(t,[],[],[],0,w,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Wu(xb(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Wu(r.duration):null,a=null!=r.delay?Wu(r.delay):null;return 0!==o&&e.forEach(c=>{const h=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,h.duration+h.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Sa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=SI);const o=Wu(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Sa(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Wu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Sa(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return wI(t.params?xb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Wu(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=SI);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((h,m)=>{t.currentQueryIndex=m;const v=t.createSubContext(e.options,h);s&&v.delayNextStep(s),h===t.element&&(c=v.currentTimeline),Sa(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,v.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const m=t.currentTimeline;c&&m.delayNextStep(c);const v=m.currentTime;Sa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-v+(i.startTime-r.currentTimeline.startTime)}}const SI={};class wx{constructor(e,t,r,i,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=SI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new xI(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Wu(r.duration)),null!=r.delay&&(i.delay=Wu(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=xb(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new wx(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=SI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new VZ(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(OZ,"."+this._enterClassName)).replace(FZ,"."+this._leaveClassName);let h=this._driver.query(this.element,e,1!=r);0!==r&&(h=r<0?h.slice(h.length+r,h.length):h.slice(0,r)),a.push(...h)}return!s&&0==a.length&&o.push(function GY(n){return new _e(3014,!1)}()),a}}class xI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new xI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||$u),this._currentKeyframe.set(t,$u);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function BZ(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,$u)}else Mh(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,c]of o){const h=xb(c,s,r);this._pendingStyles.set(a,h),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??$u),this._updateStyle(a,h)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const h=Mh(a,new Map,this._backFill);h.forEach((m,v)=>{"!"===m?e.add(v):m===$u&&t.add(v)}),r||h.set("offset",c/this.duration),i.push(h)});const s=e.size?II(e.values()):[],o=t.size?II(t.values()):[];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return bx(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class VZ extends xI{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,c=Mh(e[0]);c.set("offset",0),s.push(c);const h=Mh(e[0]);h.set("offset",o2(a)),s.push(h);const m=e.length-1;for(let v=1;v<=m;v++){let w=Mh(e[v]);const A=w.get("offset");w.set("offset",o2((t+A*r)/o)),s.push(w)}r=o,t=0,i="",e=s}return bx(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function o2(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Ix{}const UZ=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class jZ extends Ix{normalizePropertyName(e,t){return _x(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(UZ.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function NY(n,e){return new _e(3005,!1)}())}return o+s}}function a2(n,e,t,r,i,s,o,a,c,h,m,v,w){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:c,preStyleProps:h,postStyleProps:m,totalTime:v,errors:w}}const Cx={};class c2{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function HZ(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,c,h,m){const v=[],w=this.ast.options&&this.ast.options.params||Cx,S=this.buildStyles(r,a&&a.params||Cx,v),M=c&&c.params||Cx,N=this.buildStyles(i,M,v),ne=new Set,W=new Map,de=new Map,Ae="void"===i,Be={params:zZ(M,w),delay:this.ast.options?.delay},it=m?[]:Ex(e,t,this.ast.animation,s,o,S,N,Be,h,v);let q=0;if(it.forEach(H=>{q=Math.max(H.duration+H.delay,q)}),v.length)return a2(t,this._triggerName,r,i,Ae,S,N,[],[],W,de,q,v);it.forEach(H=>{const X=H.element,se=Da(W,X,new Set);H.preStyleProps.forEach($=>se.add($));const ue=Da(de,X,new Set);H.postStyleProps.forEach($=>ue.add($)),X!==t&&ne.add(X)});const L=II(ne.values());return a2(t,this._triggerName,r,i,Ae,S,N,it,L,W,de,q)}}function zZ(n,e){const t=Db(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class $Z{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Db(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=xb(o,i,t));const c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),r.set(a,o)})}),r}}class GZ{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new $Z(i.style,i.options&&i.options.params||{},r))}),l2(this.states,"true","1"),l2(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new c2(e,i,this.states))}),this.fallbackTransition=function qZ(n,e,t){return new c2(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function l2(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const KZ=new DI;class QZ{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=yx(this._driver,t,r,[]);if(r.length)throw function JY(n){return new _e(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=$V(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=Ex(this._driver,t,s,fx,vI,new Map,new Map,r,KZ,i),o.forEach(m=>{const v=Da(a,m.element,new Map);m.postStyleProps.forEach(w=>v.set(w,null))})):(i.push(function eZ(){return new _e(3300,!1)}()),o=[]),i.length)throw function tZ(n){return new _e(3504,!1)}();a.forEach((m,v)=>{m.forEach((w,A)=>{m.set(A,this._driver.computeStyle(v,A,$u))})});const h=Ph(o.map(m=>{const v=a.get(m.element);return this._buildPlayer(m,new Map,v)}));return this._playersById.set(e,h),h.onDestroy(()=>this.destroy(e)),this.players.push(h),h}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function nZ(n){return new _e(3301,!1)}();return t}listen(e,t,r,i){const s=ux(t,"","","");return cx(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const u2="ng-animate-queued",Ax="ng-animate-disabled",eX=[],d2={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},tX={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Jc="__ng_removed";class Tx{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function sX(n){return n??null}(r?e.value:e),r){const s=Db(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Rb="void",Dx=new Tx(Rb);class nX{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vc(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function rZ(n,e){return new _e(3302,!1)}();if(null==r||0==r.length)throw function iZ(n){return new _e(3303,!1)}();if(!function oX(n){return"start"==n||"done"==n}(r))throw function sZ(n,e){return new _e(3400,!1)}();const s=Da(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Da(this._engine.statesByElement,e,new Map);return a.has(t)||(vc(e,bI),vc(e,bI+"-"+t),a.set(t,Dx)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function oZ(n){return new _e(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new Sx(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(vc(e,bI),vc(e,bI+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const h=new Tx(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&h.absorbOptions(c.options),a.set(t,h),c||(c=Dx),h.value!==Rb&&c.value===h.value){if(!function lX(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,h.params)){const M=[],N=s.matchStyles(c.value,c.params,M),ne=s.matchStyles(h.value,h.params,M);M.length?this._engine.reportError(M):this._engine.afterFlush(()=>{zp(e,N),kl(e,ne)})}return}const w=Da(this._engine.playersByElement,e,[]);w.forEach(M=>{M.namespaceId==this.id&&M.triggerName==t&&M.queued&&M.destroy()});let A=s.matchTransition(c.value,h.value,e,h.params),S=!1;if(!A){if(!i)return;A=s.fallbackTransition,S=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:A,fromState:c,toState:h,player:o,isFallbackTransition:S}),S||(vc(e,u2),o.onStart(()=>{R_(e,u2)})),o.onDone(()=>{let M=this.players.indexOf(o);M>=0&&this.players.splice(M,1);const N=this._engine.playersByElement.get(e);if(N){let ne=N.indexOf(o);ne>=0&&N.splice(ne,1)}}),this.players.push(o),w.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,EI,!0);r.forEach(i=>{if(i[Jc])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((c,h)=>{if(o.set(h,c.value),this._triggers.has(h)){const m=this.trigger(e,h,Rb,i);m&&a.push(m)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ph(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const c=this._triggers.get(o).fallbackTransition,h=r.get(o)||Dx,m=new Tx(Rb),v=new Sx(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:h,toState:m,player:v,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Jc];(!s||s===d2)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){vc(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const c=ux(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,cx(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class rX{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new nX(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const h=r.indexOf(c);r.splice(h+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(RI(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!RI(t))return;const s=t[Jc];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vc(e,Ax)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),R_(e,Ax))}removeNode(e,t,r){if(RI(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Jc]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return RI(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,EI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,px,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ph(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Jc];if(t&&t.setForRemoval){if(e[Jc]=d2,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Ax)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)vc(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ph(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function aZ(n){return new _e(3402,!1)}()}_flushAnimations(e,t){const r=new DI,i=[],s=new Map,o=[],a=new Map,c=new Map,h=new Map,m=new Set;this.disabledNodes.forEach(at=>{m.add(at);const dt=this.driver.query(at,".ng-animate-queued",!0);for(let vt=0;vt<dt.length;vt++)m.add(dt[vt])});const v=this.bodyNode,w=Array.from(this.statesByElement.keys()),A=p2(w,this.collectedEnterElements),S=new Map;let M=0;A.forEach((at,dt)=>{const vt=fx+M++;S.set(dt,vt),at.forEach(gn=>vc(gn,vt))});const N=[],ne=new Set,W=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const dt=this.collectedLeaveElements[at],vt=dt[Jc];vt&&vt.setForRemoval&&(N.push(dt),ne.add(dt),vt.hasAnimation?this.driver.query(dt,".ng-star-inserted",!0).forEach(gn=>ne.add(gn)):W.add(dt))}const de=new Map,Ae=p2(w,Array.from(ne));Ae.forEach((at,dt)=>{const vt=vI+M++;de.set(dt,vt),at.forEach(gn=>vc(gn,vt))}),e.push(()=>{A.forEach((at,dt)=>{const vt=S.get(dt);at.forEach(gn=>R_(gn,vt))}),Ae.forEach((at,dt)=>{const vt=de.get(dt);at.forEach(gn=>R_(gn,vt))}),N.forEach(at=>{this.processLeaveNode(at)})});const Be=[],it=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(vt=>{const gn=vt.player,xi=vt.element;if(Be.push(gn),this.collectedEnterElements.length){const gi=xi[Jc];if(gi&&gi.setForMove){if(gi.previousTriggersValues&&gi.previousTriggersValues.has(vt.triggerName)){const id=gi.previousTriggersValues.get(vt.triggerName),Ko=this.statesByElement.get(vt.element);if(Ko&&Ko.has(vt.triggerName)){const sd=Ko.get(vt.triggerName);sd.value=id,Ko.set(vt.triggerName,sd)}}return void gn.destroy()}}const wc=!v||!this.driver.containsElement(v,xi),mi=de.get(xi),zr=S.get(xi),$r=this._buildInstruction(vt,r,zr,mi,wc);if($r.errors&&$r.errors.length)return void it.push($r);if(wc)return gn.onStart(()=>zp(xi,$r.fromStyles)),gn.onDestroy(()=>kl(xi,$r.toStyles)),void i.push(gn);if(vt.isFallbackTransition)return gn.onStart(()=>zp(xi,$r.fromStyles)),gn.onDestroy(()=>kl(xi,$r.toStyles)),void i.push(gn);const cf=[];$r.timelines.forEach(gi=>{gi.stretchStartingKeyframe=!0,this.disabledNodes.has(gi.element)||cf.push(gi)}),$r.timelines=cf,r.append(xi,$r.timelines),o.push({instruction:$r,player:gn,element:xi}),$r.queriedElements.forEach(gi=>Da(a,gi,[]).push(gn)),$r.preStyleProps.forEach((gi,id)=>{if(gi.size){let Ko=c.get(id);Ko||c.set(id,Ko=new Set),gi.forEach((sd,lf)=>Ko.add(lf))}}),$r.postStyleProps.forEach((gi,id)=>{let Ko=h.get(id);Ko||h.set(id,Ko=new Set),gi.forEach((sd,lf)=>Ko.add(lf))})});if(it.length){const at=[];it.forEach(dt=>{at.push(function cZ(n,e){return new _e(3505,!1)}())}),Be.forEach(dt=>dt.destroy()),this.reportError(at)}const q=new Map,L=new Map;o.forEach(at=>{const dt=at.element;r.has(dt)&&(L.set(dt,dt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,q))}),i.forEach(at=>{const dt=at.element;this._getPreviousPlayers(dt,!1,at.namespaceId,at.triggerName,null).forEach(gn=>{Da(q,dt,[]).push(gn),gn.destroy()})});const H=N.filter(at=>g2(at,c,h)),X=new Map;f2(X,this.driver,W,h,$u).forEach(at=>{g2(at,c,h)&&H.push(at)});const ue=new Map;A.forEach((at,dt)=>{f2(ue,this.driver,new Set(at),c,"!")}),H.forEach(at=>{const dt=X.get(at),vt=ue.get(at);X.set(at,new Map([...dt?.entries()??[],...vt?.entries()??[]]))});const $=[],Ec=[],af={};o.forEach(at=>{const{element:dt,player:vt,instruction:gn}=at;if(r.has(dt)){if(m.has(dt))return vt.onDestroy(()=>kl(dt,gn.toStyles)),vt.disabled=!0,vt.overrideTotalTime(gn.totalTime),void i.push(vt);let xi=af;if(L.size>1){let mi=dt;const zr=[];for(;mi=mi.parentNode;){const $r=L.get(mi);if($r){xi=$r;break}zr.push(mi)}zr.forEach($r=>L.set($r,xi))}const wc=this._buildAnimation(vt.namespaceId,gn,q,s,ue,X);if(vt.setRealPlayer(wc),xi===af)$.push(vt);else{const mi=this.playersByElement.get(xi);mi&&mi.length&&(vt.parentPlayer=Ph(mi)),i.push(vt)}}else zp(dt,gn.fromStyles),vt.onDestroy(()=>kl(dt,gn.toStyles)),Ec.push(vt),m.has(dt)&&i.push(vt)}),Ec.forEach(at=>{const dt=s.get(at.element);if(dt&&dt.length){const vt=Ph(dt);at.setRealPlayer(vt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<N.length;at++){const dt=N[at],vt=dt[Jc];if(R_(dt,vI),vt&&vt.hasAnimation)continue;let gn=[];if(a.size){let wc=a.get(dt);wc&&wc.length&&gn.push(...wc);let mi=this.driver.query(dt,px,!0);for(let zr=0;zr<mi.length;zr++){let $r=a.get(mi[zr]);$r&&$r.length&&gn.push(...$r)}}const xi=gn.filter(wc=>!wc.destroyed);xi.length?aX(this,dt,xi):this.processLeaveNode(dt)}return N.length=0,$.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const dt=this.players.indexOf(at);this.players.splice(dt,1)}),at.play()}),$}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const c=!s||s==Rb;a.forEach(h=>{h.queued||!c&&h.triggerName!=i||o.push(h)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const h=c.element,m=h!==s,v=Da(r,h,[]);this._getPreviousPlayers(h,m,o,a,t.toState).forEach(A=>{const S=A.getRealPlayer();S.beforeDestroy&&S.beforeDestroy(),A.destroy(),v.push(A)})}zp(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,c=t.element,h=[],m=new Set,v=new Set,w=t.timelines.map(S=>{const M=S.element;m.add(M);const N=M[Jc];if(N&&N.removedBeforeQueried)return new Tb(S.duration,S.delay);const ne=M!==c,W=function cX(n){const e=[];return m2(n,e),e}((r.get(M)||eX).map(q=>q.getRealPlayer())).filter(q=>!!q.element&&q.element===M),de=s.get(M),Ae=o.get(M),Be=$V(this._normalizer,S.keyframes,de,Ae),it=this._buildPlayer(S,Be,W);if(S.subTimeline&&i&&v.add(M),ne){const q=new Sx(e,a,M);q.setRealPlayer(it),h.push(q)}return it});h.forEach(S=>{Da(this.playersByQueriedElement,S.element,[]).push(S),S.onDone(()=>function iX(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,S.element,S))}),m.forEach(S=>vc(S,ZV));const A=Ph(w);return A.onDestroy(()=>{m.forEach(S=>R_(S,ZV)),kl(c,t.toStyles)}),v.forEach(S=>{Da(i,S,[]).push(A)}),A}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Tb(e.duration,e.delay)}}class Sx{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Tb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>cx(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Da(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function RI(n){return n&&1===n.nodeType}function h2(n,e){const t=n.style.display;return n.style.display=e??"none",t}function f2(n,e,t,r,i){const s=[];t.forEach(c=>s.push(h2(c)));const o=[];r.forEach((c,h)=>{const m=new Map;c.forEach(v=>{const w=e.computeStyle(h,v,i);m.set(v,w),(!w||0==w.length)&&(h[Jc]=tX,o.push(h))}),n.set(h,m)});let a=0;return t.forEach(c=>h2(c,s[a++])),o}function p2(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let c=s.get(a);if(c)return c;const h=a.parentNode;return c=t.has(h)?h:i.has(h)?1:o(h),s.set(a,c),c}return e.forEach(a=>{const c=o(a);1!==c&&t.get(c).push(a)}),t}function vc(n,e){n.classList?.add(e)}function R_(n,e){n.classList?.remove(e)}function aX(n,e,t){Ph(t).onDone(()=>n.processLeaveNode(e))}function m2(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HV?m2(r.players,e):e.push(r)}}function g2(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class PI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new rX(e,t,r),this._timelineEngine=new QZ(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const c=[],m=yx(this._driver,s,c,[]);if(c.length)throw function ZY(n,e){return new _e(3404,!1)}();a=function WZ(n,e,t){return new GZ(n,e,t)}(i,m,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=WV(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=WV(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let dX=(()=>{class n{static{this.initialStylesByElement=new WeakMap}constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&kl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(kl(this._element,this._initialStyles),this._endStyles&&(kl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(zp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(zp(this._element,this._endStyles),this._endStyles=null),kl(this._element,this._initialStyles),this._state=3)}}return n})();function xx(n){let e=null;return n.forEach((t,r)=>{(function hX(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class _2{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:t2(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class fX{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return qV(e,t)}getParentElement(e){return dx(e)}query(e,t,r){return KV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const h=new Map,m=o.filter(A=>A instanceof _2);(function bZ(n,e){return 0===n||0===e})(r,i)&&m.forEach(A=>{A.currentSnapshot.forEach((S,M)=>h.set(M,S))});let v=function _Z(n){return n.length?n[0]instanceof Map?n:n.map(e=>XV(e)):[]}(t).map(A=>Mh(A));v=function EZ(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,t2(n,a)))}}return e}(e,v,h);const w=function uX(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=xx(e[0]),e.length>1&&(r=xx(e[e.length-1]))):e instanceof Map&&(t=xx(e)),t||r?new dX(n,t,r):null}(e,v);return new _2(e,v,c,w)}}let pX=(()=>{class n extends LV{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Ft.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BV(t):t;return y2(this._renderer,null,r,"register",[i]),new mX(r,this._renderer)}static{this.\u0275fac=function(r){return new(r||n)(he(Pp),he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class mX extends SY{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new gX(this._id,e,t||{},this._renderer)}}class gX{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return y2(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function y2(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const v2="@.disabled";let _X=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let m=this._rendererCache.get(s);return m||(m=new b2("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,m)),m}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const c=m=>{Array.isArray(m)?m.forEach(c):this.engine.registerTrigger(o,a,t,m.name,m)};return r.data.animation.forEach(c),new yX(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(r){return new(r||n)(he(Pp),he(PI),he(nt))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();class b2{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==v2?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class yX extends b2{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==v2?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function vX(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function bX(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}const E2=[{provide:LV,useClass:pX},{provide:Ix,useFactory:function wX(){return new jZ}},{provide:PI,useClass:(()=>{class n extends PI{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(hx),he(Ix),he(Th))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})()},{provide:Pp,useFactory:function IX(n,e,t){return new _X(n,e,t)},deps:[PS,PI,nt]}],Rx=[{provide:hx,useFactory:()=>new fX},{provide:gh,useValue:"BrowserAnimations"},...E2],w2=[{provide:hx,useClass:QV},{provide:gh,useValue:"NoopAnimations"},...E2];let CX=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?w2:Rx}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({providers:Rx,imports:[OL]})}}return n})();const TX=new ke("mat-sanity-checks",{providedIn:"root",factory:function AX(){return!0}});let Ol=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!zS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static{this.\u0275fac=function(r){return new(r||n)(he(bQ),he(TX,8),he(In))}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[bb,bb]})}}return n})();function DX(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=mc(e)}constructor(...e){super(...e),this._disabled=!1}}}function A2(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function SX(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=mc(e)}constructor(...e){super(...e),this._disableRipple=!1}}}class RX{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const T2=Vp({passive:!0,capture:!0});class PX{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=gc(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,T2)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,T2)))}}const D2={enterDuration:225,exitDuration:150},S2=Vp({passive:!0,capture:!0}),x2=["mousedown","touchstart"],R2=["mouseup","mouseleave","touchend","touchcancel"];class kI{static{this._eventManager=new PX}constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=rs(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...D2,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function kX(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,h=s.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=a-o+"px",m.style.top=c-o+"px",m.style.height=2*o+"px",m.style.width=2*o+"px",null!=r.color&&(m.style.backgroundColor=r.color),m.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(m);const v=window.getComputedStyle(m),A=v.transitionDuration,S="none"===v.transitionProperty||"0s"===A||"0s, 0s"===A||0===i.width&&0===i.height,M=new RX(this,m,r,S);m.style.transform="scale3d(1, 1, 1)",M.state=0,r.persistent||(this._mostRecentTransientRipple=M);let N=null;return!S&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ne=()=>this._finishRippleTransition(M),W=()=>this._destroyRipple(M);m.addEventListener("transitionend",ne),m.addEventListener("transitioncancel",W),N={onTransitionEnd:ne,onTransitionCancel:W}}),this._activeRipples.set(M,N),(S||!h)&&this._finishRippleTransition(M),M}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...D2,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=rs(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,x2.forEach(r=>{kI._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{R2.forEach(t=>{this._triggerElement.addEventListener(t,this,S2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=qS(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!KS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(x2.forEach(t=>kI._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&R2.forEach(t=>e.removeEventListener(t,this,S2)))}}const P2=new ke("mat-ripple-global-options");let OX=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new kI(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static{this.\u0275fac=function(r){return new(r||n)(be(Vr),be(nt),be(Ta),be(P2,8),be(gh,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&wa("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return n})(),NX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[Ol,Ol]})}}return n})();const M2={capture:!0},k2=["focus","click","mouseenter","touchstart"],Px="mat-ripple-loader-uninitialized",Mx="mat-ripple-loader-class-name",O2="mat-ripple-loader-centered",OI="mat-ripple-loader-disabled";let FX=(()=>{class n{constructor(){this._document=Ge(In,{optional:!0}),this._animationMode=Ge(gh,{optional:!0}),this._globalRippleOptions=Ge(P2,{optional:!0}),this._platform=Ge(Ta),this._ngZone=Ge(nt),this._hosts=new Map,this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const i=t.target.closest(`[${Px}]`);i&&this._createRipple(i)},this._ngZone.runOutsideAngular(()=>{for(const t of k2)this._document?.addEventListener(t,this._onInteraction,M2)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of k2)this._document?.removeEventListener(r,this._onInteraction,M2)}configureRipple(t,r){t.setAttribute(Px,""),(r.className||!t.hasAttribute(Mx))&&t.setAttribute(Mx,r.className||""),r.centered&&t.setAttribute(O2,""),r.disabled&&t.setAttribute(OI,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const i=this._hosts.get(t);i?i.disabled=r:r?t.setAttribute(OI,""):t.removeAttribute(OI)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(Mx)),t.append(i);const s=new OX(new Vr(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute(O2),s.disabled=t.hasAttribute(OI),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(Px),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const LX=["mat-button",""],VX=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],BX=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],UX=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],jX=A2(DX(SX(class{constructor(n){this._elementRef=n}})));let HX=(()=>{class n extends jX{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=mc(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=mc(t),this._updateRippleDisabled()}constructor(t,r,i,s){super(t),this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=Ge(vQ),this._rippleLoader=Ge(FX),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const o=t.nativeElement.classList;for(const a of UX)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(c=>{o.add(c)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(r){ZT()}}static{this.\u0275dir=Ye({type:n,features:[Fn]})}}return n})(),kx=(()=>{class n extends HX{constructor(t,r,i,s){super(t,r,i,s)}static{this.\u0275fac=function(r){return new(r||n)(be(Vr),be(Ta),be(nt),be(gh,8))}}static{this.\u0275cmp=Zr({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(r,i){2&r&&(po("disabled",i.disabled||null),wa("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Fn],attrs:LX,ngContentSelectors:BX,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(m_(VX),Vi(0,"span",0),Ea(1),yt(2,"span",1),Ea(3,1),Ct(),Ea(4,2),Vi(5,"span",2)(6,"span",3)),2&r&&wa("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return n})(),N2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[Ol,NX,Ol]})}}return n})();const WX=["*"],YX=new ke("MAT_CARD_CONFIG");let Ox=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static{this.\u0275fac=function(r){return new(r||n)(be(YX,8))}}static{this.\u0275cmp=Zr({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){2&r&&wa("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:WX,decls:1,vars:0,template:function(r,i){1&r&&(m_(),Ea(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return n})(),ZX=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[Ol,tI,Ol]})}}return n})();const XX=["*",[["mat-toolbar-row"]]],JX=["*","mat-toolbar-row"],eJ=A2(class{constructor(n){this._elementRef=n}});let tJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}}return n})(),nJ=(()=>{class n extends eJ{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static{this.\u0275fac=function(r){return new(r||n)(be(Vr),be(Ta),be(In))}}static{this.\u0275cmp=Zr({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,i,s){if(1&r&&v_(s,tJ,5),2&r){let o;Ia(o=Ca())&&(i._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(r,i){2&r&&wa("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Fn],ngContentSelectors:JX,decls:2,vars:0,template:function(r,i){1&r&&(m_(XX),Ea(0),Ea(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}}return n})(),rJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[Ol,Ol]})}}return n})();class Nx{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class iJ extends Nx{constructor(e,t,r,i,s){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=s}}class sJ extends Nx{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class oJ extends Nx{constructor(e){super(),this.element=e instanceof Vr?e.nativeElement:e}}class aJ{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof iJ?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof sJ?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof oJ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class cJ extends aJ{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||J.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let F2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})();const L2=E7();class lJ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ui(-this._previousScrollPosition.left),e.style.top=Ui(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",o=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),L2&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),L2&&(r.scrollBehavior=s,i.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class uJ{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yo(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class V2{enable(){}disable(){}attach(){}}function Fx(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function B2(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class dJ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Fx(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let hJ=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new V2,this.close=o=>new uJ(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new lJ(this._viewportRuler,this._document),this.reposition=o=>new dJ(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(r){return new(r||n)(he(qL),he(WS),he(nt),he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class fJ{constructor(e){if(this.scrollStrategy=new V2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class pJ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let U2=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(r){return new(r||n)(he(In))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mJ=(()=>{class n extends U2{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(i)):a.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(nt,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gJ=(()=>{class n extends U2{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=gc(s)},this._clickListener=s=>{const o=gc(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let h=c.length-1;h>-1;h--){const m=c[h];if(m._outsidePointerEvents.observers.length<1||!m.hasAttached())continue;if(m.overlayElement.contains(o)||m.overlayElement.contains(a))break;const v=m._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>v.next(s)):v.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(Ta),he(nt,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),j2=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||zS()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),zS()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static{this.\u0275fac=function(r){return new(r||n)(he(In),he(Ta))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class _J{constructor(e,t,r,i,s,o,a,c,h,m=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=h,this._animationsDisabled=m,this._backdropElement=null,this._backdropClick=new Y,this._attachments=new Y,this._detachments=new Y,this._locationChanges=Bt.EMPTY,this._backdropClickHandler=v=>this._backdropClick.next(v),this._backdropTransitionendHandler=v=>{this._disposeBackdrop(v.target)},this._keydownEvents=new Y,this._outsidePointerEvents=new Y,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Xc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Ui(this._config.width),e.height=Ui(this._config.height),e.minWidth=Ui(this._config.minWidth),e.minHeight=Ui(this._config.minHeight),e.maxWidth=Ui(this._config.maxWidth),e.maxHeight=Ui(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=gb(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(xh(U(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const H2="cdk-overlay-connected-position-bounding-box",yJ=/([A-Za-z%]+)$/;class vJ{get positions(){return this._preferredPositions}constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Y,this._resizeSubscription=Bt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(H2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,i,a),h=this._getOverlayPoint(c,t,a),m=this._getOverlayFit(h,t,r,a);if(m.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(m,h,r)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<m.visibleArea)&&(o={overlayFit:m,overlayPoint:h,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const h of s){const m=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);m>c&&(c=m,a=h)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Wp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(H2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i="start"==r.originX?o:a}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=$2(t);let{x:o,y:a}=e,c=this._getOffset(i,"x"),h=this._getOffset(i,"y");c&&(o+=c),h&&(a+=h);let w=0-a,A=a+s.height-r.height,S=this._subtractOverflows(s.width,0-o,o+s.width-r.width),M=this._subtractOverflows(s.height,w,A),N=S*M;return{visibleArea:N,isCompletelyWithinViewport:s.width*s.height===N,fitsInViewportVertically:M===s.height,fitsInViewportHorizontally:S==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,o=z2(this._overlayRef.getConfig().minHeight),a=z2(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=i)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=$2(t),s=this._viewportRect,o=Math.max(e.x+i.width-s.width,0),a=Math.max(e.y+i.height-s.height,0),c=Math.max(s.top-r.top-e.y,0),h=Math.max(s.left-r.left-e.x,0);let m=0,v=0;return m=i.width<=s.width?h||-o:e.x<this._viewportMargin?s.left-r.left-e.x:0,v=i.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:m,y:v},{x:e.x+m,y:e.y+v}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new pJ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,o,a,m,v,w;if("top"===t.overlayY)o=e.y,s=r.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=r.height-e.y+2*this._viewportMargin,s=r.height-a+this._viewportMargin;else{const A=Math.min(r.bottom-e.y+r.top,e.y),S=this._lastBoundingBoxSize.height;s=2*A,o=e.y-A,s>S&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-S/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)w=r.width-e.x+this._viewportMargin,m=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)v=e.x,m=r.right-e.x;else{const A=Math.min(r.right-e.x+r.left,e.x),S=this._lastBoundingBoxSize.width;m=2*A,v=e.x-A,m>S&&!this._isInitialRender&&!this._growAfterOpen&&(v=e.x-S/2)}return{top:o,left:v,bottom:a,right:w,width:m,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;i.height=Ui(r.height),i.top=Ui(r.top),i.bottom=Ui(r.bottom),i.width=Ui(r.width),i.left=Ui(r.left),i.right=Ui(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=Ui(s)),o&&(i.maxWidth=Ui(o))}this._lastBoundingBoxSize=r,Wp(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Wp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Wp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(i){const m=this._viewportRuler.getViewportScrollPosition();Wp(r,this._getExactOverlayY(t,e,m)),Wp(r,this._getExactOverlayX(t,e,m))}else r.position="static";let a="",c=this._getOffset(t,"x"),h=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),h&&(a+=`translateY(${h}px)`),r.transform=a.trim(),o.maxHeight&&(i?r.maxHeight=Ui(o.maxHeight):s&&(r.maxHeight="")),o.maxWidth&&(i?r.maxWidth=Ui(o.maxWidth):s&&(r.maxWidth="")),Wp(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=Ui(s.y),i}_getExactOverlayX(e,t,r){let o,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=Ui(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:B2(e,r),isOriginOutsideView:Fx(e,r),isOverlayClipped:B2(t,r),isOverlayOutsideView:Fx(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gb(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Vr)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Wp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function z2(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(yJ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function $2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const W2="cdk-global-overlay-wrapper";class bJ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(W2),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:o,maxHeight:a}=r,c=!("100%"!==i&&"100vw"!==i||o&&"100%"!==o&&"100vw"!==o),h=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),m=this._xPosition,v=this._xOffset,w="rtl"===this._overlayRef.getConfig().direction;let A="",S="",M="";c?M="flex-start":"center"===m?(M="center",w?S=v:A=v):w?"left"===m||"end"===m?(M="flex-end",A=v):("right"===m||"start"===m)&&(M="flex-start",S=v):"left"===m||"start"===m?(M="flex-start",A=v):("right"===m||"end"===m)&&(M="flex-end",S=v),e.position=this._cssPosition,e.marginLeft=c?"0":A,e.marginTop=h?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":S,t.justifyContent=M,t.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(W2),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let EJ=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new bJ}flexibleConnectedTo(t){return new vJ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(r){return new(r||n)(he(WS),he(In),he(Ta),he(j2))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),wJ=0,G2=(()=>{class n{constructor(t,r,i,s,o,a,c,h,m,v,w,A){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=h,this._directionality=m,this._location=v,this._outsideClickDispatcher=w,this._animationsModuleType=A}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),o=new fJ(t);return o.direction=o.direction||this._directionality.value,new _J(s,r,i,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+wJ++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Th)),new cJ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(r){return new(r||n)(he(hJ),he(j2),he(Rp),he(EJ),he(mJ),he(J),he(nt),he(In),he($S),he($w),he(gJ),he(gh,8))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const AJ={provide:new ke("cdk-connected-overlay-scroll-strategy"),deps:[G2],useFactory:function CJ(n){return()=>n.scrollStrategies.reposition()}};let TJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({providers:[G2,AJ],imports:[bb,F2,KL,KL]})}}return n})(),xJ=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[TJ,F2,tI,N2,Ol,Ol]})}}return n})();const Mb=O(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function q2(n){return new It(e=>{tr(n()).subscribe(e)})}function kb(n,e){const t=k(n)?n:()=>n,r=i=>i.error(t());return new It(e?i=>e.schedule(r,0,i):r)}function Lx(){return te((n,e)=>{let t=null;n._refCount++;const r=pe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class K2 extends It{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ie(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bt;const t=this.getSubject();e.add(this.source.subscribe(pe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bt.EMPTY)}return e}refCount(){return Lx()(this)}}function NI(n){return te((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Q2(n=MJ){return te((e,t)=>{let r=!1;e.subscribe(pe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function MJ(){return new Mb}function kh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yo((i,s)=>n(i,s,r)):Gn,Xc(1),t?NI(e):Q2(()=>new Mb))}function Ob(n,e){return k(e)?nr(n,e,1):nr(n,1)}function Gp(n){return te((e,t)=>{let s,r=null,i=!1;r=e.subscribe(pe(t,void 0,void 0,o=>{s=tr(n(o,Gp(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function FI(n,e){return te(function kJ(n,e,t,r,i){return(s,o)=>{let a=t,c=e,h=0;s.subscribe(pe(o,m=>{const v=h++;c=a?n(c,m,v):(a=!0,m),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}(n,e,arguments.length>=2,!0))}function Vx(n){return n<=0?()=>dr:te((e,t)=>{let r=[];e.subscribe(pe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Bx(n){return te((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",Nb=Symbol("RouteTitle");class FJ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function P_(n){return new FJ(n)}function LJ(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Nl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Y2(n[i],e[i]))return!1;return!0}function Y2(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Z2(n){return n.length>0?n[n.length-1]:null}function Oh(n){return function PJ(n){return!!n&&(n instanceof It||k(n.lift)&&k(n.subscribe))}(n)?n:Xv(n)?V(Promise.resolve(n)):ie(n)}const BJ={exact:function eB(n,e,t){if(!qp(n.segments,e.segments)||!LI(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!eB(n.children[r],e.children[r],t))return!1;return!0},subset:tB},X2={exact:function UJ(n,e){return Nl(n,e)},subset:function jJ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Y2(n[t],e[t]))},ignored:()=>!0};function J2(n,e,t){return BJ[t.paths](n.root,e.root,t.matrixParams)&&X2[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function tB(n,e,t){return nB(n,e,e.segments,t)}function nB(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!qp(i,t)||e.hasChildren()||!LI(i,t,r))}if(n.segments.length===t.length){if(!qp(n.segments,t)||!LI(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!tB(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(qp(n.segments,i)&&LI(n.segments,i,r)&&n.children[Xt])&&nB(n.children[Xt],e,s,r)}}function LI(n,e,t){return e.every((r,i)=>X2[t](n[i].parameters,r.parameters))}class M_{constructor(e=new Xn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=P_(this.queryParams)),this._queryParamMap}toString(){return $J.serialize(this)}}class Xn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return VI(this)}}class Fb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=P_(this.parameters)),this._parameterMap}toString(){return sB(this)}}function qp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Lb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return new Ux},providedIn:"root"})}}return n})();class Ux{parse(e){const t=new tee(e);return new M_(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Vb(e.root,!0)}`,r=function qJ(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${BI(t)}=${BI(i)}`).join("&"):`${BI(t)}=${BI(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function WJ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $J=new Ux;function VI(n){return n.segments.map(e=>sB(e)).join("/")}function Vb(n,e){if(!n.hasChildren())return VI(n);if(e){const t=n.children[Xt]?Vb(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Xt&&r.push(`${i}:${Vb(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function zJ(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Xt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Xt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===Xt?[Vb(n.children[Xt],!1)]:[`${i}:${Vb(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${VI(n)}/${t[0]}`:`${VI(n)}/(${t.join("//")})`}}function rB(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function BI(n){return rB(n).replace(/%3B/gi,";")}function jx(n){return rB(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function UI(n){return decodeURIComponent(n)}function iB(n){return UI(n.replace(/\+/g,"%20"))}function sB(n){return`${jx(n.path)}${function GJ(n){return Object.keys(n).map(e=>`;${jx(e)}=${jx(n[e])}`).join("")}(n.parameters)}`}const KJ=/^[^\/()?;#]+/;function Hx(n){const e=n.match(KJ);return e?e[0]:""}const QJ=/^[^\/()?;=#]+/,ZJ=/^[^=?&#]+/,JJ=/^[^&#]+/;class tee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xn([],{}):new Xn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Xn(e,t)),r}parseSegment(){const e=Hx(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new Fb(UI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function YJ(n){const e=n.match(QJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Hx(this.remaining);i&&(r=i,this.capture(r))}e[UI(t)]=UI(r)}parseQueryParam(e){const t=function XJ(n){const e=n.match(ZJ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function eee(n){const e=n.match(JJ);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=iB(t),s=iB(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hx(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new _e(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Xt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Xt]:new Xn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}}function oB(n){return n.segments.length>0?new Xn([],{[Xt]:n}):n}function aB(n){const e={};for(const r of Object.keys(n.children)){const s=aB(n.children[r]);if(r===Xt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function nee(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Xn(n.segments.concat(e.segments),e.children)}return n}(new Xn(n.segments,e))}function Kp(n){return n instanceof M_}function cB(n){let e;const i=oB(function t(s){const o={};for(const c of s.children){const h=t(c);o[c.outlet]=h}const a=new Xn(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function lB(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return zx(i,i,i,t,r);const s=function iee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new dB(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([c,h])=>{a[c]="string"==typeof h?h.split("/"):h}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new dB(t,e,r)}(e);if(s.toRoot())return zx(i,i,new Xn([],{}),t,r);const o=function see(n,e,t){if(n.isAbsolute)return new HI(e,!0,0);if(!t)return new HI(e,!1,NaN);if(null===t.parent)return new HI(t,!0,0);const r=jI(n.commands[0])?0:1;return function oee(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new _e(4005,!1);i=r.segments.length}return new HI(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?Ub(o.segmentGroup,o.index,s.commands):hB(o.segmentGroup,o.index,s.commands);return zx(i,o.segmentGroup,a,t,r)}function jI(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bb(n){return"object"==typeof n&&null!=n&&n.outlets}function zx(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([c,h])=>{s[c]=Array.isArray(h)?h.map(m=>`${m}`):`${h}`}),o=n===e?t:uB(n,e,t);const a=oB(aB(o));return new M_(a,s,i)}function uB(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:uB(s,e,t)}),new Xn(n.segments,r)}class dB{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&jI(r[0]))throw new _e(4003,!1);const i=r.find(Bb);if(i&&i!==Z2(r))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class HI{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function hB(n,e,t){if(n||(n=new Xn([],{})),0===n.segments.length&&n.hasChildren())return Ub(n,e,t);const r=function cee(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Bb(a))break;const c=`${a}`,h=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&h&&"object"==typeof h&&void 0===h.outlets){if(!pB(c,h,o))return s;r+=2}else{if(!pB(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Xn(n.segments.slice(0,r.pathIndex),{});return s.children[Xt]=new Xn(n.segments.slice(r.pathIndex),n.children),Ub(s,0,i)}return r.match&&0===i.length?new Xn(n.segments,{}):r.match&&!n.hasChildren()?$x(n,e,t):r.match?Ub(n,0,i):$x(n,e,t)}function Ub(n,e,t){if(0===t.length)return new Xn(n.segments,{});{const r=function aee(n){return Bb(n[0])?n[0].outlets:{[Xt]:n}}(t),i={};if(Object.keys(r).some(s=>s!==Xt)&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const s=Ub(n.children[Xt],e,t);return new Xn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=hB(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Xn(n.segments,i)}}function $x(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Bb(s)){const c=lee(s.outlets);return new Xn(r,c)}if(0===i&&jI(t[0])){r.push(new Fb(n.segments[e].path,fB(t[0]))),i++;continue}const o=Bb(s)?s.outlets[Xt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&jI(a)?(r.push(new Fb(o,fB(a))),i+=2):(r.push(new Fb(o,{})),i++)}return new Xn(r,{})}function lee(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=$x(new Xn([],{}),0,r))}),e}function fB(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pB(n,e,t){return n==t.path&&Nl(e,t.parameters)}const jb="imperative";class Fl{constructor(e,t){this.id=e,this.url=t}}class zI extends Fl{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Nh extends Fl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hb extends Fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class k_ extends Fl{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class $I extends Fl{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mB extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uee extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dee extends Fl{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hee extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fee extends Fl{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pee{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class mee{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gee{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _ee{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yee{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vee{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gB{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Wx{}class Gx{constructor(e){this.url=e}}class bee{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new zb,this.attachRef=null}}let zb=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bee,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();class _B{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qx(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Kx(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Kx(e,this._root).map(t=>t.value)}}function qx(n,e){if(n===e.value)return e;for(const t of e.children){const r=qx(n,t);if(r)return r}return null}function Kx(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Kx(n,t);if(r.length)return r.unshift(e),r}return[]}class Gu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function O_(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class yB extends _B{constructor(e,t){super(e),this.snapshot=t,Qx(this,e)}toString(){return this.snapshot.toString()}}function vB(n,e){const t=function Eee(n,e){const o=new WI([],{},{},"",{},Xt,e,null,{});return new EB("",new Gu(o,[]))}(0,e),r=new G([new Fb("",{})]),i=new G({}),s=new G({}),o=new G({}),a=new G(""),c=new Qp(r,i,o,a,s,Xt,e,t.root);return c.snapshot=t.root,new yB(new Gu(c,[]),t)}class Qp{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Me(h=>h[Nb]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Me(e=>P_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Me(e=>P_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bB(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function wee(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class WI{get title(){return this.data?.[Nb]}constructor(e,t,r,i,s,o,a,c,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=P_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=P_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class EB extends _B{constructor(e,t){super(t),this.url=e,Qx(this,t)}toString(){return wB(this._root)}}function Qx(n,e){e.value._routerState=n,e.children.forEach(t=>Qx(n,t))}function wB(n){const e=n.children.length>0?` { ${n.children.map(wB).join(", ")} } `:"";return`${n.value}${e}`}function Yx(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nl(e.params,t.params)||n.paramsSubject.next(t.params),function VJ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Nl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zx(n,e){const t=Nl(n.params,e.params)&&function HJ(n,e){return qp(n,e)&&n.every((t,r)=>Nl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Zx(n.parent,e.parent))}let GI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=Ge(zb),this.location=Ge(hc),this.changeDetector=Ge(w_),this.environmentInjector=Ge(fo),this.inputBinder=Ge(qI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new _e(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Iee(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xi]})}}return n})();class Iee{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qp?this.route:e===zb?this.childContexts:this.parent.get(e,t)}}const qI=new ke("");let IB=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=hI([r.queryParams,r.params,r.data]).pipe(Ke(([s,o,a],c)=>(a={...s,...o,...a},0===c?ie(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function S6(n){const e=on(n);if(!e)return null;const t=new qv(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function $b(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Aee(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $b(n,r,i);return $b(n,r)})}(n,e,t);return new Gu(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>$b(n,a)),o}}const r=function Tee(n){return new Qp(new G(n.url),new G(n.params),new G(n.queryParams),new G(n.fragment),new G(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>$b(n,s));return new Gu(r,i)}}const Xx="ngNavigationCancelingError";function CB(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Kp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AB(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function AB(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Xx]=!0,r.cancellationCode=e,t&&(r.url=t),r}function TB(n){return n&&n[Xx]}let DB=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Zr({type:n,selectors:[["ng-component"]],standalone:!0,features:[bN],decls:1,vars:0,template:function(r,i){1&r&&Vi(0,"router-outlet")},dependencies:[GI],encapsulation:2})}}return n})();function Jx(n){const e=n.children&&n.children.map(Jx),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=DB),t}function el(n){return n.outlet||Xt}function Wb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Oee{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yx(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=O_(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=O_(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=O_(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=O_(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new vee(s.value.snapshot))}),e.children.length&&this.forwardEvent(new _ee(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Yx(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Yx(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Wb(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class SB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class KI{constructor(e,t){this.component=e,this.route=t}}function Nee(n,e,t){const r=n._root;return Gb(r,e?e._root:null,t,[r.value])}function N_(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function xm(n){return null!==Jo(n)}(n)?e.get(n):n:r}function Gb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=O_(e);return n.children.forEach(o=>{(function Lee(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function Vee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!qp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qp(n.url,e.url)||!Nl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zx(n,e)||!Nl(n.queryParams,e.queryParams);default:return!Zx(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new SB(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Gb(n,e,s.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new KI(a.outlet.component,o))}else o&&qb(e,a,i),i.canActivateChecks.push(new SB(r)),Gb(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>qb(a,t.getContext(o),i)),i}function qb(n,e,t){const r=O_(n),i=n.value;Object.entries(r).forEach(([s,o])=>{qb(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new KI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Kb(n){return"function"==typeof n}function xB(n){return n instanceof Mb||"EmptyError"===n?.name}const QI=Symbol("INITIAL_VALUE");function F_(){return Ke(n=>hI(n.map(e=>e.pipe(Xc(1),Rh(QI)))).pipe(Me(e=>{for(const t of e)if(!0!==t){if(t===QI)return QI;if(!1===t||t instanceof M_)return t}return!0}),yo(e=>e!==QI),Xc(1)))}function RB(n){return function os(...n){return Fs(n)}(is(e=>{if(Kp(e))throw CB(0,e)}),Me(e=>!0===e))}class YI{constructor(e){this.segmentGroup=e||null}}class PB{constructor(e){this.urlTree=e}}function L_(n){return kb(new YI(n))}function MB(n){return kb(new PB(n))}class ite{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new _e(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ie(r);if(i.numberOfChildren>1||!i.children[Xt])return kb(new _e(4e3,!1));i=i.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new M_(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Xn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new _e(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const eR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ste(n,e,t,r,i){const s=tR(n,e,t);return s.matched?(r=function See(n,e){return n.providers&&!n._injector&&(n._injector=PD(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function tte(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ie(i.map(o=>{const a=N_(o,n);return Oh(function $ee(n){return n&&Kb(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(F_(),RB()):ie(!0)}(r,e,t).pipe(Me(o=>!0===o?s:{...eR}))):ie(s)}function tR(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...eR}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||LJ)(t,n,e);if(!i)return{...eR};const s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function kB(n,e,t,r){return t.length>0&&function cte(n,e,t){return t.some(r=>ZI(n,e,r)&&el(r)!==Xt)}(n,t,r)?{segmentGroup:new Xn(e,ate(r,new Xn(t,n.children))),slicedSegments:[]}:0===t.length&&function lte(n,e,t){return t.some(r=>ZI(n,e,r))}(n,t,r)?{segmentGroup:new Xn(n.segments,ote(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xn(n.segments,n.children),slicedSegments:t}}function ote(n,e,t,r,i){const s={};for(const o of r)if(ZI(n,t,o)&&!i[el(o)]){const a=new Xn([],{});s[el(o)]=a}return{...i,...s}}function ate(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&el(r)!==Xt){const i=new Xn([],{});t[el(r)]=i}return t}function ZI(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class fte{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new ite(this.urlSerializer,this.urlTree)}noMatchError(e){return new _e(4002,!1)}recognize(){const e=kB(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe(Gp(t=>{if(t instanceof PB)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof YI?this.noMatchError(t):t}),Me(t=>{const r=new WI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),i=new Gu(r,t),s=new EB("",i),o=function ree(n,e,t=null,r=null){return lB(cB(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Xt).pipe(Gp(r=>{throw r instanceof YI?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=bB(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return V(i).pipe(Ob(s=>{const o=r.children[s],a=function Mee(n,e){const t=n.filter(r=>el(r)===e);return t.push(...n.filter(r=>el(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),FI((s,o)=>(s.push(...o),s)),NI(null),function OJ(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yo((i,s)=>n(i,s,r)):Gn,Vx(1),t?NI(e):Q2(()=>new Mb))}(),nr(s=>{if(null===s)return L_(r);const o=OB(s);return function pte(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),ie(o)}))}processSegment(e,t,r,i,s,o){return V(t).pipe(Ob(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(Gp(c=>{if(c instanceof YI)return ie(null);throw c}))),kh(a=>!!a),Gp(a=>{if(xB(a))return function dte(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?ie([]):L_(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function ute(n,e,t,r){return!!(el(n)===r||r!==Xt&&ZI(e,t,n))&&("**"===n.path||tR(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):L_(i):L_(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?MB(s):this.applyRedirects.lineralizeSegments(r,s).pipe(nr(o=>{const a=new Xn(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:c,remainingSegments:h,positionalParamSegments:m}=tR(t,i,s);if(!a)return L_(t);const v=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,m);return i.redirectTo.startsWith("/")?MB(v):this.applyRedirects.lineralizeSegments(i,v).pipe(nr(w=>this.processSegment(e,r,t,w.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const c=i.length>0?Z2(i).parameters:{};a=ie({snapshot:new WI(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NB(r),el(r),r.component??r._loadedComponent??null,r,FB(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=ste(t,r,i,e).pipe(Me(({matched:c,consumedSegments:h,remainingSegments:m,parameters:v})=>c?{snapshot:new WI(h,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,NB(r),el(r),r.component??r._loadedComponent??null,r,FB(r)),consumedSegments:h,remainingSegments:m}:null));return a.pipe(Ke(c=>null===c?L_(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Ke(({routes:h})=>{const m=r._loadedInjector??e,{snapshot:v,consumedSegments:w,remainingSegments:A}=c,{segmentGroup:S,slicedSegments:M}=kB(t,w,A,h);if(0===M.length&&S.hasChildren())return this.processChildren(m,h,S).pipe(Me(ne=>null===ne?null:[new Gu(v,ne)]));if(0===h.length&&0===M.length)return ie([new Gu(v,[])]);const N=el(r)===s;return this.processSegment(m,h,S,M,N?Xt:s,!0).pipe(Me(ne=>[new Gu(v,ne)]))}))))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):function ete(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ie(!0):ie(i.map(o=>{const a=N_(o,n);return Oh(function Uee(n){return n&&Kb(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(F_(),RB())}(e,t,r).pipe(nr(i=>i?this.configLoader.loadChildren(e,t).pipe(is(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function rte(n){return kb(AB(!1,3))}())):ie({routes:[],injector:e})}}function mte(n){const e=n.value.routeConfig;return e&&""===e.path}function OB(n){const e=[],t=new Set;for(const r of n){if(!mte(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=OB(r.children);e.push(new Gu(r.value,i))}return e.filter(r=>!t.has(r))}function NB(n){return n.data||{}}function FB(n){return n.resolve||{}}function LB(n){return"string"==typeof n.title||null===n.title}function nR(n){return Ke(e=>{const t=n(e);return t?V(t).pipe(Me(()=>e)):ie(e)})}const V_=new ke("ROUTES");let rR=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Ge(hF)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oh(t.loadComponent()).pipe(Me(VB),is(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Bx(()=>{this.componentLoaders.delete(t)})),i=new K2(r,()=>new Y).pipe(Lx());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function wte(n,e,t,r){return Oh(n.loadChildren()).pipe(Me(VB),nr(i=>i instanceof yN||Array.isArray(i)?ie(i):V(e.compileModuleAsync(i))),Me(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(t).injector,o=s.get(V_,[],{optional:!0,self:!0}).flat()),{routes:o.map(Jx),injector:s}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Bx(()=>{this.childrenLoaders.delete(r)})),o=new K2(s,()=>new Y).pipe(Lx());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VB(n){return function Ite(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let XI=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Y,this.transitionAbortSubject=new Y,this.configLoader=Ge(rR),this.environmentInjector=Ge(fo),this.urlSerializer=Ge(Lb),this.rootContexts=Ge(zb),this.inputBindingEnabled=null!==Ge(qI,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new mee(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new pee(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new G({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:jb,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yo(s=>0!==s.id),Me(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ke(s=>{this.currentTransition=s;let o=!1,a=!1;return ie(s).pipe(is(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ke(c=>{const h=c.currentBrowserUrl.toString(),m=!t.navigated||c.extractedUrl.toString()!==h||h!==c.currentUrlTree.toString();if(!m&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new k_(c.id,this.urlSerializer.serialize(c.rawUrl),w,0)),c.resolve(null),dr}if(t.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ie(c).pipe(Ke(w=>{const A=this.transitions?.getValue();return this.events.next(new zI(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),A!==this.transitions?.getValue()?dr:Promise.resolve(w)}),function gte(n,e,t,r,i,s){return nr(o=>function hte(n,e,t,r,i,s,o="emptyOnly"){return new fte(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(Me(({state:a,tree:c})=>({...o,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),is(w=>{s.targetSnapshot=w.targetSnapshot,s.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects};const A=new mB(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(A)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:w,extractedUrl:A,source:S,restoredState:M,extras:N}=c,ne=new zI(w,this.urlSerializer.serialize(A),S,M);this.events.next(ne);const W=vB(0,this.rootComponentType).snapshot;return this.currentTransition=s={...c,targetSnapshot:W,urlAfterRedirects:A,extras:{...N,skipLocationChange:!1,replaceUrl:!1}},ie(s)}{const w="";return this.events.next(new k_(c.id,this.urlSerializer.serialize(c.extractedUrl),w,1)),c.resolve(null),dr}}),is(c=>{const h=new uee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),Me(c=>(this.currentTransition=s={...c,guards:Nee(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},s)),function Gee(n,e){return nr(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ie({...t,guardsResult:!0}):function qee(n,e,t,r){return V(n).pipe(nr(i=>function Jee(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ie(s.map(a=>{const c=Wb(e)??i,h=N_(a,c);return Oh(function zee(n){return n&&Kb(n.canDeactivate)}(h)?h.canDeactivate(n,e,t,r):c.runInContext(()=>h(n,e,t,r))).pipe(kh())})).pipe(F_()):ie(!0)}(i.component,i.route,t,e,r)),kh(i=>!0!==i,!0))}(o,r,i,n).pipe(nr(a=>a&&function Bee(n){return"boolean"==typeof n}(a)?function Kee(n,e,t,r){return V(e).pipe(Ob(i=>fI(function Yee(n,e){return null!==n&&e&&e(new gee(n)),ie(!0)}(i.route.parent,r),function Qee(n,e){return null!==n&&e&&e(new yee(n)),ie(!0)}(i.route,r),function Xee(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Fee(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>q2(()=>ie(o.guards.map(c=>{const h=Wb(o.node)??t,m=N_(c,h);return Oh(function Hee(n){return n&&Kb(n.canActivateChild)}(m)?m.canActivateChild(r,n):h.runInContext(()=>m(r,n))).pipe(kh())})).pipe(F_())));return ie(s).pipe(F_())}(n,i.path,t),function Zee(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ie(!0);const i=r.map(s=>q2(()=>{const o=Wb(e)??t,a=N_(s,o);return Oh(function jee(n){return n&&Kb(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(kh())}));return ie(i).pipe(F_())}(n,i.route,t))),kh(i=>!0!==i,!0))}(r,s,n,e):ie(a)),Me(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),is(c=>{if(s.guardsResult=c.guardsResult,Kp(c.guardsResult))throw CB(0,c.guardsResult);const h=new dee(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),yo(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),nR(c=>{if(c.guards.canActivateChecks.length)return ie(c).pipe(is(h=>{const m=new hee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),Ke(h=>{let m=!1;return ie(h).pipe(function _te(n,e){return nr(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let s=0;return V(i).pipe(Ob(o=>function yte(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!LB(i)&&(s[Nb]=i.title),function vte(n,e,t,r){const i=function bte(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ie({});const s={};return V(i).pipe(nr(o=>function Ete(n,e,t,r){const i=Wb(e)??r,s=N_(n,i);return Oh(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(kh(),is(a=>{s[o]=a}))),Vx(1),function NJ(n){return Me(()=>n)}(s),Gp(o=>xB(o)?dr:kb(o)))}(s,n,e,r).pipe(Me(o=>(n._resolvedData=o,n.data=bB(n,t).resolve,i&&LB(i)&&(n.data[Nb]=i.title),null)))}(o.route,r,n,e)),is(()=>s++),Vx(1),nr(o=>s===i.length?ie(t):dr))})}(t.paramsInheritanceStrategy,this.environmentInjector),is({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(h,"",2)}}))}),is(h=>{const m=new fee(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),nR(c=>{const h=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe(is(w=>{m.component=w}),Me(()=>{})));for(const w of m.children)v.push(...h(w));return v};return hI(h(c.targetSnapshot.root)).pipe(NI(),Xc(1))}),nR(()=>this.afterPreactivation()),Me(c=>{const h=function Cee(n,e,t){const r=$b(n,e._root,t?t._root:void 0);return new yB(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s={...c,targetRouterState:h},s}),is(()=>{this.events.next(new Wx)}),((n,e,t,r)=>Me(i=>(new Oee(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Xc(1),is({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Nh(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),t.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),xh(this.transitionAbortSubject.pipe(is(c=>{throw c}))),Bx(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Gp(c=>{if(a=!0,TB(c))this.events.next(new Hb(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),function Dee(n){return TB(n)&&Kp(n.url)}(c)?this.events.next(new Gx(c.url)):s.resolve(!1);else{this.events.next(new $I(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(c))}catch(h){s.reject(h)}}return dr}))}))}cancelNavigationTransition(t,r,i){const s=new Hb(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BB(n){return n!==jb}let UB=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Nb]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Ge(Cte)},providedIn:"root"})}}return n})(),Cte=(()=>{class n extends UB{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(he(NL))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ate=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Ge(Dte)},providedIn:"root"})}}return n})();class Tte{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Dte=(()=>{class n extends Tte{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Cr(n)))(i||n)}}()}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const JI=new ke("",{providedIn:"root",factory:()=>({})});let Ste=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:function(){return Ge(xte)},providedIn:"root"})}}return n})(),xte=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Qb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Qb||{});function jB(n,e){n.events.pipe(yo(t=>t instanceof Nh||t instanceof Hb||t instanceof $I||t instanceof k_),Me(t=>t instanceof Nh||t instanceof k_?Qb.COMPLETE:t instanceof Hb&&(0===t.code||1===t.code)?Qb.REDIRECTING:Qb.FAILED),yo(t=>t!==Qb.REDIRECTING),Xc(1)).subscribe(()=>{e()})}function Rte(n){throw n}function Pte(n,e,t){return e.parse("/")}const Mte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xa=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ge(uF),this.isNgZoneEnabled=!1,this._events=new Y,this.options=Ge(JI,{optional:!0})||{},this.pendingTasks=Ge(dF),this.errorHandler=this.options.errorHandler||Rte,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Pte,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Ge(Ste),this.routeReuseStrategy=Ge(Ate),this.titleStrategy=Ge(UB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ge(V_,{optional:!0})?.flat()??[],this.navigationTransitions=Ge(XI),this.urlSerializer=Ge(Lb),this.location=Ge($w),this.componentInputBindingEnabled=!!Ge(qI,{optional:!0}),this.eventsSubscription=new Bt,this.isNgZoneEnabled=Ge(nt)instanceof nt&&nt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new M_,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vB(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(HB(r)&&this._events.next(r));if(r instanceof zI)BB(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof k_)this.rawUrlTree=i.rawUrl;else if(r instanceof mB){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(s,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof Wx)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Hb)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof Gx){const s=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),o={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||BB(i.source)};this.scheduleNavigation(s,jb,null,o,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof $I&&this.restoreHistory(i,!0),r instanceof Nh&&(this.navigated=!0),HB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),jb,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(s.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Jx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,h=c?this.currentUrlTree.fragment:o;let v,m=null;switch(a){case"merge":m={...this.currentUrlTree.queryParams,...s};break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=s||null}null!==m&&(m=this.removeEmptyProps(m));try{v=cB(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),v=this.currentUrlTree.root}return lB(v,t,m,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Kp(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,jb,null,r)}navigate(t,r={skipLocationChange:!1}){return function Ote(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new _e(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Mte}:!1===r?{...kte}:r,Kp(t))return J2(this.currentUrlTree,t,i);const s=this.parseUrl(t);return J2(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,h;o?(a=o.resolve,c=o.reject,h=o.promise):h=new Promise((v,w)=>{a=v,c=w});const m=this.pendingTasks.add();return jB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(v=>Promise.reject(v))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HB(n){return!(n instanceof Wx||n instanceof Gx)}class zB{}let Lte=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(yo(t=>t instanceof Nh),Ob(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=PD(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return V(i).pipe(Vs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ie(null);const s=i.pipe(nr(o=>null===o?ie(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?V([s,this.loader.loadComponent(r)]).pipe(Vs()):s})}static{this.\u0275fac=function(r){return new(r||n)(he(xa),he(hF),he(fo),he(zB),he(rR))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const sR=new ke("");let $B=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof zI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Nh?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof k_&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gB&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new gB(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){ZT()}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac})}}return n})();function qu(n,e){return{\u0275kind:n,\u0275providers:e}}function GB(){const n=Ge(J);return e=>{const t=n.get(Th);if(e!==t.components[0])return;const r=n.get(xa),i=n.get(qB);1===n.get(oR)&&r.initialNavigation(),n.get(KB,null,qt.Optional)?.setUpPreloading(),n.get(sR,null,qt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const qB=new ke("",{factory:()=>new Y}),oR=new ke("",{providedIn:"root",factory:()=>1}),KB=new ke("");function jte(n){return qu(0,[{provide:KB,useExisting:Lte},{provide:zB,useExisting:n}])}const QB=new ke("ROUTER_FORROOT_GUARD"),zte=[$w,{provide:Lb,useClass:Ux},xa,zb,{provide:Qp,useFactory:function WB(n){return n.routerState.root},deps:[xa]},rR,[]];function $te(){return new vF("Router",xa)}let YB=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[zte,[],{provide:V_,multi:!0,useValue:t},{provide:QB,useFactory:Kte,deps:[[xa,new ku,new sh]]},{provide:JI,useValue:r||{}},r?.useHash?{provide:Lp,useClass:k6}:{provide:Lp,useClass:ZF},{provide:sR,useFactory:()=>{const n=Ge(X9),e=Ge(nt),t=Ge(JI),r=Ge(XI),i=Ge(Lb);return t.scrollOffset&&n.setOffset(t.scrollOffset),new $B(i,r,n,e,t)}},r?.preloadingStrategy?jte(r.preloadingStrategy).\u0275providers:[],{provide:vF,multi:!0,useFactory:$te},r?.initialNavigation?Qte(r):[],r?.bindToComponentInputs?qu(8,[IB,{provide:qI,useExisting:IB}]).\u0275providers:[],[{provide:ZB,useFactory:GB},{provide:eS,multi:!0,useExisting:ZB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:V_,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(he(QB,8))}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})();function Kte(n){return"guarded"}function Qte(n){return["disabled"===n.initialNavigation?qu(3,[{provide:GD,multi:!0,useFactory:()=>{const e=Ge(xa);return()=>{e.setUpLocationChangeListener()}}},{provide:oR,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qu(2,[{provide:oR,useValue:0},{provide:GD,multi:!0,deps:[J],useFactory:e=>{const t=e.get(P6,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(xa),s=e.get(qB);jB(i,()=>{r(!0)}),e.get(XI).afterPreactivation=()=>(r(!0),s.closed?ie(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ZB=new ke(""),Zte=["board"];let Xte=(()=>{class n{constructor(t,r){this.route=t,this.sanitizer=r,this.OFFLINE_GAME_STATE_STORAGE_KEY="office_game_state_store_key",this.isWhitePlayer=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.isWhitePlayer="white"===t.player}),window.addEventListener("message",t=>{t.data.startNewGame?this.handleStartNewGame():this.handleMoveEvent(t.data)})}ngAfterViewInit(){const t=localStorage.getItem(this.OFFLINE_GAME_STATE_STORAGE_KEY);t&&this.board.setFEN(t),this.isWhitePlayer||setTimeout(()=>{this.board.reverse()})}onMoveChange(){const t=this.board.getMoveHistory().slice(-1)[0];window.parent.postMessage(t,this.sanitizer.bypassSecurityTrustResourceUrl(`${window.location.origin}/offline`))}handleStartNewGame(){this.board.reset(),this.isWhitePlayer||this.board.reverse(),localStorage.removeItem(this.OFFLINE_GAME_STATE_STORAGE_KEY)}handleMoveEvent(t){this.board.move(t.move),localStorage.setItem(this.OFFLINE_GAME_STATE_STORAGE_KEY,this.board.getFEN())}static{this.\u0275fac=function(r){return new(r||n)(be(Qp),be(NS))}}static{this.\u0275cmp=Zr({type:n,selectors:[["chess-board"]],viewQuery:function(r,i){if(1&r&&Ch(Zte,5),2&r){let s;Ia(s=Ca())&&(i.board=s.first)}},decls:2,vars:5,consts:[[3,"darkTileColor","lightTileColor","size","darkDisabled","lightDisabled","moveChange"],["board",""]],template:function(r,i){1&r&&(yt(0,"ngx-chess-board",0,1),Kn("moveChange",function(){return i.onMoveChange()}),Ct()),2&r&&hn("darkTileColor","#b58863")("lightTileColor","#f0d9b5")("size",500)("darkDisabled",i.isWhitePlayer)("lightDisabled",!i.isWhitePlayer)},dependencies:[FV]})}}return n})();const XB={white:"White",black:"Black"},Jte=["light_board"],ene=["dark_board"];function tne(n,e){if(1&n&&(yt(0,"div")(1,"span")(2,"b"),Rn(3),Ct(),Rn(4," is the winner "),Ct()()),2&n){const t=xn();Ht(3),Ih("",t.winner," player")}}function nne(n,e){if(1&n&&(yt(0,"span"),Rn(1," Turn: "),yt(2,"b"),Rn(3),Ct()()),2&n){const t=xn();Ht(3),Ih("",t.PLAYER_DISPLAY_NAME[t.currentTurn]," player")}}let rne=(()=>{class n{constructor(t){this.sanitizer=t,this.PLAYER_DISPLAY_NAME=XB,this.lightBoardIframeUrl="",this.darkBoardIframeUrl="",this.currentTurn="white",this.winner="",this.isGameEnd=!1}ngOnInit(){this.lightBoardIframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`${window.location.origin}/chess-board?player=white`),this.darkBoardIframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`${window.location.origin}/chess-board?player=black`)}ngAfterViewInit(){window.addEventListener("message",t=>{if(t.data.mate&&(this.winner=XB[t.data.color],this.isGameEnd=!0),t.data.color){let r,i;switch(t.data.color){case"white":r=this.darkBoard,i=this.darkBoardIframeUrl,this.currentTurn="black";break;case"black":r=this.lightBoard,i=this.lightBoardIframeUrl,this.currentTurn="white"}r.nativeElement.contentWindow?.postMessage(t.data,i)}})}handleStartNewGame(){this.lightBoard.nativeElement.contentWindow?.postMessage({startNewGame:!0},this.sanitizer.bypassSecurityTrustResourceUrl(`${window.location.origin}/chess-board?player=white`)),this.darkBoard.nativeElement.contentWindow?.postMessage({startNewGame:!0},this.sanitizer.bypassSecurityTrustResourceUrl(`${window.location.origin}/chess-board?player=black`)),this.winner="",this.isGameEnd=!1}static{this.\u0275fac=function(r){return new(r||n)(be(NS))}}static{this.\u0275cmp=Zr({type:n,selectors:[["offline-mode-page"]],viewQuery:function(r,i){if(1&r&&(Ch(Jte,5),Ch(ene,5)),2&r){let s;Ia(s=Ca())&&(i.lightBoard=s.first),Ia(s=Ca())&&(i.darkBoard=s.first)}},decls:22,vars:4,consts:[[1,"offline-mode-container"],[1,"offline-mode-turn"],[4,"ngIf","ngIfElse"],["showTurn",""],[1,"offline-mode-iframe"],[1,"offline-mode-iframe_wrapper"],[3,"src"],["light_board",""],[1,"offline-mode-iframe_player"],["dark_board",""],[1,"offline-mode-tools"],["mat-raised-button","","color","accent",3,"click"]],template:function(r,i){if(1&r&&(yt(0,"div",0)(1,"h2"),Rn(2,"Chess Game Offline Mode"),Ct(),yt(3,"div",1),Br(4,tne,5,1,"div",2),Br(5,nne,4,1,"ng-template",null,3,qN),Ct(),yt(7,"mat-card")(8,"div",4)(9,"div",5),Vi(10,"iframe",6,7),yt(12,"span",8),Rn(13,"White player"),Ct()(),yt(14,"div",5),Vi(15,"iframe",6,9),yt(17,"span",8),Rn(18,"Black player"),Ct()()()(),yt(19,"div",10)(20,"button",11),Kn("click",function(){return i.handleStartNewGame()}),Rn(21," Start new game "),Ct()()()),2&r){const s=Tw(6);Ht(4),hn("ngIf",i.isGameEnd)("ngIfElse",s),Ht(6),hn("src",i.lightBoardIframeUrl,$g),Ht(5),hn("src",i.darkBoardIframeUrl,$g)}},dependencies:[fb,kx,Ox],styles:[".offline-mode-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;align-items:center}.offline-mode-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.offline-mode-turn[_ngcontent-%COMP%], .offline-mode-tools[_ngcontent-%COMP%]{margin:10px 0}.offline-mode-iframe[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:0 40px}.offline-mode-iframe[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:500px;height:500px;margin:10px;border:1px solid #ccc}.offline-mode-iframe_wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.offline-mode-iframe_player[_ngcontent-%COMP%]{margin:20px 0;font-weight:700;font-size:20px}.offline-mode-controls[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.offline-mode-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;background-color:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;margin:0 10px}.offline-mode-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#45a049}.offline-mode-controls[_ngcontent-%COMP%]   .game-status[_ngcontent-%COMP%]{margin-top:15px;font-weight:700;font-size:18px}"]})}}return n})();var we=Pt(467);const JB={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let aR;const ine=new Uint8Array(16),Ps=[];for(let n=0;n<256;++n)Ps.push((n+256).toString(16).slice(1));const ane=function one(n,e,t){if(JB.randomUUID&&!e&&!n)return JB.randomUUID();const r=(n=n||{}).random??n.rng?.()??function sne(){if(!aR){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");aR=crypto.getRandomValues.bind(crypto)}return aR(ine)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){if((t=t||0)<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function eU(n,e=0){return(Ps[n[e+0]]+Ps[n[e+1]]+Ps[n[e+2]]+Ps[n[e+3]]+"-"+Ps[n[e+4]]+Ps[n[e+5]]+"-"+Ps[n[e+6]]+Ps[n[e+7]]+"-"+Ps[n[e+8]]+Ps[n[e+9]]+"-"+Ps[n[e+10]]+Ps[n[e+11]]+Ps[n[e+12]]+Ps[n[e+13]]+Ps[n[e+14]]+Ps[n[e+15]]).toLowerCase()}(r)};let tU=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(be(Gc),be(Vr))}}static{this.\u0275dir=Ye({type:n})}}return n})(),Yp=(()=>{class n extends tU{static{this.\u0275fac=function(){let t;return function(i){return(t||(t=Cr(n)))(i||n)}}()}static{this.\u0275dir=Ye({type:n,features:[Fn]})}}return n})();const Ll=new ke("NgValueAccessor"),une={provide:Ll,useExisting:wn(()=>eC),multi:!0},hne=new ke("CompositionEventMode");let eC=(()=>{class n extends tU{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function dne(){const n=Dh()?Dh().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(be(Gc),be(Vr),be(hne,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Kn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Qn([une]),Fn]})}}return n})();function Fh(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rU(n){return null!=n&&"number"==typeof n.length}const Ks=new ke("NgValidators"),Lh=new ke("NgAsyncValidators"),fne=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class pne{static min(e){return function iU(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sU(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function oU(n){return Fh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function aU(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cU(n){return Fh(n.value)||fne.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function lU(n){return e=>Fh(e.value)||!rU(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function uU(n){return e=>rU(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function dU(n){if(!n)return tC;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return _U(e)}static composeAsync(e){return yU(e)}}function tC(n){return null}function hU(n){return null!=n}function fU(n){return Xv(n)?V(n):n}function pU(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function mU(n,e){return e.map(t=>t(n))}function gU(n){return n.map(e=>function mne(n){return!n.validate}(e)?e:t=>e.validate(t))}function _U(n){if(!n)return null;const e=n.filter(hU);return 0==e.length?null:function(t){return pU(mU(t,e))}}function cR(n){return null!=n?_U(gU(n)):null}function yU(n){if(!n)return null;const e=n.filter(hU);return 0==e.length?null:function(t){return function cne(...n){const e=Yo(n),{args:t,keys:r}=ZL(n),i=new It(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,h=o;for(let m=0;m<o;m++){let v=!1;tr(t[m]).subscribe(pe(s,w=>{v||(v=!0,h--),a[m]=w},()=>c--,void 0,()=>{(!c||!v)&&(h||s.next(r?XL(r,a):a),s.complete())}))}});return e?i.pipe(FS(e)):i}(mU(t,e).map(fU)).pipe(Me(pU))}}function lR(n){return null!=n?yU(gU(n)):null}function vU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bU(n){return n._rawValidators}function EU(n){return n._rawAsyncValidators}function uR(n){return n?Array.isArray(n)?n:[n]:[]}function nC(n,e){return Array.isArray(n)?n.includes(e):n===e}function wU(n,e){const t=uR(e);return uR(n).forEach(i=>{nC(t,i)||t.push(i)}),t}function IU(n,e){return uR(e).filter(t=>!nC(n,t))}class CU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=lR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class vo extends CU{get formDirective(){return null}get path(){return null}}class Vh extends CU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class AU{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let TU=(()=>{class n extends AU{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(be(Vh,2))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&wa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Fn]})}}return n})(),DU=(()=>{class n extends AU{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(be(vo,10))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&wa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Fn]})}}return n})();const Yb="VALID",iC="INVALID",B_="PENDING",Zb="DISABLED";function fR(n){return(sC(n)?n.validators:n)||null}function pR(n,e){return(sC(e)?e.asyncValidators:n)||null}function sC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function xU(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new _e(1e3,"");if(!r[t])throw new _e(1001,"")}function RU(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new _e(1002,"")})}class oC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Yb}get invalid(){return this.status===iC}get pending(){return this.status==B_}get disabled(){return this.status===Zb}get enabled(){return this.status!==Zb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wU(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wU(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(IU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(IU(e,this._rawAsyncValidators))}hasValidator(e){return nC(this._rawValidators,e)}hasAsyncValidator(e){return nC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=B_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zb,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yb,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yb||this.status===B_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zb:Yb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=B_,this._hasOwnPendingAsyncValidator=!0;const t=fU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?Zb:this.errors?iC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(B_)?B_:this._anyControlsHaveStatus(iC)?iC:Yb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){sC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function vne(n){return Array.isArray(n)?cR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function bne(n){return Array.isArray(n)?lR(n):n||null}(this._rawAsyncValidators)}}class Xb extends oC{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){RU(this,0,e),Object.keys(e).forEach(r=>{xU(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class PU extends Xb{}const Zp=new ke("CallSetDisabledState",{providedIn:"root",factory:()=>Jb}),Jb="always";function eE(n,e,t=Jb){mR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function wne(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&MU(n,e)})}(n,e),function Cne(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Ine(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&MU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Ene(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function cC(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),uC(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function lC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mR(n,e){const t=bU(n);null!==e.validator?n.setValidators(vU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=EU(n);null!==e.asyncValidator?n.setAsyncValidators(vU(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();lC(e._rawValidators,i),lC(e._rawAsyncValidators,i)}function uC(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=bU(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=EU(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return lC(e._rawValidators,r),lC(e._rawAsyncValidators,r),t}function MU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function NU(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function FU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const nE=class extends oC{constructor(e=null,t,r){super(fR(t),pR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=FU(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){NU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){NU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){FU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let jU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ye({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),zU=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({})}}return n})();const bR=new ke("NgModelWithFormControlWarning"),Vne={provide:vo,useExisting:wn(()=>dC)};let dC=(()=>{class n extends vo{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Xe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return eE(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){cC(t.control||null,t,!1),function Sne(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function OU(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(cC(r||null,t),(n=>n instanceof nE)(i)&&(eE(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function kU(n,e){mR(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Ane(n,e){return uC(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mR(this.form,this),this._oldForm&&uC(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||n)(be(Ks,10),be(Lh,10),be(Zp,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Kn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qn([Vne]),Fn,Xi]})}}return n})();const jne={provide:Vh,useExisting:wn(()=>IR)};let IR=(()=>{class n extends Vh{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Xe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function yR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===eC?t=s:function Dne(n){return Object.getPrototypeOf(n.constructor)===Yp}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){this._added||this._setUpControl(),function _R(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function aC(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(be(vo,13),be(Ks,10),be(Lh,10),be(Ll,10),be(bR,8))}}static{this.\u0275dir=Ye({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Qn([jne]),Fn,Xi]})}}return n})(),sj=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[zU]})}}return n})();class oj extends oC{constructor(e,t,r){super(fR(t),pR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){RU(this,0,e),e.forEach((r,i)=>{xU(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function aj(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let nre=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return aj(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Xb(i,s)}record(t,r=null){const i=this._reduceControls(t);return new PU(i,r)}control(t,r,i){let s={};return this.useNonNullable?(aj(r)?s=r:(s.validators=r,s.asyncValidators=i),new nE(t,{...s,nonNullable:!0})):new nE(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new oj(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof nE||t instanceof oC?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rre=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Zp,useValue:t.callSetDisabledState??Jb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[sj]})}}return n})(),ire=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bR,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Zp,useValue:t.callSetDisabledState??Jb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[sj]})}}return n})();function cj(n,e){const t="object"==typeof e;return new Promise((r,i)=>{let o,s=!1;n.subscribe({next:a=>{o=a,s=!0},error:i,complete:()=>{s?r(o):t?r(e.defaultValue):i(new Mb)}})})}var U_=Pt(852);(0,U_.registerVersion)("firebase","10.14.1","app");const lre=new class cre extends cI{}(class are extends aI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),DR=new Tl("ANGULARFIRE2_VERSION");class lj{constructor(){return((n,e)=>{const t=(0,U_.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(dre)}}const dre="app-check";function j_(){}class uj{zone;delegate;constructor(e,t=lre){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class hre{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",j_,{},j_,j_)),t.pipe(is({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dj=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new uj(Zone.current)),this.insideAngular=t.run(()=>new uj(Zone.current,A_)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(he(nt))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ra(n){return function pre(n){return function(t){return(t=t.lift(new hre(n.ngZone))).pipe(Wi(n.outsideAngular),Cs(n.insideAngular))}}(function H_(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}())(n)}var Bh=Pt(345);Bh.A.registerVersion("firebase","10.14.1","app-compat");const yre=["ngOnDestroy"];class hj{constructor(e){return e}}const hC=new ke("angularfire2.app.options"),fC=new ke("angularfire2.app.name");function SR(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Bh.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bh.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;Ere("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hj(o)}const Ere=(n,...e)=>{},wre={provide:hj,useFactory:SR,deps:[hC,nt,[new ku,fC]]};let Ire=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:hC,useValue:t},{provide:fC,useValue:r}]}}constructor(t){Bh.A.registerVersion("angularfire",DR.full,"core"),Bh.A.registerVersion("angularfire",DR.full,"app-compat"),Bh.A.registerVersion("angular",dw.full,t.toString())}static \u0275fac=function(r){return new(r||n)(he(uc))};static \u0275mod=On({type:n});static \u0275inj=yn({providers:[wre]})}return n})();function fj(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function Cre(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(pj("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Are?" You may need to reload as Firebase is not HMR aware.":""}`),pj("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const Are=typeof module<"u"&&!!module.hot,pj=(n,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[],Pt(955);class Tre extends Y{constructor(e=1/0,t=1/0,r=VS){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}}function mj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,le({connector:()=>new Tre(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function gj(n,e){return k(e)?Ke(()=>n,e):Ke(()=>n)}const _j=new ke("angularfire2.auth.use-emulator"),yj=new ke("angularfire2.auth.settings"),vj=new ke("angularfire2.auth.tenant-id"),bj=new ke("angularfire2.auth.langugage-code"),Ej=new ke("angularfire2.auth.use-device-language"),wj=new ke("angularfire.auth.persistence"),Ij=(n,e,t,r,i,s,o,a)=>fj(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[h,m]of Object.entries(o))c.settings[h]=m;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]);let Cj=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,h,m,v,w,A){const S=new Y,M=ie(void 0).pipe(Cs(o.outsideAngular),Ke(()=>s.runOutsideAngular(()=>Promise.resolve().then(Pt.bind(Pt,955)))),Me(()=>SR(t,s,r)),Me(N=>Ij(N,s,a,h,m,v,c,w)),mj({bufferSize:1,refCount:!1}));if(nI(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ie(null);else{M.pipe(kh()).subscribe();const N=M.pipe(Ke(de=>de.getRedirectResult().then(Ae=>Ae,()=>null)),Ra,mj({bufferSize:1,refCount:!1})),ne=M.pipe(Ke(de=>new It(Ae=>({unsubscribe:s.runOutsideAngular(()=>de.onAuthStateChanged(Be=>Ae.next(Be),Be=>Ae.error(Be),()=>Ae.complete()))})))),W=M.pipe(Ke(de=>new It(Ae=>({unsubscribe:s.runOutsideAngular(()=>de.onIdTokenChanged(Be=>Ae.next(Be),Be=>Ae.error(Be),()=>Ae.complete()))}))));this.authState=N.pipe(gj(ne),Wi(o.outsideAngular),Cs(o.insideAngular)),this.user=N.pipe(gj(W),Wi(o.outsideAngular),Cs(o.insideAngular)),this.idToken=this.user.pipe(Ke(de=>de?V(de.getIdToken()):ie(null))),this.idTokenResult=this.user.pipe(Ke(de=>de?V(de.getIdTokenResult()):ie(null))),this.credential=U(N,S,this.authState.pipe(yo(de=>!de))).pipe(Me(de=>de?.user?de:null),Wi(o.outsideAngular),Cs(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(yre.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const c=a?.[s];return"function"==typeof c?c.bind(a):c?.then?c.then(h=>t.run(()=>h)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,h)=>o.then(m=>{const v=m?.(...h);return r?.spy?.apply&&r.spy.apply(s,h,v),v})})})}))(this,M,s,{spy:{apply:(N,ne,W)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&W.then(de=>S.next(de))}}})}static \u0275fac=function(r){return new(r||n)(he(hC),he(fC,8),he(uc),he(nt),he(dj),he(_j,8),he(yj,8),he(vj,8),he(bj,8),he(Ej,8),he(wj,8),he(lj,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();function xR(){return te((n,e)=>{let t,r=!1;n.subscribe(pe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var em,Sj,Aj=Pt(362),Vl=Pt(41),$n=Pt(76),Tj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dj={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(q,L,H){H||(H=0);var X=Array(16);if("string"==typeof L)for(var se=0;16>se;++se)X[se]=L.charCodeAt(H++)|L.charCodeAt(H++)<<8|L.charCodeAt(H++)<<16|L.charCodeAt(H++)<<24;else for(se=0;16>se;++se)X[se]=L[H++]|L[H++]<<8|L[H++]<<16|L[H++]<<24;var ue=q.g[3],$=(L=q.g[0])+(ue^(H=q.g[1])&((se=q.g[2])^ue))+X[0]+3614090360&4294967295;$=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=(H=(se=(ue=(L=H+($<<7&4294967295|$>>>25))+(($=ue+(se^L&(H^se))+X[1]+3905402710&4294967295)<<12&4294967295|$>>>20))+(($=se+(H^ue&(L^H))+X[2]+606105819&4294967295)<<17&4294967295|$>>>15))+(($=H+(L^se&(ue^L))+X[3]+3250441966&4294967295)<<22&4294967295|$>>>10))+(($=L+(ue^H&(se^ue))+X[4]+4118548399&4294967295)<<7&4294967295|$>>>25))+(($=ue+(se^L&(H^se))+X[5]+1200080426&4294967295)<<12&4294967295|$>>>20))+(($=se+(H^ue&(L^H))+X[6]+2821735955&4294967295)<<17&4294967295|$>>>15))+(($=H+(L^se&(ue^L))+X[7]+4249261313&4294967295)<<22&4294967295|$>>>10))+(($=L+(ue^H&(se^ue))+X[8]+1770035416&4294967295)<<7&4294967295|$>>>25))+(($=ue+(se^L&(H^se))+X[9]+2336552879&4294967295)<<12&4294967295|$>>>20))+(($=se+(H^ue&(L^H))+X[10]+4294925233&4294967295)<<17&4294967295|$>>>15))+(($=H+(L^se&(ue^L))+X[11]+2304563134&4294967295)<<22&4294967295|$>>>10))+(($=L+(ue^H&(se^ue))+X[12]+1804603682&4294967295)<<7&4294967295|$>>>25))+(($=ue+(se^L&(H^se))+X[13]+4254626195&4294967295)<<12&4294967295|$>>>20))+(($=se+(H^ue&(L^H))+X[14]+2792965006&4294967295)<<17&4294967295|$>>>15))+(($=H+(L^se&(ue^L))+X[15]+1236535329&4294967295)<<22&4294967295|$>>>10))+(($=L+(se^ue&(H^se))+X[1]+4129170786&4294967295)<<5&4294967295|$>>>27))+(($=ue+(H^se&(L^H))+X[6]+3225465664&4294967295)<<9&4294967295|$>>>23))+(($=se+(L^H&(ue^L))+X[11]+643717713&4294967295)<<14&4294967295|$>>>18))+(($=H+(ue^L&(se^ue))+X[0]+3921069994&4294967295)<<20&4294967295|$>>>12))+(($=L+(se^ue&(H^se))+X[5]+3593408605&4294967295)<<5&4294967295|$>>>27))+(($=ue+(H^se&(L^H))+X[10]+38016083&4294967295)<<9&4294967295|$>>>23))+(($=se+(L^H&(ue^L))+X[15]+3634488961&4294967295)<<14&4294967295|$>>>18))+(($=H+(ue^L&(se^ue))+X[4]+3889429448&4294967295)<<20&4294967295|$>>>12))+(($=L+(se^ue&(H^se))+X[9]+568446438&4294967295)<<5&4294967295|$>>>27))+(($=ue+(H^se&(L^H))+X[14]+3275163606&4294967295)<<9&4294967295|$>>>23))+(($=se+(L^H&(ue^L))+X[3]+4107603335&4294967295)<<14&4294967295|$>>>18))+(($=H+(ue^L&(se^ue))+X[8]+1163531501&4294967295)<<20&4294967295|$>>>12))+(($=L+(se^ue&(H^se))+X[13]+2850285829&4294967295)<<5&4294967295|$>>>27))+(($=ue+(H^se&(L^H))+X[2]+4243563512&4294967295)<<9&4294967295|$>>>23))+(($=se+(L^H&(ue^L))+X[7]+1735328473&4294967295)<<14&4294967295|$>>>18))+(($=H+(ue^L&(se^ue))+X[12]+2368359562&4294967295)<<20&4294967295|$>>>12))+(($=L+(H^se^ue)+X[5]+4294588738&4294967295)<<4&4294967295|$>>>28))+(($=ue+(L^H^se)+X[8]+2272392833&4294967295)<<11&4294967295|$>>>21))+(($=se+(ue^L^H)+X[11]+1839030562&4294967295)<<16&4294967295|$>>>16))+(($=H+(se^ue^L)+X[14]+4259657740&4294967295)<<23&4294967295|$>>>9))+(($=L+(H^se^ue)+X[1]+2763975236&4294967295)<<4&4294967295|$>>>28))+(($=ue+(L^H^se)+X[4]+1272893353&4294967295)<<11&4294967295|$>>>21))+(($=se+(ue^L^H)+X[7]+4139469664&4294967295)<<16&4294967295|$>>>16))+(($=H+(se^ue^L)+X[10]+3200236656&4294967295)<<23&4294967295|$>>>9))+(($=L+(H^se^ue)+X[13]+681279174&4294967295)<<4&4294967295|$>>>28))+(($=ue+(L^H^se)+X[0]+3936430074&4294967295)<<11&4294967295|$>>>21))+(($=se+(ue^L^H)+X[3]+3572445317&4294967295)<<16&4294967295|$>>>16))+(($=H+(se^ue^L)+X[6]+76029189&4294967295)<<23&4294967295|$>>>9))+(($=L+(H^se^ue)+X[9]+3654602809&4294967295)<<4&4294967295|$>>>28))+(($=ue+(L^H^se)+X[12]+3873151461&4294967295)<<11&4294967295|$>>>21))+(($=se+(ue^L^H)+X[15]+530742520&4294967295)<<16&4294967295|$>>>16))+(($=H+(se^ue^L)+X[2]+3299628645&4294967295)<<23&4294967295|$>>>9))+(($=L+(se^(H|~ue))+X[0]+4096336452&4294967295)<<6&4294967295|$>>>26))+(($=ue+(H^(L|~se))+X[7]+1126891415&4294967295)<<10&4294967295|$>>>22))+(($=se+(L^(ue|~H))+X[14]+2878612391&4294967295)<<15&4294967295|$>>>17))+(($=H+(ue^(se|~L))+X[5]+4237533241&4294967295)<<21&4294967295|$>>>11))+(($=L+(se^(H|~ue))+X[12]+1700485571&4294967295)<<6&4294967295|$>>>26))+(($=ue+(H^(L|~se))+X[3]+2399980690&4294967295)<<10&4294967295|$>>>22))+(($=se+(L^(ue|~H))+X[10]+4293915773&4294967295)<<15&4294967295|$>>>17))+(($=H+(ue^(se|~L))+X[1]+2240044497&4294967295)<<21&4294967295|$>>>11))+(($=L+(se^(H|~ue))+X[8]+1873313359&4294967295)<<6&4294967295|$>>>26))+(($=ue+(H^(L|~se))+X[15]+4264355552&4294967295)<<10&4294967295|$>>>22))+(($=se+(L^(ue|~H))+X[6]+2734768916&4294967295)<<15&4294967295|$>>>17))+(($=H+(ue^(se|~L))+X[13]+1309151649&4294967295)<<21&4294967295|$>>>11))+((ue=(L=H+(($=L+(se^(H|~ue))+X[4]+4149444226&4294967295)<<6&4294967295|$>>>26))+(($=ue+(H^(L|~se))+X[11]+3174756917&4294967295)<<10&4294967295|$>>>22))^((se=ue+(($=se+(L^(ue|~H))+X[2]+718787259&4294967295)<<15&4294967295|$>>>17))|~L))+X[9]+3951481745&4294967295,q.g[0]=q.g[0]+L&4294967295,q.g[1]=q.g[1]+(se+($<<21&4294967295|$>>>11))&4294967295,q.g[2]=q.g[2]+se&4294967295,q.g[3]=q.g[3]+ue&4294967295}function o(q,L){this.h=L;for(var H=[],X=!0,se=q.length-1;0<=se;se--){var ue=0|q[se];X&&ue==L||(H[se]=ue,X=!1)}this.g=H}(function e(q,L){function H(){}H.prototype=L.prototype,q.D=L.prototype,q.prototype=new H,q.prototype.constructor=q,q.C=function(X,se,ue){for(var $=Array(arguments.length-2),Ec=2;Ec<arguments.length;Ec++)$[Ec-2]=arguments[Ec];return L.prototype[se].apply(X,$)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(q,L){void 0===L&&(L=q.length);for(var H=L-this.blockSize,X=this.B,se=this.h,ue=0;ue<L;){if(0==se)for(;ue<=H;)i(this,q,ue),ue+=this.blockSize;if("string"==typeof q){for(;ue<L;)if(X[se++]=q.charCodeAt(ue++),se==this.blockSize){i(this,X),se=0;break}}else for(;ue<L;)if(X[se++]=q[ue++],se==this.blockSize){i(this,X),se=0;break}}this.h=se,this.o+=L},r.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var L=1;L<q.length-8;++L)q[L]=0;var H=8*this.o;for(L=q.length-8;L<q.length;++L)q[L]=255&H,H/=256;for(this.u(q),q=Array(16),L=H=0;4>L;++L)for(var X=0;32>X;X+=8)q[H++]=this.g[L]>>>X&255;return q};var a={};function c(q){return-128<=q&&128>q?function s(q,L){var H=a;return Object.prototype.hasOwnProperty.call(H,q)?H[q]:H[q]=L(q)}(q,function(L){return new o([0|L],0>L?-1:0)}):new o([0|q],0>q?-1:0)}function h(q){if(isNaN(q)||!isFinite(q))return v;if(0>q)return N(h(-q));for(var L=[],H=1,X=0;q>=H;X++)L[X]=q/H|0,H*=4294967296;return new o(L,0)}var v=c(0),w=c(1),A=c(16777216);function S(q){if(0!=q.h)return!1;for(var L=0;L<q.g.length;L++)if(0!=q.g[L])return!1;return!0}function M(q){return-1==q.h}function N(q){for(var L=q.g.length,H=[],X=0;X<L;X++)H[X]=~q.g[X];return new o(H,~q.h).add(w)}function ne(q,L){return q.add(N(L))}function W(q,L){for(;(65535&q[L])!=q[L];)q[L+1]+=q[L]>>>16,q[L]&=65535,L++}function de(q,L){this.g=q,this.h=L}function Ae(q,L){if(S(L))throw Error("division by zero");if(S(q))return new de(v,v);if(M(q))return L=Ae(N(q),L),new de(N(L.g),N(L.h));if(M(L))return L=Ae(q,N(L)),new de(N(L.g),L.h);if(30<q.g.length){if(M(q)||M(L))throw Error("slowDivide_ only works with positive integers.");for(var H=w,X=L;0>=X.l(q);)H=Be(H),X=Be(X);var se=it(H,1),ue=it(X,1);for(X=it(X,2),H=it(H,2);!S(X);){var $=ue.add(X);0>=$.l(q)&&(se=se.add(H),ue=$),X=it(X,1),H=it(H,1)}return L=ne(q,se.j(L)),new de(se,L)}for(se=v;0<=q.l(L);){for(H=Math.max(1,Math.floor(q.m()/L.m())),X=48>=(X=Math.ceil(Math.log(H)/Math.LN2))?1:Math.pow(2,X-48),$=(ue=h(H)).j(L);M($)||0<$.l(q);)$=(ue=h(H-=X)).j(L);S(ue)&&(ue=w),se=se.add(ue),q=ne(q,$)}return new de(se,q)}function Be(q){for(var L=q.g.length+1,H=[],X=0;X<L;X++)H[X]=q.i(X)<<1|q.i(X-1)>>>31;return new o(H,q.h)}function it(q,L){var H=L>>5;L%=32;for(var X=q.g.length-H,se=[],ue=0;ue<X;ue++)se[ue]=0<L?q.i(ue+H)>>>L|q.i(ue+H+1)<<32-L:q.i(ue+H);return new o(se,q.h)}(n=o.prototype).m=function(){if(M(this))return-N(this).m();for(var q=0,L=1,H=0;H<this.g.length;H++){var X=this.i(H);q+=(0<=X?X:4294967296+X)*L,L*=4294967296}return q},n.toString=function(q){if(2>(q=q||10)||36<q)throw Error("radix out of range: "+q);if(S(this))return"0";if(M(this))return"-"+N(this).toString(q);for(var L=h(Math.pow(q,6)),H=this,X="";;){var se=Ae(H,L).g,ue=((0<(H=ne(H,se.j(L))).g.length?H.g[0]:H.h)>>>0).toString(q);if(S(H=se))return ue+X;for(;6>ue.length;)ue="0"+ue;X=ue+X}},n.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h},n.l=function(q){return M(q=ne(this,q))?-1:S(q)?0:1},n.abs=function(){return M(this)?N(this):this},n.add=function(q){for(var L=Math.max(this.g.length,q.g.length),H=[],X=0,se=0;se<=L;se++){var ue=X+(65535&this.i(se))+(65535&q.i(se)),$=(ue>>>16)+(this.i(se)>>>16)+(q.i(se)>>>16);X=$>>>16,H[se]=($&=65535)<<16|(ue&=65535)}return new o(H,-2147483648&H[H.length-1]?-1:0)},n.j=function(q){if(S(this)||S(q))return v;if(M(this))return M(q)?N(this).j(N(q)):N(N(this).j(q));if(M(q))return N(this.j(N(q)));if(0>this.l(A)&&0>q.l(A))return h(this.m()*q.m());for(var L=this.g.length+q.g.length,H=[],X=0;X<2*L;X++)H[X]=0;for(X=0;X<this.g.length;X++)for(var se=0;se<q.g.length;se++){var ue=this.i(X)>>>16,$=65535&this.i(X),Ec=q.i(se)>>>16,af=65535&q.i(se);H[2*X+2*se]+=$*af,W(H,2*X+2*se),H[2*X+2*se+1]+=ue*af,W(H,2*X+2*se+1),H[2*X+2*se+1]+=$*Ec,W(H,2*X+2*se+1),H[2*X+2*se+2]+=ue*Ec,W(H,2*X+2*se+2)}for(X=0;X<L;X++)H[X]=H[2*X+1]<<16|H[2*X];for(X=L;X<2*L;X++)H[X]=0;return new o(H,0)},n.A=function(q){return Ae(this,q).h},n.and=function(q){for(var L=Math.max(this.g.length,q.g.length),H=[],X=0;X<L;X++)H[X]=this.i(X)&q.i(X);return new o(H,this.h&q.h)},n.or=function(q){for(var L=Math.max(this.g.length,q.g.length),H=[],X=0;X<L;X++)H[X]=this.i(X)|q.i(X);return new o(H,this.h|q.h)},n.xor=function(q){for(var L=Math.max(this.g.length,q.g.length),H=[],X=0;X<L;X++)H[X]=this.i(X)^q.i(X);return new o(H,this.h^q.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Sj=Dj.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=function m(q,L){if(0==q.length)throw Error("number format error: empty string");if(2>(L=L||10)||36<L)throw Error("radix out of range: "+L);if("-"==q.charAt(0))return N(m(q.substring(1),L));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var H=h(Math.pow(L,8)),X=v,se=0;se<q.length;se+=8){var ue=Math.min(8,q.length-se),$=parseInt(q.substring(se,se+ue),L);8>ue?(ue=h(Math.pow(L,ue)),X=X.j(ue).add(h($))):X=(X=X.j(H)).add(h($))}return X},em=Dj.Integer=o}).apply(typeof Tj<"u"?Tj:typeof self<"u"?self:typeof window<"u"?window:{});var xj,rE,Rj,mC,RR,Pj,Mj,kj,pC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ku={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,b,C){return p==Array.prototype||p==Object.prototype||(p[b]=C.value),p},r=function t(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof pC&&pC];for(var b=0;b<p.length;++b){var C=p[b];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}(this);!function i(p,b){if(b)e:{var C=r;p=p.split(".");for(var R=0;R<p.length-1;R++){var ae=p[R];if(!(ae in C))break e;C=C[ae]}(b=b(R=C[p=p[p.length-1]]))!=R&&null!=b&&e(C,p,{configurable:!0,writable:!0,value:b})}}("Array.prototype.values",function(p){return p||function(){return function s(p,b){p instanceof String&&(p+="");var C=0,R=!1,ae={next:function(){if(!R&&C<p.length){var Ee=C++;return{value:b(Ee,p[Ee]),done:!1}}return R=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}(this,function(b,C){return C})}});var o=o||{},a=this||self;function c(p){var b=typeof p;return"array"==(b="object"!=b?b:p?Array.isArray(p)?"array":b:"null")||"object"==b&&"number"==typeof p.length}function h(p){var b=typeof p;return"object"==b&&null!=p||"function"==b}function m(p,b,C){return p.call.apply(p.bind,arguments)}function v(p,b,C){if(!p)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,R),p.apply(b,ae)}}return function(){return p.apply(b,arguments)}}function w(p,b,C){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function A(p,b){var C=Array.prototype.slice.call(arguments,1);return function(){var R=C.slice();return R.push.apply(R,arguments),p.apply(this,R)}}function S(p,b){function C(){}C.prototype=b.prototype,p.aa=b.prototype,p.prototype=new C,p.prototype.constructor=p,p.Qb=function(R,ae,Ee){for(var We=Array(arguments.length-2),vr=2;vr<arguments.length;vr++)We[vr-2]=arguments[vr];return b.prototype[ae].apply(R,We)}}function M(p){const b=p.length;if(0<b){const C=Array(b);for(let R=0;R<b;R++)C[R]=p[R];return C}return[]}function N(p,b){for(let C=1;C<arguments.length;C++){const R=arguments[C];if(c(R)){const ae=p.length||0,Ee=R.length||0;p.length=ae+Ee;for(let We=0;We<Ee;We++)p[ae+We]=R[We]}else p.push(R)}}function W(p){return/^[\s\xa0]*$/.test(p)}function de(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function Ae(p){return Ae[" "](p),p}Ae[" "]=function(){};var Be=!(-1==de().indexOf("Gecko")||-1!=de().toLowerCase().indexOf("webkit")&&-1==de().indexOf("Edge")||-1!=de().indexOf("Trident")||-1!=de().indexOf("MSIE")||-1!=de().indexOf("Edge"));function it(p,b,C){for(const R in p)b.call(C,p[R],R,p)}function L(p){const b={};for(const C in p)b[C]=p[C];return b}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(p,b){let C,R;for(let ae=1;ae<arguments.length;ae++){for(C in R=arguments[ae],R)p[C]=R[C];for(let Ee=0;Ee<H.length;Ee++)C=H[Ee],Object.prototype.hasOwnProperty.call(R,C)&&(p[C]=R[C])}}function se(p){var b=1;p=p.split(":");const C=[];for(;0<b&&p.length;)C.push(p.shift()),b--;return p.length&&C.push(p.join(":")),C}function ue(p){a.setTimeout(()=>{throw p},0)}function $(){var p=gn;let b=null;return p.g&&(b=p.g,p.g=p.g.next,p.g||(p.h=null),b.next=null),b}var af=new class ne{constructor(b,C){this.i=b,this.j=C,this.h=0,this.g=null}get(){let b;return 0<this.h?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}(()=>new at,p=>p.reset());class at{constructor(){this.next=this.g=this.h=null}set(b,C){this.h=b,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let dt,vt=!1,gn=new class Ec{constructor(){this.h=this.g=null}add(b,C){const R=af.get();R.set(b,C),this.h?this.h.next=R:this.g=R,this.h=R}},xi=()=>{const p=a.Promise.resolve(void 0);dt=()=>{p.then(wc)}};var wc=()=>{for(var p;p=$();){try{p.h.call(p.g)}catch(C){ue(C)}var b=af;b.j(p),100>b.h&&(b.h++,p.next=b.g,b.g=p)}vt=!1};function mi(){this.s=this.s,this.C=this.C}function zr(p,b){this.type=p,this.g=this.target=b,this.defaultPrevented=!1}mi.prototype.s=!1,mi.prototype.ma=function(){this.s||(this.s=!0,this.N())},mi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},zr.prototype.h=function(){this.defaultPrevented=!0};var $r=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,b=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};a.addEventListener("test",C,b),a.removeEventListener("test",C,b)}catch{}return p}();function cf(p,b){if(zr.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var C=this.type=p.type,R=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=b,b=p.relatedTarget){if(Be){e:{try{Ae(b.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(b=null)}}else"mouseover"==C?b=p.fromElement:"mouseout"==C&&(b=p.toElement);this.relatedTarget=b,R?(this.clientX=void 0!==R.clientX?R.clientX:R.pageX,this.clientY=void 0!==R.clientY?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:r1[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&cf.aa.h.call(this)}}S(cf,zr);var r1={2:"touch",3:"pen",4:"mouse"};cf.prototype.h=function(){cf.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var gi="closure_listenable_"+(1e6*Math.random()|0),id=0;function Ko(p,b,C,R,ae){this.listener=p,this.proxy=null,this.src=b,this.type=C,this.capture=!!R,this.ha=ae,this.key=++id,this.da=this.fa=!1}function sd(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function lf(p){this.src=p,this.g={},this.h=0}function s1(p,b){var C=b.type;if(C in p.g){var Ee,R=p.g[C],ae=Array.prototype.indexOf.call(R,b,void 0);(Ee=0<=ae)&&Array.prototype.splice.call(R,ae,1),Ee&&(sd(b),0==p.g[C].length&&(delete p.g[C],p.h--))}}function o1(p,b,C,R){for(var ae=0;ae<p.length;++ae){var Ee=p[ae];if(!Ee.da&&Ee.listener==b&&Ee.capture==!!C&&Ee.ha==R)return ae}return-1}lf.prototype.add=function(p,b,C,R,ae){var Ee=p.toString();(p=this.g[Ee])||(p=this.g[Ee]=[],this.h++);var We=o1(p,b,R,ae);return-1<We?(b=p[We],C||(b.fa=!1)):((b=new Ko(b,this.src,Ee,!!R,ae)).fa=C,p.push(b)),b};var a1="closure_lm_"+(1e6*Math.random()|0),c1={};function R4(p,b,C,R,ae){if(R&&R.once)return M4(p,b,C,R,ae);if(Array.isArray(b)){for(var Ee=0;Ee<b.length;Ee++)R4(p,b[Ee],C,R,ae);return null}return C=h1(C),p&&p[gi]?p.K(b,C,h(R)?!!R.capture:!!R,ae):P4(p,b,C,!1,R,ae)}function P4(p,b,C,R,ae,Ee){if(!b)throw Error("Invalid event type");var We=h(ae)?!!ae.capture:!!ae,vr=u1(p);if(vr||(p[a1]=vr=new lf(p)),(C=vr.add(b,C,R,We,Ee)).proxy)return C;if(R=function vce(){const b=bce;return function p(C){return b.call(p.src,p.listener,C)}}(),C.proxy=R,R.src=p,R.listener=C,p.addEventListener)$r||(ae=We),void 0===ae&&(ae=!1),p.addEventListener(b.toString(),R,ae);else if(p.attachEvent)p.attachEvent(O4(b.toString()),R);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(R)}return C}function M4(p,b,C,R,ae){if(Array.isArray(b)){for(var Ee=0;Ee<b.length;Ee++)M4(p,b[Ee],C,R,ae);return null}return C=h1(C),p&&p[gi]?p.L(b,C,h(R)?!!R.capture:!!R,ae):P4(p,b,C,!0,R,ae)}function k4(p,b,C,R,ae){if(Array.isArray(b))for(var Ee=0;Ee<b.length;Ee++)k4(p,b[Ee],C,R,ae);else R=h(R)?!!R.capture:!!R,C=h1(C),p&&p[gi]?(p=p.i,(b=String(b).toString())in p.g&&-1<(C=o1(Ee=p.g[b],C,R,ae))&&(sd(Ee[C]),Array.prototype.splice.call(Ee,C,1),0==Ee.length&&(delete p.g[b],p.h--))):p&&(p=u1(p))&&(b=p.g[b.toString()],p=-1,b&&(p=o1(b,C,R,ae)),(C=-1<p?b[p]:null)&&l1(C))}function l1(p){if("number"!=typeof p&&p&&!p.da){var b=p.src;if(b&&b[gi])s1(b.i,p);else{var C=p.type,R=p.proxy;b.removeEventListener?b.removeEventListener(C,R,p.capture):b.detachEvent?b.detachEvent(O4(C),R):b.addListener&&b.removeListener&&b.removeListener(R),(C=u1(b))?(s1(C,p),0==C.h&&(C.src=null,b[a1]=null)):sd(p)}}}function O4(p){return p in c1?c1[p]:c1[p]="on"+p}function bce(p,b){if(p.da)p=!0;else{b=new cf(b,this);var C=p.listener,R=p.ha||p.src;p.fa&&l1(p),p=C.call(R,b)}return p}function u1(p){return(p=p[a1])instanceof lf?p:null}var d1="__closure_events_fn_"+(1e9*Math.random()>>>0);function h1(p){return"function"==typeof p?p:(p[d1]||(p[d1]=function(b){return p.handleEvent(b)}),p[d1])}function Js(){mi.call(this),this.i=new lf(this),this.M=this,this.F=null}function wo(p,b){var C,R=p.F;if(R)for(C=[];R;R=R.F)C.push(R);if(p=p.M,R=b.type||b,"string"==typeof b)b=new zr(b,p);else if(b instanceof zr)b.target=b.target||p;else{var ae=b;X(b=new zr(R,p),ae)}if(ae=!0,C)for(var Ee=C.length-1;0<=Ee;Ee--){var We=b.g=C[Ee];ae=gA(We,R,!0,b)&&ae}if(ae=gA(We=b.g=p,R,!0,b)&&ae,ae=gA(We,R,!1,b)&&ae,C)for(Ee=0;Ee<C.length;Ee++)ae=gA(We=b.g=C[Ee],R,!1,b)&&ae}function gA(p,b,C,R){if(!(b=p.i.g[String(b)]))return!0;b=b.concat();for(var ae=!0,Ee=0;Ee<b.length;++Ee){var We=b[Ee];if(We&&!We.da&&We.capture==C){var vr=We.listener,Ns=We.ha||We.src;We.fa&&s1(p.i,We),ae=!1!==vr.call(Ns,R)&&ae}}return ae&&!R.defaultPrevented}function N4(p,b,C){if("function"==typeof p)C&&(p=w(p,C));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=w(p.handleEvent,p)}return 2147483647<Number(b)?-1:a.setTimeout(p,b||0)}function F4(p){p.g=N4(()=>{p.g=null,p.i&&(p.i=!1,F4(p))},p.l);const b=p.h;p.h=null,p.m.apply(null,b)}S(Js,mi),Js.prototype[gi]=!0,Js.prototype.removeEventListener=function(p,b,C,R){k4(this,p,b,C,R)},Js.prototype.N=function(){if(Js.aa.N.call(this),this.i){var b,p=this.i;for(b in p.g){for(var C=p.g[b],R=0;R<C.length;R++)sd(C[R]);delete p.g[b],p.h--}}this.F=null},Js.prototype.K=function(p,b,C,R){return this.i.add(String(p),b,!1,C,R)},Js.prototype.L=function(p,b,C,R){return this.i.add(String(p),b,!0,C,R)};class Ece extends mi{constructor(b,C){super(),this.m=b,this.l=C,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:F4(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function WE(p){mi.call(this),this.h=p,this.g={}}S(WE,mi);var L4=[];function V4(p){it(p.g,function(b,C){this.g.hasOwnProperty(C)&&l1(b)},p),p.g={}}WE.prototype.N=function(){WE.aa.N.call(this),V4(this)},WE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var f1=a.JSON.stringify,wce=a.JSON.parse,Ice=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function p1(){}function U4(){}p1.prototype.h=null;var GE={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function m1(){zr.call(this,"d")}function g1(){zr.call(this,"c")}S(m1,zr),S(g1,zr);var wm={},j4=null;function _A(){return j4=j4||new Js}function H4(p){zr.call(this,wm.La,p)}function qE(p){const b=_A();wo(b,new H4(b))}function z4(p,b){zr.call(this,wm.STAT_EVENT,p),this.stat=b}function Io(p){const b=_A();wo(b,new z4(b,p))}function $4(p,b){zr.call(this,wm.Ma,p),this.size=b}function KE(p,b){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},b)}function QE(){this.g=!0}function Dy(p,b,C,R){p.info(function(){return"XMLHTTP TEXT ("+b+"): "+function Dce(p,b){if(!p.g)return b;if(!b)return null;try{var C=JSON.parse(b);if(C)for(p=0;p<C.length;p++)if(Array.isArray(C[p])){var R=C[p];if(!(2>R.length)){var ae=R[1];if(Array.isArray(ae)&&!(1>ae.length)){var Ee=ae[0];if("noop"!=Ee&&"stop"!=Ee&&"close"!=Ee)for(var We=1;We<ae.length;We++)ae[We]=""}}}return f1(C)}catch{return b}}(p,C)+(R?" "+R:"")})}wm.La="serverreachability",S(H4,zr),wm.STAT_EVENT="statevent",S(z4,zr),wm.Ma="timingevent",S($4,zr),QE.prototype.xa=function(){this.g=!1},QE.prototype.info=function(){};var _1,yA={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},W4={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function vA(){}function uf(p,b,C,R){this.j=p,this.i=b,this.l=C,this.R=R||1,this.U=new WE(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new G4}function G4(){this.i=null,this.g="",this.h=!1}S(vA,p1),vA.prototype.g=function(){return new XMLHttpRequest},vA.prototype.i=function(){return{}},_1=new vA;var q4={},y1={};function v1(p,b,C){p.L=1,p.v=IA(od(b)),p.m=C,p.P=!0,K4(p,null)}function K4(p,b){p.F=Date.now(),bA(p),p.A=od(p.v);var C=p.A,R=p.R;Array.isArray(R)||(R=[String(R)]),cW(C.i,"t",R),p.C=0,C=p.j.J,p.h=new G4,p.g=TW(p.j,C?b:null,!p.m),0<p.O&&(p.M=new Ece(w(p.Y,p,p.g),p.O)),b=p.U,C=p.g,R=p.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(L4[0]=ae.toString()),ae=L4);for(var Ee=0;Ee<ae.length;Ee++){var We=R4(C,ae[Ee],R||b.handleEvent,!1,b.h||b);if(!We)break;b.g[We.key]=We}b=p.H?L(p.H):{},p.m?(p.u||(p.u="POST"),b["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,b)):(p.u="GET",p.g.ea(p.A,p.u,null,b)),qE(),function Cce(p,b,C,R,ae,Ee){p.info(function(){if(p.g)if(Ee)for(var We="",vr=Ee.split("&"),Ns=0;Ns<vr.length;Ns++){var Ln=vr[Ns].split("=");if(1<Ln.length){var eo=Ln[0];Ln=Ln[1];var to=eo.split("_");We=2<=to.length&&"type"==to[1]?We+(eo+"=")+Ln+"&":We+(eo+"=redacted&")}}else We=null;else We=Ee;return"XMLHTTP REQ ("+R+") [attempt "+ae+"]: "+b+"\n"+C+"\n"+We})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Q4(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function Sce(p,b){var C=p.C,R=b.indexOf("\n",C);return-1==R?y1:(C=Number(b.substring(C,R)),isNaN(C)?q4:(R+=1)+C>b.length?y1:(b=b.slice(R,R+C),p.C=R+C,b))}function bA(p){p.S=Date.now()+p.I,Y4(p,p.I)}function Y4(p,b){if(null!=p.B)throw Error("WatchDog timer not null");p.B=KE(w(p.ba,p),b)}function b1(p){p.B&&(a.clearTimeout(p.B),p.B=null)}function YE(p){0==p.j.G||p.J||wW(p.j,p)}function Im(p){b1(p);var b=p.M;b&&"function"==typeof b.ma&&b.ma(),p.M=null,V4(p.U),p.g&&(b=p.g,p.g=null,b.abort(),b.ma())}function E1(p,b){try{var C=p.j;if(0!=C.G&&(C.g==p||w1(C.h,p)))if(!p.K&&w1(C.h,p)&&3==C.G){try{var R=C.Da.g.parse(b)}catch{R=null}if(Array.isArray(R)&&3==R.length){var ae=R;if(0==ae[0]){e:if(!C.u){if(C.g){if(!(C.g.F+3e3<p.F))break e;SA(C),TA(C)}T1(C),Io(18)}}else C.za=ae[1],0<C.za-C.T&&37500>ae[2]&&C.F&&0==C.v&&!C.C&&(C.C=KE(w(C.Za,C),6e3));if(1>=J4(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Am(C,11)}else if((p.K||C.g==p)&&SA(C),!W(b))for(ae=C.Da.g.parse(b),b=0;b<ae.length;b++){let Ln=ae[b];if(C.T=Ln[0],Ln=Ln[1],2==C.G)if("c"==Ln[0]){C.K=Ln[1],C.ia=Ln[2];const eo=Ln[3];null!=eo&&(C.la=eo,C.j.info("VER="+C.la));const to=Ln[4];null!=to&&(C.Aa=to,C.j.info("SVER="+C.Aa));const Ry=Ln[5];null!=Ry&&"number"==typeof Ry&&0<Ry&&(C.L=R=1.5*Ry,C.j.info("backChannelRequestTimeoutMs_="+R)),R=C;const tl=p.g;if(tl){const RA=tl.g?tl.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(RA){var Ee=R.h;Ee.g||-1==RA.indexOf("spdy")&&-1==RA.indexOf("quic")&&-1==RA.indexOf("h2")||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(I1(Ee,Ee.h),Ee.h=null))}if(R.D){const S1=tl.g?tl.g.getResponseHeader("X-HTTP-Session-Id"):null;S1&&(R.ya=S1,Wr(R.I,R.D,S1))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-p.F,C.j.info("Handshake RTT: "+C.R+"ms"));var We=p;if((R=C).qa=AW(R,R.J?R.ia:null,R.W),We.K){eW(R.h,We);var vr=We,Ns=R.L;Ns&&(vr.I=Ns),vr.B&&(b1(vr),bA(vr)),R.g=We}else bW(R);0<C.i.length&&DA(C)}else"stop"!=Ln[0]&&"close"!=Ln[0]||Am(C,7);else 3==C.G&&("stop"==Ln[0]||"close"==Ln[0]?"stop"==Ln[0]?Am(C,7):A1(C):"noop"!=Ln[0]&&C.l&&C.l.ta(Ln),C.v=0)}qE()}catch{}}function Z4(p){this.l=p||10,p=a.PerformanceNavigationTiming?0<(p=a.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function X4(p){return!!p.h||!!p.g&&p.g.size>=p.j}function J4(p){return p.h?1:p.g?p.g.size:0}function w1(p,b){return p.h?p.h==b:!!p.g&&p.g.has(b)}function I1(p,b){p.g?p.g.add(b):p.h=b}function eW(p,b){p.h&&p.h==b?p.h=null:p.g&&p.g.has(b)&&p.g.delete(b)}function tW(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let b=p.i;for(const C of p.g.values())b=b.concat(C.D);return b}return M(p.i)}function nW(p,b){if(p.forEach&&"function"==typeof p.forEach)p.forEach(b,void 0);else if(c(p)||"string"==typeof p)Array.prototype.forEach.call(p,b,void 0);else for(var C=function Pce(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||"string"==typeof p){var b=[];p=p.length;for(var C=0;C<p;C++)b.push(C);return b}b=[],C=0;for(const R in p)b[C++]=R;return b}}}(p),R=function Rce(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(c(p)){for(var b=[],C=p.length,R=0;R<C;R++)b.push(p[R]);return b}for(R in b=[],C=0,p)b[C++]=p[R];return b}(p),ae=R.length,Ee=0;Ee<ae;Ee++)b.call(void 0,R[Ee],C&&C[Ee],p)}uf.prototype.ca=function(p){p=p.target;const b=this.M;b&&3==ad(p)?b.j():this.Y(p)},uf.prototype.Y=function(p){try{if(p==this.g)e:{const to=ad(this.g);var b=this.g.Ba();if(this.g.Z(),!(3>to)&&(3!=to||this.g&&(this.h.h||this.g.oa()||mW(this.g)))){this.J||4!=to||7==b||qE(),b1(this);var C=this.g.Z();this.X=C;t:if(Q4(this)){var R=mW(this.g);p="";var ae=R.length,Ee=4==ad(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Im(this),YE(this);var We="";break t}this.h.i=new a.TextDecoder}for(b=0;b<ae;b++)this.h.h=!0,p+=this.h.i.decode(R[b],{stream:!(Ee&&b==ae-1)});R.length=0,this.h.g+=p,this.C=0,We=this.h.g}else We=this.g.oa();if(this.o=200==C,function Ace(p,b,C,R,ae,Ee,We){p.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+ae+"]: "+b+"\n"+C+"\n"+Ee+" "+We})}(this.i,this.u,this.A,this.l,this.R,to,C),this.o){if(this.T&&!this.K){t:{if(this.g){var vr,Ns=this.g;if((vr=Ns.g?Ns.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(vr)){var Ln=vr;break t}}Ln=null}if(!(C=Ln)){this.o=!1,this.s=3,Io(12),Im(this),YE(this);break e}Dy(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,E1(this,C)}if(this.P){let tl;for(C=!0;!this.J&&this.C<We.length;){if(tl=Sce(this,We),tl==y1){4==to&&(this.s=4,Io(14),C=!1),Dy(this.i,this.l,null,"[Incomplete Response]");break}if(tl==q4){this.s=4,Io(15),Dy(this.i,this.l,We,"[Invalid Chunk]"),C=!1;break}Dy(this.i,this.l,tl,null),E1(this,tl)}if(Q4(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=to||0!=We.length||this.h.h||(this.s=1,Io(16),C=!1),this.o=this.o&&C,C){if(0<We.length&&!this.W){this.W=!0;var eo=this.j;eo.g==this&&eo.ba&&!eo.M&&(eo.j.info("Great, no buffering proxy detected. Bytes received: "+We.length),D1(eo),eo.M=!0,Io(11))}}else Dy(this.i,this.l,We,"[Invalid Chunked Response]"),Im(this),YE(this)}else Dy(this.i,this.l,We,null),E1(this,We);4==to&&Im(this),this.o&&!this.J&&(4==to?wW(this.j,this):(this.o=!1,bA(this)))}else(function Wce(p){const b={};p=(p.g&&2<=ad(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let R=0;R<p.length;R++){if(W(p[R]))continue;var C=se(p[R]);const ae=C[0];if("string"!=typeof(C=C[1]))continue;C=C.trim();const Ee=b[ae]||[];b[ae]=Ee,Ee.push(C)}!function q(p,b){for(const C in p)b.call(void 0,p[C],C,p)}(b,function(R){return R.join(", ")})})(this.g),400==C&&0<We.indexOf("Unknown SID")?(this.s=3,Io(12)):(this.s=0,Io(13)),Im(this),YE(this)}}}catch{}},uf.prototype.cancel=function(){this.J=!0,Im(this)},uf.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function Tce(p,b){p.info(function(){return"TIMEOUT: "+b})}(this.i,this.A),2!=this.L&&(qE(),Io(17)),Im(this),this.s=2,YE(this)):Y4(this,this.S-p)},Z4.prototype.cancel=function(){if(this.i=tW(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var rW=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cm(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Cm){this.h=p.h,EA(this,p.j),this.o=p.o,this.g=p.g,wA(this,p.s),this.l=p.l;var b=p.i,C=new JE;C.i=b.i,b.g&&(C.g=new Map(b.g),C.h=b.h),iW(this,C),this.m=p.m}else p&&(b=String(p).match(rW))?(this.h=!1,EA(this,b[1]||"",!0),this.o=ZE(b[2]||""),this.g=ZE(b[3]||"",!0),wA(this,b[4]),this.l=ZE(b[5]||"",!0),iW(this,b[6]||"",!0),this.m=ZE(b[7]||"")):(this.h=!1,this.i=new JE(null,this.h))}function od(p){return new Cm(p)}function EA(p,b,C){p.j=C?ZE(b,!0):b,p.j&&(p.j=p.j.replace(/:$/,""))}function wA(p,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);p.s=b}else p.s=null}function iW(p,b,C){b instanceof JE?(p.i=b,function Vce(p,b){b&&!p.j&&(df(p),p.i=null,p.g.forEach(function(C,R){var ae=R.toLowerCase();R!=ae&&(oW(this,R),cW(this,ae,C))},p)),p.j=b}(p.i,p.h)):(C||(b=XE(b,Fce)),p.i=new JE(b,p.h))}function Wr(p,b,C){p.i.set(b,C)}function IA(p){return Wr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function ZE(p,b){return p?b?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function XE(p,b,C){return"string"==typeof p?(p=encodeURI(p).replace(b,kce),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function kce(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Cm.prototype.toString=function(){var p=[],b=this.j;b&&p.push(XE(b,sW,!0),":");var C=this.g;return(C||"file"==b)&&(p.push("//"),(b=this.o)&&p.push(XE(b,sW,!0),"@"),p.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(C=this.s)&&p.push(":",String(C))),(C=this.l)&&(this.g&&"/"!=C.charAt(0)&&p.push("/"),p.push(XE(C,"/"==C.charAt(0)?Nce:Oce,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",XE(C,Lce)),p.join("")};var p,sW=/[#\/\?@]/g,Oce=/[#\?:]/g,Nce=/[#\?]/g,Fce=/[#\?@]/g,Lce=/#/g;function JE(p,b){this.h=this.g=null,this.i=p||null,this.j=!!b}function df(p){p.g||(p.g=new Map,p.h=0,p.i&&function Mce(p,b){if(p){p=p.split("&");for(var C=0;C<p.length;C++){var R=p[C].indexOf("="),ae=null;if(0<=R){var Ee=p[C].substring(0,R);ae=p[C].substring(R+1)}else Ee=p[C];b(Ee,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}(p.i,function(b,C){p.add(decodeURIComponent(b.replace(/\+/g," ")),C)}))}function oW(p,b){df(p),b=Sy(p,b),p.g.has(b)&&(p.i=null,p.h-=p.g.get(b).length,p.g.delete(b))}function aW(p,b){return df(p),b=Sy(p,b),p.g.has(b)}function cW(p,b,C){oW(p,b),0<C.length&&(p.i=null,p.g.set(Sy(p,b),M(C)),p.h+=C.length)}function Sy(p,b){return b=String(b),p.j&&(b=b.toLowerCase()),b}function hf(p,b,C,R,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),R(C)}catch{}}function jce(){this.g=new Ice}function Hce(p,b,C){const R=C||"";try{nW(p,function(ae,Ee){let We=ae;h(ae)&&(We=f1(ae)),b.push(R+Ee+"="+encodeURIComponent(We))})}catch(ae){throw b.push(R+"type="+encodeURIComponent("_badmap")),ae}}function e0(p){this.l=p.Ub||null,this.j=p.eb||!1}function CA(p,b){Js.call(this),this.D=p,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function lW(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function t0(p){p.readyState=4,p.l=null,p.j=null,p.v=null,n0(p)}function n0(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function uW(p){let b="";return it(p,function(C,R){b+=R,b+=":",b+=C,b+="\r\n"}),b}function C1(p,b,C){e:{for(R in C){var R=!1;break e}R=!0}R||(C=uW(C),"string"==typeof p?null!=C&&encodeURIComponent(String(C)):Wr(p,b,C))}function _i(p){Js.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=JE.prototype).add=function(p,b){df(this),this.i=null,p=Sy(this,p);var C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(b),this.h+=1,this},n.forEach=function(p,b){df(this),this.g.forEach(function(C,R){C.forEach(function(ae){p.call(b,ae,R,this)},this)},this)},n.na=function(){df(this);const p=Array.from(this.g.values()),b=Array.from(this.g.keys()),C=[];for(let R=0;R<b.length;R++){const ae=p[R];for(let Ee=0;Ee<ae.length;Ee++)C.push(b[R])}return C},n.V=function(p){df(this);let b=[];if("string"==typeof p)aW(this,p)&&(b=b.concat(this.g.get(Sy(this,p))));else{p=Array.from(this.g.values());for(let C=0;C<p.length;C++)b=b.concat(p[C])}return b},n.set=function(p,b){return df(this),this.i=null,aW(this,p=Sy(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[b]),this.h+=1,this},n.get=function(p,b){return p&&0<(p=this.V(p)).length?String(p[0]):b},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],b=Array.from(this.g.keys());for(var C=0;C<b.length;C++){var R=b[C];const Ee=encodeURIComponent(String(R)),We=this.V(R);for(R=0;R<We.length;R++){var ae=Ee;""!==We[R]&&(ae+="="+encodeURIComponent(String(We[R]))),p.push(ae)}}return this.i=p.join("&")},S(e0,p1),e0.prototype.g=function(){return new CA(this.l,this.j)},e0.prototype.i=(p={},function(){return p}),S(CA,Js),(n=CA.prototype).open=function(p,b){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=b,this.readyState=1,n0(this)},n.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const b={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(b.body=p),(this.D||a).fetch(new Request(this.A,b)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,t0(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,n0(this)),this.g&&(this.readyState=3,n0(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lW(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var b=p.value?p.value:new Uint8Array(0);(b=this.v.decode(b,{stream:!p.done}))&&(this.response=this.responseText+=b)}p.done?t0(this):n0(this),3==this.readyState&&lW(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,t0(this))},n.Qa=function(p){this.g&&(this.response=p,t0(this))},n.ga=function(){this.g&&t0(this)},n.setRequestHeader=function(p,b){this.u.append(p,b)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],b=this.h.entries();for(var C=b.next();!C.done;)p.push((C=C.value)[0]+": "+C[1]),C=b.next();return p.join("\r\n")},Object.defineProperty(CA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),S(_i,Js);var zce=/^https?$/i,$ce=["POST","PUT"];function dW(p,b){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=b,p.m=5,hW(p),AA(p)}function hW(p){p.A||(p.A=!0,wo(p,"complete"),wo(p,"error"))}function fW(p){if(p.h&&typeof o<"u"&&(!p.v[1]||4!=ad(p)||2!=p.Z()))if(p.u&&4==ad(p))N4(p.Ea,0,p);else if(wo(p,"readystatechange"),4==ad(p)){p.h=!1;try{const We=p.Z();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var C;if(!(C=b)){var R;if(R=0===We){var ae=String(p.D).match(rW)[1]||null;!ae&&a.self&&a.self.location&&(ae=a.self.location.protocol.slice(0,-1)),R=!zce.test(ae?ae.toLowerCase():"")}C=R}if(C)wo(p,"complete"),wo(p,"success");else{p.m=6;try{var Ee=2<ad(p)?p.g.statusText:""}catch{Ee=""}p.l=Ee+" ["+p.Z()+"]",hW(p)}}finally{AA(p)}}}function AA(p,b){if(p.g){pW(p);const C=p.g,R=p.v[0]?()=>{}:null;p.g=null,p.v=null,b||wo(p,"ready");try{C.onreadystatechange=R}catch{}}}function pW(p){p.I&&(a.clearTimeout(p.I),p.I=null)}function ad(p){return p.g?p.g.readyState:0}function mW(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function r0(p,b,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||b}function gW(p){this.Aa=0,this.i=[],this.j=new QE,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=r0("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=r0("baseRetryDelayMs",5e3,p),this.cb=r0("retryDelaySeedMs",1e4,p),this.Wa=r0("forwardChannelMaxRetries",2,p),this.wa=r0("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new Z4(p&&p.concurrentRequestLimit),this.Da=new jce,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function A1(p){if(_W(p),3==p.G){var b=p.U++,C=od(p.I);if(Wr(C,"SID",p.K),Wr(C,"RID",b),Wr(C,"TYPE","terminate"),s0(p,C),(b=new uf(p,p.j,b)).L=2,b.v=IA(od(C)),C=!1,a.navigator&&a.navigator.sendBeacon)try{C=a.navigator.sendBeacon(b.v.toString(),"")}catch{}!C&&a.Image&&((new Image).src=b.v,C=!0),C||(b.g=TW(b.j,null),b.g.ea(b.v)),b.F=Date.now(),bA(b)}CW(p)}function TA(p){p.g&&(D1(p),p.g.cancel(),p.g=null)}function _W(p){TA(p),p.u&&(a.clearTimeout(p.u),p.u=null),SA(p),p.h.cancel(),p.s&&("number"==typeof p.s&&a.clearTimeout(p.s),p.s=null)}function DA(p){if(!X4(p.h)&&!p.s){p.s=!0;var b=p.Ga;dt||xi(),vt||(dt(),vt=!0),gn.add(b,p),p.B=0}}function yW(p,b){var C;C=b?b.l:p.U++;const R=od(p.I);Wr(R,"SID",p.K),Wr(R,"RID",C),Wr(R,"AID",p.T),s0(p,R),p.m&&p.o&&C1(R,p.m,p.o),C=new uf(p,p.j,C,p.B+1),null===p.m&&(C.H=p.o),b&&(p.i=b.D.concat(p.i)),b=vW(p,C,1e3),C.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),I1(p.h,C),v1(C,R,b)}function s0(p,b){p.H&&it(p.H,function(C,R){Wr(b,R,C)}),p.l&&nW({},function(C,R){Wr(b,R,C)})}function vW(p,b,C){C=Math.min(p.i.length,C);var R=p.l?w(p.l.Na,p.l,p):null;e:{var ae=p.i;let Ee=-1;for(;;){const We=["count="+C];-1==Ee?0<C?(Ee=ae[0].g,We.push("ofs="+Ee)):Ee=0:We.push("ofs="+Ee);let vr=!0;for(let Ns=0;Ns<C;Ns++){let Ln=ae[Ns].g;const eo=ae[Ns].map;if(Ln-=Ee,0>Ln)Ee=Math.max(0,ae[Ns].g-100),vr=!1;else try{Hce(eo,We,"req"+Ln+"_")}catch{R&&R(eo)}}if(vr){R=We.join("&");break e}}}return p=p.i.splice(0,C),b.D=p,R}function bW(p){if(!p.g&&!p.u){p.Y=1;var b=p.Fa;dt||xi(),vt||(dt(),vt=!0),gn.add(b,p),p.v=0}}function T1(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=KE(w(p.Fa,p),IW(p,p.v)),p.v++,0))}function D1(p){null!=p.A&&(a.clearTimeout(p.A),p.A=null)}function EW(p){p.g=new uf(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var b=od(p.qa);Wr(b,"RID","rpc"),Wr(b,"SID",p.K),Wr(b,"AID",p.T),Wr(b,"CI",p.F?"0":"1"),!p.F&&p.ja&&Wr(b,"TO",p.ja),Wr(b,"TYPE","xmlhttp"),s0(p,b),p.m&&p.o&&C1(b,p.m,p.o),p.L&&(p.g.I=p.L);var C=p.g;p=p.ia,C.L=1,C.v=IA(od(b)),C.m=null,C.P=!0,K4(C,p)}function SA(p){null!=p.C&&(a.clearTimeout(p.C),p.C=null)}function wW(p,b){var C=null;if(p.g==b){SA(p),D1(p),p.g=null;var R=2}else{if(!w1(p.h,b))return;C=b.D,eW(p.h,b),R=1}if(0!=p.G)if(b.o)if(1==R){C=b.m?b.m.length:0,b=Date.now()-b.F;var ae=p.B;wo(R=_A(),new $4(R,C)),DA(p)}else bW(p);else if(3==(ae=b.s)||0==ae&&0<b.X||!(1==R&&function Gce(p,b){return!(J4(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=b.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=KE(w(p.Ga,p,b),IW(p,p.B)),p.B++,0)))}(p,b)||2==R&&T1(p)))switch(C&&0<C.length&&(b=p.h,b.i=b.i.concat(C)),ae){case 1:Am(p,5);break;case 4:Am(p,10);break;case 3:Am(p,6);break;default:Am(p,2)}}function IW(p,b){let C=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(C*=2),C*b}function Am(p,b){if(p.j.info("Error code "+b),2==b){var C=w(p.fb,p),R=p.Xa;const ae=!R;R=new Cm(R||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||EA(R,"https"),IA(R),ae?function Bce(p,b){const C=new QE;if(a.Image){const R=new Image;R.onload=A(hf,C,"TestLoadImage: loaded",!0,b,R),R.onerror=A(hf,C,"TestLoadImage: error",!1,b,R),R.onabort=A(hf,C,"TestLoadImage: abort",!1,b,R),R.ontimeout=A(hf,C,"TestLoadImage: timeout",!1,b,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=p}else b(!1)}(R.toString(),C):function Uce(p,b){new QE;const R=new AbortController,ae=setTimeout(()=>{R.abort(),hf(0,0,!1,b)},1e4);fetch(p,{signal:R.signal}).then(Ee=>{clearTimeout(ae),hf(0,0,!!Ee.ok,b)}).catch(()=>{clearTimeout(ae),hf(0,0,!1,b)})}(R.toString(),C)}else Io(2);p.G=0,p.l&&p.l.sa(b),CW(p),_W(p)}function CW(p){if(p.G=0,p.ka=[],p.l){const b=tW(p.h);(0!=b.length||0!=p.i.length)&&(N(p.ka,b),N(p.ka,p.i),p.h.i.length=0,M(p.i),p.i.length=0),p.l.ra()}}function AW(p,b,C){var R=C instanceof Cm?od(C):new Cm(C);if(""!=R.g)b&&(R.g=b+"."+R.g),wA(R,R.s);else{var ae=a.location;R=ae.protocol,b=b?b+"."+ae.hostname:ae.hostname,ae=+ae.port;var Ee=new Cm(null);R&&EA(Ee,R),b&&(Ee.g=b),ae&&wA(Ee,ae),C&&(Ee.l=C),R=Ee}return b=p.ya,(C=p.D)&&b&&Wr(R,C,b),Wr(R,"VER",p.la),s0(p,R),R}function TW(p,b,C){if(b&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(b=new _i(p.Ca&&!p.pa?new e0({eb:C}):p.pa)).Ha(p.J),b}function DW(){}function xA(){}function Oa(p,b){Js.call(this),this.g=new gW(b),this.l=p,this.h=b&&b.messageUrlParams||null,p=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(p?p["X-WebChannel-Content-Type"]=b.messageContentType:p={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.va&&(p?p["X-WebChannel-Client-Profile"]=b.va:p={"X-WebChannel-Client-Profile":b.va}),this.g.S=p,(p=b&&b.Sb)&&!W(p)&&(this.g.m=p),this.v=b&&b.supportsCrossDomainXhr||!1,this.u=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!W(b)&&(this.g.D=b,null!==(p=this.h)&&b in p&&b in(p=this.h)&&delete p[b]),this.j=new xy(this)}function SW(p){m1.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var b=p.__sm__;if(b){e:{for(const C in b){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,b=null!==b&&p in b?b[p]:void 0),this.data=b}else this.data=p}function xW(){g1.call(this),this.status=1}function xy(p){this.g=p}(n=_i.prototype).Ha=function(p){this.J=p},n.ea=function(p,b,C,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);b=b?b.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_1.g(),this.v=function B4(p){return p.h||(p.h=p.i())}(this.o?this.o:_1),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(b,String(p),!0),this.B=!1}catch(Ee){return void dW(this,Ee)}if(p=C||"",C=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var ae in R)C.set(ae,R[ae]);else{if("function"!=typeof R.keys||"function"!=typeof R.get)throw Error("Unknown input type for opt_headers: "+String(R));for(const Ee of R.keys())C.set(Ee,R.get(Ee))}R=Array.from(C.keys()).find(Ee=>"content-type"==Ee.toLowerCase()),ae=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call($ce,b,void 0))||R||ae||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,We]of C)this.g.setRequestHeader(Ee,We);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pW(this),this.u=!0,this.g.send(p),this.u=!1}catch(Ee){dW(this,Ee)}},n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,wo(this,"complete"),wo(this,"abort"),AA(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),AA(this,!0)),_i.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fW(this):this.bb())},n.bb=function(){fW(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<ad(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var b=this.g.responseText;return p&&0==b.indexOf(p)&&(b=b.substring(p.length)),wce(b)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=gW.prototype).la=8,n.G=1,n.connect=function(p,b,C,R){Io(0),this.W=p,this.H=b||{},C&&void 0!==R&&(this.H.OSID=C,this.H.OAID=R),this.F=this.X,this.I=AW(this,null,this.W),DA(this)},n.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ae=new uf(this,this.j,p);let Ee=this.o;if(this.S&&(Ee?(Ee=L(Ee),X(Ee,this.S)):Ee=this.S),null!==this.m||this.O||(ae.H=Ee,Ee=null),this.P)e:{for(var b=0,C=0;C<this.i.length;C++){var R=this.i[C];if(void 0===(R="__data__"in R.map&&"string"==typeof(R=R.map.__data__)?R.length:void 0))break;if(4096<(b+=R)){b=C;break e}if(4096===b||C===this.i.length-1){b=C+1;break e}}b=1e3}else b=1e3;b=vW(this,ae,b),Wr(C=od(this.I),"RID",p),Wr(C,"CVER",22),this.D&&Wr(C,"X-HTTP-Session-Id",this.D),s0(this,C),Ee&&(this.O?b="headers="+encodeURIComponent(String(uW(Ee)))+"&"+b:this.m&&C1(C,this.m,Ee)),I1(this.h,ae),this.Ua&&Wr(C,"TYPE","init"),this.P?(Wr(C,"$req",b),Wr(C,"SID","null"),ae.T=!0,v1(ae,C,null)):v1(ae,C,b),this.G=2}}else 3==this.G&&(p?yW(this,p):0==this.i.length||X4(this.h)||yW(this))},n.Fa=function(){if(this.u=null,EW(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=KE(w(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Io(10),TA(this),EW(this))},n.Za=function(){null!=this.C&&(this.C=null,TA(this),T1(this),Io(19))},n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Io(2)):(this.j.info("Failed to ping google.com"),Io(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=DW.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},xA.prototype.g=function(p,b){return new Oa(p,b)},S(Oa,Js),Oa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Oa.prototype.close=function(){A1(this.g)},Oa.prototype.o=function(p){var b=this.g;if("string"==typeof p){var C={};C.__data__=p,p=C}else this.u&&((C={}).__data__=f1(p),p=C);b.i.push(new class{constructor(p,b){this.g=p,this.map=b}}(b.Ya++,p)),3==b.G&&DA(b)},Oa.prototype.N=function(){this.g.l=null,delete this.j,A1(this.g),delete this.g,Oa.aa.N.call(this)},S(SW,m1),S(xW,g1),S(xy,DW),xy.prototype.ua=function(){wo(this.g,"a")},xy.prototype.ta=function(p){wo(this.g,new SW(p))},xy.prototype.sa=function(p){wo(this.g,new xW)},xy.prototype.ra=function(){wo(this.g,"b")},xA.prototype.createWebChannel=xA.prototype.g,Oa.prototype.send=Oa.prototype.o,Oa.prototype.open=Oa.prototype.m,Oa.prototype.close=Oa.prototype.close,kj=Ku.createWebChannelTransport=function(){return new xA},Mj=Ku.getStatEventTarget=function(){return _A()},Pj=Ku.Event=wm,RR=Ku.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yA.NO_ERROR=0,yA.TIMEOUT=8,yA.HTTP_ERROR=6,mC=Ku.ErrorCode=yA,W4.COMPLETE="complete",Rj=Ku.EventType=W4,U4.EventType=GE,GE.OPEN="a",GE.CLOSE="b",GE.ERROR="c",GE.MESSAGE="d",Js.prototype.listen=Js.prototype.K,rE=Ku.WebChannel=U4,Ku.FetchXmlHttpFactory=e0,_i.prototype.listenOnce=_i.prototype.L,_i.prototype.getLastError=_i.prototype.Ka,_i.prototype.getLastErrorCode=_i.prototype.Ba,_i.prototype.getStatus=_i.prototype.Z,_i.prototype.getResponseJson=_i.prototype.Oa,_i.prototype.getResponseText=_i.prototype.oa,_i.prototype.send=_i.prototype.ea,_i.prototype.setWithCredentials=_i.prototype.Ha,xj=Ku.XhrIo=_i}).apply(typeof pC<"u"?pC:typeof self<"u"?self:typeof window<"u"?window:{});const Oj="@firebase/firestore";class bs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");let z_="10.14.0";const Uh=new Vl.Vy("@firebase/firestore");function $_(){return Uh.logLevel}function Fe(n,...e){if(Uh.logLevel<=Vl.$b.DEBUG){const t=e.map(PR);Uh.debug(`Firestore (${z_}): ${n}`,...t)}}function Di(n,...e){if(Uh.logLevel<=Vl.$b.ERROR){const t=e.map(PR);Uh.error(`Firestore (${z_}): ${n}`,...t)}}function Pa(n,...e){if(Uh.logLevel<=Vl.$b.WARN){const t=e.map(PR);Uh.warn(`Firestore (${z_}): ${n}`,...t)}}function PR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${z_}) INTERNAL ASSERTION FAILED: `+n;throw Di(e),new Error(e)}function ot(n,e){n||rt()}function ze(n,e){return n}const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends $n.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Es{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Nj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pre{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bs.UNAUTHENTICATED))}shutdown(){}}class Mre{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kre{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;ot(void 0===this.o);let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let o=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Es,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable((0,we.A)(function*(){yield h.promise,yield s(r.currentUser)}))},c=h=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Es)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ot("string"==typeof r.accessToken),new Nj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(null===e||"string"==typeof e),new bs(e)}}class Ore{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Nre{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Ore(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ot(void 0===this.o);const r=s=>{null!=s.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ot("string"==typeof t.token),this.R=t.token,new Fj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Lre(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Lj{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Lre(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function W_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Vj(n){return n+"\0"}class ni{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ni.fromMillis(Date.now())}static fromDate(e){return ni.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ni(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ut{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ut(e)}static min(){return new ut(new ni(0,0))}static max(){return new ut(new ni(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class iE{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===iE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof iE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class bn extends iE{construct(e,t,r){return new bn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new bn(t)}static emptyPath(){return new bn([])}}const Vre=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends iE{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return Vre.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Pe(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new Pe(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new Pe(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Pe(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(bn.fromString(e))}static fromName(e){return new qe(bn.fromString(e).popFirst(5))}static empty(){return new qe(bn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===bn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return bn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new bn(e.slice()))}}class G_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function MR(n){return n.fields.find(e=>2===e.kind)}function tm(n){return n.fields.filter(e=>2!==e.kind)}G_.UNKNOWN_ID=-1;class nm{constructor(e,t){this.fieldPath=e,this.kind=t}}class q_{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new q_(0,Ma.min())}}function Bj(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ut.fromTimestamp(1e9===r?new ni(t+1,0):new ni(t,r));return new Ma(i,qe.empty(),e)}function Uj(n){return new Ma(n.readTime,n.key,-1)}class Ma{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ma(ut.min(),qe.empty(),-1)}static max(){return new Ma(ut.max(),qe.empty(),-1)}}function kR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const jj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function jh(n){return OR.apply(this,arguments)}function OR(){return(OR=(0,we.A)(function*(n){if(n.code!==ye.FAILED_PRECONDITION||n.message!==jj)throw n;Fe("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const h=c;t(e[h]).next(m=>{o[h]=m,++a,a===s&&r(o)},m=>i(m))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class gC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Es,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new sE(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=NR(r.target.error);this.V.reject(new sE(e,i))}}static open(e,t,r,i){try{return new gC(t,e.transaction(i,r))}catch(s){throw new sE(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Hre(t)}}class Bl{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Bl.S((0,$n.ZQ)())&&Di("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),rm(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,$n.zW)())return!1;if(Bl.v())return!0;const e=(0,$n.ZQ)(),t=Bl.S(e),r=0<t&&t<10,i=zj(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,we.A)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new sE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new Pe(ye.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Pe(ye.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new sE(e,a))},s.onupgradeneeded=o=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.O(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,we.A)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.M(e);const c=gC.open(s.db,e,o?"readonly":"readwrite",r),h=i(c).next(m=>(c.g(),m)).catch(m=>(c.abort(m),ce.reject(m))).toPromise();return h.catch(()=>{}),yield c.m,h}catch(c){const h=c,m="FirebaseError"!==h.name&&a<3;if(Fe("SimpleDb","Transaction failed with error:",h.message,"Retrying:",m),s.close(),!m)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function zj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class jre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return rm(this.B.delete())}}class sE extends Pe{constructor(e,t){super(ye.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Hh(n){return"IndexedDbTransactionError"===n.name}class Hre{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rm(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),rm(this.store.add(e))}get(e){return rm(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),rm(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),rm(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new ce((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const o=NR(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){const r=[];return new ce((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new jre(a),h=t(a.primaryKey,a.value,c);if(h instanceof ce){const m=h.catch(v=>(c.done(),ce.reject(v)));r.push(m)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rm(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=NR(r.target.error);t(i)}})}let $j=!1;function NR(n){const e=Bl.S((0,$n.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $j||($j=!0,setTimeout(()=>{throw r},0)),r}}return n}class zre{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;Fe("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.A)(function*(){t.task=null;try{Fe("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){Hh(r)?Fe("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield jh(r)}yield t.X(6e4)}))}}class $re{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,we.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return Fe("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(Fe("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=Uj(s);kR(o,r)>0&&(r=o)}),new Ma(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ka=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function oE(n){return null==n}function aE(n){return 0===n&&1/n==-1/0}function Wj(n){return"number"==typeof n&&Number.isInteger(n)&&!aE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Qs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gj(e)),e=Wre(n.get(t),e);return Gj(e)}function Wre(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function Gj(n){return n+"\x01\x01"}function Ul(n){const e=n.length;if(ot(e>=2),2===e)return ot("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),bn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&rt(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:rt()}s=o+2}return new bn(r)}const qj=["userId","batchId"];function _C(n,e){return[n,Qs(e)]}function Kj(n,e,t){return[n,Qs(e),t]}const Gre={},qre=["prefixPath","collectionGroup","readTime","documentId"],Kre=["prefixPath","collectionGroup","documentId"],Qre=["collectionGroup","readTime","prefixPath","documentId"],Yre=["canonicalId","targetId"],Zre=["targetId","path"],Xre=["path","targetId"],Jre=["collectionId","parent"],eie=["indexId","uid"],tie=["uid","sequenceNumber"],nie=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rie=["indexId","uid","orderedDocumentKey"],iie=["userId","collectionPath","documentId"],sie=["userId","collectionPath","largestBatchId"],oie=["userId","collectionGroup","largestBatchId"],Qj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aie=[...Qj,"documentOverlays"],Yj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zj=Yj,FR=[...Zj,"indexConfiguration","indexState","indexEntries"],cie=FR,lie=[...FR,"globals"];class LR extends Hj{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function ss(n,e){const t=ze(n);return Bl.F(t._e,e)}function Xj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eH(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Rr{constructor(e,t){this.comparator=e,this.root=t||Ms.EMPTY}insert(e,t){return new Rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ms.BLACK,null,null))}remove(e){return new Rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ms.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yC(this.root,e,this.comparator,!1)}getReverseIterator(){return new yC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yC(this.root,e,this.comparator,!0)}}class yC{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ms{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Ms.RED,this.left=i??Ms.EMPTY,this.right=s??Ms.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ms(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ms.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ms.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ms.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ms.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Ms.EMPTY=null,Ms.RED=!0,Ms.BLACK=!1,Ms.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Ms(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new Rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tH(this.data.getIterator())}getIteratorFrom(e){return new tH(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class tH{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function K_(n){return n.hasNext()?n.getNext():void 0}class Go{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new Go([])}unionWith(e){let t=new cr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Go(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return W_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class nH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nH("Invalid base64 string: "+s):s}}(e);return new pi(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const die=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qu(n){if(ot(!!n),"string"==typeof n){let e=0;const t=die.exec(n);if(ot(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ri(n.seconds),nanos:ri(n.nanos)}}function ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Yu(n){return"string"==typeof n?pi.fromBase64String(n):pi.fromUint8Array(n)}function vC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bC(n){const e=n.mapValue.fields.__previous_value__;return vC(e)?bC(e):e}function cE(n){const e=Qu(n.mapValue.fields.__local_write_time__.timestampValue);return new ni(e.seconds,e.nanos)}class hie{constructor(e,t,r,i,s,o,a,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=h}}class $h{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new $h("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof $h&&e.projectId===this.projectId&&e.database===this.database}}const Wh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},EC={nullValue:"NULL_VALUE"};function Gh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vC(n)?4:aH(n)?9007199254740991:CC(n)?10:11:rt()}function jl(n,e){if(n===e)return!0;const t=Gh(n);if(t!==Gh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cE(n).isEqual(cE(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Qu(i.timestampValue),a=Qu(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Yu(n.bytesValue).isEqual(Yu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ri(i.geoPointValue.latitude)===ri(s.geoPointValue.latitude)&&ri(i.geoPointValue.longitude)===ri(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ri(i.integerValue)===ri(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ri(i.doubleValue),a=ri(s.doubleValue);return o===a?aE(o)===aE(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return W_(n.arrayValue.values||[],e.arrayValue.values||[],jl);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Xj(o)!==Xj(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(void 0===a[c]||!jl(o[c],a[c])))return!1;return!0}(n,e);default:return rt()}var s}function lE(n,e){return void 0!==(n.values||[]).find(t=>jl(t,e))}function qh(n,e){if(n===e)return 0;const t=Gh(n),r=Gh(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ri(s.integerValue||s.doubleValue),c=ri(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return rH(n.timestampValue,e.timestampValue);case 4:return rH(cE(n),cE(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Yu(s),c=Yu(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const m=Lt(a[h],c[h]);if(0!==m)return m}return Lt(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Lt(ri(s.latitude),ri(o.latitude));return 0!==a?a:Lt(ri(s.longitude),ri(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return iH(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,h,m;const A=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,S=null===(c=(o.fields||{}).value)||void 0===c?void 0:c.arrayValue,M=Lt((null===(h=A?.values)||void 0===h?void 0:h.length)||0,(null===(m=S?.values)||void 0===m?void 0:m.length)||0);return 0!==M?M:iH(A,S)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Wh.mapValue&&o===Wh.mapValue)return 0;if(s===Wh.mapValue)return 1;if(o===Wh.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),h=o.fields||{},m=Object.keys(h);c.sort(),m.sort();for(let v=0;v<c.length&&v<m.length;++v){const w=Lt(c[v],m[v]);if(0!==w)return w;const A=qh(a[c[v]],h[m[v]]);if(0!==A)return A}return Lt(c.length,m.length)}(n.mapValue,e.mapValue);default:throw rt()}}function rH(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=Qu(n),r=Qu(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function iH(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=qh(t[i],r[i]);if(s)return s}return Lt(t.length,r.length)}function Q_(n){return VR(n)}function VR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Qu(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Yu(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=VR(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${VR(t.fields[o])}`;return i+"}"}(n.mapValue):rt()}function im(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function BR(n){return!!n&&"integerValue"in n}function uE(n){return!!n&&"arrayValue"in n}function sH(n){return!!n&&"nullValue"in n}function oH(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function IC(n){return!!n&&"mapValue"in n}function CC(n){var e,t;return"__vector__"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aH(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}const cH={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fie(n){return"nullValue"in n?EC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?im($h.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?CC(n)?cH:{mapValue:{}}:rt()}function pie(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?im($h.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?cH:"mapValue"in n?CC(n)?{mapValue:{}}:Wh:rt()}function lH(n,e){const t=qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function uH(n,e){const t=qh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ks{constructor(e){this.value=e}static empty(){return new ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!IC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dE(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=dE(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());IC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];IC(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zh(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ks(dE(this.value))}}function dH(n){const e=[];return zh(n.fields,(t,r)=>{const i=new Ur([t]);if(IC(r)){const s=dH(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Go(e)}class jr{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new jr(e,0,ut.min(),ut.min(),ut.min(),ks.empty(),0)}static newFoundDocument(e,t,r,i){return new jr(e,1,t,ut.min(),r,i,0)}static newNoDocument(e,t){return new jr(e,2,t,ut.min(),ut.min(),ks.empty(),0)}static newUnknownDocument(e,t){return new jr(e,3,t,ut.min(),ut.min(),ks.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ut.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ut.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof jr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function hH(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?qe.comparator(qe.fromName(o.referenceValue),t.key):qh(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fH(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jl(n.position[t],e.position[t]))return!1;return!0}class hE{constructor(e,t="asc"){this.field=e,this.dir=t}}function mie(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class pH{}class En extends pH{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gie(e,t,r):"array-contains"===t?new vie(e,r):"in"===t?new bH(e,r):"not-in"===t?new bie(e,r):"array-contains-any"===t?new Eie(e,r):new En(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new _ie(e,r):new yie(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(qh(t,this.value)):null!==t&&Gh(this.value)===Gh(t)&&this.matchesComparison(qh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends pH{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Jn(e,t)}matches(e){return Y_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Y_(n){return"and"===n.op}function UR(n){return"or"===n.op}function jR(n){return mH(n)&&Y_(n)}function mH(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function HR(n){if(n instanceof En)return n.field.canonicalString()+n.op.toString()+Q_(n.value);if(jR(n))return n.filters.map(e=>HR(e)).join(",");{const e=n.filters.map(t=>HR(t)).join(",");return`${n.op}(${e})`}}function gH(n,e){return n instanceof En?(r=n,(i=e)instanceof En&&r.op===i.op&&r.field.isEqual(i.field)&&jl(r.value,i.value)):n instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&gH(o,i.filters[a]),!0)}(n,e):void rt();var r,i}function _H(n,e){const t=n.filters.concat(e);return Jn.create(t,n.op)}function yH(n){return n instanceof En?`${(t=n).field.canonicalString()} ${t.op} ${Q_(t.value)}`:n instanceof Jn?function(t){return t.op.toString()+" {"+t.getFilters().map(yH).join(" ,")+"}"}(n):"Filter";var t}class gie extends En{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class _ie extends En{constructor(e,t){super(e,"in",t),this.keys=vH(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yie extends En{constructor(e,t){super(e,"not-in",t),this.keys=vH(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vH(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class vie extends En{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uE(t)&&lE(t.arrayValue,this.value)}}class bH extends En{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&lE(this.value.arrayValue,t)}}class bie extends En{constructor(e,t){super(e,"not-in",t)}matches(e){if(lE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!lE(this.value.arrayValue,t)}}class Eie extends En{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>lE(this.value.arrayValue,r))}}class wie{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function zR(n,e=null,t=[],r=[],i=null,s=null,o=null){return new wie(n,e,t,r,i,s,o)}function sm(n){const e=ze(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),oE(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Q_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Q_(r)).join(",")),e.ue=t}return e.ue}function fE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mie(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gH(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fH(n.startAt,e.startAt)&&fH(n.endAt,e.endAt)}function AC(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function TC(n,e){return n.filters.filter(t=>t instanceof En&&t.field.isEqual(e))}function EH(n,e,t){let r=EC,i=!0;for(const s of TC(n,e)){let o=EC,a=!0;switch(s.op){case"<":case"<=":o=fie(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=EC}lH({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];lH({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function wH(n,e,t){let r=Wh,i=!0;for(const s of TC(n,e)){let o=Wh,a=!0;switch(s.op){case">=":case">":o=pie(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Wh}uH({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];uH({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class Zu{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function IH(n,e,t,r,i,s,o,a){return new Zu(n,e,t,r,i,s,o,a)}function Z_(n){return new Zu(n)}function CH(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $R(n){return null!==n.collectionGroup}function X_(n){const e=ze(n);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new cr(Ur.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hE(s,r))}),t.has(Ur.keyField().canonicalString())||e.ce.push(new hE(Ur.keyField(),r))}return e.ce}function Ys(n){const e=ze(n);return e.le||(e.le=function TH(n,e){if("F"===n.limitType)return zR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new hE(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new Kh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kh(n.startAt.position,n.startAt.inclusive):null;return zR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,X_(n))),e.le}function WR(n,e){const t=n.filters.concat([e]);return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function DC(n,e,t){return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pE(n,e){return fE(Ys(n),Ys(e))&&n.limitType===e.limitType}function DH(n){return`${sm(Ys(n))}|lt:${n.limitType}`}function J_(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>yH(i)).join(", ")}]`),oE(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Q_(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Q_(i)).join(",")),`Target(${r})`}(Ys(n))}; limitType=${n.limitType})`}function mE(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of X_(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,c){const h=hH(o,a,c);return o.inclusive?h<=0:h<0}(r.startAt,X_(r),i)||r.endAt&&!function(o,a,c){const h=hH(o,a,c);return o.inclusive?h>=0:h>0}(r.endAt,X_(r),i)));var r,i}function SH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xH(n){return(e,t)=>{let r=!1;for(const i of X_(n)){const s=Iie(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Iie(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(s,o,a){const c=o.data.field(s),h=a.data.field(s);return null!==c&&null!==h?qh(c,h):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}class Xu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zh(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return eH(this.inner)}size(){return this.innerSize}}const Cie=new Rr(qe.comparator);function qo(){return Cie}const RH=new Rr(qe.comparator);function gE(...n){let e=RH;for(const t of n)e=e.insert(t.key,t);return e}function PH(n){let e=RH;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hl(){return _E()}function MH(){return _E()}function _E(){return new Xu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Aie=new Rr(qe.comparator),Tie=new cr(qe.comparator);function Jt(...n){let e=Tie;for(const t of n)e=e.add(t);return e}const Die=new cr(Lt);function GR(){return Die}function qR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:aE(e)?"-0":e}}function kH(n){return{integerValue:""+n}}function OH(n,e){return Wj(e)?kH(e):qR(n,e)}class SC{constructor(){this._=void 0}}function Sie(n,e,t){return n instanceof ey?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vC(s)&&(s=bC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof om?FH(n,e):n instanceof am?LH(n,e):function(i,s){const o=NH(i,s),a=VH(o)+VH(i.Pe);return BR(o)&&BR(i.Pe)?kH(a):qR(i.serializer,a)}(n,e)}function xie(n,e,t){return n instanceof om?FH(n,e):n instanceof am?LH(n,e):t}function NH(n,e){return n instanceof ty?BR(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class ey extends SC{}class om extends SC{constructor(e){super(),this.elements=e}}function FH(n,e){const t=BH(e);for(const r of n.elements)t.some(i=>jl(i,r))||t.push(r);return{arrayValue:{values:t}}}class am extends SC{constructor(e){super(),this.elements=e}}function LH(n,e){let t=BH(e);for(const r of n.elements)t=t.filter(i=>!jl(i,r));return{arrayValue:{values:t}}}class ty extends SC{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function VH(n){return ri(n.integerValue||n.doubleValue)}function BH(n){return uE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class yE{constructor(e,t){this.field=e,this.transform=t}}class Pie{constructor(e,t){this.version=e,this.transformResults=t}}class ii{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ii}static exists(e){return new ii(void 0,e)}static updateTime(e){return new ii(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class RC{}function UH(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ry(n.key,ii.none()):new ny(n.key,n.data,ii.none());{const t=n.data,r=ks.empty();let i=new cr(Ur.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ju(n.key,r,new Go(i.toArray()),ii.none())}}function Mie(n,e,t){n instanceof ny?function(i,s,o){const a=i.value.clone(),c=zH(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ju?function(i,s,o){if(!xC(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=zH(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(HH(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vE(n,e,t,r){return n instanceof ny?function(s,o,a,c){if(!xC(s.precondition,o))return a;const h=s.value.clone(),m=$H(s.fieldTransforms,c,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ju?function(s,o,a,c){if(!xC(s.precondition,o))return a;const h=$H(s.fieldTransforms,c,o),m=o.data;return m.setAll(HH(s)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(n,e,t,r):(a=t,xC(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function kie(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=NH(r.transform,i||null);null!=s&&(null===t&&(t=ks.empty()),t.set(r.field,s))}return t||null}function jH(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&W_(r,i,(s,o)=>function Rie(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof om&&i instanceof om||r instanceof am&&i instanceof am?W_(r.elements,i.elements,jl):r instanceof ty&&i instanceof ty?jl(r.Pe,i.Pe):r instanceof ey&&i instanceof ey);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class ny extends RC{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ju extends RC{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function HH(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function zH(n,e,t){const r=new Map;ot(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,xie(o,a,t[i]))}return r}function $H(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Sie(s,o,e))}return r}class ry extends RC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends RC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Mie(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vE(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vE(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MH();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const c=UH(o,a);null!==c&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ut.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&W_(this.mutations,e.mutations,(t,r)=>jH(t,r))&&W_(this.baseMutations,e.baseMutations,(t,r)=>jH(t,r))}}class YR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ot(e.mutations.length===r.length);let i=Aie;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new YR(e,t,r,i)}}class ZR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Oie{constructor(e,t){this.count=e,this.unchangedNames=t}}var ji,Tn;function GH(n){switch(n){default:return rt();case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0}}function qH(n){if(void 0===n)return Di("GRPC error has no .code"),ye.UNKNOWN;switch(n){case ji.OK:return ye.OK;case ji.CANCELLED:return ye.CANCELLED;case ji.UNKNOWN:return ye.UNKNOWN;case ji.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case ji.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case ji.INTERNAL:return ye.INTERNAL;case ji.UNAVAILABLE:return ye.UNAVAILABLE;case ji.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case ji.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case ji.NOT_FOUND:return ye.NOT_FOUND;case ji.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case ji.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case ji.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case ji.ABORTED:return ye.ABORTED;case ji.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case ji.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case ji.DATA_LOSS:return ye.DATA_LOSS;default:return rt()}}(Tn=ji||(ji={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";function KH(){return new TextEncoder}const Nie=new em([4294967295,4294967295],0);function QH(n){const e=KH().encode(n),t=new Sj;return t.update(e),new Uint8Array(t.digest())}function YH(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new em([t,r],0),new em([i,s],0)]}class XR{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bE(`Invalid padding: ${t}`);if(r<0)throw new bE(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new bE(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new bE(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=em.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(em.fromNumber(r)));return 1===i.compare(Nie)&&(i=new em([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=QH(e),[r,i]=YH(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new XR(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const t=QH(e),[r,i]=YH(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class bE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class EE{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wE.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new EE(ut.min(),i,new Rr(Lt),qo(),Jt())}}class wE{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wE(r,t,Jt(),Jt(),Jt())}}class MC{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class ZH{constructor(e,t){this.targetId=e,this.me=t}}class XH{constructor(e,t,r=pi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class JH{constructor(){this.fe=0,this.ge=tz(),this.pe=pi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Jt(),t=Jt(),r=Jt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new wE(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=tz()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ot(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Fie{constructor(e){this.Le=e,this.Be=new Map,this.ke=qo(),this.qe=ez(),this.Qe=new Rr(Lt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(AC(s))if(0===r){const o=new qe(s.path);this.Ue(t,o,jr.newNoDocument(o,ut.min()))}else ot(1===r);else{const o=this.Ye(t);if(o!==r){const a=this.Ze(e),c=a?this.Xe(a,e,o):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=Yu(r).toUint8Array()}catch(c){if(c instanceof nH)return Pa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new XR(o,i,s)}catch(c){return Pa(c instanceof bE?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&AC(a.target)){const c=new qe(a.target.path);null!==this.ke.get(c)||this.it(o,c)||this.Ue(o,c,jr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Jt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||"TargetPurposeLimboResolution"===h.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new EE(e,t,this.Qe,this.ke,r);return this.ke=qo(),this.qe=ez(),this.Qe=new Rr(Lt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new JH,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new cr(Lt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new JH),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ez(){return new Rr(qe.comparator)}function tz(){return new Rr(qe.comparator)}const Lie={asc:"ASCENDING",desc:"DESCENDING"},Vie={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bie={and:"AND",or:"OR"};class Uie{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function JR(n,e){return n.useProto3Json||oE(e)?e:{value:e}}function iy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jie(n,e){return iy(n,e.toTimestamp())}function Si(n){return ot(!!n),ut.fromTimestamp(function(t){const r=Qu(t);return new ni(r.seconds,r.nanos)}(n))}function eP(n,e){return tP(n,e).canonicalString()}function tP(n,e){const t=(i=n,new bn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function rz(n){const e=bn.fromString(n);return ot(pz(e)),e}function IE(n,e){return eP(n.databaseId,e.path)}function zl(n,e){const t=rz(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(oz(t))}function iz(n,e){return eP(n.databaseId,e)}function sz(n){const e=rz(n);return 4===e.length?bn.emptyPath():oz(e)}function nP(n){return new bn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oz(n){return ot(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function az(n,e,t){return{name:IE(n,e),fields:t.value.mapValue.fields}}function cz(n,e,t){const r=zl(n,e.name),i=Si(e.updateTime),s=e.createTime?Si(e.createTime):ut.min(),o=new ks({mapValue:{fields:e.fields}}),a=jr.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function CE(n,e){let t;if(e instanceof ny)t={update:az(n,e.key,e.value)};else if(e instanceof ry)t={delete:IE(n,e.key)};else if(e instanceof Ju)t={update:az(n,e.key,e.data),updateMask:Qie(e.fieldMask)};else{if(!(e instanceof KR))return rt();t={verify:IE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ey)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof om)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof am)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ty)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:jie(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function rP(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ii.updateTime(Si(s.updateTime)):void 0!==s.exists?ii.exists(s.exists):ii.none():ii.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;"setToServerValue"in a?(ot("REQUEST_TIME"===a.setToServerValue),c=new ey):"appendMissingElements"in a?c=new om(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new am(a.removeAllFromArray.values||[]):"increment"in a?c=new ty(o,a.increment):rt();const h=Ur.fromServerFormat(a.fieldPath);return new yE(h,c)}(n,i)):[];var s;if(e.update){const i=zl(n,e.update.name),s=new ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Go((e.updateMask.fieldPaths||[]).map(m=>Ur.fromServerFormat(m)));return new Ju(i,s,o,t,r)}return new ny(i,s,t,r)}if(e.delete){const i=zl(n,e.delete);return new ry(i,t)}if(e.verify){const i=zl(n,e.verify);return new KR(i,t)}return rt()}function lz(n,e){return{documents:[iz(n,e.path)]}}function kC(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iz(n,i);const s=function(h){if(0!==h.length)return fz(Jn.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(0!==h.length)return h.map(m=>{return{field:Qh((w=m).field),direction:Gie(w.dir)};var w})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=JR(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:t,parent:i};var h}function dz(n){let e=sz(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){ot(1===r);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let s=[];t.where&&(s=function(v){const w=hz(v);return w instanceof Jn&&jR(w)?w.getFilters():[w]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(w=>{return new hE(sy((S=w).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let a=null;t.limit&&(a=function(v){let w;return w="object"==typeof v?v.value:v,oE(w)?null:w}(t.limit));let c=null;var v;t.startAt&&(c=new Kh((v=t.startAt).values||[],!!v.before));let h=null;return t.endAt&&(h=function(v){return new Kh(v.values||[],!v.before)}(t.endAt)),IH(e,i,o,s,a,"F",c,h)}function hz(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=sy(t.unaryFilter.field);return En.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sy(t.unaryFilter.field);return En.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sy(t.unaryFilter.field);return En.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=sy(t.unaryFilter.field);return En.create(o,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?En.create(sy((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Jn.create(t.compositeFilter.filters.map(r=>hz(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt()}}(t.compositeFilter.op))}(n):rt();var t}function Gie(n){return Lie[n]}function qie(n){return Vie[n]}function Kie(n){return Bie[n]}function Qh(n){return{fieldPath:n.canonicalString()}}function sy(n){return Ur.fromServerFormat(n.fieldPath)}function fz(n){return n instanceof En?function(t){if("=="===t.op){if(oH(t.value))return{unaryFilter:{field:Qh(t.field),op:"IS_NAN"}};if(sH(t.value))return{unaryFilter:{field:Qh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(oH(t.value))return{unaryFilter:{field:Qh(t.field),op:"IS_NOT_NAN"}};if(sH(t.value))return{unaryFilter:{field:Qh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qh(t.field),op:qie(t.op),value:t.value}}}(n):n instanceof Jn?function(t){const r=t.getFilters().map(i=>fz(i));return 1===r.length?r[0]:{compositeFilter:{op:Kie(t.op),filters:r}}}(n):rt()}function Qie(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ed{constructor(e,t,r,i,s=ut.min(),o=ut.min(),a=pi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new ed(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ed(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mz{constructor(e){this.ct=e}}function gz(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:IE(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:iy(s,o.version.toTimestamp()),createTime:iy(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cm(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:cm(e.version)}}var s,o;return r}function OC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cm(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lm(n){const e=new ni(n.seconds,n.nanoseconds);return ut.fromTimestamp(e)}function um(n,e){const t=(e.baseMutations||[]).map(s=>rP(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>rP(n.ct,s)),i=ni.fromMillis(e.localWriteTimeMs);return new QR(e.batchId,i,t,r)}function AE(n){const e=lm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lm(n.lastLimboFreeSnapshotVersion):ut.min();let r;return r=void 0!==n.query.documents?(ot(1===(s=n.query).documents.length),Ys(Z_(sz(s.documents[0])))):function(s){return Ys(dz(s))}(n.query),new ed(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,pi.fromBase64String(n.resumeToken));var s}function _z(n,e){const t=cm(e.snapshotVersion),r=cm(e.lastLimboFreeSnapshotVersion);let i;i=AC(e.target)?lz(n.ct,e.target):kC(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sm(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iP(n){const e=dz({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DC(e,e.limit,"L"):e}function sP(n,e){return new ZR(e.largestBatchId,rP(n.ct,e.overlayMutation))}function yz(n,e){const t=e.path.lastSegment();return[n,Qs(e.path.popLast()),t]}function vz(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:cm(r.readTime),documentKey:Qs(r.documentKey.path),largestBatchId:r.largestBatchId}}class Zie{getBundleMetadata(e,t){return bz(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:lm(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return bz(e).put({bundleId:(i=t).id,createTime:cm(Si(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ez(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:iP(s.bundledQuery),readTime:lm(s.readTime)};var s})}saveNamedQuery(e,t){return Ez(e).put({name:(i=t).name,readTime:cm(Si(i.readTime)),bundledQuery:i.bundledQuery});var i}}function bz(n){return ss(n,"bundles")}function Ez(n){return ss(n,"namedQueries")}class NC{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new NC(e,t.uid||"")}getOverlay(e,t){return TE(e).get(yz(this.userId,t)).next(r=>r?sP(this.serializer,r):null)}getOverlays(e,t){const r=Hl();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new ZR(t,o);i.push(this.ht(e,a))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Qs(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(TE(e).j("collectionPathOverlayIndex",a))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Hl(),s=Qs(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return TE(e).U("collectionPathOverlayIndex",o).next(a=>{for(const c of a){const h=sP(this.serializer,c);i.set(h.getKey(),h)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Hl();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return TE(e).J({index:"collectionGroupOverlayIndex",range:a},(c,h,m)=>{const v=sP(this.serializer,h);s.size()<i||v.largestBatchId===o?(s.set(v.getKey(),v),o=v.largestBatchId):m.done()}).next(()=>s)}ht(e,t){return TE(e).put(function(i,s,o){const[a,c,h]=yz(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:h,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:CE(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function TE(n){return ss(n,"documentOverlays")}class Xie{Pt(e){return ss(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?pi.fromUint8Array(r):pi.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class dm{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ri(e.integerValue));else if("doubleValue"in e){const r=ri(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),aE(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Qu(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Yu(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?aH(e)?this.dt(t,Number.MAX_SAFE_INTEGER):CC(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):rt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(t,15),t.At(ri(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),qe.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Jie(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wz(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Jie(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}dm.vt=new dm;class ese{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=wz(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=wz(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class tse{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nse{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class DE{constructor(){this.jt=new ese,this.Ht=new tse(this.jt),this.Jt=new nse(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class hm{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new hm(this.indexId,this.documentKey,this.arrayValue,r)}}function Yh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Iz(n.arrayValue,e.arrayValue),0!==t?t:(t=Iz(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Iz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Cz{constructor(e){this.Xt=new cr((t,r)=>Ur.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ot(e.collectionGroup===this.collectionId),this.nn)return!1;const t=MR(e);if(void 0!==t&&!this.sn(t))return!1;const r=tm(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new cr(Ur.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new nm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new nm(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new nm(r.field,"asc"===r.dir?0:1)));return new G_(G_.UNKNOWN_ID,this.collectionId,t,q_.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Az(n){var e,t;if(ot(n instanceof En||n instanceof Jn),n instanceof En){if(n instanceof bH){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>En.create(n.field,"==",s)))||[];return Jn.create(i,"or")}return n}const r=n.filters.map(i=>Az(i));return Jn.create(r,n.op)}function rse(n){if(0===n.getFilters().length)return[];const e=cP(Az(n));return ot(Tz(e)),oP(e)||aP(e)?[e]:e.getFilters()}function oP(n){return n instanceof En}function aP(n){return n instanceof Jn&&jR(n)}function Tz(n){return oP(n)||aP(n)||function(t){if(t instanceof Jn&&UR(t)){for(const r of t.getFilters())if(!oP(r)&&!aP(r))return!1;return!0}return!1}(n)}function cP(n){if(ot(n instanceof En||n instanceof Jn),n instanceof En)return n;if(1===n.filters.length)return cP(n.filters[0]);const e=n.filters.map(r=>cP(r));let t=Jn.create(e,n.op);return t=FC(t),Tz(t)?t:(ot(t instanceof Jn),ot(Y_(t)),ot(t.filters.length>1),t.filters.reduce((r,i)=>lP(r,i)))}function lP(n,e){let t;return ot(n instanceof En||n instanceof Jn),ot(e instanceof En||e instanceof Jn),t=n instanceof En?e instanceof En?Jn.create([n,e],"and"):Dz(n,e):e instanceof En?Dz(e,n):function(i,s){if(ot(i.filters.length>0&&s.filters.length>0),Y_(i)&&Y_(s))return _H(i,s.getFilters());const o=UR(i)?i:s,a=UR(i)?s:i,c=o.filters.map(h=>lP(h,a));return Jn.create(c,"or")}(n,e),FC(t)}function Dz(n,e){if(Y_(e))return _H(e,n.getFilters());{const t=e.filters.map(r=>lP(n,r));return Jn.create(t,"or")}}function FC(n){if(ot(n instanceof En||n instanceof Jn),n instanceof En)return n;const e=n.getFilters();if(1===e.length)return FC(e[0]);if(mH(n))return n;const t=e.map(i=>FC(i)),r=[];return t.forEach(i=>{i instanceof En?r.push(i):i instanceof Jn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jn.create(r,n.op)}class ise{constructor(){this.un=new uP}addToCollectionParentIndex(e,t){return this.un.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ma.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ma.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class uP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(bn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(bn.comparator)).toArray()}}const LC=new Uint8Array(0);class sse{constructor(e,t){this.databaseId=t,this.cn=new uP,this.ln=new Xu(r=>sm(r),(r,i)=>fE(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Qs(i)};return Sz(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Vj(t),""],!1,!0);return Sz(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Ul(o.parent))}return r})}addFieldIndex(e,t){const r=SE(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=ay(e);return s.next(a=>{o.put(vz(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=SE(e),i=ay(e),s=oy(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=SE(e),r=oy(e),i=ay(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return ce.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Cz(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=oy(e);let i=!0;const s=new Map;return ce.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Jt();const a=[];return ce.forEach(s,(c,h)=>{var de;Fe("IndexedDbIndexManager",`Using index ${de=c,`id=${de.indexId}|cg=${de.collectionGroup}|f=${de.fields.map(Ae=>`${Ae.fieldPath}:${Ae.kind}`).join(",")}`} to execute ${sm(t)}`);const m=function(de,Ae){const Be=MR(Ae);if(void 0===Be)return null;for(const it of TC(de,Be.fieldPath))switch(it.op){case"array-contains-any":return it.value.arrayValue.values||[];case"array-contains":return[it.value]}return null}(h,c),v=function(de,Ae){const Be=new Map;for(const it of tm(Ae))for(const q of TC(de,it.fieldPath))switch(q.op){case"==":case"in":Be.set(it.fieldPath.canonicalString(),q.value);break;case"not-in":case"!=":return Be.set(it.fieldPath.canonicalString(),q.value),Array.from(Be.values())}return null}(h,c),w=function(de,Ae){const Be=[];let it=!0;for(const q of tm(Ae)){const L=0===q.kind?EH(de,q.fieldPath,de.startAt):wH(de,q.fieldPath,de.startAt);Be.push(L.value),it&&(it=L.inclusive)}return new Kh(Be,it)}(h,c),A=function(de,Ae){const Be=[];let it=!0;for(const q of tm(Ae)){const L=0===q.kind?wH(de,q.fieldPath,de.endAt):EH(de,q.fieldPath,de.endAt);Be.push(L.value),it&&(it=L.inclusive)}return new Kh(Be,it)}(h,c),S=this.In(c,h,w),M=this.In(c,h,A),N=this.Tn(c,h,v),ne=this.En(c.indexId,m,S,w.inclusive,M,A.inclusive,N);return ce.forEach(ne,W=>r.G(W,t.limit).next(de=>{de.forEach(Ae=>{const Be=qe.fromSegments(Ae.documentKey);o.has(Be)||(o=o.add(Be),a.push(Be))})}))}).next(()=>a)}return ce.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(t=0===e.filters.length?[e]:rse(Jn.create(e.filters,"and")).map(r=>zR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){const c=(null!=t?t.length:1)*Math.max(r.length,s.length),h=c/(null!=t?t.length:1),m=[];for(let v=0;v<c;++v){const w=t?this.dn(t[v/h]):LC,A=this.An(e,w,r[v%h],i),S=this.Rn(e,w,s[v%h],o),M=a.map(N=>this.An(e,w,N,!0));m.push(...this.createRange(A,S,M))}return m}An(e,t,r,i){const s=new hm(e,qe.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new hm(e,qe.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Cz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.hn(t);return ce.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new cr(Ur.comparator),m=!1;for(const v of c.filters)for(const w of v.getFlattenedFilters())w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?m=!0:h=h.add(w.field));for(const v of c.orderBy)v.field.isKeyField()||(h=h.add(v.field));return h.size+(m?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Vn(e,t){const r=new DE;for(const i of tm(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);dm.vt.It(s,o)}return r.zt()}dn(e){const t=new DE;return dm.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new DE;return dm.vt.It(im(this.databaseId,t),r.Yt(function(s){const o=tm(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(null===r)return[];let i=[];i.push(new DE);let s=0;for(const o of tm(e)){const a=r[s++];for(const c of i)if(this.fn(t,o.fieldPath)&&uE(a))i=this.gn(i,o,a);else{const h=c.Yt(o.kind);dm.vt.It(a,h)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const c=new DE;c.seed(a.zt()),dm.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof En&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=SE(e),i=ay(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const o=[];return ce.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(m,v){const w=v?new q_(v.sequenceNumber,new Ma(lm(v.readTime),new qe(Ul(v.documentKey)),v.largestBatchId)):q_.empty(),A=m.fields.map(([S,M])=>new nm(Ur.fromServerFormat(S),M));return new G_(m.indexId,m.collectionGroup,A,w)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=SE(e),s=ay(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>ce.forEach(a,c=>s.put(vz(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?ce.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),ce.forEach(a,c=>this.wn(e,i,c).next(h=>{const m=this.Sn(s,c);return h.isEqual(m)?ce.resolve():this.bn(e,s,c,h,m)}))))})}Dn(e,t,r,i){return oy(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return oy(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=oy(e);let s=new cr(Yh);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new hm(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new cr(Yh);const i=this.Vn(t,e);if(null==i)return r;const s=MR(t);if(null!=s){const o=e.data.field(s.fieldPath);if(uE(o))for(const a of o.arrayValue.values||[])r=r.add(new hm(t.indexId,e.key,this.dn(a),i))}else r=r.add(new hm(t.indexId,e.key,LC,i));return r}bn(e,t,r,i,s){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(c,h,m,v,w){const A=c.getIterator(),S=h.getIterator();let M=K_(A),N=K_(S);for(;M||N;){let ne=!1,W=!1;if(M&&N){const de=m(M,N);de<0?W=!0:de>0&&(ne=!0)}else null!=M?W=!0:ne=!0;ne?(v(N),N=K_(S)):W?(w(M),M=K_(A)):(M=K_(A),N=K_(S))}}(i,s,Yh,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),ce.waitFor(o)}yn(e){let t=1;return ay(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Yh(o,a)).filter((o,a,c)=>!a||0!==Yh(o,c[a-1]));const i=[];i.push(e);for(const o of r){const a=Yh(o,e),c=Yh(o,t);if(0===a)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,LC,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,LC,[]]))}return s}Cn(e,t){return Yh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xz)}getMinOffset(e,t){return ce.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||rt())).next(xz)}}function Sz(n){return ss(n,"collectionParents")}function oy(n){return ss(n,"indexEntries")}function SE(n){return ss(n,"indexConfiguration")}function ay(n){return ss(n,"indexState")}function xz(n){ot(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;kR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ma(e.readTime,e.documentKey,t)}const Rz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zs(e,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Pz(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:o},(m,v,w)=>(a++,w.delete()));s.push(c.next(()=>{ot(1===a)}));const h=[];for(const m of t.mutations){const v=Kj(e,m.key.path,t.batchId);s.push(i.delete(v)),h.push(m.key)}return ce.waitFor(s).next(()=>h)}function VC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Zs.DEFAULT_COLLECTION_PERCENTILE=10,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zs.DEFAULT=new Zs(41943040,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zs.DISABLED=new Zs(-1,0,0);class BC{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ot(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new BC(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=cy(e),o=Zh(e);return o.add({}).next(a=>{ot("number"==typeof a);const c=new QR(a,t,r,i),h=function(A,S,M){const N=M.baseMutations.map(W=>CE(A.ct,W)),ne=M.mutations.map(W=>CE(A.ct,W));return{userId:S,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:ne}}(this.serializer,this.userId,c),m=[];let v=new cr((w,A)=>Lt(w.canonicalString(),A.canonicalString()));for(const w of i){const A=Kj(this.userId,w.key.path,a);v=v.add(w.key.path.popLast()),m.push(o.put(h)),m.push(s.put(A,Gre))}return v.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),ce.waitFor(m).next(()=>c)})}lookupMutationBatch(e,t){return Zh(e).get(t).next(r=>r?(ot(r.userId===this.userId),um(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?ce.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Zh(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(ot(a.batchId>=r),s=um(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zh(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).U("userMutationsIndex",t).next(r=>r.map(i=>um(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=_C(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return cy(e).J({range:i},(o,a,c)=>{const[h,m,v]=o,w=Ul(m);if(h===this.userId&&t.path.isEqual(w))return Zh(e).get(v).next(A=>{if(!A)throw rt();ot(A.userId===this.userId),s.push(um(this.serializer,A))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Lt);const i=[];return t.forEach(s=>{const o=_C(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=cy(e).J({range:a},(h,m,v)=>{const[w,A,S]=h,M=Ul(A);w===this.userId&&s.path.isEqual(M)?r=r.add(S):v.done()});i.push(c)}),ce.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=_C(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new cr(Lt);return cy(e).J({range:o},(c,h,m)=>{const[v,w,A]=c,S=Ul(w);v===this.userId&&r.isPrefixOf(S)?S.length===i&&(a=a.add(A)):m.done()}).next(()=>this.xn(e,a))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Zh(e).get(s).next(o=>{if(null===o)throw rt();ot(o.userId===this.userId),r.push(um(this.serializer,o))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Pz(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cy(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const c=Ul(s[1]);i.push(c)}else a.done()}).next(()=>{ot(0===i.length)})})}containsKey(e,t){return Mz(e,this.userId,t)}Nn(e){return kz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mz(n,e,t){const r=_C(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return cy(n).J({range:s,H:!0},(a,c,h)=>{const[m,v,w]=a;m===e&&v===i&&(o=!0),h.done()}).next(()=>o)}function Zh(n){return ss(n,"mutations")}function cy(n){return ss(n,"documentMutations")}function kz(n){return ss(n,"mutationQueues")}class fm{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new fm(0)}static kn(){return new fm(-1)}}class ose{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new fm(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ut.fromTimestamp(new ni(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ly(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ot(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return ly(e).J((o,a)=>{const c=AE(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ly(e).J((r,i)=>{const s=AE(i);t(s)})}qn(e){return Oz(e).get("targetGlobalKey").next(t=>(ot(null!==t),t))}Qn(e,t){return Oz(e).put("targetGlobalKey",t)}Kn(e,t){return ly(e).put(_z(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=sm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return ly(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{const h=AE(a);fE(t,h.target)&&(s=h,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Xh(e);return t.forEach(o=>{const a=Qs(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Xh(e);return ce.forEach(t,s=>{const o=Qs(s.path);return ce.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Xh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Xh(e);let s=Jt();return i.J({range:r,H:!0},(o,a,c)=>{const h=Ul(o[1]),m=new qe(h);s=s.add(m)}).next(()=>s)}containsKey(e,t){const r=Qs(t.path),i=IDBKeyRange.bound([r],[Vj(r)],!1,!0);let s=0;return Xh(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}ot(e,t){return ly(e).get(t).next(r=>r?AE(r):null)}}function ly(n){return ss(n,"targets")}function Oz(n){return ss(n,"targetGlobal")}function Xh(n){return ss(n,"targetDocuments")}function Nz([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class ase{constructor(e){this.Un=e,this.buffer=new cr(Nz),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Nz(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fz{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var t=this;Fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.A)(function*(){t.jn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Hh(r)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield jh(r)}yield t.Hn(3e5)}))}}class cse{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(ka.oe);const r=new ase(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Rz)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rz):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,o=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,a=Date.now(),this.removeTargets(e,r,t))).next(v=>(s=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),$_()<=Vl.$b.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-m}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(c-a)+`ms\n\tRemoved ${v} documents in `+(h-c)+`ms\nTotal Duration: ${h-m}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:v})))}}class lse{constructor(e,t){this.db=e,this.garbageCollector=function Lz(n,e){return new cse(n,e)}(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return UC(e,r)}removeReference(e,t,r){return UC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return UC(e,t)}nr(e,t){return function(i,s){let o=!1;return kz(i).Y(a=>Mz(i,a,s).next(c=>(c&&(o=!0),ce.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=t){const c=this.nr(e,o).next(h=>{if(!h)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ut.min()),Xh(e).delete([0,Qs(o.path)])))});i.push(c)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return UC(e,t)}tr(e,t){const r=Xh(e);let i,s=ka.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:h})=>{0===o?(s!==ka.oe&&t(new qe(Ul(i)),s),s=h,i=c):s=ka.oe}).next(()=>{s!==ka.oe&&t(new qe(Ul(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function UC(n,e){return Xh(n).put((i=n.currentSequenceNumber,{targetId:0,path:Qs(e.path),sequenceNumber:i}));var i}class Vz{constructor(){this.changes=new Xu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class use{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pm(e).put(r)}removeEntry(e,t,r){return pm(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],OC(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=jr.newInvalidDocument(t);return pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xE(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:jr.newInvalidDocument(t)};return pm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xE(t))},(i,s)=>{r={document:this.ir(t,s),size:VC(s)}}).next(()=>r)}getEntries(e,t){let r=qo();return this._r(e,t,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=qo(),i=new Rr(qe.comparator);return this._r(e,t,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,VC(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return ce.resolve();let i=new cr(Hz);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(xE(i.first()),xE(i.last())),o=i.getIterator();let a=o.getNext();return pm(e).J({index:"documentKeyIndex",range:s},(c,h,m)=>{const v=qe.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&Hz(a,v)<0;)r(a,null),a=o.getNext();a&&a.isEqual(v)&&(r(a,h),a=o.hasNext()?o.getNext():null),a?m.$(xE(a)):m.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),OC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pm(e).U(IDBKeyRange.bound(a,c,!0)).next(h=>{s?.incrementDocumentReadCount(h.length);let m=qo();for(const v of h){const w=this.ir(qe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(mE(t,w)||i.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,t,r,i){let s=qo();const o=jz(t,r),a=jz(t,Ma.max());return pm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,h,m)=>{const v=this.ir(qe.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(v.key,v),s.size===i&&m.done()}).next(()=>s)}newChangeBuffer(e){return new dse(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Uz(e).get("remoteDocumentGlobalKey").next(t=>(ot(!!t),t))}rr(e,t){return Uz(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=function Yie(n,e){let t;if(e.document)t=cz(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=lm(e.noDocument.readTime);t=jr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=qe.fromSegments(e.unknownDocument.path),i=lm(e.unknownDocument.version);t=jr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new ni(i[0],i[1]);return ut.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(ut.min()))return r}return jr.newInvalidDocument(e)}}function Bz(n){return new use(n)}class dse extends Vz{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Xu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((s,o)=>Lt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const c=gz(this.cr.serializer,o);i=i.add(s.path.popLast());const h=VC(c);r+=h-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){const c=gz(this.cr.serializer,o.convertToNoDocument(ut.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function Uz(n){return ss(n,"remoteDocumentGlobal")}function pm(n){return ss(n,"remoteDocumentsV14")}function xE(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jz(n,e){const t=e.documentKey.path.toArray();return[n,OC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hz(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=Lt(t[s],r[s]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class hse{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zz{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&vE(r.mutation,i,Go.empty(),ni.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Jt()){const i=Hl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=gE();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Hl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=qo();const o=_E(),a=_E();return t.forEach((c,h)=>{const m=r.get(h.key);i.has(h.key)&&(void 0===m||m.mutation instanceof Ju)?s=s.insert(h.key,h):void 0!==m?(o.set(h.key,m.mutation.getFieldMask()),vE(m.mutation,h,m.mutation.getFieldMask(),ni.now())):o.set(h.key,Go.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((h,m)=>o.set(h,m)),t.forEach((h,m)=>{var v;return a.set(h,new hse(m,null!==(v=o.get(h))&&void 0!==v?v:null))}),a))}recalculateAndSaveOverlays(e,t){const r=_E();let i=new Rr((o,a)=>o-a),s=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(c=>{const h=t.get(c);if(null===h)return;let m=r.get(c)||Go.empty();m=a.applyToLocalView(h,m),r.set(c,m);const v=(i.get(a.batchId)||Jt()).add(c);i=i.insert(a.batchId,v)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),h=c.key,m=c.value,v=MH();m.forEach(w=>{if(!s.has(w)){const A=UH(t.get(w),r.get(w));null!==A&&v.set(w,A),s=s.add(w)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,v))}return ce.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):$R(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(Hl());let a=-1,c=s;return o.next(h=>ce.forEach(h,(m,v)=>(a<v.largestBatchId&&(a=v.largestBatchId),s.get(m)?ce.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{c=c.insert(m,w)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,c,h,Jt())).next(m=>({batchId:a,changes:PH(m)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=gE();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=gE();return this.indexManager.getCollectionParents(e,s).next(a=>ce.forEach(a,c=>{const h=(v=t,w=c.child(s),new Zu(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,w;return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((v,w)=>{o=o.insert(v,w)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,h)=>{const m=h.getKey();null===o.get(m)&&(o=o.insert(m,jr.newInvalidDocument(m)))});let a=gE();return o.forEach((c,h)=>{const m=s.get(c);void 0!==m&&vE(m.mutation,h,Go.empty(),ni.now()),mE(t,h)&&(a=a.insert(c,h))}),a})}}class fse{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ce.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:(i=t).id,version:i.version,createTime:Si(i.createTime)}),ce.resolve();var i}getNamedQuery(e,t){return ce.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:(i=t).name,query:iP(i.bundledQuery),readTime:Si(i.readTime)}),ce.resolve();var i}}class pse{constructor(){this.overlays=new Rr(qe.comparator),this.Ir=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Hl();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Hl(),s=t.length+1,o=new qe(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Rr((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let m=s.get(h.largestBatchId);null===m&&(m=Hl(),s=s.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const a=Hl(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,m)=>a.set(h,m)),!(a.size()>=i)););return ce.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ZR(t,r));let s=this.Ir.get(t);void 0===s&&(s=Jt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}class mse{constructor(){this.sessionToken=pi.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}class dP{constructor(){this.Tr=new cr(ws.Er),this.dr=new cr(ws.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new ws(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ws(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new qe(new bn([])),r=new ws(t,e),i=new ws(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qe(new bn([])),r=new ws(t,e),i=new ws(t,e+1);let s=Jt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new ws(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ws{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qe.comparator(e.key,t.key)||Lt(e.wr,t.wr)}static Ar(e,t){return Lt(e.wr,t.wr)||qe.comparator(e.key,t.key)}}class gse{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new cr(ws.Er)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++;const o=new QR(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new ws(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ce.resolve(o)}lookupMutationBatch(e,t){return ce.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.vr(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ws(t,0),i=new ws(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Lt);return t.forEach(i=>{const s=new ws(i,0),o=new ws(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),ce.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const o=new ws(new qe(s),0);let a=new cr(Lt);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(c.wr)),!0)},o),ce.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){ot(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return ce.forEach(t.mutations,i=>{const s=new ws(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new ws(t,0),i=this.br.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class _se{constructor(e){this.Mr=e,this.docs=new Rr(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():jr.newInvalidDocument(t))}getEntries(e,t){let r=qo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=qo();const o=t.path,a=new qe(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:m}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||kR(Uj(m),r)<=0||(i.has(m.key)||mE(t,m))&&(s=s.insert(m.key,m.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,r,i){rt()}Or(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yse(this)}getSize(e){return ce.resolve(this.size)}}class yse extends Vz{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class vse{constructor(e){this.persistence=e,this.Nr=new Xu(t=>sm(t),fE),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dP,this.targetCount=0,this.kr=fm.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ce.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new fm(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Kn(t),ce.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Br.containsKey(t))}}class hP{constructor(e,t){this.qr={},this.overlays={},this.Qr=new ka(0),this.Kr=!1,this.Kr=!0,this.$r=new mse,this.referenceDelegate=e(this),this.Ur=new vse(this),this.indexManager=new ise,this.remoteDocumentCache=new _se(r=>this.referenceDelegate.Wr(r)),this.serializer=new mz(t),this.Gr=new fse(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pse,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new gse(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new bse(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return ce.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class bse extends Hj{constructor(e){super(),this.currentSequenceNumber=e}}class jC{constructor(e){this.persistence=e,this.Jr=new dP,this.Yr=null}static Zr(e){return new jC(e)}get Xr(){if(this.Yr)return this.Yr;throw rt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Xr,r=>{const i=qe.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ut.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return ce.or([()=>ce.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Ese{constructor(e){this.serializer=e}O(e,t,r,i){const s=new gC("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qj,{unique:!0}),c.createObjectStore("documentMutations"),$z(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),$z(e)),o=o.next(()=>function(c){const h=c.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ut.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(c,h){return h.store("mutations").U().next(m=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qj,{unique:!0});const v=h.store("mutations"),w=m.map(A=>v.put(A));return ce.waitFor(w)})}(e,s))),o=o.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(c){const h=c.createObjectStore("documentOverlays",{keyPath:iie});h.createIndex("collectionPathOverlayIndex",sie,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",oie,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){const h=c.createObjectStore("remoteDocumentsV14",{keyPath:qre});h.createIndex("documentKeyIndex",Kre),h.createIndex("collectionGroupIndex",Qre)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:eie}).createIndex("sequenceNumberIndex",tie,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:nie}).createIndex("documentKeyIndex",rie,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=VC(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>ce.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>ce.forEach(a,c=>{ot(c.userId===s.userId);const h=um(this.serializer,c);return Pz(e,s.userId,h).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const c=new bn(o),h=[0,Qs(c)];s.push(t.get(h).next(m=>m?ce.resolve():t.put({targetId:0,path:Qs(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Jre});const r=t.store("collectionParents"),i=new uP,s=o=>{if(i.add(o)){const a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Qs(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{const c=new bn(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],h)=>{const m=Ul(a);return s(m.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=AE(i),o=_z(this.serializer,s);return t.put(o)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=t.store("remoteDocumentsV14"),c=(v=o,v.document?new qe(bn.fromString(v.document.name).popFirst(5)):v.noDocument?qe.fromSegments(v.noDocument.path):v.unknownDocument?qe.fromSegments(v.unknownDocument.path):rt()).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var v;i.push(a.put(h))}).next(()=>ce.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=Bz(this.serializer),s=new hP(jC.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(c=>{var h;let m=null!==(h=a.get(c.userId))&&void 0!==h?h:Jt();um(this.serializer,c).keys().forEach(v=>m=m.add(v)),a.set(c.userId,m)}),ce.forEach(a,(c,h)=>{const m=new bs(h),v=NC.lt(this.serializer,m),w=s.getIndexManager(m),A=BC.lt(m,this.serializer,w,s.referenceDelegate);return new zz(i,A,v,w).recalculateAndSaveOverlaysForDocumentKeys(new LR(t,ka.oe),c).next()})})}}function $z(n){n.createObjectStore("targetDocuments",{keyPath:Zre}).createIndex("documentTargetsIndex",Xre,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yre,{unique:!0}),n.createObjectStore("targetGlobal")}const fP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class pP{constructor(e,t,r,i,s,o,a,c,h,m,v=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=h,this.li=m,this.hi=v,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=w=>Promise.resolve(),!pP.D())throw new Pe(ye.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lse(this,i),this.Ai=t+"main",this.serializer=new mz(c),this.Ri=new Bl(this.Ai,this.hi,new Ese(this.serializer)),this.$r=new Xie,this.Ur=new ose(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bz(this.serializer),this.Gr=new Zie,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===m&&Di("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(ye.FAILED_PRECONDITION,fP);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new ka(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var t=this;return this.di=function(){var r=(0,we.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var t=(0,we.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,we.A)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Hh(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return RE(e).get("owner").next(t=>ce.resolve(this.vi(t)))}Ci(e){return zC(e).delete(this.clientId)}Fi(){var e=this;return(0,we.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ss(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(c=>-1===o.indexOf(c));return ce.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of t)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?ce.resolve(!0):RE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Pe(ye.FAILED_PRECONDITION,fP);return!1}}return!(!this.networkEnabled||!this.inForeground)||zC(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new LR(t,ka.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>zC(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return BC.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new sse(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return NC.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=17===(c=this.hi)?lie:16===c?cie:15===c?FR:14===c?Zj:13===c?Yj:12===c?aie:11===c?Qj:void rt();var c;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new LR(a,this.Qr?this.Qr.next():ka.oe),"readwrite-primary"===t?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw Di(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Pe(ye.FAILED_PRECONDITION,jj);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return RE(e).get("owner").next(t=>{if(null!==t&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(ye.FAILED_PRECONDITION,fP)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return RE(e).put("owner",t)}static D(){return Bl.D()}bi(e){const t=RE(e);return t.get("owner").next(r=>this.vi(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Di(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;(0,$n.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=null!==(null===(t=this.Vi)||void 0===t?void 0:t.getItem(this.Oi(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Di("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Di("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function RE(n){return ss(n,"owner")}function zC(n){return ss(n,"clientMetadata")}function mP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Jt(),i=Jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gP(e,t.fromCache,r,i)}}class wse{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Wz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,$n.nr)()?8:zj((0,$n.ZQ)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wse;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?($_()<=Vl.$b.DEBUG&&Fe("QueryEngine","SDK will not create cache indexes for query:",J_(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ce.resolve()):($_()<=Vl.$b.DEBUG&&Fe("QueryEngine","Query:",J_(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?($_()<=Vl.$b.DEBUG&&Fe("QueryEngine","The SDK decides to create cache indexes for query:",J_(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ys(t))):ce.resolve())}Yi(e,t){if(CH(t))return ce.resolve(null);let r=Ys(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=DC(t,null,"F"),r=Ys(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Jt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(t,a);return this.ns(t,h,o,c.readTime)?this.Yi(e,DC(t,null,"F")):this.rs(e,h,t,c)}))})))}Zi(e,t,r,i){return CH(t)||i.isEqual(ut.min())?ce.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(t,s);return this.ns(t,o,r,i)?ce.resolve(null):($_()<=Vl.$b.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),J_(t)),this.rs(e,o,t,Bj(i,-1)).next(a=>a))})}ts(e,t){let r=new cr(xH(e));return t.forEach((i,s)=>{mE(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return $_()<=Vl.$b.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",J_(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ma.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Ise{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Rr(Lt),this._s=new Xu(s=>sm(s),fE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Gz(n,e,t,r){return new Ise(n,e,t,r)}function qz(n,e){return _P.apply(this,arguments)}function _P(){return(_P=(0,we.A)(function*(n,e){const t=ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=Jt();for(const h of i){o.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}for(const h of s){a.push(h.batchId);for(const m of h.mutations)c=c.add(m.key)}return t.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function Kz(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Qz(n,e,t){let r=Jt(),i=Jt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=qo();return t.forEach((a,c)=>{const h=s.get(a);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ut.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||0===c.version.compareTo(h.version)&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Fe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function Tse(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uy(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new ed(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function dy(n,e,t){return yP.apply(this,arguments)}function yP(){return(yP=(0,we.A)(function*(n,e,t){const r=ze(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Hh(o))throw o;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function $C(n,e,t){const r=ze(n);let i=ut.min(),s=Jt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,m){const v=ze(c),w=v._s.get(m);return void 0!==w?ce.resolve(v.os.get(w)):v.Ur.getTargetData(h,m)}(r,o,Ys(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ut.min(),t?s:Jt())).next(a=>(Xz(r,SH(e),a),{documents:a,Ts:s})))}function Yz(n,e){const t=ze(n),r=ze(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function Zz(n,e){const t=ze(n),r=t.us.get(e)||ut.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Bj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Xz(t,e,i),i))}function Xz(n,e,t){let r=n.us.get(e)||ut.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function vP(){return(vP=(0,we.A)(function*(n,e,t,r){const i=ze(n);let s=Jt(),o=qo();for(const h of t){const m=e.Es(h.metadata.name);h.document&&(s=s.add(m));const v=e.ds(h);v.setReadTime(e.As(h.metadata.readTime)),o=o.insert(m,v)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield uy(i,(m=r,Ys(Z_(bn.fromString(`__bundle__/docs/${m}`)))));var m;return i.persistence.runTransaction("Apply bundle documents","readwrite",h=>Qz(h,a,o).next(m=>(a.apply(h),m)).next(m=>i.Ur.removeMatchingKeysForTargetId(h,c.targetId).next(()=>i.Ur.addMatchingKeys(h,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,m.Ps,m.Is)).next(()=>m.Ps)))})).apply(this,arguments)}function Sse(n,e){return bP.apply(this,arguments)}function bP(){return(bP=(0,we.A)(function*(n,e,t=Jt()){const r=yield uy(n,Ys(iP(e.bundledQuery))),i=ze(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Si(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(pi.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function Jz(n,e){return`firestore_clients_${n}_${e}`}function e$(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function EP(n,e){return`firestore_targets_${n}_${e}`}class WC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new Pe(i.error.code,i.error.message))),o?new WC(e,t,i.state,s):(Di("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class PE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Pe(r.error.code,r.error.message))),s?new PE(e,r.state,i):(Di("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=GR();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=Wj(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new GC(e,s):(Di("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class wP{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wP(t.clientId,t.onlineState):(Di("SharedClientState",`Failed to parse online state: ${e}`),null)}}class IP{constructor(){this.activeTargetIds=GR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CP{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Rr(Lt),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Jz(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new IP),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.A)(function*(){const t=yield e.syncEngine.Qi();for(const i of t){if(i===e.ps)continue;const s=e.getItem(Jz(e.persistenceKey,i));if(s){const o=GC.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(EP(this.persistenceKey,e));if(i){const s=PE.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(EP(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Di("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,we.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Gs(r.key);return t.zs(i,null)}{const i=t.js(r.key,r.newValue);if(i)return t.zs(i.clientId,i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Hs(r.key,r.newValue);if(i)return t.Js(i)}}else if(t.Ms.test(r.key)){if(null!==r.newValue){const i=t.Ys(r.key,r.newValue);if(i)return t.Zs(i)}}else if(r.key===t.xs){if(null!==r.newValue){const i=t.Ls(r.newValue);if(i)return t.Bs(i)}}else if(r.key===t.vs){const i=function(o){let a=ka.oe;if(null!=o)try{const c=JSON.parse(o);ot("number"==typeof c),a=c}catch(c){Di("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==ka.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.Os){const i=t.Xs(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.eo(s)))}}else t.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new WC(this.currentUser,e,t,r),s=e$(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=e$(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,t,r){const i=EP(this.persistenceKey,e),s=new PE(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return GC.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return WC.Rs(new bs(void 0!==r[2]?r[2]:null),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return PE.Rs(i,t)}Ls(e){return wP.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var t=this;return(0,we.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.no(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=GR();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class t${constructor(){this.so=new IP,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new IP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class xse{_o(e){}shutdown(){}}class n${constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qC=null;function AP(){return null===qC?qC=268435456+Math.round(2147483648*Math.random()):qC++,"0x"+qC.toString(16)}const Rse={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Pse{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Xs="WebChannelConnection";class Mse extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){const a=AP(),c=this.xo(t,r.toUriEncodedString());Fe("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(t,c,h,i).then(m=>(Fe("RestConnection",`Received RPC '${t}' ${a}: `,m),m),m=>{throw Pa("RestConnection",`RPC '${t}' ${a} failed with error: `,m,"url: ",c,"request:",i),m})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+z_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){return`${this.Do}/v1/${r}:${Rse[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=AP();return new Promise((o,a)=>{const c=new xj;c.setWithCredentials(!0),c.listenOnce(Rj.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case mC.NO_ERROR:const m=c.getResponseJson();Fe(Xs,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(m)),o(m);break;case mC.TIMEOUT:Fe(Xs,`RPC '${e}' ${s} timed out`),a(new Pe(ye.DEADLINE_EXCEEDED,"Request time out"));break;case mC.HTTP_ERROR:const v=c.getStatus();if(Fe(Xs,`RPC '${e}' ${s} failed with status:`,v,"response text:",c.getResponseText()),v>0){let w=c.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const S=function(N){const ne=N.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(ne)>=0?ne:ye.UNKNOWN}(A.status);a(new Pe(S,A.message))}else a(new Pe(ye.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new Pe(ye.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe(Xs,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Fe(Xs,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",h,r,15)})}Bo(e,t,r){const i=AP(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kj(),a=Mj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;void 0!==h&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const m=s.join("");Fe(Xs,`Creating RPC '${e}' stream ${i}: ${m}`,c);const v=o.createWebChannel(m,c);let w=!1,A=!1;const S=new Pse({Io:N=>{A?Fe(Xs,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(w||(Fe(Xs,`Opening RPC '${e}' stream ${i} transport.`),v.open(),w=!0),Fe(Xs,`RPC '${e}' stream ${i} sending:`,N),v.send(N))},To:()=>v.close()}),M=(N,ne,W)=>{N.listen(ne,de=>{try{W(de)}catch(Ae){setTimeout(()=>{throw Ae},0)}})};return M(v,rE.EventType.OPEN,()=>{A||(Fe(Xs,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),M(v,rE.EventType.CLOSE,()=>{A||(A=!0,Fe(Xs,`RPC '${e}' stream ${i} transport closed`),S.So())}),M(v,rE.EventType.ERROR,N=>{A||(A=!0,Pa(Xs,`RPC '${e}' stream ${i} transport errored:`,N),S.So(new Pe(ye.UNAVAILABLE,"The operation could not be completed")))}),M(v,rE.EventType.MESSAGE,N=>{var ne;if(!A){const W=N.data[0];ot(!!W);const Ae=W.error||(null===(ne=W[0])||void 0===ne?void 0:ne.error);if(Ae){Fe(Xs,`RPC '${e}' stream ${i} received error:`,Ae);const Be=Ae.status;let it=function(H){const X=ji[H];if(void 0!==X)return qH(X)}(Be),q=Ae.message;void 0===it&&(it=ye.INTERNAL,q="Unknown error status: "+Be+" with message "+Ae.message),A=!0,S.So(new Pe(it,q)),v.close()}else Fe(Xs,`RPC '${e}' stream ${i} received:`,W),S.bo(W)}}),M(a,Pj.STAT_EVENT,N=>{N.stat===RR.PROXY?Fe(Xs,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===RR.NOPROXY&&Fe(Xs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function r$(){return typeof window<"u"?window:null}function KC(){return typeof document<"u"?document:null}function ME(n){return new Uie(n,!0)}class TP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class i${constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new TP(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,we.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,we.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){var r=this;return(0,we.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():t&&t.code===ye.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):t&&t.code===ye.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(t)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Pe(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,we.A)(function*(){e.state=0,e.start()}))}I_(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kse extends i${constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function zie(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:rt(),i=e.targetChange.targetIds||[],s=function(h,m){return h.useProto3Json?(ot(void 0===m||"string"==typeof m),pi.fromBase64String(m||"")):(ot(void 0===m||m instanceof Buffer||m instanceof Uint8Array),pi.fromUint8Array(m||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const m=void 0===h.code?ye.UNKNOWN:qH(h.code);return new Pe(m,h.message||"")}(o);t=new XH(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=zl(n,r.document.name),s=Si(r.document.updateTime),o=r.document.createTime?Si(r.document.createTime):ut.min(),a=new ks({mapValue:{fields:r.document.fields}}),c=jr.newFoundDocument(i,s,o,a);t=new MC(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=zl(n,r.document),s=r.readTime?Si(r.readTime):ut.min(),o=jr.newNoDocument(i,s);t=new MC([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=zl(n,r.document);t=new MC([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Oie(i,s);t=new ZH(r.targetId,o)}}var h;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ut.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ut.min():o.readTime?Si(o.readTime):ut.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=nP(this.serializer),t.addTarget=function(s,o){let a;const c=o.target;if(a=AC(c)?{documents:lz(s,c)}:{query:kC(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nz(s,o.resumeToken);const h=JR(s,o.expectedCount);null!==h&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(ut.min())>0){a.readTime=iy(s,o.snapshotVersion.toTimestamp());const h=JR(s,o.expectedCount);null!==h&&(a.expectedCount=h)}return a}(this.serializer,e);const r=function Wie(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=nP(this.serializer),t.removeTarget=e,this.a_(t)}}class Ose extends i${constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ot(!!e.streamToken),this.lastStreamToken=e.streamToken,ot(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){ot(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function $ie(n,e){return n&&n.length>0?(ot(void 0!==e),n.map(t=>function(i,s){let o=Si(i.updateTime?i.updateTime:s);return o.isEqual(ut.min())&&(o=Si(s)),new Pie(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=nP(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>CE(this.serializer,r))};this.a_(t)}}class Nse extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Pe(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,tP(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(ye.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,tP(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Pe(ye.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Fse{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Di(t),this.D_=!1):Fe("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Lse{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,we.A)(function*(){var c;Jh(o)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,we.A)(function*(m){const v=ze(m);v.L_.add(4),yield hy(v),v.q_.set("Unknown"),v.L_.delete(4),yield kE(v)}),function h(m){return c.apply(this,arguments)})(o))}))}),this.q_=new Fse(r,i)}}function kE(n){return DP.apply(this,arguments)}function DP(){return(DP=(0,we.A)(function*(n){if(Jh(n))for(const e of n.B_)yield e(!0)})).apply(this,arguments)}function hy(n){return SP.apply(this,arguments)}function SP(){return(SP=(0,we.A)(function*(n){for(const e of n.B_)yield e(!1)})).apply(this,arguments)}function QC(n,e){const t=ze(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),PP(t)?RP(t):my(t).r_()&&xP(t,e))}function fy(n,e){const t=ze(n),r=my(t);t.N_.delete(e),r.r_()&&s$(t,e),0===t.N_.size&&(r.r_()?r.o_():Jh(t)&&t.q_.set("Unknown"))}function xP(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ut.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}my(n).A_(e)}function s$(n,e){n.Q_.xe(e),my(n).R_(e)}function RP(n){n.Q_=new Fie({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),my(n).start(),n.q_.v_()}function PP(n){return Jh(n)&&!my(n).n_()&&n.N_.size>0}function Jh(n){return 0===ze(n).L_.size}function o$(n){n.Q_=void 0}function Vse(n){return MP.apply(this,arguments)}function MP(){return(MP=(0,we.A)(function*(n){n.q_.set("Online")})).apply(this,arguments)}function Bse(n){return kP.apply(this,arguments)}function kP(){return(kP=(0,we.A)(function*(n){n.N_.forEach((e,t)=>{xP(n,e)})})).apply(this,arguments)}function Use(n,e){return OP.apply(this,arguments)}function OP(){return(OP=(0,we.A)(function*(n,e){o$(n),PP(n)?(n.q_.M_(e),RP(n)):n.q_.set("Unknown")})).apply(this,arguments)}function jse(n,e,t){return NP.apply(this,arguments)}function NP(){return NP=(0,we.A)(function*(n,e,t){if(n.q_.set("Online"),e instanceof XH&&2===e.state&&e.cause)try{yield(r=(0,we.A)(function*(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(yield s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield YC(n,r)}else if(e instanceof MC?n.Q_.Ke(e):e instanceof ZH?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ut.min()))try{const r=yield Kz(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const m=s.N_.get(h);m&&s.N_.set(h,m.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const m=s.N_.get(c);if(!m)return;s.N_.set(c,m.withResumeToken(pi.EMPTY_BYTE_STRING,m.snapshotVersion)),s$(s,c);const v=new ed(m.target,c,h,m.sequenceNumber);xP(s,v)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield YC(n,r)}var r}),NP.apply(this,arguments)}function YC(n,e,t){return FP.apply(this,arguments)}function FP(){return(FP=(0,we.A)(function*(n,e,t){if(!Hh(e))throw e;n.L_.add(1),yield hy(n),n.q_.set("Offline"),t||(t=()=>Kz(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.A)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield kE(n)}))})).apply(this,arguments)}function a$(n,e){return e().catch(t=>YC(n,t,e))}function py(n){return LP.apply(this,arguments)}function LP(){return(LP=(0,we.A)(function*(n){const e=ze(n),t=ef(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Hse(e);)try{const i=yield Tse(e.localStore,r);if(null===i){0===e.O_.length&&t.o_();break}r=i.batchId,zse(e,i)}catch(i){yield YC(e,i)}c$(e)&&l$(e)})).apply(this,arguments)}function Hse(n){return Jh(n)&&n.O_.length<10}function zse(n,e){n.O_.push(e);const t=ef(n);t.r_()&&t.V_&&t.m_(e.mutations)}function c$(n){return Jh(n)&&!ef(n).n_()&&n.O_.length>0}function l$(n){ef(n).start()}function $se(n){return VP.apply(this,arguments)}function VP(){return(VP=(0,we.A)(function*(n){ef(n).p_()})).apply(this,arguments)}function Wse(n){return BP.apply(this,arguments)}function BP(){return(BP=(0,we.A)(function*(n){const e=ef(n);for(const t of n.O_)e.m_(t.mutations)})).apply(this,arguments)}function Gse(n,e,t){return UP.apply(this,arguments)}function UP(){return(UP=(0,we.A)(function*(n,e,t){const r=n.O_.shift(),i=YR.from(r,e,t);yield a$(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield py(n)})).apply(this,arguments)}function qse(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,we.A)(function*(n,e){var t;e&&ef(n).V_&&(yield(t=(0,we.A)(function*(i,s){if(GH(a=s.code)&&a!==ye.ABORTED){const o=i.O_.shift();ef(i).s_(),yield a$(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield py(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),c$(n)&&l$(n)}),jP.apply(this,arguments)}function u$(n,e){return HP.apply(this,arguments)}function HP(){return(HP=(0,we.A)(function*(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Jh(t);t.L_.add(3),yield hy(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield kE(t)})).apply(this,arguments)}function zP(n,e){return $P.apply(this,arguments)}function $P(){return($P=(0,we.A)(function*(n,e){const t=ze(n);e?(t.L_.delete(2),yield kE(t)):e||(t.L_.add(2),yield hy(t),t.q_.set("Unknown"))})).apply(this,arguments)}function my(n){return n.K_||(n.K_=function(t,r,i){const s=ze(t);return s.w_(),new kse(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Vse.bind(null,n),Ro:Bse.bind(null,n),mo:Use.bind(null,n),d_:jse.bind(null,n)}),n.B_.push(function(){var e=(0,we.A)(function*(t){t?(n.K_.s_(),PP(n)?RP(n):n.q_.set("Unknown")):(yield n.K_.stop(),o$(n))});return function(t){return e.apply(this,arguments)}}())),n.K_}function ef(n){return n.U_||(n.U_=function(t,r,i){const s=ze(t);return s.w_(),new Ose(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$se.bind(null,n),mo:qse.bind(null,n),f_:Wse.bind(null,n),g_:Gse.bind(null,n)}),n.B_.push(function(){var e=(0,we.A)(function*(t){t?(n.U_.s_(),yield py(n)):(yield n.U_.stop(),n.O_.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))});return function(t){return e.apply(this,arguments)}}())),n.U_}class WP{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new WP(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gy(n,e){if(Di("AsyncQueue",`${e}: ${n}`),Hh(n))return new Pe(ye.UNAVAILABLE,`${e}: ${n}`);throw n}class _y{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=gE(),this.sortedSet=new Rr(this.comparator)}static emptySet(e){return new _y(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _y)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new _y;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class d${constructor(){this.W_=new Rr(qe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):rt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class yy{constructor(e,t,r,i,s,o,a,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new yy(e,t,_y.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Kse{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Qse{constructor(){this.queries=h$(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,r){const i=ze(t),s=i.queries;i.queries=h$(),s.forEach((o,a)=>{for(const c of a.j_)c.onError(r)})}(this,new Pe(ye.ABORTED,"Firestore shutting down"))}}function h$(){return new Xu(n=>DH(n),pE)}function GP(n,e){return qP.apply(this,arguments)}function qP(){return(qP=(0,we.A)(function*(n,e){const t=ze(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Kse,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){const a=gy(o,`Initialization of query '${J_(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&YP(t)})).apply(this,arguments)}function KP(n,e){return QP.apply(this,arguments)}function QP(){return(QP=(0,we.A)(function*(n,e){const t=ze(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Yse(n,e){const t=ze(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&YP(t)}function Zse(n,e,t){const r=ze(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function YP(n){n.Y_.forEach(e=>{e.next()})}var ZP,f$;(f$=ZP||(ZP={})).ea="default",f$.Cache="cache";class XP{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new yy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ZP.Cache}}class Xse{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}class p${constructor(e){this.serializer=e}Es(e){return zl(this.serializer,e)}ds(e){return e.metadata.exists?cz(this.serializer,e.document,!1):jr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Si(e)}}class Jse{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=m$(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=bn.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new p$(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||Jt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,we.A)(function*(){const t=yield function Dse(n,e,t,r){return vP.apply(this,arguments)}(e.localStore,new p$(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield Sse(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:t}})()}}function m$(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class g${constructor(e){this.key=e}}class _${constructor(e){this.key=e}}class y${constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Jt(),this.mutatedKeys=Jt(),this.Aa=xH(e),this.Ra=new _y(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new d$,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,h="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,v)=>{const w=i.get(m),A=mE(this.query,v)?v:null,S=!!w&&this.mutatedKeys.has(w.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let N=!1;w&&A?w.data.isEqual(A.data)?S!==M&&(r.track({type:3,doc:A}),N=!0):this.ga(w,A)||(r.track({type:2,doc:A}),N=!0,(c&&this.Aa(A,c)>0||h&&this.Aa(A,h)<0)&&(a=!0)):!w&&A?(r.track({type:0,doc:A}),N=!0):w&&!A&&(r.track({type:1,doc:w}),N=!0,(c||h)&&(a=!0)),N&&(A?(o=o.add(A),s=M?s.add(m):s.delete(m)):(o=o.delete(m),s=s.delete(m)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const m="F"===this.query.limitType?o.last():o.first();o=o.delete(m.key),s=s.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,v)=>function(A,S){const M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return M(A)-M(S)}(m.type,v.type)||this.Aa(m.doc,v.doc)),this.pa(r),i=null!=i&&i;const a=t&&!i?this.ya():[],c=0===this.da.size&&this.current&&!i?1:0,h=c!==this.Ea;return this.Ea=c,0!==o.length||h?{snapshot:new yy(this.query,e.Ra,s,o,e.mutatedKeys,0===c,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new d$,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Jt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new _$(r))}),this.da.forEach(r=>{e.has(r)||t.push(new g$(r))}),t}ba(e){this.Ta=e.Ts,this.da=Jt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return yy.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class eoe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class toe{constructor(e){this.key=e,this.va=!1}}class noe{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xu(a=>DH(a),pE),this.Ma=new Map,this.xa=new Set,this.Oa=new Rr(qe.comparator),this.Na=new Map,this.La=new dP,this.Ba={},this.ka=new Map,this.qa=fm.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function roe(n,e){return JP.apply(this,arguments)}function JP(){return(JP=(0,we.A)(function*(n,e,t=!0){const r=ZC(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield v$(r,e,t,!0),i})).apply(this,arguments)}function ioe(n,e){return eM.apply(this,arguments)}function eM(){return(eM=(0,we.A)(function*(n,e){const t=ZC(n);yield v$(t,e,!0,!1)})).apply(this,arguments)}function v$(n,e,t,r){return tM.apply(this,arguments)}function tM(){return(tM=(0,we.A)(function*(n,e,t,r){const i=yield uy(n.localStore,Ys(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return r&&(a=yield nM(n,e,s,"current"===o,i.resumeToken)),n.isPrimaryClient&&t&&QC(n.remoteStore,i),a})).apply(this,arguments)}function nM(n,e,t,r,i){return rM.apply(this,arguments)}function rM(){return rM=(0,we.A)(function*(n,e,t,r,i){n.Ka=(v,w,A)=>{return(S=(0,we.A)(function*(N,ne,W,de){let Ae=ne.view.ma(W);Ae.ns&&(Ae=yield $C(N.localStore,ne.query,!1).then(({documents:L})=>ne.view.ma(L,Ae)));const Be=de&&de.targetChanges.get(ne.targetId),it=de&&null!=de.targetMismatches.get(ne.targetId),q=ne.view.applyChanges(Ae,N.isPrimaryClient,Be,it);return pM(N,ne.targetId,q.wa),q.snapshot}),function M(N,ne,W,de){return S.apply(this,arguments)})(n,v,w,A);var S};const s=yield $C(n.localStore,e,!0),o=new y$(e,s.Ts),a=o.ma(s.documents),c=wE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),h=o.applyChanges(a,n.isPrimaryClient,c);pM(n,t,h.wa);const m=new eoe(e,t,o);return n.Fa.set(e,m),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),h.snapshot}),rM.apply(this,arguments)}function soe(n,e,t){return iM.apply(this,arguments)}function iM(){return(iM=(0,we.A)(function*(n,e,t){const r=ze(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!pE(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&fy(r.remoteStore,i.targetId),vy(r,i.targetId)}).catch(jh))):(vy(r,i.targetId),yield dy(r.localStore,i.targetId,!0))})).apply(this,arguments)}function ooe(n,e){return sM.apply(this,arguments)}function sM(){return(sM=(0,we.A)(function*(n,e){const t=ze(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fy(t.remoteStore,r.targetId))})).apply(this,arguments)}function oM(){return(oM=(0,we.A)(function*(n,e,t){const r=AM(n);try{const i=yield function(o,a){const c=ze(o),h=ni.now(),m=a.reduce((A,S)=>A.add(S.key),Jt());let v,w;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let S=qo(),M=Jt();return c.cs.getEntries(A,m).next(N=>{S=N,S.forEach((ne,W)=>{W.isValidDocument()||(M=M.add(ne))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,S)).next(N=>{v=N;const ne=[];for(const W of a){const de=kie(W,v.get(W.key).overlayedDocument);null!=de&&ne.push(new Ju(W.key,de,dH(de.value.mapValue),ii.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,ne,a)}).next(N=>{w=N;const ne=N.applyToLocalDocumentSet(v,M);return c.documentOverlayCache.saveOverlays(A,N.batchId,ne)})}).then(()=>({batchId:w.batchId,changes:PH(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Rr(Lt)),h=h.insert(a,c),o.Ba[o.currentUser.toKey()]=h}(r,i.batchId,t),yield td(r,i.changes),yield py(r.remoteStore)}catch(i){const s=gy(i,"Failed to persist write");t.reject(s)}})).apply(this,arguments)}function b$(n,e){return aM.apply(this,arguments)}function aM(){return(aM=(0,we.A)(function*(n,e){const t=ze(n);try{const r=yield function Ase(n,e){const t=ze(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const a=[];e.targetChanges.forEach((m,v)=>{const w=i.get(v);if(!w)return;a.push(t.Ur.removeMatchingKeys(s,m.removedDocuments,v).next(()=>t.Ur.addMatchingKeys(s,m.addedDocuments,v)));let A=w.withSequenceNumber(s.currentSequenceNumber);var M,N,ne;null!==e.targetMismatches.get(v)?A=A.withResumeToken(pi.EMPTY_BYTE_STRING,ut.min()).withLastLimboFreeSnapshotVersion(ut.min()):m.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(m.resumeToken,r)),i=i.insert(v,A),N=A,ne=m,(0===(M=w).resumeToken.approximateByteSize()||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&a.push(t.Ur.updateTargetData(s,A))});let c=qo(),h=Jt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,m))}),a.push(Qz(s,o,e.documentUpdates).next(m=>{c=m.Ps,h=m.Is})),!r.isEqual(ut.min())){const m=t.Ur.getLastRemoteSnapshotVersion(s).next(v=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(m)}return ce.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,h)).next(()=>c)}).then(s=>(t.os=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Na.get(s);o&&(ot(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ot(o.va):i.removedDocuments.size>0&&(ot(o.va),o.va=!1))}),yield td(t,r,e)}catch(r){yield jh(r)}})).apply(this,arguments)}function E$(n,e,t){const r=ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=ze(o);c.onlineState=a;let h=!1;c.queries.forEach((m,v)=>{for(const w of v.j_)w.Z_(a)&&(h=!0)}),h&&YP(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function coe(n,e,t){return cM.apply(this,arguments)}function cM(){return(cM=(0,we.A)(function*(n,e,t){const r=ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Rr(qe.comparator);o=o.insert(s,jr.newNoDocument(s,ut.min()));const a=Jt().add(s),c=new EE(ut.min(),new Map,new Rr(Lt),o,a);yield b$(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),mM(r)}else yield dy(r.localStore,e,!1).then(()=>vy(r,e,t)).catch(jh)})).apply(this,arguments)}function loe(n,e){return lM.apply(this,arguments)}function lM(){return(lM=(0,we.A)(function*(n,e){const t=ze(n),r=e.batch.batchId;try{const i=yield function Cse(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,h,m){const v=h.batch,w=v.keys();let A=ce.resolve();return w.forEach(S=>{A=A.next(()=>m.getEntry(c,S)).next(M=>{const N=h.docVersions.get(S);ot(null!==N),M.version.compareTo(N)<0&&(v.applyToRemoteDocument(M,h),M.isValidDocument()&&(M.setReadTime(h.commitVersion),m.addEntry(M)))})}),A.next(()=>a.mutationQueue.removeMutationBatch(c,v))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Jt();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);fM(t,r,null),hM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield td(t,i)}catch(i){yield jh(i)}})).apply(this,arguments)}function uoe(n,e,t){return uM.apply(this,arguments)}function uM(){return(uM=(0,we.A)(function*(n,e,t){const r=ze(n);try{const i=yield function(o,a){const c=ze(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return c.mutationQueue.lookupMutationBatch(h,a).next(v=>(ot(null!==v),m=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,m,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>c.localDocuments.getDocuments(h,m))})}(r.localStore,e);fM(r,e,t),hM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield td(r,i)}catch(i){yield jh(i)}})).apply(this,arguments)}function dM(){return(dM=(0,we.A)(function*(n,e){const t=ze(n);Jh(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=ze(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=gy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function hM(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function fM(n,e,t){const r=ze(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||w$(n,r)})}function w$(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);null!==t&&(fy(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),mM(n))}function pM(n,e,t){for(const r of t)r instanceof g$?(n.La.addReference(r.key,e),hoe(n,r)):r instanceof _$?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||w$(n,r.key)):rt()}function hoe(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.xa.add(r),mM(n))}function mM(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new qe(bn.fromString(e)),r=n.qa.next();n.Na.set(r,new toe(t)),n.Oa=n.Oa.insert(t,r),QC(n.remoteStore,new ed(Ys(Z_(t.path)),r,"TargetPurposeLimboResolution",ka.oe))}}function td(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,we.A)(function*(n,e,t){const r=ze(n),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(h=>{var m;if((h||t)&&r.isPrimaryClient){const v=h?!h.fromCache:null===(m=t?.targetChanges.get(c.targetId))||void 0===m?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){i.push(h);const v=gP.Wi(c.targetId,h);s.push(v)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,we.A)(function*(h,m){const v=ze(h);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ce.forEach(m,A=>ce.forEach(A.$i,S=>v.persistence.referenceDelegate.addReference(w,A.targetId,S)).next(()=>ce.forEach(A.Ui,S=>v.persistence.referenceDelegate.removeReference(w,A.targetId,S)))))}catch(w){if(!Hh(w))throw w;Fe("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const A=w.targetId;if(!w.fromCache){const S=v.os.get(A),N=S.withLastLimboFreeSnapshotVersion(S.snapshotVersion);v.os=v.os.insert(A,N)}}}),function c(h,m){return a.apply(this,arguments)})(r.localStore,s))}),gM.apply(this,arguments)}function foe(n,e){return _M.apply(this,arguments)}function _M(){return(_M=(0,we.A)(function*(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield qz(t.localStore,e);t.currentUser=e,(s=t).ka.forEach(a=>{a.forEach(c=>{c.reject(new Pe(ye.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield td(t,r.hs)}var s})).apply(this,arguments)}function poe(n,e){const t=ze(n),r=t.Na.get(e);if(r&&r.va)return Jt().add(r.key);{let i=Jt();const s=t.Ma.get(e);if(!s)return i;for(const o of s){const a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function moe(n,e){return yM.apply(this,arguments)}function yM(){return(yM=(0,we.A)(function*(n,e){const t=ze(n),r=yield $C(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&pM(t,e.targetId,i.wa),i})).apply(this,arguments)}function goe(n,e){return vM.apply(this,arguments)}function vM(){return(vM=(0,we.A)(function*(n,e){const t=ze(n);return Zz(t.localStore,e).then(r=>td(t,r))})).apply(this,arguments)}function _oe(n,e,t,r){return bM.apply(this,arguments)}function bM(){return(bM=(0,we.A)(function*(n,e,t,r){const i=ze(n),s=yield function(a,c){const h=ze(a),m=ze(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",v=>m.Mn(v,c).next(w=>w?h.localDocuments.getDocuments(v,w):ce.resolve(null)))}(i.localStore,e);var c;null!==s?("pending"===t?yield py(i.remoteStore):"acknowledged"===t||"rejected"===t?(fM(i,e,r||null),hM(i,e),c=e,ze(ze(i.localStore).mutationQueue).On(c)):rt(),yield td(i,s)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function EM(){return(EM=(0,we.A)(function*(n,e){const t=ze(n);if(ZC(t),AM(t),!0===e&&!0!==t.Qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield I$(t,r.toArray());t.Qa=!0,yield zP(t.remoteStore,!0);for(const s of i)QC(t.remoteStore,s)}else if(!1===e&&!1!==t.Qa){const r=[];let i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(vy(t,o),dy(t.localStore,o,!0))),fy(t.remoteStore,o)}),yield i,yield I$(t,r),function(o){const a=ze(o);a.Na.forEach((c,h)=>{fy(a.remoteStore,h)}),a.La.pr(),a.Na=new Map,a.Oa=new Rr(qe.comparator)}(t),t.Qa=!1,yield zP(t.remoteStore,!1)}})).apply(this,arguments)}function I$(n,e,t){return wM.apply(this,arguments)}function wM(){return(wM=(0,we.A)(function*(n,e,t){const r=ze(n),i=[],s=[];for(const o of e){let a;const c=r.Ma.get(o);if(c&&0!==c.length){a=yield uy(r.localStore,Ys(c[0]));for(const h of c){const m=r.Fa.get(h),v=yield moe(r,m);v.snapshot&&s.push(v.snapshot)}}else{const h=yield Yz(r.localStore,o);a=yield uy(r.localStore,h),yield nM(r,C$(h),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function C$(n){return IH(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function voe(n){return t=ze(n).localStore,ze(ze(t).persistence).Qi();var t}function boe(n,e,t,r){return IM.apply(this,arguments)}function IM(){return(IM=(0,we.A)(function*(n,e,t,r){const i=ze(n);if(i.Qa)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield Zz(i.localStore,SH(s[0])),a=EE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pi.EMPTY_BYTE_STRING);yield td(i,o,a);break}case"rejected":yield dy(i.localStore,e,!0),vy(i,e,r);break;default:rt()}})).apply(this,arguments)}function Eoe(n,e,t){return CM.apply(this,arguments)}function CM(){return(CM=(0,we.A)(function*(n,e,t){const r=ZC(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const s=yield Yz(r.localStore,i),o=yield uy(r.localStore,s);yield nM(r,C$(s),o.targetId,!1,o.resumeToken),QC(r.remoteStore,o)}for(const i of t)r.Ma.has(i)&&(yield dy(r.localStore,i,!1).then(()=>{fy(r.remoteStore,i),vy(r,i)}).catch(jh))}})).apply(this,arguments)}function ZC(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=b$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=poe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=coe.bind(null,e),e.Ca.d_=Yse.bind(null,e.eventManager),e.Ca.$a=Zse.bind(null,e.eventManager),e}function AM(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=loe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uoe.bind(null,e),e}let by=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){var r=this;return(0,we.A)(function*(){r.serializer=ME(t.databaseInfo.databaseId),r.sharedClientState=r.Wa(t),r.persistence=r.Ga(t),yield r.persistence.start(),r.localStore=r.za(t),r.gcScheduler=r.ja(t,r.localStore),r.indexBackfillerScheduler=r.Ha(t,r.localStore)})()}ja(t,r){return null}Ha(t,r){return null}za(t){return Gz(this.persistence,new Wz,t.initialUser,this.serializer)}Ga(t){return new hP(jC.Zr,this.serializer)}Wa(t){return new t$}terminate(){var t=this;return(0,we.A)(function*(){var r,i;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(i=t.indexBackfillerScheduler)||void 0===i||i.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}return n.provider={build:()=>new n},n})();class TM extends by{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.A)(function*(){yield t().call(r,e),yield r.Ja.initialize(r,e),yield AM(r.Ja.syncEngine),yield py(r.Ja.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}za(e){return Gz(this.persistence,new Wz,e.initialUser,this.serializer)}ja(e,t){return new Fz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ha(e,t){const r=new $re(t,this.persistence);return new zre(e.asyncQueue,r)}Ga(e){const t=mP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zs.withCacheSize(this.cacheSizeBytes):Zs.DEFAULT;return new pP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,r$(),KC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new t$}}class A$ extends TM{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.A)(function*(){yield t().call(r,e);const i=r.Ja.syncEngine;r.sharedClientState instanceof CP&&(r.sharedClientState.syncEngine={no:_oe.bind(null,i),ro:boe.bind(null,i),io:Eoe.bind(null,i),Qi:voe.bind(null,i),eo:goe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,we.A)(function*(o){yield function yoe(n,e){return EM.apply(this,arguments)}(r.Ja.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}Wa(e){const t=r$();if(!CP.D(t))throw new Pe(ye.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=mP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new CP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}let Ey=(()=>{class n{initialize(t,r){var i=this;return(0,we.A)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(r),i.remoteStore=i.createRemoteStore(r),i.eventManager=i.createEventManager(r),i.syncEngine=i.createSyncEngine(r,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>E$(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=foe.bind(null,i.syncEngine),yield zP(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new Qse}createDatastore(t){const r=ME(t.databaseInfo.databaseId),i=new Mse(t.databaseInfo);return new Nse(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return i=this.localStore,s=this.datastore,o=t.asyncQueue,a=r=>E$(this.syncEngine,r,0),c=n$.D()?new n$:new xse,new Lse(i,s,o,a,c);var i,s,o,a,c}createSyncEngine(t,r){return function(s,o,a,c,h,m,v){const w=new noe(s,o,a,c,h,m);return v&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,we.A)(function*(){var r,i,s;yield(s=(0,we.A)(function*(a){const c=ze(a);Fe("RemoteStore","RemoteStore shutting down."),c.L_.add(5),yield hy(c),c.k_.shutdown(),c.q_.set("Unknown")}),function o(a){return s.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(i=t.eventManager)||void 0===i||i.terminate()})()}}return n.provider={build:()=>new n},n})();function T$(n,e=10240){let t=0;return{read:()=>(0,we.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class XC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Coe{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Es,this.buffer=new Uint8Array,this.eu=new TextDecoder("utf-8"),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){var e=this;return(0,we.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,we.A)(function*(){return yield e.getMetadata(),e.tu()})()}tu(){var e=this;return(0,we.A)(function*(){const t=yield e.nu();if(null===t)return null;const r=e.eu.decode(t),i=Number(r);isNaN(i)&&e.ru(`length string (${r}) is not valid number`);const s=yield e.iu(i);return new Xse(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}nu(){var e=this;return(0,we.A)(function*(){for(;e.su()<0&&!(yield e.ou()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.ru("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}iu(e){var t=this;return(0,we.A)(function*(){for(;t.buffer.length<e;)(yield t.ou())&&t.ru("Reached the end of bundle when more is expected.");const r=t.eu.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){var e=this;return(0,we.A)(function*(){const t=yield e.Xa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Aoe{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Pe(ye.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,we.A)(function*(o,a){const c=ze(o),h={documents:a.map(A=>IE(c.serializer,A))},m=yield c.Lo("BatchGetDocuments",c.serializer.databaseId,bn.emptyPath(),h,a.length),v=new Map;m.forEach(A=>{const S=function Hie(n,e){return"found"in e?function(r,i){ot(!!i.found);const s=zl(r,i.found.name),o=Si(i.found.updateTime),a=i.found.createTime?Si(i.found.createTime):ut.min(),c=new ks({mapValue:{fields:i.found.fields}});return jr.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){ot(!!i.missing),ot(!!i.readTime);const s=zl(r,i.missing),o=Si(i.readTime);return jr.newNoDocument(s,o)}(n,e):rt()}(c.serializer,A);v.set(S.key.toString(),S)});const w=[];return a.forEach(A=>{const S=v.get(A.toString());ot(!!S),w.push(S)}),w}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ry(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=qe.fromPath(i);e.mutations.push(new KR(s,e.precondition(s)))}),yield(r=(0,we.A)(function*(s,o){const a=ze(s),c={writes:o.map(h=>CE(a.serializer,h))};yield a.Mo("Commit",a.serializer.databaseId,bn.emptyPath(),c)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=ut.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(ye.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ut.min())?ii.exists(!1):ii.updateTime(t):ii.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ut.min()))throw new Pe(ye.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ii.updateTime(t)}return ii.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Toe{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new TP(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){var e=this;this.t_.Go((0,we.A)(function*(){const t=new Aoe(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.lu(s)}))}).catch(i=>{e.lu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!oE(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!GH(t)}return!1}}class Doe{constructor(e,t,r,i,s){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bs.UNAUTHENTICATED,this.clientId=Lj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,function(){var a=(0,we.A)(function*(c){Fe("FirestoreClient","Received user=",c.uid),yield o.authCredentialListener(c),o.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(Fe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=gy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function DM(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,we.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.A)(function*(s){r.isEqual(s)||(yield qz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SM.apply(this,arguments)}function D$(n,e){return xM.apply(this,arguments)}function xM(){return(xM=(0,we.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RM(n);Fe("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>u$(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>u$(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function RM(n){return PM.apply(this,arguments)}function PM(){return(PM=(0,we.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Fe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield DM(n,n._uninitializedComponentsProvider._offline)}catch(e){if(!("FirebaseError"===(i=e).name?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw e;Pa("Error using user provided cache. Falling back to memory cache: "+e),yield DM(n,new by)}}else Fe("FirestoreClient","Using default OfflineComponentProvider"),yield DM(n,new by);var i;return n._offlineComponents})).apply(this,arguments)}function JC(n){return MM.apply(this,arguments)}function MM(){return(MM=(0,we.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Fe("FirestoreClient","Using user provided OnlineComponentProvider"),yield D$(n,n._uninitializedComponentsProvider._online)):(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield D$(n,new Ey))),n._onlineComponents})).apply(this,arguments)}function S$(n){return RM(n).then(e=>e.persistence)}function wy(n){return RM(n).then(e=>e.localStore)}function x$(n){return JC(n).then(e=>e.remoteStore)}function kM(n){return JC(n).then(e=>e.syncEngine)}function Iy(n){return OM.apply(this,arguments)}function OM(){return(OM=(0,we.A)(function*(n){const e=yield JC(n),t=e.eventManager;return t.onListen=roe.bind(null,e.syncEngine),t.onUnlisten=soe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ioe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ooe.bind(null,e.syncEngine),t})).apply(this,arguments)}function P$(n,e,t={}){const r=new Es;return n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function(s,o,a,c,h){const m=new XC({next:w=>{m.Za(),o.enqueueAndForget(()=>KP(s,v));const A=w.docs.has(a);!A&&w.fromCache?h.reject(new Pe(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&w.fromCache&&c&&"server"===c.source?h.reject(new Pe(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(w)},error:w=>h.reject(w)}),v=new XP(Z_(a.path),m,{includeMetadataChanges:!0,_a:!0});return GP(s,v)}(yield Iy(n),n.asyncQueue,e,t,r)})),r.promise}function M$(n,e,t={}){const r=new Es;return n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function(s,o,a,c,h){const m=new XC({next:w=>{m.Za(),o.enqueueAndForget(()=>KP(s,v)),w.fromCache&&"server"===c.source?h.reject(new Pe(ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(w)},error:w=>h.reject(w)}),v=new XP(a,m,{includeMetadataChanges:!0,_a:!0});return GP(s,v)}(yield Iy(n),n.asyncQueue,e,t,r)})),r.promise}function k$(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const O$=new Map;function NM(n,e,t){if(!t)throw new Pe(ye.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N$(n,e,t,r){if(!0===e&&!0===r)throw new Pe(ye.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function F$(n){if(!qe.isDocumentKey(n))throw new Pe(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function L$(n){if(qe.isDocumentKey(n))throw new Pe(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function eA(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":rt()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eA(n);throw new Pe(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function V$(n,e){if(e<=0)throw new Pe(ye.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class B${constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=k$(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Pe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B$({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Pe(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B$(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Pre;switch(r.type){case"firstParty":return new Nre(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Pe(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){var e=this;return(0,we.A)(function*(){"notTerminated"===e._terminateTask?yield e._terminate():e._terminateTask="notTerminated"})()}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=O$.get(t);r&&(Fe("ComponentProvider","Removing Datastore"),O$.delete(t),r.terminate())}(this),Promise.resolve()}}class Os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Os(this.firestore,e,this._query)}}class Hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $l(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hr(this.firestore,e,this._key)}}class $l extends Os{constructor(e,t,r){super(e,t,Z_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hr(this.firestore,null,new qe(e))}withConverter(e){return new $l(this.firestore,e,this._path)}}function j$(n,e,...t){if(n=(0,$n.Ku)(n),NM("collection","path",e),n instanceof OE){const r=bn.fromString(e,...t);return L$(r),new $l(n,null,r)}{if(!(n instanceof Hr||n instanceof $l))throw new Pe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return L$(r),new $l(n.firestore,null,r)}}function tA(n,e,...t){if(n=(0,$n.Ku)(n),1===arguments.length&&(e=Lj.newId()),NM("doc","path",e),n instanceof OE){const r=bn.fromString(e,...t);return F$(r),new Hr(n,null,new qe(r))}{if(!(n instanceof Hr||n instanceof $l))throw new Pe(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(bn.fromString(e,...t));return F$(r),new Hr(n.firestore,n instanceof $l?n.converter:null,new qe(r))}}function H$(n,e){return n=(0,$n.Ku)(n),e=(0,$n.Ku)(e),(n instanceof Hr||n instanceof $l)&&(e instanceof Hr||e instanceof $l)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FM(n,e){return n=(0,$n.Ku)(n),e=(0,$n.Ku)(e),n instanceof Os&&e instanceof Os&&n.firestore===e.firestore&&pE(n._query,e._query)&&n.converter===e.converter}class z${constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new TP(this,"async_queue_retry"),this.Vu=()=>{const r=KC();r&&Fe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=KC();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=KC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Es;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){var e=this;return(0,we.A)(function*(){if(0!==e.Pu.length){try{yield e.Pu[0](),e.Pu.shift(),e.t_.reset()}catch(t){if(!Hh(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.Pu.length>0&&e.t_.Go(()=>e.pu())}})()}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{throw this.Eu=r,this.du=!1,Di("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=WP.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&rt()}verifyOperationInProgress(){}wu(){var e=this;return(0,we.A)(function*(){let t;do{t=e.mu,yield t}while(t!==e.mu)})()}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function LM(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Uoe{constructor(){this._progressObserver={},this._taskCompletionResolver=new Es,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends OE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new z$,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){var e=this;return(0,we.A)(function*(){if(e._firestoreClient){const t=e._firestoreClient.terminate();e._queue=new z$(t),e._firestoreClient=void 0,yield t}})()}}function si(n){if(n._terminated)throw new Pe(ye.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$$(n),n._firestoreClient}function $$(n){var e,t,r;const i=n._freezeSettings(),s=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new hie(n._databaseId,c,n._persistenceKey,(m=i).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,k$(m.experimentalLongPollingOptions),m.useFetchStreams));var c,m;n._componentsProvider||!(null===(t=i.localCache)||void 0===t)&&t._offlineComponentProvider&&!(null===(r=i.localCache)||void 0===r)&&r._onlineComponentProvider&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Doe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function VM(){return(VM=(0,we.A)(function*(n){Pa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();W$(n,Ey.provider,{build:t=>new A$(t,e.cacheSizeBytes)})})).apply(this,arguments)}function W$(n,e,t){if((n=pn(n,yr))._firestoreClient||n._terminated)throw new Pe(ye.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Pe(ye.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},$$(n)}class Wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wl(pi.fromBase64String(e))}catch(t){throw new Pe(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wl(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mm{constructor(e){this._methodName=e}}class nA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}class rA{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const Zoe=/^__.*__$/;class Xoe{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ju(e,this.data,this.fieldMask,t,this.fieldTransforms):new ny(e,this.data,t,this.fieldTransforms)}}class G${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ju(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function q$(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class iA{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new iA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return aA(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(q$(this.Cu)&&Zoe.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Joe{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ME(e)}Qu(e,t,r,i=!1){return new iA({Cu:e,methodName:t,qu:r,path:Ur.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(n){const e=n._freezeSettings(),t=ME(n._databaseId);return new Joe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sA(n,e,t,r,i,s={}){const o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);WM("Data must be an object, but it was:",o,r);const a=Y$(r,o);let c,h;if(s.merge)c=new Go(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const m=[];for(const v of s.mergeFields){const w=LE(e,v,t);if(!o.contains(w))throw new Pe(ye.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);X$(m,w)||m.push(w)}c=new Go(m),h=o.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=o.fieldTransforms;return new Xoe(new ks(a),c,h)}class FE extends mm{_toFieldTransform(e){if(2!==e.Cu)throw e.Bu(1===e.Cu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof FE}}function K$(n,e,t){return new iA({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class BM extends mm{_toFieldTransform(e){return new yE(e.path,new ey)}isEqual(e){return e instanceof BM}}class UM extends mm{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=K$(this,e,!0),r=this.Ku.map(s=>_m(s,t)),i=new om(r);return new yE(e.path,i)}isEqual(e){return e instanceof UM&&(0,$n.bD)(this.Ku,e.Ku)}}class jM extends mm{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=K$(this,e,!0),r=this.Ku.map(s=>_m(s,t)),i=new am(r);return new yE(e.path,i)}isEqual(e){return e instanceof jM&&(0,$n.bD)(this.Ku,e.Ku)}}class HM extends mm{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new ty(e.serializer,OH(e.serializer,this.$u));return new yE(e.path,t)}isEqual(e){return e instanceof HM&&this.$u===e.$u}}function zM(n,e,t,r){const i=n.Qu(1,e,t);WM("Data must be an object, but it was:",i,r);const s=[],o=ks.empty();zh(r,(c,h)=>{const m=oA(e,c,t);h=(0,$n.Ku)(h);const v=i.Nu(m);if(h instanceof FE)s.push(m);else{const w=_m(h,v);null!=w&&(s.push(m),o.set(m,w))}});const a=new Go(s);return new G$(o,a,i.fieldTransforms)}function $M(n,e,t,r,i,s){const o=n.Qu(1,e,t),a=[LE(e,r,t)],c=[i];if(s.length%2!=0)throw new Pe(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<s.length;w+=2)a.push(LE(e,s[w])),c.push(s[w+1]);const h=[],m=ks.empty();for(let w=a.length-1;w>=0;--w)if(!X$(h,a[w])){const A=a[w];let S=c[w];S=(0,$n.Ku)(S);const M=o.Nu(A);if(S instanceof FE)h.push(A);else{const N=_m(S,M);null!=N&&(h.push(A),m.set(A,N))}}const v=new Go(h);return new G$(m,v,o.fieldTransforms)}function Q$(n,e,t,r=!1){return _m(t,n.Qu(r?4:3,e))}function _m(n,e){if(Z$(n=(0,$n.Ku)(n)))return WM("Unsupported field value:",e,n),Y$(n,e);if(n instanceof mm)return function(r,i){if(!q$(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=_m(a,i.Lu(o));null==c&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,$n.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return OH(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=ni.fromDate(r);return{timestampValue:iy(i.serializer,s)}}if(r instanceof ni){const s=new ni(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iy(i.serializer,s)}}if(r instanceof nA)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wl)return{bytesValue:nz(i.serializer,r._byteString)};if(r instanceof Hr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:eP(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof rA)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(c=>{if("number"!=typeof c)throw a.Bu("VectorValues must only contain numeric values.");return qR(a.serializer,c)})}}}}};var a;throw i.Bu(`Unsupported field value: ${eA(r)}`)}(n,e)}function Y$(n,e){const t={};return eH(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zh(n,(r,i)=>{const s=_m(i,e.Mu(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function Z$(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ni||n instanceof nA||n instanceof Wl||n instanceof Hr||n instanceof mm||n instanceof rA)}function WM(n,e,t){if(!Z$(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=eA(t);throw e.Bu("an object"===r?n+" a custom object":n+" "+r)}var i}function LE(n,e,t){if((e=(0,$n.Ku)(e))instanceof nd)return e._internalPath;if("string"==typeof e)return oA(n,e);throw aA("Field path arguments must be of type string or ",n,!1,void 0,t)}const eae=new RegExp("[~\\*/\\[\\]]");function oA(n,e,t){if(e.search(eae)>=0)throw aA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nd(...e.split("."))._internalPath}catch{throw aA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function aA(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Pe(ye.INVALID_ARGUMENT,a+n+c)}function X$(n,e){return n.some(t=>t.isEqual(e))}class VE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new tae(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(cA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class tae extends VE{data(){return super.data()}}function cA(n,e){return"string"==typeof e?oA(n,e):e instanceof nd?e._internalPath:e._delegate._internalPath}function J$(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GM{}class BE extends GM{}function tf(n,e,...t){let r=[];e instanceof GM&&r.push(e),r=r.concat(t),function(s){const o=s.filter(c=>c instanceof Cy).length,a=s.filter(c=>c instanceof UE).length;if(o>1||o>0&&a>0)throw new Pe(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class UE extends BE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new UE(e,t,r)}_apply(e){const t=this._parse(e);return r4(e._query,t),new Os(e.firestore,e.converter,WR(e._query,t))}_parse(e){const t=gm(e.firestore);return function(s,o,a,c,h,m,v){let w;if(h.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new Pe(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){n4(v,m);const A=[];for(const S of v)A.push(t4(c,s,S));w={arrayValue:{values:A}}}else w=t4(c,s,v)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||n4(v,m),w=Q$(a,"where",v,"in"===m||"not-in"===m);return En.create(h,m,w)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Cy extends GM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)r4(o,c),o=WR(o,c)}(e._query,t),new Os(e.firestore,e.converter,WR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qM extends BE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qM(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new Pe(ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Pe(ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hE(s,o)}(e._query,this._field,this._direction);return new Os(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zu(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class lA extends BE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new lA(e,t,r)}_apply(e){return new Os(e.firestore,e.converter,DC(e._query,this._limit,this._limitType))}}class uA extends BE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uA(e,t,r)}_apply(e){const t=e4(e,this.type,this._docOrFields,this._inclusive);return new Os(e.firestore,e.converter,(s=t,new Zu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class dA extends BE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new dA(e,t,r)}_apply(e){const t=e4(e,this.type,this._docOrFields,this._inclusive);return new Os(e.firestore,e.converter,(s=t,new Zu((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function e4(n,e,t,r){if(t[0]=(0,$n.Ku)(t[0]),t[0]instanceof VE)return function(s,o,a,c,h){if(!c)throw new Pe(ye.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const m=[];for(const v of X_(s))if(v.field.isKeyField())m.push(im(o,c.key));else{const w=c.data.field(v.field);if(vC(w))throw new Pe(ye.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const A=v.field.canonicalString();throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}m.push(w)}return new Kh(m,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=gm(n.firestore);return function(o,a,c,h,m,v){const w=o.explicitOrderBy;if(m.length>w.length)throw new Pe(ye.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let S=0;S<m.length;S++){const M=m[S];if(w[S].field.isKeyField()){if("string"!=typeof M)throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof M}`);if(!$R(o)&&-1!==M.indexOf("/"))throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${M}' contains a slash.`);const N=o.path.child(bn.fromString(M));if(!qe.isDocumentKey(N))throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const ne=new qe(N);A.push(im(a,ne))}else{const N=Q$(c,h,M);A.push(N)}}return new Kh(A,v)}(n._query,n.firestore._databaseId,i,e,t,r)}}function t4(n,e,t){if("string"==typeof(t=(0,$n.Ku)(t))){if(""===t)throw new Pe(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$R(e)&&-1!==t.indexOf("/"))throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(bn.fromString(t));if(!qe.isDocumentKey(r))throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return im(n,new qe(r))}if(t instanceof Hr)return im(n,t._key);throw new Pe(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eA(t)}.`)}function n4(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r4(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(ye.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KM{convertValue(e,t="none"){switch(Gh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw rt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>ri(o.doubleValue));return new rA(s)}convertGeoPoint(e){return new nA(ri(e.latitude),ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cE(e));default:return null}}convertTimestamp(e){const t=Qu(e);return new ni(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=bn.fromString(e);ot(pz(r));const i=new $h(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||Di(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function hA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class uae extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hr(this.firestore,null,t)}}class ym{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends VE{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(cA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class jE extends rd{data(e={}){return super.data(e)}}class nf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ym(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jE(this._firestore,this._userDataWriter,r.key,r,new ym(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new jE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ym(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const c=new jE(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ym(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return 0!==a.type&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),m=o.indexOf(a.doc.key)),{type:hae(a.type),doc:c,oldIndex:h,newIndex:m}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function hae(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function s4(n,e){return n instanceof rd&&e instanceof rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nf&&e instanceof nf&&n._firestore===e._firestore&&FM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class rf extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hr(this.firestore,null,t)}}function o4(n,e,t){n=pn(n,Hr);const r=pn(n.firestore,yr),i=hA(n.converter,e,t);return Ay(r,[sA(gm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ii.none())])}function a4(n,e,t,...r){n=pn(n,Hr);const i=pn(n.firestore,yr),s=gm(i);let o;return o="string"==typeof(e=(0,$n.Ku)(e))||e instanceof nd?$M(s,"updateDoc",n._key,e,t,r):zM(s,"updateDoc",n._key,e),Ay(i,[o.toMutation(n._key,ii.exists(!0))])}function c4(n,...e){var t,r,i;n=(0,$n.Ku)(n);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||LM(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(LM(e[o])){const v=e[o];e[o]=null===(t=v.next)||void 0===t?void 0:t.bind(v),e[o+1]=null===(r=v.error)||void 0===r?void 0:r.bind(v),e[o+2]=null===(i=v.complete)||void 0===i?void 0:i.bind(v)}let c,h,m;if(n instanceof Hr)h=pn(n.firestore,yr),m=Z_(n._key.path),c={next:v=>{e[o]&&e[o](QM(h,n,v))},error:e[o+1],complete:e[o+2]};else{const v=pn(n,Os);h=pn(v.firestore,yr),m=v._query;const w=new rf(h);c={next:A=>{e[o]&&e[o](new nf(h,w,v,A))},error:e[o+1],complete:e[o+2]},J$(n._query)}return function(w,A,S,M){const N=new XC(M),ne=new XP(A,N,S);return w.asyncQueue.enqueueAndForget((0,we.A)(function*(){return GP(yield Iy(w),ne)})),()=>{N.Za(),w.asyncQueue.enqueueAndForget((0,we.A)(function*(){return KP(yield Iy(w),ne)}))}}(si(h),m,a,c)}function Ay(n,e){return function(r,i){const s=new Es;return r.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function aoe(n,e,t){return oM.apply(this,arguments)}(yield kM(r),i,s)})),s.promise}(si(n),e)}function QM(n,e,t){const r=t.docs.get(e._key),i=new rf(n);return new rd(n,i,e._key,r,new ym(t.hasPendingWrites,t.fromCache),e.converter)}const Rae={maxAttempts:5};class l4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=gm(e)}set(e,t,r){this._verifyNotCommitted();const i=sf(e,this._firestore),s=hA(i.converter,t,r),o=sA(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,ii.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=sf(e,this._firestore);let o;return o="string"==typeof(t=(0,$n.Ku)(t))||t instanceof nd?$M(this._dataReader,"WriteBatch.update",s._key,t,r,i):zM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ii.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sf(e,this._firestore);return this._mutations=this._mutations.concat(new ry(t._key,ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sf(n,e){if((n=(0,$n.Ku)(n)).firestore!==e)throw new Pe(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pae extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=gm(t)}get(t){const r=sf(t,this._firestore),i=new uae(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return rt();const o=s[0];if(o.isFoundDocument())return new VE(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new VE(this._firestore,i,r._key,null,r.converter);throw rt()})}set(t,r,i){const s=sf(t,this._firestore),o=hA(s.converter,r,i),a=sA(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=sf(t,this._firestore);let a;return a="string"==typeof(r=(0,$n.Ku)(r))||r instanceof nd?$M(this._dataReader,"Transaction.update",o._key,r,i,s):zM(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=sf(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sf(e,this._firestore),r=new rf(this._firestore);return super.get(e).then(i=>new rd(this._firestore,r,t._key,i._document,new ym(!1,!1),t.converter))}}function ZM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function f4(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function p4(){if(!function uie(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){z_=U_.SDK_VERSION,(0,U_._registerComponent)(new Aj.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new yr(new kre(r.getProvider("auth-internal")),new Fre(r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Pe(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $h(h.options.projectId,m)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,U_.registerVersion)(Oj,"4.7.3",e),(0,U_.registerVersion)(Oj,"4.7.3","esm2017")}();class HE{constructor(e){this._delegate=e}static fromBase64String(e){return p4(),new HE(Wl.fromBase64String(e))}static fromUint8Array(e){return f4(),new HE(Wl.fromUint8Array(e))}toBase64(){return p4(),this._delegate.toBase64()}toUint8Array(){return f4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function XM(n){return function jae(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Hae{enableIndexedDbPersistence(e,t){return function Hoe(n,e){Pa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return W$(n,Ey.provider,{build:r=>new TM(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function zoe(n){return VM.apply(this,arguments)}(e._delegate)}clearIndexedDbPersistence(e){return function $oe(n){if(n._initialized&&!n._terminated)throw new Pe(ye.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Es;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.A)(function*(){try{yield(t=(0,we.A)(function*(i){if(!Bl.D())return Promise.resolve();const s=i+"main";yield Bl.delete(s)}),function r(i){return t.apply(this,arguments)})(mP(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class m4{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof $h||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function U$(n,e,t,r={}){var i;const s=(n=pn(n,OE))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Pa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=bs.MOCK_USER;else{a=(0,$n.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Pe(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new bs(h)}n._authCredentials=new Mre(new Nj(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function Goe(n){return function Soe(n){return n.asyncQueue.enqueue((0,we.A)(function*(){const e=yield S$(n),t=yield x$(n);return e.setNetworkEnabled(!0),function(i){const s=ze(i);return s.L_.delete(0),kE(s)}(t)}))}(si(n=pn(n,yr)))}(this._delegate)}disableNetwork(){return function qoe(n){return function xoe(n){return n.asyncQueue.enqueue((0,we.A)(function*(){const e=yield S$(n),t=yield x$(n);return e.setNetworkEnabled(!1),(r=(0,we.A)(function*(s){const o=ze(s);o.L_.add(0),yield hy(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(si(n=pn(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,N$("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Woe(n){return function(t){const r=new Es;return t.asyncQueue.enqueueAndForget((0,we.A)(function*(){return function doe(n,e){return dM.apply(this,arguments)}(yield kM(t),r)})),r.promise}(si(n=pn(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function Eae(n,e){return function koe(n,e){const t=new XC(e);return n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return i=yield Iy(n),s=t,ze(i).Y_.add(s),void s.next();var i,s})),()=>{t.Za(),n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return i=yield Iy(n),s=t,void ze(i).Y_.delete(s);var i,s}))}}(si(n=pn(n,yr)),LM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ty(this,j$(this._delegate,e))}catch(t){throw bo(t,"collection()","Firestore.collection()")}}doc(e){try{return new bc(this,tA(this._delegate,e))}catch(t){throw bo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Eo(this,function Boe(n,e){if(n=pn(n,OE),NM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(ye.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Os(n,null,(r=e,new Zu(bn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw bo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Mae(n,e,t){n=pn(n,yr);const r=Object.assign(Object.assign({},Rae),t);return function(s){if(s.maxAttempts<1)throw new Pe(ye.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const c=new Es;return s.asyncQueue.enqueueAndForget((0,we.A)(function*(){const h=yield function R$(n){return JC(n).then(e=>e.datastore)}(s);new Toe(s.asyncQueue,h,a,o,c).au()})),c.promise}(si(n),i=>e(new Pae(n,i)),r)}(this._delegate,t=>e(new g4(this,t)))}batch(){return si(this._delegate),new _4(new l4(this._delegate,e=>Ay(this._delegate,e)))}loadBundle(e){return function Koe(n,e){const t=si(n=pn(n,yr)),r=new Uoe;return function Ooe(n,e,t,r){const i=function(o,a){let c;return c="string"==typeof o?KH().encode(o):o,m=function(m,v){if(m instanceof Uint8Array)return T$(m,v);if(m instanceof ArrayBuffer)return T$(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Coe(m,a);var m}(t,ME(e));n.asyncQueue.enqueueAndForget((0,we.A)(function*(){!function woe(n,e,t){const r=ze(n);var i;(i=(0,we.A)(function*(o,a,c){try{const h=yield a.getMetadata();if(yield function(S,M){const N=ze(S),ne=Si(M.createTime);return N.persistence.runTransaction("hasNewerBundle","readonly",W=>N.Gr.getBundleMetadata(W,M.id)).then(W=>!!W&&W.createTime.compareTo(ne)>=0)}(o.localStore,h))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(S=h).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);c._updateProgress(m$(h));const m=new Jse(h,o.localStore,a.serializer);let v=yield a.Ua();for(;v;){const A=yield m.la(v);A&&c._updateProgress(A),v=yield a.Ua()}const w=yield m.complete();return yield td(o,w.Ia,void 0),yield function(S,M){const N=ze(S);return N.persistence.runTransaction("Save bundle","readwrite",ne=>N.Gr.saveBundleMetadata(ne,M))}(o.localStore,h),c._completeWith(w.progress),Promise.resolve(w.Pa)}catch(h){return Pa("SyncEngine",`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}var S}),function s(o,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Qoe(n,e){return function Noe(n,e){return n.asyncQueue.enqueue((0,we.A)(function*(){return function(r,i){const s=ze(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield wy(n),e)}))}(si(n=pn(n,yr)),e).then(t=>t?new Os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Eo(this,t):null)}}class pA extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new HE(new Wl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bc.forKey(t,this.firestore,null)}}class g4{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new pA(e)}get(e){const t=bm(e);return this._delegate.get(t).then(r=>new zE(this._firestore,new rd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=bm(e);return r?(ZM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=bm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=bm(e);return this._delegate.delete(t),this}}class _4{constructor(e){this._delegate=e}set(e,t,r){const i=bm(e);return r?(ZM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=bm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=bm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class vm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new jE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $E(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=vm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new vm(e,new pA(e),t),i.set(t,s)),s}}vm.INSTANCES=new WeakMap;class bc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bc(t,new Hr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new bc(t,new Hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ty(this.firestore,j$(this._delegate,e))}catch(t){throw bo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,$n.Ku)(e))instanceof Hr&&H$(this._delegate,e)}set(e,t){t=ZM("DocumentReference.set",t);try{return t?o4(this._delegate,e,t):o4(this._delegate,e)}catch(r){throw bo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?a4(this._delegate,e):a4(this._delegate,e,t,...r)}catch(i){throw bo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function vae(n){return Ay(pn(n.firestore,yr),[new ry(n._key,ii.none())])}(this._delegate)}onSnapshot(...e){const t=y4(e),r=v4(e,i=>new zE(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return c4(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function pae(n){n=pn(n,Hr);const e=pn(n.firestore,yr),t=si(e),r=new rf(e);return function Roe(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return(r=(0,we.A)(function*(s,o,a){try{const c=yield function(m,v){const w=ze(m);return w.persistence.runTransaction("read document","readonly",A=>w.localDocuments.getDocument(A,v))}(s,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new Pe(ye.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=gy(c,`Failed to get document '${o} from cache`);a.reject(h)}}),function i(s,o,a){return r.apply(this,arguments)})(yield wy(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rd(e,r,n._key,i,new ym(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function mae(n){n=pn(n,Hr);const e=pn(n.firestore,yr);return P$(si(e),n._key,{source:"server"}).then(t=>QM(e,n,t))}(this._delegate):function fae(n){n=pn(n,Hr);const e=pn(n.firestore,yr);return P$(si(e),n._key).then(t=>QM(e,n,t))}(this._delegate),t.then(r=>new zE(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new bc(this.firestore,this._delegate.withConverter(e?vm.getInstance(this.firestore,e):null))}}function bo(n,e,t){return n.message=n.message.replace(e,t),n}function y4(n){for(const e of n)if("object"==typeof e&&!XM(e))return e;return{}}function v4(n,e){var t,r;let i;return i=XM(n[0])?n[0]:XM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class zE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return s4(this._delegate,e._delegate)}}class $E extends zE{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Rre(n,e){n||rt()}(void 0!==t),t}}class Eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new pA(e)}where(e,t,r){try{return new Eo(this.firestore,tf(this._delegate,function nae(n,e,t){const r=e,i=cA("where",n);return UE._create(i,r,t)}(e,t,r)))}catch(i){throw bo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Eo(this.firestore,tf(this._delegate,function rae(n,e="asc"){const t=e,r=cA("orderBy",n);return qM._create(r,t)}(e,t)))}catch(r){throw bo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Eo(this.firestore,tf(this._delegate,function iae(n){return V$("limit",n),lA._create("limit",n,"F")}(e)))}catch(t){throw bo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Eo(this.firestore,tf(this._delegate,function sae(n){return V$("limitToLast",n),lA._create("limitToLast",n,"L")}(e)))}catch(t){throw bo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Eo(this.firestore,tf(this._delegate,function oae(...n){return uA._create("startAt",n,!0)}(...e)))}catch(t){throw bo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Eo(this.firestore,tf(this._delegate,function aae(...n){return uA._create("startAfter",n,!1)}(...e)))}catch(t){throw bo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Eo(this.firestore,tf(this._delegate,function cae(...n){return dA._create("endBefore",n,!1)}(...e)))}catch(t){throw bo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Eo(this.firestore,tf(this._delegate,function lae(...n){return dA._create("endAt",n,!0)}(...e)))}catch(t){throw bo(t,"endAt()","Query.endAt()")}}isEqual(e){return FM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _ae(n){n=pn(n,Os);const e=pn(n.firestore,yr),t=si(e),r=new rf(e);return function Poe(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((0,we.A)(function*(){return(r=(0,we.A)(function*(s,o,a){try{const c=yield $C(s,o,!0),h=new y$(o,c.Ts),m=h.ma(c.documents),v=h.applyChanges(m,!1);a.resolve(v.snapshot)}catch(c){const h=gy(c,`Failed to execute query '${o} against cache`);a.reject(h)}}),function i(s,o,a){return r.apply(this,arguments)})(yield wy(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nf(e,r,n,i))}(this._delegate):"server"===e?.source?function yae(n){n=pn(n,Os);const e=pn(n.firestore,yr),t=si(e),r=new rf(e);return M$(t,n._query,{source:"server"}).then(i=>new nf(e,r,n,i))}(this._delegate):function gae(n){n=pn(n,Os);const e=pn(n.firestore,yr),t=si(e),r=new rf(e);return J$(n._query),M$(t,n._query).then(i=>new nf(e,r,n,i))}(this._delegate),t.then(r=>new JM(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=y4(e),r=v4(e,i=>new JM(this.firestore,new nf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return c4(this._delegate,t,r)}withConverter(e){return new Eo(this.firestore,this._delegate.withConverter(e?vm.getInstance(this.firestore,e):null))}}class $ae{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $E(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class JM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $E(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $ae(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $E(this._firestore,r))})}isEqual(e){return s4(this._delegate,e._delegate)}}class Ty extends Eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bc(this.firestore,e):null}doc(e){try{return new bc(this.firestore,void 0===e?tA(this._delegate):tA(this._delegate,e))}catch(t){throw bo(t,"doc()","CollectionReference.doc()")}}add(e){return function bae(n,e){const t=pn(n.firestore,yr),r=tA(n),i=hA(n.converter,e);return Ay(t,[sA(gm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ii.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new bc(this.firestore,t))}isEqual(e){return H$(this._delegate,e._delegate)}withConverter(e){return new Ty(this.firestore,this._delegate.withConverter(e?vm.getInstance(this.firestore,e):null))}}function bm(n){return pn(n,Hr)}class e1{constructor(...e){this._delegate=new nd(...e)}static documentId(){return new e1(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,$n.Ku)(e))instanceof nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Em{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Oae(){return new BM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Em(e)}static delete(){const e=function kae(){return new FE("deleteField")}();return e._methodName="FieldValue.delete",new Em(e)}static arrayUnion(...e){const t=function Nae(...n){return new UM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Em(t)}static arrayRemove(...e){const t=function Fae(...n){return new jM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Em(t)}static increment(e){const t=function Lae(n){return new HM("increment",n)}(e);return t._methodName="FieldValue.increment",new Em(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Wae={Firestore:m4,GeoPoint:nA,Timestamp:ni,Blob:HE,Transaction:g4,WriteBatch:_4,DocumentReference:bc,DocumentSnapshot:zE,Query:Eo,QueryDocumentSnapshot:$E,QuerySnapshot:JM,CollectionReference:Ty,FieldPath:e1,FieldValue:Em,setLogLevel:function zae(n){!function xre(n){Uh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function b4(n,e){return function Kae(n,e=A_){return new It(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function t1(n,e){return b4(n,e).pipe(Me(t=>({payload:t,type:"query"})))}!function qae(n){(function Gae(n,e){n.INTERNAL.registerComponent(new Aj.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Wae)))})(n,(e,t)=>new m4(e,t,new Hae)),n.registerVersion("@firebase/firestore-compat","0.3.38")}(Bh.A);class E4{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=D4(r,t);return new C4(i,s,this.afs)}snapshotChanges(){return function Qae(n,e){return b4(n,e).pipe(Rh(void 0),xR(),Me(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ra)}valueChanges(e={}){return this.snapshotChanges().pipe(Me(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return V(this.ref.get(e)).pipe(Ra)}}function mA(n,e){return t1(n,e).pipe(Rh(void 0),xR(),Me(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const h=s.find(v=>v.doc.ref.isEqual(a.ref)),m=r?.payload.docs.find(v=>v.ref.isEqual(a.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(a.metadata)||!h&&m&&JSON.stringify(m.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function w4(n,e,t){return mA(n,t).pipe(FI((r,i)=>function Yae(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Zae(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return n1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return n1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return n1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Bn(),Me(r=>r.map(i=>({type:i.type,payload:i}))))}function n1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function I4(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class C4{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=mA(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Me(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Rh(void 0),xR(),yo(([r,i])=>i.length>0||!r),Me(([,r])=>r),Ra)}auditTrail(e){return this.stateChanges(e).pipe(FI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=I4(e);return w4(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ra)}valueChanges(e={}){return t1(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Ra)}get(e){return V(this.query.get(e)).pipe(Ra)}add(e){return this.ref.add(e)}doc(e){return new E4(this.ref.doc(e),this.afs)}}class Xae{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?mA(this.query,this.afs.schedulers.outsideAngular).pipe(Me(t=>t.filter(r=>e.indexOf(r.type)>-1)),yo(t=>t.length>0),Ra):mA(this.query,this.afs.schedulers.outsideAngular).pipe(Ra)}auditTrail(e){return this.stateChanges(e).pipe(FI((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=I4(e);return w4(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ra)}valueChanges(e={}){return t1(this.query,this.afs.schedulers.outsideAngular).pipe(Me(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Ra)}get(e){return V(this.query.get(e)).pipe(Ra)}}const A4=new ke("angularfire2.enableFirestorePersistence"),T4=new ke("angularfire2.firestore.persistenceSettings"),Jae=new ke("angularfire2.firestore.settings"),ece=new ke("angularfire2.firestore.use-emulator");function D4(n,e=(t=>t)){return{query:e(n),ref:n}}let S4=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,h,m,v,w,A,S,M,N,ne,W){this.schedulers=c;const de=SR(t,a,r),Ae=m;v&&Ij(de,a,w,S,M,N,A,ne),[this.firestore,this.persistenceEnabled$]=fj(`${de.name}.firestore`,"AngularFirestore",de.name,()=>{const Be=a.runOutsideAngular(()=>de.firestore());if(s&&Be.settings(s),Ae&&Be.useEmulator(...Ae),i&&!nI(o)){const it=()=>{try{return V(Be.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(q){return typeof console<"u"&&console.warn(q),ie(!1)}};return[Be,a.runOutsideAngular(it)]}return[Be,ie(!1)]},[s,Ae,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=D4(i,r),a=this.schedulers.ngZone.run(()=>s);return new C4(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Xae(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new E4(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(he(hC),he(fC,8),he(A4,8),he(Jae,8),he(uc),he(nt),he(dj),he(T4,8),he(ece,8),he(Cj,8),he(_j,8),he(yj,8),he(vj,8),he(bj,8),he(Ej,8),he(wj,8),he(lj,8))};static \u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),tce=(()=>{class n{constructor(){Bh.A.registerVersion("angularfire",DR.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:A4,useValue:!0},{provide:T4,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=On({type:n});static \u0275inj=yn({providers:[S4]})}return n})(),x4=(()=>{class n{constructor(t){this.firestore=t,this.ONLINE_GAME_CODE_KEY="online_game_code_current",this.GAME_FIREBASE_COLLECTION="games"}handleCreateGame(t){var r=this;return(0,we.A)(function*(){const i=Math.random().toString(36).substring(2,6).toUpperCase();t||alert("Player id not found, please reload the page");const s={fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",isWhitePlayerTurn:!0,whitePlayerId:t,blackPlayerId:null,lastMove:null,status:"waiting"};return yield r.firestore.collection(r.GAME_FIREBASE_COLLECTION).doc(i).set(s),localStorage.setItem(r.ONLINE_GAME_CODE_KEY,i),i})()}joinGame(t,r){var i=this;return(0,we.A)(function*(){const s={localTurn:"white",competitorId:"",isWhitePlayerTurn:!0},o=i.firestore.collection(i.GAME_FIREBASE_COLLECTION).doc(t),a=yield cj(o.get());a.exists||alert("Game not found!");const c=a.data();return"playing"===c?.status&&c.blackPlayerId&&c.whitePlayerId&&alert("This game room is full, try again later"),c?.whitePlayerId&&(s.competitorId=c.whitePlayerId,s.localTurn="black",yield o.update({blackPlayerId:r,status:"playing"})),c?.blackPlayerId&&(s.competitorId=c.blackPlayerId,s.localTurn="white",yield o.update({whitePlayerId:r,status:"playing"})),s.isWhitePlayerTurn=!!c?.isWhitePlayerTurn,localStorage.setItem(i.ONLINE_GAME_CODE_KEY,t),s})()}getGameState(t){var r=this;return(0,we.A)(function*(){const i=r.firestore.collection(r.GAME_FIREBASE_COLLECTION).doc(t);return(yield cj(i.get())).data()})()}updateGameMoves(t,r){var i=this;return(0,we.A)(function*(){return i.firestore.collection(i.GAME_FIREBASE_COLLECTION).doc(t).update(r)})()}listenGameUpdates(t){return this.firestore.collection(this.GAME_FIREBASE_COLLECTION).doc(t).valueChanges()}startNewGame(t){var r=this;return(0,we.A)(function*(){yield r.firestore.collection(r.GAME_FIREBASE_COLLECTION).doc(t).update({fen:"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",isWhitePlayerTurn:!0,status:"playing",lastMove:null,winner:""})})()}static{this.\u0275fac=function(r){return new(r||n)(he(S4))}}static{this.\u0275prov=Ue({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const nce=["board"];function rce(n,e){1&n&&(yt(0,"span",13),Rn(1," Game code is required "),Ct())}function ice(n,e){if(1&n){const t=Eh();yt(0,"div",5)(1,"button",6),Kn("click",function(){return Xr(t),Jr(xn().handleCreateGame())}),Rn(2," Create Game "),Ct(),yt(3,"span",7),Rn(4,"or"),Ct(),yt(5,"form",8),Kn("ngSubmit",function(){return Xr(t),Jr(xn().handleJoinGame())}),yt(6,"label",9),Rn(7," Enter game code "),Ct(),Vi(8,"input",10),Br(9,rce,2,0,"span",11),yt(10,"button",12),Rn(11," Join "),Ct()()()}if(2&n){const t=xn();let r;Ht(5),hn("formGroup",t.infoForm),Ht(4),hn("ngIf",(null==(r=t.infoForm.get("gameCode"))?null:r.invalid)&&(null==(r=t.infoForm.get("gameCode"))?null:r.touched)),Ht(1),hn("disabled",t.infoForm.invalid)}}function sce(n,e){1&n&&(yt(0,"span"),Rn(1," Waiting for competitor"),Ct())}function oce(n,e){1&n&&(yt(0,"span",17)(1,"strong"),Rn(2,"Your turn"),Ct()())}function ace(n,e){if(1&n&&(yt(0,"span"),Rn(1," Competitor Id: "),yt(2,"strong"),Rn(3),Ct()()),2&n){const t=xn(2);Ht(3),xw(t.competitorId)}}function cce(n,e){if(1&n&&(yt(0,"div",14),Br(1,sce,2,0,"span",15),Br(2,oce,3,0,"span",16),yt(3,"span"),Rn(4," Game Code: "),yt(5,"strong"),Rn(6),Ct()(),Br(7,ace,4,1,"span",15),Ct()),2&n){const t=xn();Ht(1),hn("ngIf",!t.competitorId),Ht(1),hn("ngIf",t.isYourTurn&&t.competitorId),Ht(4),xw(t.gameCode),Ht(1),hn("ngIf",t.competitorId)}}function lce(n,e){1&n&&(yt(0,"span")(1,"b"),Rn(2,"Your are the winner"),Ct()())}function uce(n,e){1&n&&(yt(0,"span")(1,"b"),Rn(2,"Your are the loser"),Ct()())}function dce(n,e){if(1&n&&(yt(0,"div",14),Rn(1," The game is end "),Br(2,lce,3,0,"span",15),Br(3,uce,3,0,"span",15),Ct()),2&n){const t=xn();Ht(2),hn("ngIf",t.winner===t.playerId),Ht(1),hn("ngIf",t.winner===t.competitorId)}}function hce(n,e){if(1&n){const t=Eh();yt(0,"div",18)(1,"mat-card")(2,"ngx-chess-board",19,20),Kn("moveChange",function(){return Xr(t),Jr(xn().onMoveChange())}),Ct()()()}if(2&n){const t=xn();Ht(2),hn("darkTileColor","#b58863")("lightTileColor","#f0d9b5")("darkDisabled","white"===t.localTurn)("lightDisabled","black"===t.localTurn)("size",500)}}function fce(n,e){if(1&n){const t=Eh();yt(0,"div",21)(1,"button",22),Kn("click",function(){return Xr(t),Jr(xn().handleStartNewGame())}),Rn(2," Start new game "),Ct()()}}const pce=[{path:"",redirectTo:"/offline",pathMatch:"full"},{path:"",component:(()=>{class n{constructor(t){this.router=t,this.isOnlineMode=!1}ngOnInit(){this.router.events.subscribe(t=>{this.isOnlineMode=t.routerEvent?.url?.includes("/online")})}toggleMode(){const t=!this.isOnlineMode;this.isOnlineMode=t,this.router.navigate([t?"online":"offline"])}static{this.\u0275fac=function(r){return new(r||n)(be(xa))}}static{this.\u0275cmp=Zr({type:n,selectors:[["page-wrapper"]],decls:7,vars:1,consts:[["color","primary"],[1,"spacer"],["mat-raised-button","","color","accent",3,"click"]],template:function(r,i){1&r&&(yt(0,"mat-toolbar",0)(1,"span"),Rn(2,"Quick Chess Game"),Ct(),Vi(3,"span",1),yt(4,"button",2),Kn("click",function(){return i.toggleMode()}),Rn(5),Ct()(),Vi(6,"router-outlet")),2&r&&(Ht(5),Ih(" Switch to ",i.isOnlineMode?"Offline":"Online"," Mode "))},dependencies:[GI,kx,nJ],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}}return n})(),children:[{path:"offline",component:rne},{path:"online",component:(()=>{class n{constructor(t,r){this.fb=t,this.opService=r,this.ONLINE_GAME_PLAYER_ID_KEY="online_player_id",this.ONLINE_GAME_CODE_KEY="online_game_code_current",this.gameCode=null,this.playerId=null,this.competitorId=null,this.localTurn="white",this.isYourTurn=!0,this.isWhitePlayerTurn=!0,this.winner="",this.isGameEnd=!1,this.isFirstLoad=!0}ngOnInit(){var t=this;return(0,we.A)(function*(){t.infoForm=t.fb.group({gameCode:["",pne.required]})})()}ngAfterViewInit(){var t=this;return(0,we.A)(function*(){let r=localStorage.getItem(t.ONLINE_GAME_PLAYER_ID_KEY)?.toString();r||(r=ane(),localStorage.setItem(t.ONLINE_GAME_PLAYER_ID_KEY,r)),t.playerId=r;let i=localStorage.getItem(t.ONLINE_GAME_CODE_KEY)?.toString();if(i){t.gameCode=i;const s=yield t.opService.getGameState(t.gameCode);t.setGameInformation(s),t.board.setFEN(s.fen)}t.onGameUpdates(t.gameCode)})()}handleJoinGame(){var t=this;return(0,we.A)(function*(){const r=t.infoForm.value.gameCode,i=yield t.opService.joinGame(r,t.playerId);i&&(t.localTurn=i?.localTurn,t.competitorId=i?.competitorId,t.isYourTurn=i?.isWhitePlayerTurn&&"white"===t.localTurn,t.isWhitePlayerTurn=i?.isWhitePlayerTurn,t.gameCode=r,t.onGameUpdates(t.gameCode))})()}handleCreateGame(){var t=this;return(0,we.A)(function*(){const r=yield t.opService.handleCreateGame(t.playerId);r||alert("Create game failed"),t.gameCode=r,t.localTurn="white",t.onGameUpdates(t.gameCode)})()}onGameUpdates(t){var r=this;return(0,we.A)(function*(){r.opService.listenGameUpdates(t).subscribe(i=>{r.gameState=i,r.board.move(i.lastMove),r.setGameInformation(i)})})()}setGameInformation(t){if("end"===t.status)return this.isGameEnd=!0,void(this.winner=t.winner);t?.whitePlayerId===this.playerId&&(this.competitorId=t.blackPlayerId,this.localTurn="white"),t?.blackPlayerId===this.playerId&&(this.competitorId=t.whitePlayerId,this.localTurn="black"),this.isYourTurn=t?.isWhitePlayerTurn&&"white"===this.localTurn||!t?.isWhitePlayerTurn&&"black"===this.localTurn,this.isWhitePlayerTurn=t?.isWhitePlayerTurn,"black"===this.localTurn&&this.isFirstLoad&&(this.isFirstLoad=!1,setTimeout(()=>{this.board.reverse()}))}onMoveChange(){var t=this;return(0,we.A)(function*(){const r=t.board.getMoveHistory().slice(-1)[0];if(r.color===t.localTurn){t.board.move(r.move);let i={...t.gameState,fen:t.board.getFEN(),lastMove:r.move,isWhitePlayerTurn:"white"!==t.localTurn};r.mate&&(t.isGameEnd=!0,i={...i,winner:t.winner,status:"end"}),yield t.opService.updateGameMoves(t.gameCode,i)}})()}handleStartNewGame(){var t=this;return(0,we.A)(function*(){yield t.opService.startNewGame(t.gameCode),t.winner="",t.isGameEnd=!1})()}static{this.\u0275fac=function(r){return new(r||n)(be(nre),be(x4))}}static{this.\u0275cmp=Zr({type:n,selectors:[["app-online-mode-page"]],viewQuery:function(r,i){if(1&r&&Ch(nce,5),2&r){let s;Ia(s=Ca())&&(i.board=s.first)}},decls:8,vars:5,consts:[[1,"online-mode-container"],["class","online-mode-lobby",4,"ngIf"],["class","online-mode-information",4,"ngIf"],["class","online-mode-board",4,"ngIf"],["class","online-mode-tools",4,"ngIf"],[1,"online-mode-lobby"],["mat-raised-button","","color","primary",3,"click"],[2,"text-align","center"],[1,"online-mode-form",3,"formGroup","ngSubmit"],["for","gameCode",2,"text-align","center","font-size","20px"],["matInput","","type","text","id","gameCode","formControlName","gameCode"],["style","font-size: 14px; color: red; text-align: center",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],[2,"font-size","14px","color","red","text-align","center"],[1,"online-mode-information"],[4,"ngIf"],["style","color: red",4,"ngIf"],[2,"color","red"],[1,"online-mode-board"],[3,"darkTileColor","lightTileColor","darkDisabled","lightDisabled","size","moveChange"],["board",""],[1,"online-mode-tools"],["mat-raised-button","","color","accent",3,"click"]],template:function(r,i){1&r&&(yt(0,"div",0)(1,"h2"),Rn(2,"Chess Game Online Mode"),Ct(),Br(3,ice,12,3,"div",1),Br(4,cce,8,4,"div",2),Br(5,dce,4,2,"div",2),Br(6,hce,4,5,"div",3),Br(7,fce,3,0,"div",4),Ct()),2&r&&(Ht(3),hn("ngIf",!i.gameCode),Ht(1),hn("ngIf",i.gameCode&&!i.isGameEnd),Ht(1),hn("ngIf",i.gameCode&&i.isGameEnd),Ht(1),hn("ngIf",i.gameCode),Ht(1),hn("ngIf",i.isGameEnd))},dependencies:[fb,FV,kx,Ox,jU,eC,TU,DU,dC,IR],styles:[".online-mode-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;align-items:center}.online-mode-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.online-mode-tools[_ngcontent-%COMP%]{margin:20px 0}.online-mode-information[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:30px;margin:20px 0}.online-mode-lobby[_ngcontent-%COMP%]{margin:10px 0;display:flex;flex-direction:column;gap:10px}.online-mode-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}"]})}}return n})()}]},{path:"chess-board",component:Xte}];let mce=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n})}static{this.\u0275inj=yn({imports:[YB.forRoot(pce),YB]})}}return n})(),gce=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Zr({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Vi(0,"router-outlet")},dependencies:[GI],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;margin:0;background-color:#f4f4f4;text-align:center}"]})}}return n})();const _ce_firebaseConfig={apiKey:"AIzaSyA5rJfTIp-QmxsHucbPSVoVwP_SHWf0ug4",authDomain:"chess-board-c2f4e.firebaseapp.com",databaseURL:"https://chess-board-c2f4e-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"chess-board-c2f4e",storageBucket:"chess-board-c2f4e.firebasestorage.app",messagingSenderId:"112160837953",appId:"1:112160837953:web:cfcf8da1bff1e0360a11c0"};let yce=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=On({type:n,bootstrap:[gce]})}static{this.\u0275inj=yn({providers:[x4],imports:[OL,mce,DY.forRoot(),CX,N2,ZX,rJ,xJ,Ire.initializeApp(_ce_firebaseConfig),tce,rre,ire]})}}return n})();$K().bootstrapModule(yce).catch(n=>console.error(n))},376:function(Hi,Gr,Pt){var k;Hi=Pt.nmd(Hi),function(){var O,fn="Expected a function",qr="__lodash_hash_undefined__",Te="__lodash_placeholder__",It=1/0,zi=9007199254740991,yi=4294967295,Ie=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],te="[object Arguments]",pe="[object Array]",Me="[object Boolean]",Mt="[object Date]",pt="[object Error]",ln="[object Function]",ur="[object GeneratorFunction]",Mr="[object Map]",en="[object Number]",Vn="[object Object]",vi="[object Promise]",tr="[object RegExp]",bi="[object Set]",Ls="[object String]",Ic="[object Symbol]",cs="[object WeakMap]",Ri="[object ArrayBuffer]",Yn="[object DataView]",Pi="[object Float32Array]",nr="[object Float64Array]",Vs="[object Int8Array]",dr="[object Int16Array]",Na="[object Int32Array]",Bs="[object Uint8Array]",Qo="[object Uint8ClampedArray]",Mi="[object Uint16Array]",Yo="[object Uint32Array]",Fa=/\b__p \+= '';/g,$i=/\b(__p \+=) '' \+/g,Cs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wi=/&(?:amp|lt|gt|quot|#39);/g,La=/[&<>"']/g,rl=RegExp(Wi.source),Tc=RegExp(La.source),cd=/<%-([\s\S]+?)%>/g,il=/<%([\s\S]+?)%>/g,Dc=/<%=([\s\S]+?)%>/g,Zo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,ie=RegExp(G.source),le=/^\s+/,Qe=/\s/,Ke=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bn=/\{\n\/\* \[wrapped with (.+)\] \*/,Yr=/,? & /,mt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kr=/[()=,{}\[\]\/\s]/,gt=/\\(\\)?/g,Ei=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Co=/\w*$/,wn=/^[-+]0x[0-9a-f]+$/i,bt=/^0b[01]+$/i,Ao=/^\[object .+?Constructor\]$/,sl=/^0o[0-7]+$/i,ff=/^(?:0|[1-9]\d*)$/,Xo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,me=/['\n\r\u2028\u2029\\]/g,z="\\ud800-\\udfff",Rt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",kt="\\u2700-\\u27bf",tn="a-z\\xdf-\\xf6\\xf8-\\xff",Gl="A-Z\\xc0-\\xd6\\xd8-\\xde",Py="\\ufe0e\\ufe0f",pf="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",My="["+z+"]",ky="["+pf+"]",ql="["+Rt+"]",Oy="\\d+",Us="["+kt+"]",Et="["+tn+"]",Dm="[^"+z+pf+Oy+kt+tn+Gl+"]",ld="\\ud83c[\\udffb-\\udfff]",Ue="[^"+z+"]",Sm="(?:\\ud83c[\\udde6-\\uddff]){2}",yn="[\\ud800-\\udbff][\\udc00-\\udfff]",Jo="["+Gl+"]",dd="(?:"+Et+"|"+Dm+")",Rm="(?:"+Jo+"|"+Dm+")",Kl="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",ol="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",hd="(?:"+ql+"|"+ld+")?",Va="["+Py+"]?",Ql=Va+hd+"(?:\\u200d(?:"+[Ue,Sm,yn].join("|")+")"+Va+hd+")*",ls="(?:"+[Us,Sm,yn].join("|")+")"+Ql,fd="(?:"+[Ue+ql+"?",ql,Sm,yn,My].join("|")+")",o0=RegExp("['\u2019]","g"),Mn=RegExp(ql,"g"),Mm=RegExp(ld+"(?="+ld+")|"+fd+Ql,"g"),km=RegExp([Jo+"?"+Et+"+"+Kl+"(?="+[ky,Jo,"$"].join("|")+")",Rm+"+"+ol+"(?="+[ky,Jo+dd,"$"].join("|")+")",Jo+"?"+dd+"+"+Kl,Jo+"+"+ol,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oy,ls].join("|"),"g"),ke=RegExp("[\\u200d"+z+Rt+Py+"]"),Yl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pd=-1,Un={};Un[Pi]=Un[nr]=Un[Vs]=Un[dr]=Un[Na]=Un[Bs]=Un[Qo]=Un[Mi]=Un[Yo]=!0,Un[te]=Un[pe]=Un[Ri]=Un[Me]=Un[Yn]=Un[Mt]=Un[pt]=Un[ln]=Un[Mr]=Un[en]=Un[Vn]=Un[tr]=Un[bi]=Un[Ls]=Un[cs]=!1;var kn={};kn[te]=kn[pe]=kn[Ri]=kn[Yn]=kn[Me]=kn[Mt]=kn[Pi]=kn[nr]=kn[Vs]=kn[dr]=kn[Na]=kn[Mr]=kn[en]=kn[Vn]=kn[tr]=kn[bi]=kn[Ls]=kn[Ic]=kn[Bs]=kn[Qo]=kn[Mi]=kn[Yo]=!0,kn[pt]=kn[ln]=kn[cs]=!1;var Nm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},c0=parseFloat,Fm=parseInt,al="object"==typeof global&&global&&global.Object===Object&&global,Zl="object"==typeof self&&self&&self.Object===Object&&self,rr=al||Zl||Function("return this")(),Do=Gr&&!Gr.nodeType&&Gr,Sc=Do&&Hi&&!Hi.nodeType&&Hi,Lm=Sc&&Sc.exports===Do,Ts=Lm&&al.process,wi=function(){try{return Sc&&Sc.require&&Sc.require("util").types||Ts&&Ts.binding&&Ts.binding("util")}catch{}}(),md=wi&&wi.isArrayBuffer,ea=wi&&wi.isDate,gd=wi&&wi.isMap,he=wi&&wi.isRegExp,Xl=wi&&wi.isSet,Ge=wi&&wi.isTypedArray;function ki(Q,Z,ee){switch(ee.length){case 0:return Q.call(Z);case 1:return Q.call(Z,ee[0]);case 2:return Q.call(Z,ee[0],ee[1]);case 3:return Q.call(Z,ee[0],ee[1],ee[2])}return Q.apply(Z,ee)}function Jl(Q,Z,ee,Ve){for(var ct=-1,un=null==Q?0:Q.length;++ct<un;){var an=Q[ct];Z(Ve,an,ee(an),Q)}return Ve}function Er(Q,Z){for(var ee=-1,Ve=null==Q?0:Q.length;++ee<Ve&&!1!==Z(Q[ee],ee,Q););return Q}function Ny(Q,Z){for(var ee=null==Q?0:Q.length;ee--&&!1!==Z(Q[ee],ee,Q););return Q}function Vm(Q,Z){for(var ee=-1,Ve=null==Q?0:Q.length;++ee<Ve;)if(!Z(Q[ee],ee,Q))return!1;return!0}function js(Q,Z){for(var ee=-1,Ve=null==Q?0:Q.length,ct=0,un=[];++ee<Ve;){var an=Q[ee];Z(an,ee,Q)&&(un[ct++]=an)}return un}function no(Q,Z){return!(null==Q||!Q.length)&&ja(Q,Z,0)>-1}function Ba(Q,Z,ee){for(var Ve=-1,ct=null==Q?0:Q.length;++Ve<ct;)if(ee(Z,Q[Ve]))return!0;return!1}function Ft(Q,Z){for(var ee=-1,Ve=null==Q?0:Q.length,ct=Array(Ve);++ee<Ve;)ct[ee]=Z(Q[ee],ee,Q);return ct}function wr(Q,Z){for(var ee=-1,Ve=Z.length,ct=Q.length;++ee<Ve;)Q[ct+ee]=Z[ee];return Q}function Kt(Q,Z,ee,Ve){var ct=-1,un=null==Q?0:Q.length;for(Ve&&un&&(ee=Q[++ct]);++ct<un;)ee=Z(ee,Q[ct],ct,Q);return ee}function eu(Q,Z,ee,Ve){var ct=null==Q?0:Q.length;for(Ve&&ct&&(ee=Q[--ct]);ct--;)ee=Z(ee,Q[ct],ct,Q);return ee}function cl(Q,Z){for(var ee=-1,Ve=null==Q?0:Q.length;++ee<Ve;)if(Z(Q[ee],ee,Q))return!0;return!1}var _d=Ha("length");function ll(Q,Z,ee){var Ve;return ee(Q,function(ct,un,an){if(Z(ct,un,an))return Ve=un,!1}),Ve}function Ua(Q,Z,ee,Ve){for(var ct=Q.length,un=ee+(Ve?1:-1);Ve?un--:++un<ct;)if(Z(Q[un],un,Q))return un;return-1}function ja(Q,Z,ee){return Z==Z?function li(Q,Z,ee){for(var Ve=ee-1,ct=Q.length;++Ve<ct;)if(Q[Ve]===Z)return Ve;return-1}(Q,Z,ee):Ua(Q,tu,ee)}function yd(Q,Z,ee,Ve){for(var ct=ee-1,un=Q.length;++ct<un;)if(Ve(Q[ct],Z))return ct;return-1}function tu(Q){return Q!=Q}function ds(Q,Z){var ee=null==Q?0:Q.length;return ee?ru(Q,Z)/ee:NaN}function Ha(Q){return function(Z){return null==Z?O:Z[Q]}}function vd(Q){return function(Z){return null==Q?O:Q[Z]}}function nu(Q,Z,ee,Ve,ct){return ct(Q,function(un,an,vn){ee=Ve?(Ve=!1,un):Z(ee,un,an,vn)}),ee}function ru(Q,Z){for(var ee,Ve=-1,ct=Q.length;++Ve<ct;){var un=Z(Q[Ve]);un!==O&&(ee=ee===O?un:ee+un)}return ee}function Ed(Q,Z){for(var ee=-1,Ve=Array(Q);++ee<Q;)Ve[ee]=Z(ee);return Ve}function hs(Q){return Q&&Q.slice(0,ta(Q)+1).replace(le,"")}function Gi(Q){return function(Z){return Q(Z)}}function ul(Q,Z){return Ft(Z,function(ee){return Q[ee]})}function za(Q,Z){return Q.has(Z)}function wd(Q,Z){for(var ee=-1,Ve=Q.length;++ee<Ve&&ja(Z,Q[ee],0)>-1;);return ee}function yf(Q,Z){for(var ee=Q.length;ee--&&ja(Z,Q[ee],0)>-1;);return ee}var bf=vd({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ef=vd({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Id(Q){return"\\"+Nm[Q]}function Zr(Q){return ke.test(Q)}function iu(Q){var Z=-1,ee=Array(Q.size);return Q.forEach(function(Ve,ct){ee[++Z]=[ct,Ve]}),ee}function On(Q,Z){return function(ee){return Q(Z(ee))}}function So(Q,Z){for(var ee=-1,Ve=Q.length,ct=0,un=[];++ee<Ve;){var an=Q[ee];(an===Z||an===Te)&&(Q[ee]=Te,un[ct++]=ee)}return un}function su(Q){var Z=-1,ee=Array(Q.size);return Q.forEach(function(Ve){ee[++Z]=Ve}),ee}function ir(Q){return Zr(Q)?function jm(Q){for(var Z=Mm.lastIndex=0;Mm.test(Q);)++Z;return Z}(Q):_d(Q)}function Nn(Q){return Zr(Q)?function Cd(Q){return Q.match(Mm)||[]}(Q):function Bm(Q){return Q.split("")}(Q)}function ta(Q){for(var Z=Q.length;Z--&&Qe.test(Q.charAt(Z)););return Z}var qi=vd({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Td=function Q(Z){var l,ee=(Z=null==Z?rr:Td.defaults(rr.Object(),Z,Td.pick(rr,gf))).Array,Ve=Z.Date,ct=Z.Error,un=Z.Function,an=Z.Math,vn=Z.Object,fr=Z.RegExp,xo=Z.String,Ii=Z.TypeError,At=ee.prototype,Rc=vn.prototype,ro=Z["__core-js_shared__"],sr=un.prototype.toString,dn=Rc.hasOwnProperty,dl=0,Ds=(l=/[^.]+$/.exec(ro&&ro.keys&&ro.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"",$a=Rc.toString,Dd=sr.call(vn),Wa=rr._,io=fr("^"+sr.call(dn).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ga=Lm?Z.Buffer:O,fs=Z.Symbol,zt=Z.Uint8Array,Ly=Ga?Ga.allocUnsafe:O,Pc=On(vn.getPrototypeOf,vn),ou=vn.create,so=Rc.propertyIsEnumerable,Hs=At.splice,qa=fs?fs.isConcatSpreadable:O,na=fs?fs.iterator:O,pr=fs?fs.toStringTag:O,Af=function(){try{var l=Bc(vn,"defineProperty");return l({},"",{}),l}catch{}}(),ps=Z.clearTimeout!==rr.clearTimeout&&Z.clearTimeout,Ki=Ve&&Ve.now!==rr.Date.now&&Ve.now,Hm=Z.setTimeout!==rr.setTimeout&&Z.setTimeout,ra=an.ceil,hl=an.floor,Qi=vn.getOwnPropertySymbols,Tf=Ga?Ga.isBuffer:O,zm=Z.isFinite,l0=At.join,PA=On(vn.keys,vn),ui=an.max,Yi=an.min,MA=Ve.now,kA=Z.parseInt,Df=an.random,fl=At.reverse,Sd=Bc(Z,"DataView"),xd=Bc(Z,"Map"),$m=Bc(Z,"Promise"),au=Bc(Z,"Set"),Sf=Bc(Z,"WeakMap"),Rd=Bc(vn,"create"),xf=Sf&&new Sf,Mc={},Pd=ti(Sd),Wm=ti(xd),Rf=ti($m),Vy=ti(au),u0=ti(Sf),Ro=fs?fs.prototype:O,oo=Ro?Ro.valueOf:O,Md=Ro?Ro.toString:O;function x(l){if(qn(l)&&!Vt(l)&&!(l instanceof jt)){if(l instanceof mr)return l;if(dn.call(l,"__wrapped__"))return ih(l)}return new mr(l)}var Dn=function(){function l(){}return function(d){if(!Dr(d))return{};if(ou)return ou(d);l.prototype=d;var _=new l;return l.prototype=O,_}}();function kc(){}function mr(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=O}function jt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yi,this.__views__=[]}function ao(l){var d=-1,_=null==l?0:l.length;for(this.clear();++d<_;){var E=l[d];this.set(E[0],E[1])}}function Po(l){var d=-1,_=null==l?0:l.length;for(this.clear();++d<_;){var E=l[d];this.set(E[0],E[1])}}function ko(l){var d=-1,_=null==l?0:l.length;for(this.clear();++d<_;){var E=l[d];this.set(E[0],E[1])}}function ia(l){var d=-1,_=null==l?0:l.length;for(this.__data__=new ko;++d<_;)this.add(l[d])}function Zi(l){var d=this.__data__=new Po(l);this.size=d.size}function uu(l,d){var _=Vt(l),E=!_&&Fu(l),T=!_&&!E&&Il(l),P=!_&&!E&&!T&&hh(l),B=_||E||T||P,K=B?Ed(l.length,xo):[],J=K.length;for(var De in l)(d||dn.call(l,De))&&(!B||!("length"==De||T&&("offset"==De||"parent"==De)||P&&("buffer"==De||"byteLength"==De||"byteOffset"==De)||ic(De,J)))&&K.push(De);return K}function eg(l){var d=l.length;return d?l[la(0,d-1)]:O}function tg(l,d){return cp(ai(l),Ka(d,0,l.length))}function $y(l){return cp(ai(l))}function ml(l,d,_){(_!==O&&!Uo(l[d],_)||_===O&&!(d in l))&&sa(l,d,_)}function du(l,d,_){var E=l[d];(!dn.call(l,d)||!Uo(E,_)||_===O&&!(d in l))&&sa(l,d,_)}function Nf(l,d){for(var _=l.length;_--;)if(Uo(l[_][0],d))return _;return-1}function Wy(l,d,_,E){return oa(l,function(T,P,B){d(E,T,_(T),B)}),E}function Xi(l,d){return l&&co(d,Ai(d),l)}function sa(l,d,_){"__proto__"==d&&Af?Af(l,d,{configurable:!0,enumerable:!0,value:_,writable:!0}):l[d]=_}function Lf(l,d){for(var _=-1,E=d.length,T=ee(E),P=null==l;++_<E;)T[_]=P?O:Al(l,d[_]);return T}function Ka(l,d,_){return l==l&&(_!==O&&(l=l<=_?l:_),d!==O&&(l=l>=d?l:d)),l}function Ji(l,d,_,E,T,P){var B,K=1&d,J=2&d,De=4&d;if(_&&(B=T?_(l,E,T,P):_(l)),B!==O)return B;if(!Dr(l))return l;var Se=Vt(l);if(Se){if(B=function wl(l){var d=l.length,_=new l.constructor(d);return d&&"string"==typeof l[0]&&dn.call(l,"index")&&(_.index=l.index,_.input=l.input),_}(l),!K)return ai(l,B)}else{var Oe=Fr(l),He=Oe==ln||Oe==ur;if(Il(l))return da(l,K);if(Oe==Vn||Oe==te||He&&!T){if(B=J||He?{}:Zy(l),!K)return J?function Qf(l,d){return co(l,Uc(l),d)}(l,function Ff(l,d){return l&&co(d,ho(d),l)}(B,l)):function fg(l,d){return co(l,El(l),d)}(l,Xi(B,l))}else{if(!kn[Oe])return T?l:{};B=function xu(l,d,_){var E=l.constructor;switch(d){case Ri:return Kf(l);case Me:case Mt:return new E(+l);case Yn:return function $d(l,d){var _=d?Kf(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.byteLength)}(l,_);case Pi:case nr:case Vs:case dr:case Na:case Bs:case Qo:case Mi:case Yo:return bl(l,_);case Mr:return new E;case en:case Ls:return new E(l);case tr:return function Wd(l){var d=new l.constructor(l.source,Co.exec(l));return d.lastIndex=l.lastIndex,d}(l);case bi:return new E;case Ic:return function Gd(l){return oo?vn(oo.call(l)):{}}(l)}}(l,Oe,K)}}P||(P=new Zi);var st=P.get(l);if(st)return st;P.set(l,B),q0(l)?l.forEach(function(Dt){B.add(Ji(Dt,d,_,Dt,l,P))}):W0(l)&&l.forEach(function(Dt,nn){B.set(nn,Ji(Dt,d,_,nn,l,P))});var Zt=Se?O:(De?J?Tu:eh:J?ho:Ai)(l);return Er(Zt||l,function(Dt,nn){Zt&&(Dt=l[nn=Dt]),du(B,nn,Ji(Dt,d,_,nn,l,P))}),B}function gl(l,d,_){var E=_.length;if(null==l)return!E;for(l=vn(l);E--;){var T=_[E],B=l[T];if(B===O&&!(T in l)||!(0,d[T])(B))return!1}return!0}function ng(l,d,_){if("function"!=typeof l)throw new Ii(fn);return rh(function(){l.apply(O,_)},d)}function Oi(l,d,_,E){var T=-1,P=no,B=!0,K=l.length,J=[],De=d.length;if(!K)return J;_&&(d=Ft(d,Gi(_))),E?(P=Ba,B=!1):d.length>=200&&(P=za,B=!1,d=new ia(d));e:for(;++T<K;){var Se=l[T],Oe=null==_?Se:_(Se);if(Se=E||0!==Se?Se:0,B&&Oe==Oe){for(var He=De;He--;)if(d[He]===Oe)continue e;J.push(Se)}else P(d,Oe,E)||J.push(Se)}return J}x.templateSettings={escape:cd,evaluate:il,interpolate:Dc,variable:"",imports:{_:x}},(x.prototype=kc.prototype).constructor=x,(mr.prototype=Dn(kc.prototype)).constructor=mr,(jt.prototype=Dn(kc.prototype)).constructor=jt,ao.prototype.clear=function Km(){this.__data__=Rd?Rd(null):{},this.size=0},ao.prototype.delete=function cu(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d},ao.prototype.get=function Pf(l){var d=this.__data__;if(Rd){var _=d[l];return _===qr?O:_}return dn.call(d,l)?d[l]:O},ao.prototype.has=function Qm(l){var d=this.__data__;return Rd?d[l]!==O:dn.call(d,l)},ao.prototype.set=function Mf(l,d){var _=this.__data__;return this.size+=this.has(l)?0:1,_[l]=Rd&&d===O?qr:d,this},Po.prototype.clear=function Oc(){this.__data__=[],this.size=0},Po.prototype.delete=function pl(l){var d=this.__data__,_=Nf(d,l);return!(_<0||(_==d.length-1?d.pop():Hs.call(d,_,1),--this.size,0))},Po.prototype.get=function Mo(l){var d=this.__data__,_=Nf(d,l);return _<0?O:d[_][1]},Po.prototype.has=function lu(l){return Nf(this.__data__,l)>-1},Po.prototype.set=function d0(l,d){var _=this.__data__,E=Nf(_,l);return E<0?(++this.size,_.push([l,d])):_[E][1]=d,this},ko.prototype.clear=function By(){this.size=0,this.__data__={hash:new ao,map:new(xd||Po),string:new ao}},ko.prototype.delete=function kf(l){var d=Cr(this,l).delete(l);return this.size-=d?1:0,d},ko.prototype.get=function Uy(l){return Cr(this,l).get(l)},ko.prototype.has=function Ym(l){return Cr(this,l).has(l)},ko.prototype.set=function Of(l,d){var _=Cr(this,l),E=_.size;return _.set(l,d),this.size+=_.size==E?0:1,this},ia.prototype.add=ia.prototype.push=function jy(l){return this.__data__.set(l,qr),this},ia.prototype.has=function Zm(l){return this.__data__.has(l)},Zi.prototype.clear=function h0(){this.__data__=new Po,this.size=0},Zi.prototype.delete=function Hy(l){var d=this.__data__,_=d.delete(l);return this.size=d.size,_},Zi.prototype.get=function Xm(l){return this.__data__.get(l)},Zi.prototype.has=function Jm(l){return this.__data__.has(l)},Zi.prototype.set=function zy(l,d){var _=this.__data__;if(_ instanceof Po){var E=_.__data__;if(!xd||E.length<199)return E.push([l,d]),this.size=++_.size,this;_=this.__data__=new ko(E)}return _.set(l,d),this.size=_.size,this};var oa=Yf(Ir),hu=Yf(Vf,!0);function Sn(l,d){var _=!0;return oa(l,function(E,T,P){return _=!!d(E,T,P)}),_}function Qa(l,d,_){for(var E=-1,T=l.length;++E<T;){var P=l[E],B=d(P);if(null!=B&&(K===O?B==B&&!Ws(B):_(B,K)))var K=B,J=P}return J}function Ci(l,d){var _=[];return oa(l,function(E,T,P){d(E,T,P)&&_.push(E)}),_}function Nr(l,d,_,E,T){var P=-1,B=l.length;for(_||(_=Xy),T||(T=[]);++P<B;){var K=l[P];d>0&&_(K)?d>1?Nr(K,d-1,_,E,T):wr(T,K):E||(T[T.length]=K)}return T}var Oo=Kd(),aa=Kd(!0);function Ir(l,d){return l&&Oo(l,d,Ai)}function Vf(l,d){return l&&aa(l,d,Ai)}function Od(l,d){return js(d,function(_){return ga(l[_])})}function ca(l,d){for(var _=0,E=(d=ec(d,l)).length;null!=l&&_<E;)l=l[lo(d[_++])];return _&&_==E?l:O}function No(l,d,_){var E=d(l);return Vt(l)?E:wr(E,_(l))}function Ni(l){return null==l?l===O?"[object Undefined]":"[object Null]":pr&&pr in vn(l)?function Su(l){var d=dn.call(l,pr),_=l[pr];try{l[pr]=O;var E=!0}catch{}var T=$a.call(l);return E&&(d?l[pr]=_:delete l[pr]),T}(l):function sp(l){return $a.call(l)}(l)}function Bf(l,d){return l>d}function Nd(l,d){return null!=l&&dn.call(l,d)}function rg(l,d){return null!=l&&d in vn(l)}function Uf(l,d,_){for(var E=_?Ba:no,T=l[0].length,P=l.length,B=P,K=ee(P),J=1/0,De=[];B--;){var Se=l[B];B&&d&&(Se=Ft(Se,Gi(d))),J=Yi(Se.length,J),K[B]=!_&&(d||T>=120&&Se.length>=120)?new ia(B&&Se):O}Se=l[0];var Oe=-1,He=K[0];e:for(;++Oe<T&&De.length<J;){var st=Se[Oe],Tt=d?d(st):st;if(st=_||0!==st?st:0,!(He?za(He,Tt):E(De,Tt,_))){for(B=P;--B;){var Zt=K[B];if(!(Zt?za(Zt,Tt):E(l[B],Tt,_)))continue e}He&&He.push(Tt),De.push(st)}}return De}function Ya(l,d,_){var E=null==(l=oc(l,d=ec(d,l)))?l:l[lo(Tr(d))];return null==E?O:ki(E,l,_)}function qy(l){return qn(l)&&Ni(l)==te}function pu(l,d,_,E,T){return l===d||(null==l||null==d||!qn(l)&&!qn(d)?l!=l&&d!=d:function Ld(l,d,_,E,T,P){var B=Vt(l),K=Vt(d),J=B?pe:Fr(l),De=K?pe:Fr(d),Se=(J=J==te?Vn:J)==Vn,Oe=(De=De==te?Vn:De)==Vn,He=J==De;if(He&&Il(l)){if(!Il(d))return!1;B=!0,Se=!1}if(He&&!Se)return P||(P=new Zi),B||hh(l)?gg(l,d,_,E,T,P):function Jd(l,d,_,E,T,P,B){switch(_){case Yn:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case Ri:return!(l.byteLength!=d.byteLength||!P(new zt(l),new zt(d)));case Me:case Mt:case en:return Uo(+l,+d);case pt:return l.name==d.name&&l.message==d.message;case tr:case Ls:return l==d+"";case Mr:var K=iu;case bi:if(K||(K=su),l.size!=d.size&&!(1&E))return!1;var De=B.get(l);if(De)return De==d;E|=2,B.set(l,d);var Se=gg(K(l),K(d),E,T,P,B);return B.delete(l),Se;case Ic:if(oo)return oo.call(l)==oo.call(d)}return!1}(l,d,J,_,E,T,P);if(!(1&_)){var st=Se&&dn.call(l,"__wrapped__"),Tt=Oe&&dn.call(d,"__wrapped__");if(st||Tt){var Zt=st?l.value():l,Dt=Tt?d.value():d;return P||(P=new Zi),T(Zt,Dt,_,E,P)}}return!!He&&(P||(P=new Zi),function Vc(l,d,_,E,T,P){var B=1&_,K=eh(l),J=K.length;if(J!=eh(d).length&&!B)return!1;for(var Oe=J;Oe--;){var He=K[Oe];if(!(B?He in d:dn.call(d,He)))return!1}var st=P.get(l),Tt=P.get(d);if(st&&Tt)return st==d&&Tt==l;var Zt=!0;P.set(l,d),P.set(d,l);for(var Dt=B;++Oe<J;){var nn=l[He=K[Oe]],Xe=d[He];if(E)var Gs=B?E(Xe,nn,He,d,l,P):E(nn,Xe,He,l,d,P);if(!(Gs===O?nn===Xe||T(nn,Xe,_,E,P):Gs)){Zt=!1;break}Dt||(Dt="constructor"==He)}if(Zt&&!Dt){var Rs=l.constructor,zo=d.constructor;Rs!=zo&&"constructor"in l&&"constructor"in d&&!("function"==typeof Rs&&Rs instanceof Rs&&"function"==typeof zo&&zo instanceof zo)&&(Zt=!1)}return P.delete(l),P.delete(d),Zt}(l,d,_,E,T,P))}(l,d,_,E,pu,T))}function mu(l,d,_,E){var T=_.length,P=T,B=!E;if(null==l)return!P;for(l=vn(l);T--;){var K=_[T];if(B&&K[2]?K[1]!==l[K[0]]:!(K[0]in l))return!1}for(;++T<P;){var J=(K=_[T])[0],De=l[J],Se=K[1];if(B&&K[2]){if(De===O&&!(J in l))return!1}else{var Oe=new Zi;if(E)var He=E(De,Se,J,l,d,Oe);if(!(He===O?pu(Se,De,3,E,Oe):He))return!1}}return!0}function ig(l){return!(!Dr(l)||function rp(l){return!!Ds&&Ds in l}(l))&&(ga(l)?io:Ao).test(ti(l))}function xe(l){return"function"==typeof l?l:null==l?Li:"object"==typeof l?Vt(l)?_l(l[0],l[1]):gu(l):cw(l)}function cn(l){if(!or(l))return PA(l);var d=[];for(var _ in vn(l))dn.call(l,_)&&"constructor"!=_&&d.push(_);return d}function Jr(l,d){return l<d}function di(l,d){var _=-1,E=ts(l)?ee(l.length):[];return oa(l,function(T,P,B){E[++_]=d(T,P,B)}),E}function gu(l){var d=Du(l);return 1==d.length&&d[0][2]?sc(d[0][0],d[0][1]):function(_){return _===l||mu(_,l,d)}}function _l(l,d){return yg(l)&&vg(d)?sc(lo(l),d):function(_){var E=Al(_,l);return E===O&&E===d?wv(_,l):pu(d,E,3)}}function Ss(l,d,_,E,T){l!==d&&Oo(d,function(P,B){if(T||(T=new Zi),Dr(P))!function _u(l,d,_,E,T,P,B){var K=bg(l,_),J=bg(d,_),De=B.get(J);if(De)ml(l,_,De);else{var Se=P?P(K,J,_+"",l,d,B):O,Oe=Se===O;if(Oe){var He=Vt(J),st=!He&&Il(J),Tt=!He&&!st&&hh(J);Se=J,He||st||Tt?Vt(K)?Se=K:Lr(K)?Se=ai(K):st?(Oe=!1,Se=da(J,!0)):Tt?(Oe=!1,Se=bl(J,!0)):Se=[]:Cp(J)||Fu(J)?(Se=K,Fu(K)?Se=pT(K):(!Dr(K)||ga(K))&&(Se=Zy(J))):Oe=!1}Oe&&(B.set(J,Se),T(Se,J,E,P,B),B.delete(J)),ml(l,_,Se)}}(l,d,B,_,Ss,E,T);else{var K=E?E(bg(l,B),P,B+"",l,d,T):O;K===O&&(K=P),ml(l,B,K)}},ho)}function Vd(l,d){var _=l.length;if(_)return ic(d+=d<0?_:0,_)?l[d]:O}function Bd(l,d,_){d=d.length?Ft(d,function(P){return Vt(P)?function(B){return ca(B,1===P.length?P[0]:P)}:P}):[Li];var E=-1;return d=Ft(d,Gi(_t())),function bd(Q,Z){var ee=Q.length;for(Q.sort(Z);ee--;)Q[ee]=Q[ee].value;return Q}(di(l,function(P,B,K){return{criteria:Ft(d,function(De){return De(P)}),index:++E,value:P}}),function(P,B){return function hg(l,d,_){for(var E=-1,T=l.criteria,P=d.criteria,B=T.length,K=_.length;++E<B;){var J=bu(T[E],P[E]);if(J)return E>=K?J:J*("desc"==_[E]?-1:1)}return l.index-d.index}(P,B,_)})}function yu(l,d,_){for(var E=-1,T=d.length,P={};++E<T;){var B=d[E],K=ca(l,B);_(K,B)&&Nc(P,ec(B,l),K)}return P}function xs(l,d,_,E){var T=E?yd:ja,P=-1,B=d.length,K=l;for(l===d&&(d=ai(d)),_&&(K=Ft(l,Gi(_)));++P<B;)for(var J=0,De=d[P],Se=_?_(De):De;(J=T(K,Se,J,E))>-1;)K!==l&&Hs.call(K,J,1),Hs.call(l,J,1);return l}function zf(l,d){for(var _=l?d.length:0,E=_-1;_--;){var T=d[_];if(_==E||T!==P){var P=T;ic(T)?Hs.call(l,T,1):Gf(l,T)}}return l}function la(l,d){return l+hl(Df()*(d-l+1))}function Ud(l,d){var _="";if(!l||d<1||d>zi)return _;do{d%2&&(_+=l),(d=hl(d/2))&&(l+=l)}while(d);return _}function $t(l,d){return Ar(Ru(l,d,Li),l+"")}function ag(l){return eg(Ho(l))}function $f(l,d){var _=Ho(l);return cp(_,Ka(d,0,_.length))}function Nc(l,d,_,E){if(!Dr(l))return l;for(var T=-1,P=(d=ec(d,l)).length,B=P-1,K=l;null!=K&&++T<P;){var J=lo(d[T]),De=_;if("__proto__"===J||"constructor"===J||"prototype"===J)return l;if(T!=B){var Se=K[J];(De=E?E(Se,J,K):O)===O&&(De=Dr(Se)?Se:ic(d[T+1])?[]:{})}du(K,J,De),K=K[J]}return l}var jd=xf?function(l,d){return xf.set(l,d),l}:Li,cg=Af?function(l,d){return Af(l,"toString",{configurable:!0,enumerable:!1,value:xp(d),writable:!0})}:Li;function vu(l){return cp(Ho(l))}function zs(l,d,_){var E=-1,T=l.length;d<0&&(d=-d>T?0:T+d),(_=_>T?T:_)<0&&(_+=T),T=d>_?0:_-d>>>0,d>>>=0;for(var P=ee(T);++E<T;)P[E]=l[E+d];return P}function lg(l,d){var _;return oa(l,function(E,T,P){return!(_=d(E,T,P))}),!!_}function Fc(l,d,_){var E=0,T=null==l?E:l.length;if("number"==typeof d&&d==d&&T<=2147483647){for(;E<T;){var P=E+T>>>1,B=l[P];null!==B&&!Ws(B)&&(_?B<=d:B<d)?E=P+1:T=P}return T}return Hd(l,d,Li,_)}function Hd(l,d,_,E){var T=0,P=null==l?0:l.length;if(0===P)return 0;for(var B=(d=_(d))!=d,K=null===d,J=Ws(d),De=d===O;T<P;){var Se=hl((T+P)/2),Oe=_(l[Se]),He=Oe!==O,st=null===Oe,Tt=Oe==Oe,Zt=Ws(Oe);if(B)var Dt=E||Tt;else Dt=De?Tt&&(E||He):K?Tt&&He&&(E||!st):J?Tt&&He&&!st&&(E||!Zt):!st&&!Zt&&(E?Oe<=d:Oe<d);Dt?T=Se+1:P=Se}return Yi(P,4294967294)}function yl(l,d){for(var _=-1,E=l.length,T=0,P=[];++_<E;){var B=l[_],K=d?d(B):B;if(!_||!Uo(K,J)){var J=K;P[T++]=0===B?0:B}}return P}function Wf(l){return"number"==typeof l?l:Ws(l)?NaN:+l}function ms(l){if("string"==typeof l)return l;if(Vt(l))return Ft(l,ms)+"";if(Ws(l))return Md?Md.call(l):"";var d=l+"";return"0"==d&&1/l==-It?"-0":d}function Lo(l,d,_){var E=-1,T=no,P=l.length,B=!0,K=[],J=K;if(_)B=!1,T=Ba;else if(P>=200){var De=d?null:ep(l);if(De)return su(De);B=!1,T=za,J=new ia}else J=d?[]:K;e:for(;++E<P;){var Se=l[E],Oe=d?d(Se):Se;if(Se=_||0!==Se?Se:0,B&&Oe==Oe){for(var He=J.length;He--;)if(J[He]===Oe)continue e;d&&J.push(Oe),K.push(Se)}else T(J,Oe,_)||(J!==K&&J.push(Oe),K.push(Se))}return K}function Gf(l,d){return null==(l=oc(l,d=ec(d,l)))||delete l[lo(Tr(d))]}function ug(l,d,_,E){return Nc(l,d,_(ca(l,d)),E)}function hi(l,d,_,E){for(var T=l.length,P=E?T:-1;(E?P--:++P<T)&&d(l[P],P,l););return _?zs(l,E?0:P,E?P+1:T):zs(l,E?P+1:0,E?T:P)}function Xa(l,d){var _=l;return _ instanceof jt&&(_=_.value()),Kt(d,function(E,T){return T.func.apply(T.thisArg,wr([E],T.args))},_)}function Zn(l,d,_){var E=l.length;if(E<2)return E?Lo(l[0]):[];for(var T=-1,P=ee(E);++T<E;)for(var B=l[T],K=-1;++K<E;)K!=T&&(P[T]=Oi(P[T]||B,l[K],d,_));return Lo(Nr(P,1),d,_)}function Ja(l,d,_){for(var E=-1,T=l.length,P=d.length,B={};++E<T;)_(B,l[E],E<P?d[E]:O);return B}function qf(l){return Lr(l)?l:[]}function zd(l){return"function"==typeof l?l:Li}function ec(l,d){return Vt(l)?l:yg(l,d)?[l]:lp(An(l))}var dg=$t;function ua(l,d,_){var E=l.length;return _=_===O?E:_,!d&&_>=E?l:zs(l,d,_)}var vl=ps||function(l){return rr.clearTimeout(l)};function da(l,d){if(d)return l.slice();var _=l.length,E=Ly?Ly(_):new l.constructor(_);return l.copy(E),E}function Kf(l){var d=new l.constructor(l.byteLength);return new zt(d).set(new zt(l)),d}function bl(l,d){var _=d?Kf(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.length)}function bu(l,d){if(l!==d){var _=l!==O,E=null===l,T=l==l,P=Ws(l),B=d!==O,K=null===d,J=d==d,De=Ws(d);if(!K&&!De&&!P&&l>d||P&&B&&J&&!K&&!De||E&&B&&J||!_&&J||!T)return 1;if(!E&&!P&&!De&&l<d||De&&_&&T&&!E&&!P||K&&_&&T||!B&&T||!J)return-1}return 0}function qd(l,d,_,E){for(var T=-1,P=l.length,B=_.length,K=-1,J=d.length,De=ui(P-B,0),Se=ee(J+De),Oe=!E;++K<J;)Se[K]=d[K];for(;++T<B;)(Oe||T<P)&&(Se[_[T]]=l[T]);for(;De--;)Se[K++]=l[T++];return Se}function Lc(l,d,_,E){for(var T=-1,P=l.length,B=-1,K=_.length,J=-1,De=d.length,Se=ui(P-K,0),Oe=ee(Se+De),He=!E;++T<Se;)Oe[T]=l[T];for(var st=T;++J<De;)Oe[st+J]=d[J];for(;++B<K;)(He||T<P)&&(Oe[st+_[B]]=l[T++]);return Oe}function ai(l,d){var _=-1,E=l.length;for(d||(d=ee(E));++_<E;)d[_]=l[_];return d}function co(l,d,_,E){var T=!_;_||(_={});for(var P=-1,B=d.length;++P<B;){var K=d[P],J=E?E(_[K],l[K],K,_,l):O;J===O&&(J=l[K]),T?sa(_,K,J):du(_,K,J)}return _}function pg(l,d){return function(_,E){var T=Vt(_)?Jl:Wy,P=d?d():{};return T(_,l,_t(E,2),P)}}function tc(l){return $t(function(d,_){var E=-1,T=_.length,P=T>1?_[T-1]:O,B=T>2?_[2]:O;for(P=l.length>3&&"function"==typeof P?(T--,P):O,B&&gs(_[0],_[1],B)&&(P=T<3?O:P,T=1),d=vn(d);++E<T;){var K=_[E];K&&l(d,K,E,P)}return d})}function Yf(l,d){return function(_,E){if(null==_)return _;if(!ts(_))return l(_,E);for(var T=_.length,P=d?T:-1,B=vn(_);(d?P--:++P<T)&&!1!==E(B[P],P,B););return _}}function Kd(l){return function(d,_,E){for(var T=-1,P=vn(d),B=E(d),K=B.length;K--;){var J=B[l?K:++T];if(!1===_(P[J],J,P))break}return d}}function Eu(l){return function(d){var _=Zr(d=An(d))?Nn(d):O,E=_?_[0]:d.charAt(0),T=_?ua(_,1).join(""):d.slice(1);return E[l]()+T}}function Vo(l){return function(d){return Kt(Yg(fo(d).replace(o0,"")),l,"")}}function wu(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var _=Dn(l.prototype),E=l.apply(_,d);return Dr(E)?E:_}}function Qd(l){return function(d,_,E){var T=vn(d);if(!ts(d)){var P=_t(_,3);d=Ai(d),_=function(K){return P(T[K],K,T)}}var B=l(d,_,E);return B>-1?T[P?d[B]:B]:O}}function Cu(l){return ha(function(d){var _=d.length,E=_,T=mr.prototype.thru;for(l&&d.reverse();E--;){var P=d[E];if("function"!=typeof P)throw new Ii(fn);if(T&&!B&&"wrapper"==th(P))var B=new mr([],!0)}for(E=B?E:_;++E<_;){var K=th(P=d[E]),J="wrapper"==K?fa(P):O;B=J&&pa(J[0])&&424==J[1]&&!J[4].length&&1==J[9]?B[th(J[0])].apply(B,J[3]):1==P.length&&pa(P)?B[K]():B.thru(P)}return function(){var De=arguments,Se=De[0];if(B&&1==De.length&&Vt(Se))return B.plant(Se).value();for(var Oe=0,He=_?d[Oe].apply(this,De):Se;++Oe<_;)He=d[Oe].call(this,He);return He}})}function Yd(l,d,_,E,T,P,B,K,J,De){var Se=128&d,Oe=1&d,He=2&d,st=24&d,Tt=512&d,Zt=He?O:wu(l);return function Dt(){for(var nn=arguments.length,Xe=ee(nn),Gs=nn;Gs--;)Xe[Gs]=arguments[Gs];if(st)var Rs=ei(Dt),zo=function vf(Q,Z){for(var ee=Q.length,Ve=0;ee--;)Q[ee]===Z&&++Ve;return Ve}(Xe,Rs);if(E&&(Xe=qd(Xe,E,T,st)),P&&(Xe=Lc(Xe,P,B,st)),nn-=zo,st&&nn<De){var nt=So(Xe,Rs);return Jf(l,d,Yd,Dt.placeholder,_,Xe,nt,K,J,De-nn)}var ya=Oe?_:this,va=He?ya[l]:l;return nn=Xe.length,K?Xe=function op(l,d){for(var _=l.length,E=Yi(d.length,_),T=ai(l);E--;){var P=d[E];l[E]=ic(P,_)?T[P]:O}return l}(Xe,K):Tt&&nn>1&&Xe.reverse(),Se&&J<nn&&(Xe.length=J),this&&this!==rr&&this instanceof Dt&&(va=Zt||wu(va)),va.apply(ya,Xe)}}function Zf(l,d){return function(_,E){return function wt(l,d,_,E){return Ir(l,function(T,P,B){d(E,_(T),P,B)}),E}(_,l,d(E),{})}}function Zd(l,d){return function(_,E){var T;if(_===O&&E===O)return d;if(_!==O&&(T=_),E!==O){if(T===O)return E;"string"==typeof _||"string"==typeof E?(_=ms(_),E=ms(E)):(_=Wf(_),E=Wf(E)),T=l(_,E)}return T}}function Xf(l){return ha(function(d){return d=Ft(d,Gi(_t())),$t(function(_){var E=this;return l(d,function(T){return ki(T,E,_)})})})}function ci(l,d){var _=(d=d===O?" ":ms(d)).length;if(_<2)return _?Ud(d,l):d;var E=Ud(d,ra(l/ir(d)));return Zr(d)?ua(Nn(E),0,l).join(""):E.slice(0,l)}function Au(l){return function(d,_,E){return E&&"number"!=typeof E&&gs(d,_,E)&&(_=E=O),d=lc(d),_===O?(_=d,d=0):_=lc(_),function Fo(l,d,_,E){for(var T=-1,P=ui(ra((d-l)/(_||1)),0),B=ee(P);P--;)B[E?P:++T]=l,l+=_;return B}(d,_,E=E===O?d<_?1:-1:lc(E),l)}}function nc(l){return function(d,_){return"string"==typeof d&&"string"==typeof _||(d=_a(d),_=_a(_)),l(d,_)}}function Jf(l,d,_,E,T,P,B,K,J,De){var Se=8&d;d|=Se?32:64,4&(d&=~(Se?64:32))||(d&=-4);var Zt=[l,d,T,Se?P:O,Se?B:O,Se?O:P,Se?O:B,K,J,De],Dt=_.apply(O,Zt);return pa(l)&&ap(Dt,Zt),Dt.placeholder=E,Pu(Dt,l,d)}function rc(l){var d=an[l];return function(_,E){if(_=_a(_),(E=null==E?0:Yi(Wt(E),292))&&zm(_)){var T=(An(_)+"e").split("e");return+((T=(An(d(T[0]+"e"+(+T[1]+E)))+"e").split("e"))[0]+"e"+(+T[1]-E))}return d(_)}}var ep=au&&1/su(new au([,-0]))[1]==It?function(l){return new au(l)}:Lv;function mg(l){return function(d){var _=Fr(d);return _==Mr?iu(d):_==bi?function Ye(Q){var Z=-1,ee=Array(Q.size);return Q.forEach(function(Ve){ee[++Z]=[Ve,Ve]}),ee}(d):function Fy(Q,Z){return Ft(Z,function(ee){return[ee,Q[ee]]})}(d,l(d))}}function $s(l,d,_,E,T,P,B,K){var J=2&d;if(!J&&"function"!=typeof l)throw new Ii(fn);var De=E?E.length:0;if(De||(d&=-97,E=T=O),B=B===O?B:ui(Wt(B),0),K=K===O?K:Wt(K),De-=T?T.length:0,64&d){var Se=E,Oe=T;E=T=O}var He=J?O:fa(l),st=[l,d,_,E,T,Se,Oe,P,B,K];if(He&&function ar(l,d){var _=l[1],E=d[1],T=_|E;if(!(T<131)&&!(128==E&&8==_||128==E&&256==_&&l[7].length<=d[8]||384==E&&d[7].length<=d[8]&&8==_))return l;1&E&&(l[2]=d[2],T|=1&_?0:4);var K=d[3];if(K){var J=l[3];l[3]=J?qd(J,K,d[4]):K,l[4]=J?So(l[3],Te):d[4]}(K=d[5])&&(l[5]=(J=l[5])?Lc(J,K,d[6]):K,l[6]=J?So(l[5],Te):d[6]),(K=d[7])&&(l[7]=K),128&E&&(l[8]=null==l[8]?d[8]:Yi(l[8],d[8])),null==l[9]&&(l[9]=d[9]),l[0]=d[0],l[1]=T}(st,He),l=st[0],d=st[1],_=st[2],E=st[3],T=st[4],!(K=st[9]=st[9]===O?J?0:l.length:ui(st[9]-De,0))&&24&d&&(d&=-25),d&&1!=d)Tt=8==d||16==d?function Iu(l,d,_){var E=wu(l);return function T(){for(var P=arguments.length,B=ee(P),K=P,J=ei(T);K--;)B[K]=arguments[K];var De=P<3&&B[0]!==J&&B[P-1]!==J?[]:So(B,J);return(P-=De.length)<_?Jf(l,d,Yd,T.placeholder,O,B,De,O,O,_-P):ki(this&&this!==rr&&this instanceof T?E:l,this,B)}}(l,d,K):32!=d&&33!=d||T.length?Yd.apply(O,st):function Yy(l,d,_,E){var T=1&d,P=wu(l);return function B(){for(var K=-1,J=arguments.length,De=-1,Se=E.length,Oe=ee(Se+J),He=this&&this!==rr&&this instanceof B?P:l;++De<Se;)Oe[De]=E[De];for(;J--;)Oe[De++]=arguments[++K];return ki(He,T?_:this,Oe)}}(l,d,_,E);else var Tt=function Qy(l,d,_){var E=1&d,T=wu(l);return function P(){return(this&&this!==rr&&this instanceof P?T:l).apply(E?_:this,arguments)}}(l,d,_);return Pu((He?jd:ap)(Tt,st),l,d)}function tp(l,d,_,E){return l===O||Uo(l,Rc[_])&&!dn.call(E,_)?d:l}function np(l,d,_,E,T,P){return Dr(l)&&Dr(d)&&(P.set(d,l),Ss(l,d,O,np,P),P.delete(d)),l}function Xd(l){return Cp(l)?O:l}function gg(l,d,_,E,T,P){var B=1&_,K=l.length,J=d.length;if(K!=J&&!(B&&J>K))return!1;var De=P.get(l),Se=P.get(d);if(De&&Se)return De==d&&Se==l;var Oe=-1,He=!0,st=2&_?new ia:O;for(P.set(l,d),P.set(d,l);++Oe<K;){var Tt=l[Oe],Zt=d[Oe];if(E)var Dt=B?E(Zt,Tt,Oe,d,l,P):E(Tt,Zt,Oe,l,d,P);if(Dt!==O){if(Dt)continue;He=!1;break}if(st){if(!cl(d,function(nn,Xe){if(!za(st,Xe)&&(Tt===nn||T(Tt,nn,_,E,P)))return st.push(Xe)})){He=!1;break}}else if(Tt!==Zt&&!T(Tt,Zt,_,E,P)){He=!1;break}}return P.delete(l),P.delete(d),He}function ha(l){return Ar(Ru(l,O,f),l+"")}function eh(l){return No(l,Ai,El)}function Tu(l){return No(l,ho,Uc)}var fa=xf?function(l){return xf.get(l)}:Lv;function th(l){for(var d=l.name+"",_=Mc[d],E=dn.call(Mc,d)?_.length:0;E--;){var T=_[E],P=T.func;if(null==P||P==l)return T.name}return d}function ei(l){return(dn.call(x,"placeholder")?x:l).placeholder}function _t(){var l=x.iteratee||Nv;return l=l===Nv?xe:l,arguments.length?l(arguments[0],arguments[1]):l}function Cr(l,d){var _=l.__data__;return function p0(l){var d=typeof l;return"string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==l:null===l}(d)?_["string"==typeof d?"string":"hash"]:_.map}function Du(l){for(var d=Ai(l),_=d.length;_--;){var E=d[_],T=l[E];d[_]=[E,T,vg(T)]}return d}function Bc(l,d){var _=function wf(Q,Z){return null==Q?O:Q[Z]}(l,d);return ig(_)?_:O}var El=Qi?function(l){return null==l?[]:(l=vn(l),js(Qi(l),function(d){return so.call(l,d)}))}:Uv,Uc=Qi?function(l){for(var d=[];l;)wr(d,El(l)),l=Pc(l);return d}:Uv,Fr=Ni;function nh(l,d,_){for(var E=-1,T=(d=ec(d,l)).length,P=!1;++E<T;){var B=lo(d[E]);if(!(P=null!=l&&_(l,B)))break;l=l[B]}return P||++E!=T?P:!!(T=null==l?0:l.length)&&Ip(T)&&ic(B,T)&&(Vt(l)||Fu(l))}function Zy(l){return"function"!=typeof l.constructor||or(l)?{}:Dn(Pc(l))}function Xy(l){return Vt(l)||Fu(l)||!!(qa&&l&&l[qa])}function ic(l,d){var _=typeof l;return!!(d=d??zi)&&("number"==_||"symbol"!=_&&ff.test(l))&&l>-1&&l%1==0&&l<d}function gs(l,d,_){if(!Dr(_))return!1;var E=typeof d;return!!("number"==E?ts(_)&&ic(d,_.length):"string"==E&&d in _)&&Uo(_[d],l)}function yg(l,d){if(Vt(l))return!1;var _=typeof l;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=l&&!Ws(l))||V.test(l)||!Zo.test(l)||null!=d&&l in vn(d)}function pa(l){var d=th(l),_=x[d];if("function"!=typeof _||!(d in jt.prototype))return!1;if(l===_)return!0;var E=fa(_);return!!E&&l===E[0]}(Sd&&Fr(new Sd(new ArrayBuffer(1)))!=Yn||xd&&Fr(new xd)!=Mr||$m&&Fr($m.resolve())!=vi||au&&Fr(new au)!=bi||Sf&&Fr(new Sf)!=cs)&&(Fr=function(l){var d=Ni(l),_=d==Vn?l.constructor:O,E=_?ti(_):"";if(E)switch(E){case Pd:return Yn;case Wm:return Mr;case Rf:return vi;case Vy:return bi;case u0:return cs}return d});var ip=ro?ga:n_;function or(l){var d=l&&l.constructor;return l===("function"==typeof d&&d.prototype||Rc)}function vg(l){return l==l&&!Dr(l)}function sc(l,d){return function(_){return null!=_&&_[l]===d&&(d!==O||l in vn(_))}}function Ru(l,d,_){return d=ui(d===O?l.length-1:d,0),function(){for(var E=arguments,T=-1,P=ui(E.length-d,0),B=ee(P);++T<P;)B[T]=E[d+T];T=-1;for(var K=ee(d+1);++T<d;)K[T]=E[T];return K[d]=_(B),ki(l,this,K)}}function oc(l,d){return d.length<2?l:ca(l,zs(d,0,-1))}function bg(l,d){if(("constructor"!==d||"function"!=typeof l[d])&&"__proto__"!=d)return l[d]}var ap=Hc(jd),rh=Hm||function(l,d){return rr.setTimeout(l,d)},Ar=Hc(cg);function Pu(l,d,_){var E=d+"";return Ar(l,function f0(l,d){var _=d.length;if(!_)return l;var E=_-1;return d[E]=(_>1?"& ":"")+d[E],d=d.join(_>2?", ":" "),l.replace(Ke,"{\n/* [wrapped with "+d+"] */\n")}(E,function up(l,d){return Er(Ie,function(_){var E="_."+_[0];d&_[1]&&!no(l,E)&&l.push(E)}),l.sort()}(function _g(l){var d=l.match(Bn);return d?d[1].split(Yr):[]}(E),_)))}function Hc(l){var d=0,_=0;return function(){var E=MA(),T=16-(E-_);if(_=E,T>0){if(++d>=800)return arguments[0]}else d=0;return l.apply(O,arguments)}}function cp(l,d){var _=-1,E=l.length,T=E-1;for(d=d===O?E:d;++_<d;){var P=la(_,T),B=l[P];l[P]=l[_],l[_]=B}return l.length=d,l}var lp=function Jy(l){var d=Ng(l,function(E){return 500===_.size&&_.clear(),E}),_=d.cache;return d}(function(l){var d=[];return 46===l.charCodeAt(0)&&d.push(""),l.replace(U,function(_,E,T,P){d.push(T?P.replace(gt,"$1"):E||_)}),d});function lo(l){if("string"==typeof l||Ws(l))return l;var d=l+"";return"0"==d&&1/l==-It?"-0":d}function ti(l){if(null!=l){try{return sr.call(l)}catch{}try{return l+""}catch{}}return""}function ih(l){if(l instanceof jt)return l.clone();var d=new mr(l.__wrapped__,l.__chain__);return d.__actions__=ai(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}var Mu=$t(function(l,d){return Lr(l)?Oi(l,Nr(d,1,Lr,!0)):[]}),Eg=$t(function(l,d){var _=Tr(d);return Lr(_)&&(_=O),Lr(l)?Oi(l,Nr(d,1,Lr,!0),_t(_,2)):[]}),ku=$t(function(l,d){var _=Tr(d);return Lr(_)&&(_=O),Lr(l)?Oi(l,Nr(d,1,Lr,!0),O,_):[]});function g(l,d,_){var E=null==l?0:l.length;if(!E)return-1;var T=null==_?0:Wt(_);return T<0&&(T=ui(E+T,0)),Ua(l,_t(d,3),T)}function u(l,d,_){var E=null==l?0:l.length;if(!E)return-1;var T=E-1;return _!==O&&(T=Wt(_),T=_<0?ui(E+T,0):Yi(T,E-1)),Ua(l,_t(d,3),T,!0)}function f(l){return null!=l&&l.length?Nr(l,1):[]}function j(l){return l&&l.length?l[0]:O}var je=$t(function(l){var d=Ft(l,qf);return d.length&&d[0]===l[0]?Uf(d):[]}),et=$t(function(l){var d=Tr(l),_=Ft(l,qf);return d===Tr(_)?d=O:_.pop(),_.length&&_[0]===l[0]?Uf(_,_t(d,2)):[]}),Ze=$t(function(l){var d=Tr(l),_=Ft(l,qf);return(d="function"==typeof d?d:O)&&_.pop(),_.length&&_[0]===l[0]?Uf(_,O,d):[]});function Tr(l){var d=null==l?0:l.length;return d?l[d-1]:O}var pp=$t(oh);function oh(l,d){return l&&l.length&&d&&d.length?xs(l,d):l}var rv=ha(function(l,d){var _=null==l?0:l.length,E=Lf(l,d);return zf(l,Ft(d,function(T){return ic(T,_)?+T:T}).sort(bu)),E});function Ou(l){return null==l?l:fl.call(l)}var y0=$t(function(l){return Lo(Nr(l,1,Lr,!0))}),lh=$t(function(l){var d=Tr(l);return Lr(d)&&(d=O),Lo(Nr(l,1,Lr,!0),_t(d,2))}),v0=$t(function(l){var d=Tr(l);return d="function"==typeof d?d:O,Lo(Nr(l,1,Lr,!0),O,d)});function ac(l){if(!l||!l.length)return[];var d=0;return l=js(l,function(_){if(Lr(_))return d=ui(_.length,d),!0}),Ed(d,function(_){return Ft(l,Ha(_))})}function E0(l,d){if(!l||!l.length)return[];var _=ac(l);return null==d?_:Ft(_,function(E){return ki(d,O,E)})}var NA=$t(function(l,d){return Lr(l)?Oi(l,d):[]}),FA=$t(function(l){return Zn(js(l,Lr))}),w0=$t(function(l){var d=Tr(l);return Lr(d)&&(d=O),Zn(js(l,Lr),_t(d,2))}),iv=$t(function(l){var d=Tr(l);return d="function"==typeof d?d:O,Zn(js(l,Lr),O,d)}),LA=$t(ac),I0=$t(function(l){var d=l.length,_=d>1?l[d-1]:O;return _="function"==typeof _?(l.pop(),_):O,E0(l,_)});function C0(l){var d=x(l);return d.__chain__=!0,d}function es(l,d){return d(l)}var sv=ha(function(l){var d=l.length,_=d?l[0]:0,E=this.__wrapped__,T=function(P){return Lf(P,l)};return!(d>1||this.__actions__.length)&&E instanceof jt&&ic(_)?((E=E.slice(_,+_+(d?1:0))).__actions__.push({func:es,args:[T],thisArg:O}),new mr(E,this.__chain__).thru(function(P){return d&&!P.length&&P.push(O),P})):this.thru(T)}),S0=pg(function(l,d,_){dn.call(l,_)?++l[_]:sa(l,_,1)}),zA=Qd(g),R0=Qd(u);function xg(l,d){return(Vt(l)?Er:oa)(l,_t(d,3))}function P0(l,d){return(Vt(l)?Ny:hu)(l,_t(d,3))}var _p=pg(function(l,d,_){dn.call(l,_)?l[_].push(d):sa(l,_,[d])}),qA=$t(function(l,d,_){var E=-1,T="function"==typeof d,P=ts(l)?ee(l.length):[];return oa(l,function(B){P[++E]=T?ki(d,B,_):Ya(B,d,_)}),P}),M0=pg(function(l,d,_){sa(l,_,d)});function yp(l,d){return(Vt(l)?Ft:di)(l,_t(d,3))}var uh=pg(function(l,d,_){l[_?0:1].push(d)},function(){return[[],[]]}),XA=$t(function(l,d){if(null==l)return[];var _=d.length;return _>1&&gs(l,d[0],d[1])?d=[]:_>2&&gs(d[0],d[1],d[2])&&(d=[d[0]]),Bd(l,Nr(d,1),[])}),Mg=Ki||function(){return rr.Date.now()};function vp(l,d,_){return d=_?O:d,$s(l,128,O,O,O,O,d=l&&null==d?l.length:d)}function kg(l,d){var _;if("function"!=typeof d)throw new Ii(fn);return l=Wt(l),function(){return--l>0&&(_=d.apply(this,arguments)),l<=1&&(d=O),_}}var bp=$t(function(l,d,_){var E=1;if(_.length){var T=So(_,ei(bp));E|=32}return $s(l,E,d,_,T)}),F0=$t(function(l,d,_){var E=3;if(_.length){var T=So(_,ei(F0));E|=32}return $s(d,E,l,_,T)});function lv(l,d,_){var E,T,P,B,K,J,De=0,Se=!1,Oe=!1,He=!0;if("function"!=typeof l)throw new Ii(fn);function st(nt){var ya=E,va=T;return E=T=O,De=nt,B=l.apply(va,ya)}function Dt(nt){var ya=nt-J;return J===O||ya>=d||ya<0||Oe&&nt-De>=P}function nn(){var nt=Mg();if(Dt(nt))return Xe(nt);K=rh(nn,function Zt(nt){var fw=d-(nt-J);return Oe?Yi(fw,P-(nt-De)):fw}(nt))}function Xe(nt){return K=O,He&&E?st(nt):(E=T=O,B)}function zo(){var nt=Mg(),ya=Dt(nt);if(E=arguments,T=this,J=nt,ya){if(K===O)return function Tt(nt){return De=nt,K=rh(nn,d),Se?st(nt):B}(J);if(Oe)return vl(K),K=rh(nn,d),st(J)}return K===O&&(K=rh(nn,d)),B}return d=_a(d)||0,Dr(_)&&(Se=!!_.leading,P=(Oe="maxWait"in _)?ui(_a(_.maxWait)||0,d):P,He="trailing"in _?!!_.trailing:He),zo.cancel=function Gs(){K!==O&&vl(K),De=0,E=J=T=K=O},zo.flush=function Rs(){return K===O?B:Xe(Mg())},zo}var Nu=$t(function(l,d){return ng(l,1,d)}),V0=$t(function(l,d,_){return ng(l,_a(d)||0,_)});function Ng(l,d){if("function"!=typeof l||null!=d&&"function"!=typeof d)throw new Ii(fn);var _=function(){var E=arguments,T=d?d.apply(this,E):E[0],P=_.cache;if(P.has(T))return P.get(T);var B=l.apply(this,E);return _.cache=P.set(T,B)||P,B};return _.cache=new(Ng.Cache||ko),_}function uv(l){if("function"!=typeof l)throw new Ii(fn);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}Ng.Cache=ko;var JA=dg(function(l,d){var _=(d=1==d.length&&Vt(d[0])?Ft(d[0],Gi(_t())):Ft(Nr(d,1),Gi(_t()))).length;return $t(function(E){for(var T=-1,P=Yi(E.length,_);++T<P;)E[T]=d[T].call(this,E[T]);return ki(l,this,E)})}),Lg=$t(function(l,d){var _=So(d,ei(Lg));return $s(l,32,O,d,_)}),dv=$t(function(l,d){var _=So(d,ei(dv));return $s(l,64,O,d,_)}),U0=ha(function(l,d){return $s(l,256,O,O,O,d)});function Uo(l,d){return l===d||l!=l&&d!=d}var tT=nc(Bf),nT=nc(function(l,d){return l>=d}),Fu=qy(function(){return arguments}())?qy:function(l){return qn(l)&&dn.call(l,"callee")&&!so.call(l,"callee")},Vt=ee.isArray,$0=md?Gi(md):function fu(l){return qn(l)&&Ni(l)==Ri};function ts(l){return null!=l&&Ip(l.length)&&!ga(l)}function Lr(l){return qn(l)&&ts(l)}var Il=Tf||n_,rT=ea?Gi(ea):function Ky(l){return qn(l)&&Ni(l)==Mt};function Cl(l){if(!qn(l))return!1;var d=Ni(l);return d==pt||"[object DOMException]"==d||"string"==typeof l.message&&"string"==typeof l.name&&!Cp(l)}function ga(l){if(!Dr(l))return!1;var d=Ni(l);return d==ln||d==ur||"[object AsyncFunction]"==d||"[object Proxy]"==d}function gv(l){return"number"==typeof l&&l==Wt(l)}function Ip(l){return"number"==typeof l&&l>-1&&l%1==0&&l<=zi}function Dr(l){var d=typeof l;return null!=l&&("object"==d||"function"==d)}function qn(l){return null!=l&&"object"==typeof l}var W0=gd?Gi(gd):function Za(l){return qn(l)&&Fr(l)==Mr};function G0(l){return"number"==typeof l||qn(l)&&Ni(l)==en}function Cp(l){if(!qn(l)||Ni(l)!=Vn)return!1;var d=Pc(l);if(null===d)return!0;var _=dn.call(d,"constructor")&&d.constructor;return"function"==typeof _&&_ instanceof _&&sr.call(_)==Dd}var _v=he?Gi(he):function jf(l){return qn(l)&&Ni(l)==tr},q0=Xl?Gi(Xl):function sg(l){return qn(l)&&Fr(l)==bi};function jg(l){return"string"==typeof l||!Vt(l)&&qn(l)&&Ni(l)==Ls}function Ws(l){return"symbol"==typeof l||qn(l)&&Ni(l)==Ic}var hh=Ge?Gi(Ge):function og(l){return qn(l)&&Ip(l.length)&&!!Un[Ni(l)]},Hg=nc(Jr),Wc=nc(function(l,d){return l<=d});function fh(l){if(!l)return[];if(ts(l))return jg(l)?Nn(l):ai(l);if(na&&l[na])return function Um(Q){for(var Z,ee=[];!(Z=Q.next()).done;)ee.push(Z.value);return ee}(l[na]());var d=Fr(l);return(d==Mr?iu:d==bi?su:Ho)(l)}function lc(l){return l?(l=_a(l))===It||l===-It?17976931348623157e292*(l<0?-1:1):l==l?l:0:0===l?l:0}function Wt(l){var d=lc(l),_=d%1;return d==d?_?d-_:d:0}function yv(l){return l?Ka(Wt(l),0,yi):0}function _a(l){if("number"==typeof l)return l;if(Ws(l))return NaN;if(Dr(l)){var d="function"==typeof l.valueOf?l.valueOf():l;l=Dr(d)?d+"":d}if("string"!=typeof l)return 0===l?l:+l;l=hs(l);var _=bt.test(l);return _||sl.test(l)?Fm(l.slice(2),_?2:8):wn.test(l)?NaN:+l}function pT(l){return co(l,ho(l))}function An(l){return null==l?"":ms(l)}var vv=tc(function(l,d){if(or(d)||ts(d))co(d,Ai(d),l);else for(var _ in d)dn.call(d,_)&&du(l,_,d[_])}),mT=tc(function(l,d){co(d,ho(d),l)}),bv=tc(function(l,d,_,E){co(d,ho(d),l,E)}),K0=tc(function(l,d,_,E){co(d,Ai(d),l,E)}),gT=ha(Lf),yT=$t(function(l,d){l=vn(l);var _=-1,E=d.length,T=E>2?d[2]:O;for(T&&gs(d[0],d[1],T)&&(E=1);++_<E;)for(var P=d[_],B=ho(P),K=-1,J=B.length;++K<J;){var De=B[K],Se=l[De];(Se===O||Uo(Se,Rc[De])&&!dn.call(l,De))&&(l[De]=P[De])}return l}),vT=$t(function(l){return l.push(O,np),ki(Iv,O,l)});function Al(l,d,_){var E=null==l?O:ca(l,d);return E===O?_:E}function wv(l,d){return null!=l&&nh(l,d,rg)}var wT=Zf(function(l,d,_){null!=d&&"function"!=typeof d.toString&&(d=$a.call(d)),l[d]=_},xp(Li)),IT=Zf(function(l,d,_){null!=d&&"function"!=typeof d.toString&&(d=$a.call(d)),dn.call(l,d)?l[d].push(_):l[d]=[_]},_t),CT=$t(Ya);function Ai(l){return ts(l)?uu(l):cn(l)}function ho(l){return ts(l)?uu(l,!0):function Xr(l){if(!Dr(l))return function Bo(l){var d=[];if(null!=l)for(var _ in vn(l))d.push(_);return d}(l);var d=or(l),_=[];for(var E in l)"constructor"==E&&(d||!dn.call(l,E))||_.push(E);return _}(l)}var Tp=tc(function(l,d,_){Ss(l,d,_)}),Iv=tc(function(l,d,_,E){Ss(l,d,_,E)}),X0=ha(function(l,d){var _={};if(null==l)return _;var E=!1;d=Ft(d,function(P){return P=ec(P,l),E||(E=P.length>1),P}),co(l,Tu(l),_),E&&(_=Ji(_,7,Xd));for(var T=d.length;T--;)Gf(_,d[T]);return _}),J0=ha(function(l,d){return null==l?{}:function Hf(l,d){return yu(l,d,function(_,E){return wv(l,E)})}(l,d)});function ew(l,d){if(null==l)return{};var _=Ft(Tu(l),function(E){return[E]});return d=_t(d),yu(l,_,function(E,T){return d(E,T[0])})}var AT=mg(Ai),Gg=mg(ho);function Ho(l){return null==l?[]:ul(l,Ai(l))}var Dv=Vo(function(l,d,_){return d=d.toLowerCase(),l+(_?Dp(d):d)});function Dp(l){return Sp(An(l).toLowerCase())}function fo(l){return(l=An(l))&&l.replace(Xo,bf).replace(Mn,"")}var RT=Vo(function(l,d,_){return l+(_?"-":"")+d.toLowerCase()}),sw=Vo(function(l,d,_){return l+(_?" ":"")+d.toLowerCase()}),mh=Eu("toLowerCase"),ow=Vo(function(l,d,_){return l+(_?"_":"")+d.toLowerCase()}),L1=Vo(function(l,d,_){return l+(_?" ":"")+Sp(d)}),_h=Vo(function(l,d,_){return l+(_?" ":"")+d.toUpperCase()}),Sp=Eu("toUpperCase");function Yg(l,d,_){return l=An(l),(d=_?O:d)===O?function If(Q){return Yl.test(Q)}(l)?function Ad(Q){return Q.match(km)||[]}(l):function us(Q){return Q.match(mt)||[]}(l):l.match(d)||[]}var yh=$t(function(l,d){try{return ki(l,O,d)}catch(_){return Cl(_)?_:new ct(_)}}),Zg=ha(function(l,d){return Er(d,function(_){_=lo(_),sa(l,_,bp(l[_],l))}),l});function xp(l){return function(){return l}}var U1=Cu(),Ov=Cu(!0);function Li(l){return l}function Nv(l){return xe("function"==typeof l?l:Ji(l,1))}var VT=$t(function(l,d){return function(_){return Ya(_,l,d)}}),Fv=$t(function(l,d){return function(_){return Ya(l,_,d)}});function Jg(l,d,_){var E=Ai(d),T=Od(d,E);null==_&&(!Dr(d)||!T.length&&E.length)&&(_=d,d=l,l=this,T=Od(d,Ai(d)));var P=!(Dr(_)&&"chain"in _&&!_.chain),B=ga(l);return Er(T,function(K){var J=d[K];l[K]=J,B&&(l.prototype[K]=function(){var De=this.__chain__;if(P||De){var Se=l(this.__wrapped__);return(Se.__actions__=ai(this.__actions__)).push({func:J,args:arguments,thisArg:l}),Se.__chain__=De,Se}return J.apply(l,wr([this.value()],arguments))})}),l}function Lv(){}var UT=Xf(Ft),e_=Xf(Vm),Vv=Xf(cl);function cw(l){return yg(l)?Ha(lo(l)):function Fi(l){return function(d){return ca(d,l)}}(l)}var Bv=Au(),t_=Au(!0);function Uv(){return[]}function n_(){return!1}var bh=Zd(function(l,d){return l+d},0),Vr=rc("ceil"),$T=Zd(function(l,d){return l/d},1),Pp=rc("floor"),z1=Zd(function(l,d){return l*d},1),Hv=rc("round"),hw=Zd(function(l,d){return l-d},0);return x.after=function N0(l,d){if("function"!=typeof d)throw new Ii(fn);return l=Wt(l),function(){if(--l<1)return d.apply(this,arguments)}},x.ary=vp,x.assign=vv,x.assignIn=mT,x.assignInWith=bv,x.assignWith=K0,x.at=gT,x.before=kg,x.bind=bp,x.bindAll=Zg,x.bindKey=F0,x.castArray=function fv(){if(!arguments.length)return[];var l=arguments[0];return Vt(l)?l:[l]},x.chain=C0,x.chunk=function ev(l,d,_){d=(_?gs(l,d,_):d===O)?1:ui(Wt(d),0);var E=null==l?0:l.length;if(!E||d<1)return[];for(var T=0,P=0,B=ee(ra(E/d));T<E;)B[P++]=zs(l,T,T+=d);return B},x.compact=function ma(l){for(var d=-1,_=null==l?0:l.length,E=0,T=[];++d<_;){var P=l[d];P&&(T[E++]=P)}return T},x.concat=function zc(){var l=arguments.length;if(!l)return[];for(var d=ee(l-1),_=arguments[0],E=l;E--;)d[E-1]=arguments[E];return wr(Vt(_)?ai(_):[_],Nr(d,1))},x.cond=function vh(l){var d=null==l?0:l.length,_=_t();return l=d?Ft(l,function(E){if("function"!=typeof E[1])throw new Ii(fn);return[_(E[0]),E[1]]}):[],$t(function(E){for(var T=-1;++T<d;){var P=l[T];if(ki(P[0],this,E))return ki(P[1],this,E)}})},x.conforms=function kv(l){return function Gy(l){var d=Ai(l);return function(_){return gl(_,l,d)}}(Ji(l,1))},x.constant=xp,x.countBy=S0,x.create=function _T(l,d){var _=Dn(l);return null==d?_:Xi(_,d)},x.curry=function L0(l,d,_){var E=$s(l,8,O,O,O,O,O,d=_?O:d);return E.placeholder=L0.placeholder,E},x.curryRight=function Og(l,d,_){var E=$s(l,16,O,O,O,O,O,d=_?O:d);return E.placeholder=Og.placeholder,E},x.debounce=lv,x.defaults=yT,x.defaultsDeep=vT,x.defer=Nu,x.delay=V0,x.difference=Mu,x.differenceBy=Eg,x.differenceWith=ku,x.drop=function dp(l,d,_){var E=null==l?0:l.length;return E?zs(l,(d=_||d===O?1:Wt(d))<0?0:d,E):[]},x.dropRight=function sh(l,d,_){var E=null==l?0:l.length;return E?zs(l,0,(d=E-(d=_||d===O?1:Wt(d)))<0?0:d):[]},x.dropRightWhile=function tv(l,d){return l&&l.length?hi(l,_t(d,3),!0,!0):[]},x.dropWhile=function wg(l,d){return l&&l.length?hi(l,_t(d,3),!0):[]},x.fill=function hp(l,d,_,E){var T=null==l?0:l.length;return T?(_&&"number"!=typeof _&&gs(l,d,_)&&(_=0,E=T),function kd(l,d,_,E){var T=l.length;for((_=Wt(_))<0&&(_=-_>T?0:T+_),(E=E===O||E>T?T:Wt(E))<0&&(E+=T),E=_>E?0:yv(E);_<E;)l[_++]=d;return l}(l,d,_,E)):[]},x.filter=function x0(l,d){return(Vt(l)?js:Ci)(l,_t(d,3))},x.flatMap=function $A(l,d){return Nr(yp(l,d),1)},x.flatMapDeep=function WA(l,d){return Nr(yp(l,d),It)},x.flatMapDepth=function av(l,d,_){return _=_===O?1:Wt(_),Nr(yp(l,d),_)},x.flatten=f,x.flattenDeep=function y(l){return null!=l&&l.length?Nr(l,It):[]},x.flattenDepth=function I(l,d){return null!=l&&l.length?Nr(l,d=d===O?1:Wt(d)):[]},x.flip=function B0(l){return $s(l,512)},x.flow=U1,x.flowRight=Ov,x.fromPairs=function D(l){for(var d=-1,_=null==l?0:l.length,E={};++d<_;){var T=l[d];E[T[0]]=T[1]}return E},x.functions=function Z0(l){return null==l?[]:Od(l,Ai(l))},x.functionsIn=function ET(l){return null==l?[]:Od(l,ho(l))},x.groupBy=_p,x.initial=function Ce(l){return null!=l&&l.length?zs(l,0,-1):[]},x.intersection=je,x.intersectionBy=et,x.intersectionWith=Ze,x.invert=wT,x.invertBy=IT,x.invokeMap=qA,x.iteratee=Nv,x.keyBy=M0,x.keys=Ai,x.keysIn=ho,x.map=yp,x.mapKeys=function F1(l,d){var _={};return d=_t(d,3),Ir(l,function(E,T,P){sa(_,d(E,T,P),E)}),_},x.mapValues=function Ap(l,d){var _={};return d=_t(d,3),Ir(l,function(E,T,P){sa(_,T,d(E,T,P))}),_},x.matches=function aw(l){return gu(Ji(l,1))},x.matchesProperty=function LT(l,d){return _l(l,Ji(d,1))},x.memoize=Ng,x.merge=Tp,x.mergeWith=Iv,x.method=VT,x.methodOf=Fv,x.mixin=Jg,x.negate=uv,x.nthArg=function j1(l){return l=Wt(l),$t(function(d){return Vd(d,l)})},x.omit=X0,x.omitBy=function Cv(l,d){return ew(l,uv(_t(d)))},x.once=function Fg(l){return kg(2,l)},x.orderBy=function k0(l,d,_,E){return null==l?[]:(Vt(d)||(d=null==d?[]:[d]),Vt(_=E?O:_)||(_=null==_?[]:[_]),Bd(l,d,_))},x.over=UT,x.overArgs=JA,x.overEvery=e_,x.overSome=Vv,x.partial=Lg,x.partialRight=dv,x.partition=uh,x.pick=J0,x.pickBy=ew,x.property=cw,x.propertyOf=function lw(l){return function(d){return null==l?O:ca(l,d)}},x.pull=pp,x.pullAll=oh,x.pullAllBy=function nv(l,d,_){return l&&l.length&&d&&d.length?xs(l,d,_t(_,2)):l},x.pullAllWith=function ah(l,d,_){return l&&l.length&&d&&d.length?xs(l,d,O,_):l},x.pullAt=rv,x.range=Bv,x.rangeRight=t_,x.rearg=U0,x.reject=function cv(l,d){return(Vt(l)?js:Ci)(l,uv(_t(d,3)))},x.remove=function Ig(l,d){var _=[];if(!l||!l.length)return _;var E=-1,T=[],P=l.length;for(d=_t(d,3);++E<P;){var B=l[E];d(B,E,l)&&(_.push(B),T.push(E))}return zf(l,T),_},x.rest=function hv(l,d){if("function"!=typeof l)throw new Ii(fn);return $t(l,d=d===O?d:Wt(d))},x.reverse=Ou,x.sampleSize=function KA(l,d,_){return d=(_?gs(l,d,_):d===O)?1:Wt(d),(Vt(l)?tg:$f)(l,d)},x.set=function nw(l,d,_){return null==l?l:Nc(l,d,_)},x.setWith=function Wg(l,d,_,E){return E="function"==typeof E?E:O,null==l?l:Nc(l,d,_,E)},x.shuffle=function QA(l){return(Vt(l)?$y:vu)(l)},x.slice=function ch(l,d,_){var E=null==l?0:l.length;return E?(_&&"number"!=typeof _&&gs(l,d,_)?(d=0,_=E):(d=null==d?0:Wt(d),_=_===O?E:Wt(_)),zs(l,d,_)):[]},x.sortBy=XA,x.sortedUniq=function M1(l){return l&&l.length?yl(l):[]},x.sortedUniqBy=function k1(l,d){return l&&l.length?yl(l,_t(d,2)):[]},x.split=function uc(l,d,_){return _&&"number"!=typeof _&&gs(l,d,_)&&(d=_=O),(_=_===O?yi:_>>>0)?(l=An(l))&&("string"==typeof d||null!=d&&!_v(d))&&!(d=ms(d))&&Zr(l)?ua(Nn(l),0,_):l.split(d,_):[]},x.spread=function j0(l,d){if("function"!=typeof l)throw new Ii(fn);return d=null==d?0:ui(Wt(d),0),$t(function(_){var E=_[d],T=ua(_,0,d);return E&&wr(T,E),ki(l,this,T)})},x.tail=function OA(l){var d=null==l?0:l.length;return d?zs(l,1,d):[]},x.take=function Ag(l,d,_){return l&&l.length?zs(l,0,(d=_||d===O?1:Wt(d))<0?0:d):[]},x.takeRight=function Tg(l,d,_){var E=null==l?0:l.length;return E?zs(l,(d=E-(d=_||d===O?1:Wt(d)))<0?0:d,E):[]},x.takeRightWhile=function g0(l,d){return l&&l.length?hi(l,_t(d,3),!1,!0):[]},x.takeWhile=function _0(l,d){return l&&l.length?hi(l,_t(d,3)):[]},x.tap=function UA(l,d){return d(l),l},x.throttle=function Vg(l,d,_){var E=!0,T=!0;if("function"!=typeof l)throw new Ii(fn);return Dr(_)&&(E="leading"in _?!!_.leading:E,T="trailing"in _?!!_.trailing:T),lv(l,d,{leading:E,maxWait:d,trailing:T})},x.thru=es,x.toArray=fh,x.toPairs=AT,x.toPairsIn=Gg,x.toPath=function Rp(l){return Vt(l)?Ft(l,lo):Ws(l)?[l]:ai(lp(An(l)))},x.toPlainObject=pT,x.transform=function TT(l,d,_){var E=Vt(l),T=E||Il(l)||hh(l);if(d=_t(d,4),null==_){var P=l&&l.constructor;_=T?E?new P:[]:Dr(l)&&ga(P)?Dn(Pc(l)):{}}return(T?Er:Ir)(l,function(B,K,J){return d(_,B,K,J)}),_},x.unary=function Ep(l){return vp(l,1)},x.union=y0,x.unionBy=lh,x.unionWith=v0,x.uniq=function b0(l){return l&&l.length?Lo(l):[]},x.uniqBy=function Dg(l,d){return l&&l.length?Lo(l,_t(d,2)):[]},x.uniqWith=function Sg(l,d){return d="function"==typeof d?d:O,l&&l.length?Lo(l,O,d):[]},x.unset=function Av(l,d){return null==l||Gf(l,d)},x.unzip=ac,x.unzipWith=E0,x.update=function rw(l,d,_){return null==l?l:ug(l,d,zd(_))},x.updateWith=function iw(l,d,_,E){return E="function"==typeof E?E:O,null==l?l:ug(l,d,zd(_),E)},x.values=Ho,x.valuesIn=function DT(l){return null==l?[]:ul(l,ho(l))},x.without=NA,x.words=Yg,x.wrap=function H0(l,d){return Lg(zd(d),l)},x.xor=FA,x.xorBy=w0,x.xorWith=iv,x.zip=LA,x.zipObject=function VA(l,d){return Ja(l||[],d||[],du)},x.zipObjectDeep=function BA(l,d){return Ja(l||[],d||[],Nc)},x.zipWith=I0,x.entries=AT,x.entriesIn=Gg,x.extend=mT,x.extendWith=bv,Jg(x,x),x.add=bh,x.attempt=yh,x.camelCase=Dv,x.capitalize=Dp,x.ceil=Vr,x.clamp=function Tv(l,d,_){return _===O&&(_=d,d=O),_!==O&&(_=(_=_a(_))==_?_:0),d!==O&&(d=(d=_a(d))==d?d:0),Ka(_a(l),d,_)},x.clone=function Bg(l){return Ji(l,4)},x.cloneDeep=function pv(l){return Ji(l,5)},x.cloneDeepWith=function wp(l,d){return Ji(l,5,d="function"==typeof d?d:O)},x.cloneWith=function z0(l,d){return Ji(l,4,d="function"==typeof d?d:O)},x.conformsTo=function eT(l,d){return null==d||gl(l,d,Ai(d))},x.deburr=fo,x.defaultTo=function Xg(l,d){return null==l||l!=l?d:l},x.divide=$T,x.endsWith=function ph(l,d,_){l=An(l),d=ms(d);var E=l.length,T=_=_===O?E:Ka(Wt(_),0,E);return(_-=d.length)>=0&&l.slice(_,T)==d},x.eq=Uo,x.escape=function Sv(l){return(l=An(l))&&Tc.test(l)?l.replace(La,Ef):l},x.escapeRegExp=function xT(l){return(l=An(l))&&ie.test(l)?l.replace(G,"\\$&"):l},x.every=function HA(l,d,_){var E=Vt(l)?Vm:Sn;return _&&gs(l,d,_)&&(d=O),E(l,_t(d,3))},x.find=zA,x.findIndex=g,x.findKey=function Q0(l,d){return ll(l,_t(d,3),Ir)},x.findLast=R0,x.findLastIndex=u,x.findLastKey=function zg(l,d){return ll(l,_t(d,3),Vf)},x.floor=Pp,x.forEach=xg,x.forEachRight=P0,x.forIn=function Y0(l,d){return null==l?l:Oo(l,_t(d,3),ho)},x.forInRight=function Ev(l,d){return null==l?l:aa(l,_t(d,3),ho)},x.forOwn=function bT(l,d){return l&&Ir(l,_t(d,3))},x.forOwnRight=function jo(l,d){return l&&Vf(l,_t(d,3))},x.get=Al,x.gt=tT,x.gte=nT,x.has=function $g(l,d){return null!=l&&nh(l,d,Nd)},x.hasIn=wv,x.head=j,x.identity=Li,x.includes=function GA(l,d,_,E){l=ts(l)?l:Ho(l),_=_&&!E?Wt(_):0;var T=l.length;return _<0&&(_=ui(T+_,0)),jg(l)?_<=T&&l.indexOf(d,_)>-1:!!T&&ja(l,d,_)>-1},x.indexOf=function re(l,d,_){var E=null==l?0:l.length;if(!E)return-1;var T=null==_?0:Wt(_);return T<0&&(T=ui(E+T,0)),ja(l,d,T)},x.inRange=function qg(l,d,_){return d=lc(d),_===O?(_=d,d=0):_=lc(_),function Fd(l,d,_){return l>=Yi(d,_)&&l<ui(d,_)}(l=_a(l),d,_)},x.invoke=CT,x.isArguments=Fu,x.isArray=Vt,x.isArrayBuffer=$0,x.isArrayLike=ts,x.isArrayLikeObject=Lr,x.isBoolean=function dh(l){return!0===l||!1===l||qn(l)&&Ni(l)==Me},x.isBuffer=Il,x.isDate=rT,x.isElement=function O1(l){return qn(l)&&1===l.nodeType&&!Cp(l)},x.isEmpty=function iT(l){if(null==l)return!0;if(ts(l)&&(Vt(l)||"string"==typeof l||"function"==typeof l.splice||Il(l)||hh(l)||Fu(l)))return!l.length;var d=Fr(l);if(d==Mr||d==bi)return!l.size;if(or(l))return!cn(l).length;for(var _ in l)if(dn.call(l,_))return!1;return!0},x.isEqual=function mv(l,d){return pu(l,d)},x.isEqualWith=function sT(l,d,_){var E=(_="function"==typeof _?_:O)?_(l,d):O;return E===O?pu(l,d,O,_):!!E},x.isError=Cl,x.isFinite=function Ug(l){return"number"==typeof l&&zm(l)},x.isFunction=ga,x.isInteger=gv,x.isLength=Ip,x.isMap=W0,x.isMatch=function oT(l,d){return l===d||mu(l,d,Du(d))},x.isMatchWith=function aT(l,d,_){return _="function"==typeof _?_:O,mu(l,d,Du(d),_)},x.isNaN=function cT(l){return G0(l)&&l!=+l},x.isNative=function lT(l){if(ip(l))throw new ct("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ig(l)},x.isNil=function cc(l){return null==l},x.isNull=function uo(l){return null===l},x.isNumber=G0,x.isObject=Dr,x.isObjectLike=qn,x.isPlainObject=Cp,x.isRegExp=_v,x.isSafeInteger=function uT(l){return gv(l)&&l>=-zi&&l<=zi},x.isSet=q0,x.isString=jg,x.isSymbol=Ws,x.isTypedArray=hh,x.isUndefined=function dT(l){return l===O},x.isWeakMap=function hT(l){return qn(l)&&Fr(l)==cs},x.isWeakSet=function fT(l){return qn(l)&&"[object WeakSet]"==Ni(l)},x.join=function gr(l,d){return null==l?"":l0.call(l,d)},x.kebabCase=RT,x.last=Tr,x.lastIndexOf=function $c(l,d,_){var E=null==l?0:l.length;if(!E)return-1;var T=E;return _!==O&&(T=(T=Wt(_))<0?ui(E+T,0):Yi(T,E-1)),d==d?function on(Q,Z,ee){for(var Ve=ee+1;Ve--;)if(Q[Ve]===Z)return Ve;return Ve}(l,d,T):Ua(l,tu,T,!0)},x.lowerCase=sw,x.lowerFirst=mh,x.lt=Hg,x.lte=Wc,x.max=function Gc(l){return l&&l.length?Qa(l,Li,Bf):O},x.maxBy=function WT(l,d){return l&&l.length?Qa(l,_t(d,2),Bf):O},x.mean=function GT(l){return ds(l,Li)},x.meanBy=function Tl(l,d){return ds(l,_t(d,2))},x.min=function dw(l){return l&&l.length?Qa(l,Li,Jr):O},x.minBy=function jv(l,d){return l&&l.length?Qa(l,_t(d,2),Jr):O},x.stubArray=Uv,x.stubFalse=n_,x.stubObject=function jT(){return{}},x.stubString=function uw(){return""},x.stubTrue=function H1(){return!0},x.multiply=z1,x.nth=function fp(l,d){return l&&l.length?Vd(l,Wt(d)):O},x.noConflict=function BT(){return rr._===this&&(rr._=Wa),this},x.noop=Lv,x.now=Mg,x.pad=function PT(l,d,_){l=An(l);var E=(d=Wt(d))?ir(l):0;if(!d||E>=d)return l;var T=(d-E)/2;return ci(hl(T),_)+l+ci(ra(T),_)},x.padEnd=function MT(l,d,_){l=An(l);var E=(d=Wt(d))?ir(l):0;return d&&E<d?l+ci(d-E,_):l},x.padStart=function kT(l,d,_){l=An(l);var E=(d=Wt(d))?ir(l):0;return d&&E<d?ci(d-E,_)+l:l},x.parseInt=function xv(l,d,_){return _||null==d?d=0:d&&(d=+d),kA(An(l).replace(le,""),d||0)},x.random=function ST(l,d,_){if(_&&"boolean"!=typeof _&&gs(l,d,_)&&(d=_=O),_===O&&("boolean"==typeof d?(_=d,d=O):"boolean"==typeof l&&(_=l,l=O)),l===O&&d===O?(l=0,d=1):(l=lc(l),d===O?(d=l,l=0):d=lc(d)),l>d){var E=l;l=d,d=E}if(_||l%1||d%1){var T=Df();return Yi(l+T*(d-l+c0("1e-"+((T+"").length-1))),d)}return la(l,d)},x.reduce=function Rg(l,d,_){var E=Vt(l)?Kt:nu,T=arguments.length<3;return E(l,_t(d,4),_,T,oa)},x.reduceRight=function O0(l,d,_){var E=Vt(l)?eu:nu,T=arguments.length<3;return E(l,_t(d,4),_,T,hu)},x.repeat=function Kg(l,d,_){return d=(_?gs(l,d,_):d===O)?1:Wt(d),Ud(An(l),d)},x.replace=function OT(){var l=arguments,d=An(l[0]);return l.length<3?d:d.replace(l[1],l[2])},x.result=function tw(l,d,_){var E=-1,T=(d=ec(d,l)).length;for(T||(T=1,l=O);++E<T;){var P=null==l?O:l[lo(d[E])];P===O&&(E=T,P=_),l=ga(P)?P.call(l):P}return l},x.round=Hv,x.runInContext=Q,x.sample=function Pg(l){return(Vt(l)?eg:ag)(l)},x.size=function YA(l){if(null==l)return 0;if(ts(l))return jg(l)?ir(l):l.length;var d=Fr(l);return d==Mr||d==bi?l.size:cn(l).length},x.snakeCase=ow,x.some=function ZA(l,d,_){var E=Vt(l)?cl:lg;return _&&gs(l,d,_)&&(d=O),E(l,_t(d,3))},x.sortedIndex=function m0(l,d){return Fc(l,d)},x.sortedIndexBy=function Cg(l,d,_){return Hd(l,d,_t(_,2))},x.sortedIndexOf=function mp(l,d){var _=null==l?0:l.length;if(_){var E=Fc(l,d);if(E<_&&Uo(l[E],d))return E}return-1},x.sortedLastIndex=function x1(l,d){return Fc(l,d,!0)},x.sortedLastIndexBy=function R1(l,d,_){return Hd(l,d,_t(_,2),!0)},x.sortedLastIndexOf=function P1(l,d){if(null!=l&&l.length){var E=Fc(l,d,!0)-1;if(Uo(l[E],d))return E}return-1},x.startCase=L1,x.startsWith=function gh(l,d,_){return l=An(l),_=null==_?0:Ka(Wt(_),0,l.length),d=ms(d),l.slice(_,_+d.length)==d},x.subtract=hw,x.sum=function qT(l){return l&&l.length?ru(l,Li):0},x.sumBy=function KT(l,d){return l&&l.length?ru(l,_t(d,2)):0},x.template=function Rv(l,d,_){var E=x.templateSettings;_&&gs(l,d,_)&&(d=O),l=An(l),d=bv({},d,E,tp);var K,J,T=bv({},d.imports,E.imports,tp),P=Ai(T),B=ul(T,P),De=0,Se=d.interpolate||_e,Oe="__p += '",He=fr((d.escape||_e).source+"|"+Se.source+"|"+(Se===Dc?Ei:_e).source+"|"+(d.evaluate||_e).source+"|$","g"),st="//# sourceURL="+(dn.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++pd+"]")+"\n";l.replace(He,function(Dt,nn,Xe,Gs,Rs,zo){return Xe||(Xe=Gs),Oe+=l.slice(De,zo).replace(me,Id),nn&&(K=!0,Oe+="' +\n__e("+nn+") +\n'"),Rs&&(J=!0,Oe+="';\n"+Rs+";\n__p += '"),Xe&&(Oe+="' +\n((__t = ("+Xe+")) == null ? '' : __t) +\n'"),De=zo+Dt.length,Dt}),Oe+="';\n";var Tt=dn.call(d,"variable")&&d.variable;if(Tt){if(kr.test(Tt))throw new ct("Invalid `variable` option passed into `_.template`")}else Oe="with (obj) {\n"+Oe+"\n}\n";Oe=(J?Oe.replace(Fa,""):Oe).replace($i,"$1").replace(Cs,"$1;"),Oe="function("+(Tt||"obj")+") {\n"+(Tt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(K?", __e = _.escape":"")+(J?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Oe+"return __p\n}";var Zt=yh(function(){return un(P,st+"return "+Oe).apply(O,B)});if(Zt.source=Oe,Cl(Zt))throw Zt;return Zt},x.times=function HT(l,d){if((l=Wt(l))<1||l>zi)return[];var _=yi,E=Yi(l,yi);d=_t(d),l-=yi;for(var T=Ed(E,d);++_<l;)d(_);return T},x.toFinite=lc,x.toInteger=Wt,x.toLength=yv,x.toLower=function NT(l){return An(l).toLowerCase()},x.toNumber=_a,x.toSafeInteger=function N1(l){return l?Ka(Wt(l),-zi,zi):0===l?l:0},x.toString=An,x.toUpper=function V1(l){return An(l).toUpperCase()},x.trim=function B1(l,d,_){if((l=An(l))&&(_||d===O))return hs(l);if(!l||!(d=ms(d)))return l;var E=Nn(l),T=Nn(d);return ua(E,wd(E,T),yf(E,T)+1).join("")},x.trimEnd=function Qg(l,d,_){if((l=An(l))&&(_||d===O))return l.slice(0,ta(l)+1);if(!l||!(d=ms(d)))return l;var E=Nn(l);return ua(E,0,yf(E,Nn(d))+1).join("")},x.trimStart=function FT(l,d,_){if((l=An(l))&&(_||d===O))return l.replace(le,"");if(!l||!(d=ms(d)))return l;var E=Nn(l);return ua(E,wd(E,Nn(d))).join("")},x.truncate=function Pv(l,d){var _=30,E="...";if(Dr(d)){var T="separator"in d?d.separator:T;_="length"in d?Wt(d.length):_,E="omission"in d?ms(d.omission):E}var P=(l=An(l)).length;if(Zr(l)){var B=Nn(l);P=B.length}if(_>=P)return l;var K=_-ir(E);if(K<1)return E;var J=B?ua(B,0,K).join(""):l.slice(0,K);if(T===O)return J+E;if(B&&(K+=J.length-K),_v(T)){if(l.slice(K).search(T)){var De,Se=J;for(T.global||(T=fr(T.source,An(Co.exec(T))+"g")),T.lastIndex=0;De=T.exec(Se);)var Oe=De.index;J=J.slice(0,Oe===O?K:Oe)}}else if(l.indexOf(ms(T),K)!=K){var He=J.lastIndexOf(T);He>-1&&(J=J.slice(0,He))}return J+E},x.unescape=function Mv(l){return(l=An(l))&&rl.test(l)?l.replace(Wi,qi):l},x.uniqueId=function zT(l){var d=++dl;return An(l)+d},x.upperCase=_h,x.upperFirst=Sp,x.each=xg,x.eachRight=P0,x.first=j,Jg(x,function(){var l={};return Ir(x,function(d,_){dn.call(x.prototype,_)||(l[_]=d)}),l}(),{chain:!1}),x.VERSION="4.17.21",Er(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){x[l].placeholder=x}),Er(["drop","take"],function(l,d){jt.prototype[l]=function(_){_=_===O?1:ui(Wt(_),0);var E=this.__filtered__&&!d?new jt(this):this.clone();return E.__filtered__?E.__takeCount__=Yi(_,E.__takeCount__):E.__views__.push({size:Yi(_,yi),type:l+(E.__dir__<0?"Right":"")}),E},jt.prototype[l+"Right"]=function(_){return this.reverse()[l](_).reverse()}}),Er(["filter","map","takeWhile"],function(l,d){var _=d+1,E=1==_||3==_;jt.prototype[l]=function(T){var P=this.clone();return P.__iteratees__.push({iteratee:_t(T,3),type:_}),P.__filtered__=P.__filtered__||E,P}}),Er(["head","last"],function(l,d){var _="take"+(d?"Right":"");jt.prototype[l]=function(){return this[_](1).value()[0]}}),Er(["initial","tail"],function(l,d){var _="drop"+(d?"":"Right");jt.prototype[l]=function(){return this.__filtered__?new jt(this):this[_](1)}}),jt.prototype.compact=function(){return this.filter(Li)},jt.prototype.find=function(l){return this.filter(l).head()},jt.prototype.findLast=function(l){return this.reverse().find(l)},jt.prototype.invokeMap=$t(function(l,d){return"function"==typeof l?new jt(this):this.map(function(_){return Ya(_,l,d)})}),jt.prototype.reject=function(l){return this.filter(uv(_t(l)))},jt.prototype.slice=function(l,d){l=Wt(l);var _=this;return _.__filtered__&&(l>0||d<0)?new jt(_):(l<0?_=_.takeRight(-l):l&&(_=_.drop(l)),d!==O&&(_=(d=Wt(d))<0?_.dropRight(-d):_.take(d-l)),_)},jt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},jt.prototype.toArray=function(){return this.take(yi)},Ir(jt.prototype,function(l,d){var _=/^(?:filter|find|map|reject)|While$/.test(d),E=/^(?:head|last)$/.test(d),T=x[E?"take"+("last"==d?"Right":""):d],P=E||/^find/.test(d);T&&(x.prototype[d]=function(){var B=this.__wrapped__,K=E?[1]:arguments,J=B instanceof jt,De=K[0],Se=J||Vt(B),Oe=function(nn){var Xe=T.apply(x,wr([nn],K));return E&&He?Xe[0]:Xe};Se&&_&&"function"==typeof De&&1!=De.length&&(J=Se=!1);var He=this.__chain__,Tt=P&&!He,Zt=J&&!this.__actions__.length;if(!P&&Se){B=Zt?B:new jt(this);var Dt=l.apply(B,K);return Dt.__actions__.push({func:es,args:[Oe],thisArg:O}),new mr(Dt,He)}return Tt&&Zt?l.apply(this,K):(Dt=this.thru(Oe),Tt?E?Dt.value()[0]:Dt.value():Dt)})}),Er(["pop","push","shift","sort","splice","unshift"],function(l){var d=At[l],_=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",E=/^(?:pop|shift)$/.test(l);x.prototype[l]=function(){var T=arguments;if(E&&!this.__chain__){var P=this.value();return d.apply(Vt(P)?P:[],T)}return this[_](function(B){return d.apply(Vt(B)?B:[],T)})}}),Ir(jt.prototype,function(l,d){var _=x[d];if(_){var E=_.name+"";dn.call(Mc,E)||(Mc[E]=[]),Mc[E].push({name:d,func:_})}}),Mc[Yd(O,2).name]=[{name:"wrapper",func:O}],jt.prototype.clone=function Gm(){var l=new jt(this.__wrapped__);return l.__actions__=ai(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=ai(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=ai(this.__views__),l},jt.prototype.reverse=function Or(){if(this.__filtered__){var l=new jt(this);l.__dir__=-1,l.__filtered__=!0}else(l=this.clone()).__dir__*=-1;return l},jt.prototype.value=function qm(){var l=this.__wrapped__.value(),d=this.__dir__,_=Vt(l),E=d<0,T=_?l.length:0,P=function jc(l,d,_){for(var E=-1,T=_.length;++E<T;){var P=_[E],B=P.size;switch(P.type){case"drop":l+=B;break;case"dropRight":d-=B;break;case"take":d=Yi(d,l+B);break;case"takeRight":l=ui(l,d-B)}}return{start:l,end:d}}(0,T,this.__views__),B=P.start,K=P.end,J=K-B,De=E?K:B-1,Se=this.__iteratees__,Oe=Se.length,He=0,st=Yi(J,this.__takeCount__);if(!_||!E&&T==J&&st==J)return Xa(l,this.__actions__);var Tt=[];e:for(;J--&&He<st;){for(var Zt=-1,Dt=l[De+=d];++Zt<Oe;){var nn=Se[Zt],Gs=nn.type,Rs=(0,nn.iteratee)(Dt);if(2==Gs)Dt=Rs;else if(!Rs){if(1==Gs)continue e;break e}}Tt[He++]=Dt}return Tt},x.prototype.at=sv,x.prototype.chain=function A0(){return C0(this)},x.prototype.commit=function ov(){return new mr(this.value(),this.__chain__)},x.prototype.next=function _s(){this.__values__===O&&(this.__values__=fh(this.value()));var l=this.__index__>=this.__values__.length;return{done:l,value:l?O:this.__values__[this.__index__++]}},x.prototype.plant=function T0(l){for(var d,_=this;_ instanceof kc;){var E=ih(_);E.__index__=0,E.__values__=O,d?T.__wrapped__=E:d=E;var T=E;_=_.__wrapped__}return T.__wrapped__=l,d},x.prototype.reverse=function D0(){var l=this.__wrapped__;if(l instanceof jt){var d=l;return this.__actions__.length&&(d=new jt(this)),(d=d.reverse()).__actions__.push({func:es,args:[Ou],thisArg:O}),new mr(d,this.__chain__)}return this.thru(Ou)},x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=function jA(){return Xa(this.__wrapped__,this.__actions__)},x.prototype.first=x.prototype.head,na&&(x.prototype[na]=function gp(){return this}),x}();rr._=Td,(k=function(){return Td}.call(Gr,Pt,Gr,Hi))!==O&&(Hi.exports=k)}.call(this)},345:(Hi,Gr,Pt)=>{"use strict";Pt.d(Gr,{A:()=>Kr});var k=Pt(76),O=Pt(362),Je=Pt(852),ve=Pt(41);class Bt{constructor(lt,Ut){this._delegate=lt,this.firebase=Ut,(0,Je._addComponent)(lt,new O.uA("app-compat",()=>this,"PUBLIC")),this.container=lt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this._delegate.automaticDataCollectionEnabled=lt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(lt=>{this._delegate.checkDestroyed(),lt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Je.deleteApp)(this._delegate)))}_getService(lt,Ut=Je._DEFAULT_ENTRY_NAME){var Wn;this._delegate.checkDestroyed();const br=this._delegate.container.getProvider(lt);return!br.isInitialized()&&"EXPLICIT"===(null===(Wn=br.getComponent())||void 0===Wn?void 0:Wn.instantiationMode)&&br.initialize(),br.getImmediate({identifier:Ut})}_removeServiceInstance(lt,Ut=Je._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(lt).clearInstance(Ut)}_addComponent(lt){(0,Je._addComponent)(this._delegate,lt)}_addOrOverwriteComponent(lt){(0,Je._addOrOverwriteComponent)(this._delegate,lt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const lr=new k.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Te=function Qt(){const Nt=function qr(Nt){const lt={},Ut={__esModule:!0,initializeApp:function mn(ht,Pr={}){const Pn=Je.initializeApp(ht,Pr);if((0,k.gR)(lt,Pn.name))return lt[Pn.name];const Re=new Nt(Pn,Ut);return lt[Pn.name]=Re,Re},app:br,registerVersion:Je.registerVersion,setLogLevel:Je.setLogLevel,onLog:Je.onLog,apps:null,SDK_VERSION:Je.SDK_VERSION,INTERNAL:{registerComponent:function sn(ht){const Pr=ht.name,Pn=Pr.replace("-compat","");if(Je._registerComponent(ht)&&"PUBLIC"===ht.type){const Re=(er=br())=>{if("function"!=typeof er[Pn])throw lr.create("invalid-app-argument",{appName:Pr});return er[Pn]()};void 0!==ht.serviceProps&&(0,k.zw)(Re,ht.serviceProps),Ut[Pn]=Re,Nt.prototype[Pn]=function(...er){return this._getService.bind(this,Pr).apply(this,ht.multipleInstances?er:[])}}return"PUBLIC"===ht.type?Ut[Pn]:null},removeApp:function Wn(ht){delete lt[ht]},useAsService:function oi(ht,Pr){return"serverAuth"===Pr?null:Pr},modularAPIs:Je}};function br(ht){if(!(0,k.gR)(lt,ht=ht||Je._DEFAULT_ENTRY_NAME))throw lr.create("no-app",{appName:ht});return lt[ht]}return Ut.default=Ut,Object.defineProperty(Ut,"apps",{get:function rn(){return Object.keys(lt).map(ht=>lt[ht])}}),br.App=Nt,Ut}(Bt);return Nt.INTERNAL=Object.assign(Object.assign({},Nt.INTERNAL),{createFirebaseNamespace:Qt,extendNamespace:function lt(Ut){(0,k.zw)(Nt,Ut)},createSubscribe:k.tD,ErrorFactory:k.FA,deepExtend:k.zw}),Nt}(),Ne=new ve.Vy("@firebase/app-compat");try{const Nt=(0,k.mS)();if(void 0!==Nt.firebase){Ne.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const lt=Nt.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&Ne.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Kr=Te;!function Yt(Nt){(0,Je.registerVersion)("@firebase/app-compat","0.2.43",Nt)}()},852:(Hi,Gr,Pt)=>{"use strict";Pt.r(Gr),Pt.d(Gr,{FirebaseError:()=>ve.g,SDK_VERSION:()=>La,_DEFAULT_ENTRY_NAME:()=>cs,_addComponent:()=>nr,_addOrOverwriteComponent:()=>Vs,_apps:()=>Ri,_clearComponents:()=>Yo,_components:()=>Pi,_getProvider:()=>Na,_isFirebaseApp:()=>Qo,_isFirebaseServerApp:()=>Mi,_registerComponent:()=>dr,_removeServiceInstance:()=>Bs,_serverApps:()=>Yn,deleteApp:()=>Dc,getApp:()=>cd,getApps:()=>il,initializeApp:()=>rl,initializeServerApp:()=>Tc,onLog:()=>U,registerVersion:()=>V,setLogLevel:()=>G});var k=Pt(467),O=Pt(362),Je=Pt(41),ve=Pt(76);const Bt=(me,z)=>z.some(fe=>me instanceof fe);let fn,lr;const Te=new WeakMap,Ne=new WeakMap,tt=new WeakMap,Ot=new WeakMap,Yt=new WeakMap;let lt={get(me,z,fe){if(me instanceof IDBTransaction){if("done"===z)return Ne.get(me);if("objectStoreNames"===z)return me.objectStoreNames||tt.get(me);if("store"===z)return fe.objectStoreNames[1]?void 0:fe.objectStore(fe.objectStoreNames[0])}return mn(me[z])},set:(me,z,fe)=>(me[z]=fe,!0),has:(me,z)=>me instanceof IDBTransaction&&("done"===z||"store"===z)||z in me};function br(me){return"function"==typeof me?function Wn(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Qt(){return lr||(lr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...z){return me.apply(rn(this),z),mn(Te.get(this))}:function(...z){return mn(me.apply(rn(this),z))}:function(z,...fe){const $e=me.call(rn(this),z,...fe);return tt.set($e,z.sort?z.sort():[z]),mn($e)}}(me):(me instanceof IDBTransaction&&function Nt(me){if(Ne.has(me))return;const z=new Promise((fe,$e)=>{const St=()=>{me.removeEventListener("complete",Rt),me.removeEventListener("error",kt),me.removeEventListener("abort",kt)},Rt=()=>{fe(),St()},kt=()=>{$e(me.error||new DOMException("AbortError","AbortError")),St()};me.addEventListener("complete",Rt),me.addEventListener("error",kt),me.addEventListener("abort",kt)});Ne.set(me,z)}(me),Bt(me,function qr(){return fn||(fn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,lt):me)}function mn(me){if(me instanceof IDBRequest)return function Kr(me){const z=new Promise((fe,$e)=>{const St=()=>{me.removeEventListener("success",Rt),me.removeEventListener("error",kt)},Rt=()=>{fe(mn(me.result)),St()},kt=()=>{$e(me.error),St()};me.addEventListener("success",Rt),me.addEventListener("error",kt)});return z.then(fe=>{fe instanceof IDBCursor&&Te.set(fe,me)}).catch(()=>{}),Yt.set(z,me),z}(me);if(Ot.has(me))return Ot.get(me);const z=br(me);return z!==me&&(Ot.set(me,z),Yt.set(z,me)),z}const rn=me=>Yt.get(me),ht=["get","getKey","getAll","getAllKeys","count"],Pr=["put","add","delete","clear"],Pn=new Map;function Re(me,z){if(!(me instanceof IDBDatabase)||z in me||"string"!=typeof z)return;if(Pn.get(z))return Pn.get(z);const fe=z.replace(/FromIndex$/,""),$e=z!==fe,St=Pr.includes(fe);if(!(fe in($e?IDBIndex:IDBObjectStore).prototype)||!St&&!ht.includes(fe))return;const Rt=function(){var kt=(0,k.A)(function*(tn,...hr){const As=this.transaction(tn,St?"readwrite":"readonly");let Cn=As.store;return $e&&(Cn=Cn.index(hr.shift())),(yield Promise.all([Cn[fe](...hr),St&&As.done]))[0]});return function(hr){return kt.apply(this,arguments)}}();return Pn.set(z,Rt),Rt}!function Ut(me){lt=me(lt)}(me=>({...me,get:(z,fe,$e)=>Re(z,fe)||me.get(z,fe,$e),has:(z,fe)=>!!Re(z,fe)||me.has(z,fe)}));class er{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(fe=>{if(function Gn(me){const z=me.getComponent();return"VERSION"===z?.type}(fe)){const $e=fe.getImmediate();return`${$e.library}/${$e.version}`}return null}).filter(fe=>fe).join(" ")}}const os="@firebase/app",Fs="0.10.13",It=new Je.Vy("@firebase/app"),cs="[DEFAULT]",Ac={[os]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ri=new Map,Yn=new Map,Pi=new Map;function nr(me,z){try{me.container.addComponent(z)}catch(fe){It.debug(`Component ${z.name} failed to register with FirebaseApp ${me.name}`,fe)}}function Vs(me,z){me.container.addOrOverwriteComponent(z)}function dr(me){const z=me.name;if(Pi.has(z))return It.debug(`There were multiple attempts to register component ${z}.`),!1;Pi.set(z,me);for(const fe of Ri.values())nr(fe,me);for(const fe of Yn.values())nr(fe,me);return!0}function Na(me,z){const fe=me.container.getProvider("heartbeat").getImmediate({optional:!0});return fe&&fe.triggerHeartbeat(),me.container.getProvider(z)}function Bs(me,z,fe=cs){Na(me,z).clearInstance(fe)}function Qo(me){return void 0!==me.options}function Mi(me){return void 0!==me.settings}function Yo(){Pi.clear()}const $i=new ve.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Cs{constructor(z,fe,$e){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},fe),this._name=fe.name,this._automaticDataCollectionEnabled=fe.automaticDataCollectionEnabled,this._container=$e,this.container.addComponent(new O.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}class Wi extends Cs{constructor(z,fe,$e,St){const Rt=void 0!==fe.automaticDataCollectionEnabled&&fe.automaticDataCollectionEnabled,kt={name:$e,automaticDataCollectionEnabled:Rt};super(void 0!==z.apiKey?z:z.options,kt,St),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Rt},fe),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,fe.releaseOnDeref=void 0,V(os,Fs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(z){this.isDeleted||(this._refCount++,void 0!==z&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(z,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Dc(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw $i.create("server-app-deleted")}}const La="10.14.1";function rl(me,z={}){let fe=me;"object"!=typeof z&&(z={name:z});const $e=Object.assign({name:cs,automaticDataCollectionEnabled:!1},z),St=$e.name;if("string"!=typeof St||!St)throw $i.create("bad-app-name",{appName:String(St)});if(fe||(fe=(0,ve.T9)()),!fe)throw $i.create("no-options");const Rt=Ri.get(St);if(Rt){if((0,ve.bD)(fe,Rt.options)&&(0,ve.bD)($e,Rt.config))return Rt;throw $i.create("duplicate-app",{appName:St})}const kt=new O.h1(St);for(const hr of Pi.values())kt.addComponent(hr);const tn=new Cs(fe,$e,kt);return Ri.set(St,tn),tn}function Tc(me,z){if((0,ve.Bd)()&&!(0,ve.p7)())throw $i.create("invalid-server-app-environment");let fe;void 0===z.automaticDataCollectionEnabled&&(z.automaticDataCollectionEnabled=!1),fe=Qo(me)?me.options:me;const $e=Object.assign(Object.assign({},z),fe);if(void 0!==$e.releaseOnDeref&&delete $e.releaseOnDeref,void 0!==z.releaseOnDeref&&typeof FinalizationRegistry>"u")throw $i.create("finalization-registry-not-supported",{});const Rt=""+(As=JSON.stringify($e),[...As].reduce((Cn,To)=>Math.imul(31,Cn)+To.charCodeAt(0)|0,0)),kt=Yn.get(Rt);var As;if(kt)return kt.incRefCount(z.releaseOnDeref),kt;const tn=new O.h1(Rt);for(const As of Pi.values())tn.addComponent(As);const hr=new Wi(fe,z,Rt,tn);return Yn.set(Rt,hr),hr}function cd(me=cs){const z=Ri.get(me);if(!z&&me===cs&&(0,ve.T9)())return rl();if(!z)throw $i.create("no-app",{appName:me});return z}function il(){return Array.from(Ri.values())}function Dc(me){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,k.A)(function*(me){let z=!1;const fe=me.name;Ri.has(fe)?(z=!0,Ri.delete(fe)):Yn.has(fe)&&me.decRefCount()<=0&&(Yn.delete(fe),z=!0),z&&(yield Promise.all(me.container.getProviders().map($e=>$e.delete())),me.isDeleted=!0)})).apply(this,arguments)}function V(me,z,fe){var $e;let St=null!==($e=Ac[me])&&void 0!==$e?$e:me;fe&&(St+=`-${fe}`);const Rt=St.match(/\s|\//),kt=z.match(/\s|\//);if(Rt||kt){const tn=[`Unable to register library "${St}" with version "${z}":`];return Rt&&tn.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Rt&&kt&&tn.push("and"),kt&&tn.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void It.warn(tn.join(" "))}dr(new O.uA(`${St}-version`,()=>({library:St,version:z}),"VERSION"))}function U(me,z){if(null!==me&&"function"!=typeof me)throw $i.create("invalid-log-argument");(0,Je.Ey)(me,z)}function G(me){(0,Je.He)(me)}const ie="firebase-heartbeat-database",le=1,Qe="firebase-heartbeat-store";let Ke=null;function Bn(){return Ke||(Ke=function sn(me,z,{blocked:fe,upgrade:$e,blocking:St,terminated:Rt}={}){const kt=indexedDB.open(me,z),tn=mn(kt);return $e&&kt.addEventListener("upgradeneeded",hr=>{$e(mn(kt.result),hr.oldVersion,hr.newVersion,mn(kt.transaction),hr)}),fe&&kt.addEventListener("blocked",hr=>fe(hr.oldVersion,hr.newVersion,hr)),tn.then(hr=>{Rt&&hr.addEventListener("close",()=>Rt()),St&&hr.addEventListener("versionchange",As=>St(As.oldVersion,As.newVersion,As))}).catch(()=>{}),tn}(ie,le,{upgrade:(me,z)=>{if(0===z)try{me.createObjectStore(Qe)}catch(fe){console.warn(fe)}}}).catch(me=>{throw $i.create("idb-open",{originalErrorMessage:me.message})})),Ke}function mt(){return(mt=(0,k.A)(function*(me){try{const fe=(yield Bn()).transaction(Qe),$e=yield fe.objectStore(Qe).get(Ei(me));return yield fe.done,$e}catch(z){if(z instanceof ve.g)It.warn(z.message);else{const fe=$i.create("idb-get",{originalErrorMessage:z?.message});It.warn(fe.message)}}})).apply(this,arguments)}function kr(me,z){return gt.apply(this,arguments)}function gt(){return(gt=(0,k.A)(function*(me,z){try{const $e=(yield Bn()).transaction(Qe,"readwrite");yield $e.objectStore(Qe).put(z,Ei(me)),yield $e.done}catch(fe){if(fe instanceof ve.g)It.warn(fe.message);else{const $e=$i.create("idb-set",{originalErrorMessage:fe?.message});It.warn($e.message)}}})).apply(this,arguments)}function Ei(me){return`${me.name}!${me.options.appId}`}class bt{constructor(z){this.container=z,this._heartbeatsCache=null;const fe=this.container.getProvider("app").getImmediate();this._storage=new ff(fe),this._heartbeatsCachePromise=this._storage.read().then($e=>(this._heartbeatsCache=$e,$e))}triggerHeartbeat(){var z=this;return(0,k.A)(function*(){var fe,$e;try{const Rt=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=Ao();return null==(null===(fe=z._heartbeatsCache)||void 0===fe?void 0:fe.heartbeats)&&(z._heartbeatsCache=yield z._heartbeatsCachePromise,null==(null===($e=z._heartbeatsCache)||void 0===$e?void 0:$e.heartbeats))||z._heartbeatsCache.lastSentHeartbeatDate===kt||z._heartbeatsCache.heartbeats.some(tn=>tn.date===kt)?void 0:(z._heartbeatsCache.heartbeats.push({date:kt,agent:Rt}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(tn=>{const hr=new Date(tn.date).valueOf();return Date.now()-hr<=2592e6}),z._storage.overwrite(z._heartbeatsCache))}catch(St){It.warn(St)}})()}getHeartbeatsHeader(){var z=this;return(0,k.A)(function*(){var fe;try{if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null==(null===(fe=z._heartbeatsCache)||void 0===fe?void 0:fe.heartbeats)||0===z._heartbeatsCache.heartbeats.length)return"";const $e=Ao(),{heartbeatsToSend:St,unsentEntries:Rt}=function sl(me,z=1024){const fe=[];let $e=me.slice();for(const St of me){const Rt=fe.find(kt=>kt.agent===St.agent);if(Rt){if(Rt.dates.push(St.date),Xo(fe)>z){Rt.dates.pop();break}}else if(fe.push({agent:St.agent,dates:[St.date]}),Xo(fe)>z){fe.pop();break}$e=$e.slice(1)}return{heartbeatsToSend:fe,unsentEntries:$e}}(z._heartbeatsCache.heartbeats),kt=(0,ve.Uj)(JSON.stringify({version:2,heartbeats:St}));return z._heartbeatsCache.lastSentHeartbeatDate=$e,Rt.length>0?(z._heartbeatsCache.heartbeats=Rt,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),kt}catch($e){return It.warn($e),""}})()}}function Ao(){return(new Date).toISOString().substring(0,10)}class ff{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,k.A)(function*(){return!!(0,ve.zW)()&&(0,ve.eX)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,k.A)(function*(){if(yield z._canUseIndexedDBPromise){const $e=yield function Yr(me){return mt.apply(this,arguments)}(z.app);return $e?.heartbeats?$e:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(z){var fe=this;return(0,k.A)(function*(){var $e;if(yield fe._canUseIndexedDBPromise){const Rt=yield fe.read();return kr(fe.app,{lastSentHeartbeatDate:null!==($e=z.lastSentHeartbeatDate)&&void 0!==$e?$e:Rt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var fe=this;return(0,k.A)(function*(){var $e;if(yield fe._canUseIndexedDBPromise){const Rt=yield fe.read();return kr(fe.app,{lastSentHeartbeatDate:null!==($e=z.lastSentHeartbeatDate)&&void 0!==$e?$e:Rt.lastSentHeartbeatDate,heartbeats:[...Rt.heartbeats,...z.heartbeats]})}})()}}function Xo(me){return(0,ve.Uj)(JSON.stringify({version:2,heartbeats:me})).length}!function _e(me){dr(new O.uA("platform-logger",z=>new er(z),"PRIVATE")),dr(new O.uA("heartbeat",z=>new bt(z),"PRIVATE")),V(os,Fs,me),V(os,Fs,"esm2017"),V("fire-js","")}("")},362:(Hi,Gr,Pt)=>{"use strict";Pt.d(Gr,{h1:()=>qr,uA:()=>Je});var k=Pt(467),O=Pt(76);class Je{constructor(Te,Ne,tt){this.name=Te,this.instanceFactory=Ne,this.type=tt,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Te){return this.instantiationMode=Te,this}setMultipleInstances(Te){return this.multipleInstances=Te,this}setServiceProps(Te){return this.serviceProps=Te,this}setInstanceCreatedCallback(Te){return this.onInstanceCreated=Te,this}}const ve="[DEFAULT]";class Bt{constructor(Te,Ne){this.name=Te,this.container=Ne,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Te){const Ne=this.normalizeInstanceIdentifier(Te);if(!this.instancesDeferred.has(Ne)){const tt=new O.cY;if(this.instancesDeferred.set(Ne,tt),this.isInitialized(Ne)||this.shouldAutoInitialize())try{const Ot=this.getOrInitializeService({instanceIdentifier:Ne});Ot&&tt.resolve(Ot)}catch{}}return this.instancesDeferred.get(Ne).promise}getImmediate(Te){var Ne;const tt=this.normalizeInstanceIdentifier(Te?.identifier),Ot=null!==(Ne=Te?.optional)&&void 0!==Ne&&Ne;if(!this.isInitialized(tt)&&!this.shouldAutoInitialize()){if(Ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:tt})}catch(Yt){if(Ot)return null;throw Yt}}getComponent(){return this.component}setComponent(Te){if(Te.name!==this.name)throw Error(`Mismatching Component ${Te.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Te,this.shouldAutoInitialize()){if(function lr(Qt){return"EAGER"===Qt.instantiationMode}(Te))try{this.getOrInitializeService({instanceIdentifier:ve})}catch{}for(const[Ne,tt]of this.instancesDeferred.entries()){const Ot=this.normalizeInstanceIdentifier(Ne);try{const Yt=this.getOrInitializeService({instanceIdentifier:Ot});tt.resolve(Yt)}catch{}}}}clearInstance(Te=ve){this.instancesDeferred.delete(Te),this.instancesOptions.delete(Te),this.instances.delete(Te)}delete(){var Te=this;return(0,k.A)(function*(){const Ne=Array.from(Te.instances.values());yield Promise.all([...Ne.filter(tt=>"INTERNAL"in tt).map(tt=>tt.INTERNAL.delete()),...Ne.filter(tt=>"_delete"in tt).map(tt=>tt._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Te=ve){return this.instances.has(Te)}getOptions(Te=ve){return this.instancesOptions.get(Te)||{}}initialize(Te={}){const{options:Ne={}}=Te,tt=this.normalizeInstanceIdentifier(Te.instanceIdentifier);if(this.isInitialized(tt))throw Error(`${this.name}(${tt}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ot=this.getOrInitializeService({instanceIdentifier:tt,options:Ne});for(const[Yt,Kr]of this.instancesDeferred.entries())tt===this.normalizeInstanceIdentifier(Yt)&&Kr.resolve(Ot);return Ot}onInit(Te,Ne){var tt;const Ot=this.normalizeInstanceIdentifier(Ne),Yt=null!==(tt=this.onInitCallbacks.get(Ot))&&void 0!==tt?tt:new Set;Yt.add(Te),this.onInitCallbacks.set(Ot,Yt);const Kr=this.instances.get(Ot);return Kr&&Te(Kr,Ot),()=>{Yt.delete(Te)}}invokeOnInitCallbacks(Te,Ne){const tt=this.onInitCallbacks.get(Ne);if(tt)for(const Ot of tt)try{Ot(Te,Ne)}catch{}}getOrInitializeService({instanceIdentifier:Te,options:Ne={}}){let tt=this.instances.get(Te);if(!tt&&this.component&&(tt=this.component.instanceFactory(this.container,{instanceIdentifier:(Qt=Te,Qt===ve?void 0:Qt),options:Ne}),this.instances.set(Te,tt),this.instancesOptions.set(Te,Ne),this.invokeOnInitCallbacks(tt,Te),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Te,tt)}catch{}var Qt;return tt||null}normalizeInstanceIdentifier(Te=ve){return this.component?this.component.multipleInstances?Te:ve:Te}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class qr{constructor(Te){this.name=Te,this.providers=new Map}addComponent(Te){const Ne=this.getProvider(Te.name);if(Ne.isComponentSet())throw new Error(`Component ${Te.name} has already been registered with ${this.name}`);Ne.setComponent(Te)}addOrOverwriteComponent(Te){this.getProvider(Te.name).isComponentSet()&&this.providers.delete(Te.name),this.addComponent(Te)}getProvider(Te){if(this.providers.has(Te))return this.providers.get(Te);const Ne=new Bt(Te,this);return this.providers.set(Te,Ne),Ne}getProviders(){return Array.from(this.providers.values())}}},41:(Hi,Gr,Pt)=>{"use strict";Pt.d(Gr,{$b:()=>O,Ey:()=>Qt,He:()=>qr,Vy:()=>lr});const k=[];var O=function(Te){return Te[Te.DEBUG=0]="DEBUG",Te[Te.VERBOSE=1]="VERBOSE",Te[Te.INFO=2]="INFO",Te[Te.WARN=3]="WARN",Te[Te.ERROR=4]="ERROR",Te[Te.SILENT=5]="SILENT",Te}(O||{});const Je={debug:O.DEBUG,verbose:O.VERBOSE,info:O.INFO,warn:O.WARN,error:O.ERROR,silent:O.SILENT},ve=O.INFO,Bt={[O.DEBUG]:"log",[O.VERBOSE]:"log",[O.INFO]:"info",[O.WARN]:"warn",[O.ERROR]:"error"},fn=(Te,Ne,...tt)=>{if(Ne<Te.logLevel)return;const Ot=(new Date).toISOString(),Yt=Bt[Ne];if(!Yt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ne})`);console[Yt](`[${Ot}]  ${Te.name}:`,...tt)};class lr{constructor(Ne){this.name=Ne,this._logLevel=ve,this._logHandler=fn,this._userLogHandler=null,k.push(this)}get logLevel(){return this._logLevel}set logLevel(Ne){if(!(Ne in O))throw new TypeError(`Invalid value "${Ne}" assigned to \`logLevel\``);this._logLevel=Ne}setLogLevel(Ne){this._logLevel="string"==typeof Ne?Je[Ne]:Ne}get logHandler(){return this._logHandler}set logHandler(Ne){if("function"!=typeof Ne)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ne}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ne){this._userLogHandler=Ne}debug(...Ne){this._userLogHandler&&this._userLogHandler(this,O.DEBUG,...Ne),this._logHandler(this,O.DEBUG,...Ne)}log(...Ne){this._userLogHandler&&this._userLogHandler(this,O.VERBOSE,...Ne),this._logHandler(this,O.VERBOSE,...Ne)}info(...Ne){this._userLogHandler&&this._userLogHandler(this,O.INFO,...Ne),this._logHandler(this,O.INFO,...Ne)}warn(...Ne){this._userLogHandler&&this._userLogHandler(this,O.WARN,...Ne),this._logHandler(this,O.WARN,...Ne)}error(...Ne){this._userLogHandler&&this._userLogHandler(this,O.ERROR,...Ne),this._logHandler(this,O.ERROR,...Ne)}}function qr(Te){k.forEach(Ne=>{Ne.setLogLevel(Te)})}function Qt(Te,Ne){for(const tt of k){let Ot=null;Ne&&Ne.level&&(Ot=Je[Ne.level]),tt.userLogHandler=null===Te?null:(Yt,Kr,...Nt)=>{const lt=Nt.map(Ut=>{if(null==Ut)return null;if("string"==typeof Ut)return Ut;if("number"==typeof Ut||"boolean"==typeof Ut)return Ut.toString();if(Ut instanceof Error)return Ut.message;try{return JSON.stringify(Ut)}catch{return null}}).filter(Ut=>Ut).join(" ");Kr>=(Ot??Yt.logLevel)&&Te({level:O[Kr].toLowerCase(),message:lt,args:Nt,type:Yt.name})}}}},955:(Hi,Gr,Pt)=>{"use strict";var k=Pt(467),O=Pt(345),Je=Pt(852),ve=Pt(76),Bt=Pt(41),fn=Pt(635),lr=Pt(362);const Qt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Kr=function Ot(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Nt=function Yt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new ve.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wn=new Bt.Vy("@firebase/auth");function mn(g,...u){Wn.logLevel<=Bt.$b.ERROR&&Wn.error(`Auth (${Je.SDK_VERSION}): ${g}`,...u)}function rn(g,...u){throw Pn(g,...u)}function sn(g,...u){return Pn(g,...u)}function oi(g,u,f){const y=Object.assign(Object.assign({},Nt()),{[u]:f});return new ve.FA("auth","Firebase",y).create(u,{appName:g.name})}function ht(g){return oi(g,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Pr(g,u,f){if(!(u instanceof f))throw f.name!==u.constructor.name&&rn(g,"argument-error"),oi(g,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pn(g,...u){if("string"!=typeof g){const f=u[0],y=[...u.slice(1)];return y[0]&&(y[0].appName=g.name),g._errorFactory.create(f,...y)}return lt.create(g,...u)}function Re(g,u,...f){if(!g)throw Pn(u,...f)}function er(g){const u="INTERNAL ASSERTION FAILED: "+g;throw mn(u),new Error(u)}function Gn(g,u){g||er(u)}function os(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function Fs(){return"http:"===It()||"https:"===It()}function It(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class Is{constructor(u,f){this.shortDelay=u,this.longDelay=f,Gn(f>u,"Short delay should be less than long delay!"),this.isMobile=(0,ve.jZ)()||(0,ve.lV)()}get(){return function zi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fs()||(0,ve.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function yi(g,u){Gn(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return u?`${f}${u.startsWith("/")?u.slice(1):u}`:f}class Y{static initialize(u,f,y){this.fetchImpl=u,f&&(this.headersImpl=f),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ge={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ie=new Is(3e4,6e4);function te(g,u){return g.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:g.tenantId}):u}function pe(g,u,f,y){return Le.apply(this,arguments)}function Le(){return(Le=(0,k.A)(function*(g,u,f,y,I={}){return Me(g,I,(0,k.A)(function*(){let D={},j={};y&&("GET"===u?j=y:D={body:JSON.stringify(y)});const re=(0,ve.Am)(Object.assign({key:g.config.apiKey},j)).slice(1),Ce=yield g._getAdditionalHeaders();Ce["Content-Type"]="application/json",g.languageCode&&(Ce["X-Firebase-Locale"]=g.languageCode);const je=Object.assign({method:u,headers:Ce},D);return(0,ve.c1)()||(je.referrerPolicy="no-referrer"),Y.fetch()(ln(g,g.config.apiHost,f,re),je)}))})).apply(this,arguments)}function Me(g,u,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,k.A)(function*(g,u,f){g._canInitEmulator=!1;const y=Object.assign(Object.assign({},ge),u);try{const I=new Mr(g),D=yield Promise.race([f(),I.promise]);I.clearNetworkTimeout();const j=yield D.json();if("needConfirmation"in j)throw en(g,"account-exists-with-different-credential",j);if(D.ok&&!("errorMessage"in j))return j;{const re=D.ok?j.errorMessage:j.error.message,[Ce,je]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ce)throw en(g,"credential-already-in-use",j);if("EMAIL_EXISTS"===Ce)throw en(g,"email-already-in-use",j);if("USER_DISABLED"===Ce)throw en(g,"user-disabled",j);const et=y[Ce]||Ce.toLowerCase().replace(/[_\s]+/g,"-");if(je)throw oi(g,et,je);rn(g,et)}}catch(I){if(I instanceof ve.g)throw I;rn(g,"network-request-failed",{message:String(I)})}})).apply(this,arguments)}function _n(g,u,f,y){return pt.apply(this,arguments)}function pt(){return(pt=(0,k.A)(function*(g,u,f,y,I={}){const D=yield pe(g,u,f,y,I);return"mfaPendingCredential"in D&&rn(g,"multi-factor-auth-required",{_serverResponse:D}),D})).apply(this,arguments)}function ln(g,u,f,y){const I=`${u}${f}?${y}`;return g.config.emulator?yi(g.config,I):`${g.config.apiScheme}://${I}`}function ur(g){switch(g){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((f,y)=>{this.timer=setTimeout(()=>y(sn(this.auth,"network-request-failed")),Ie.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function en(g,u,f){const y={appName:g.name};f.email&&(y.email=f.email),f.phoneNumber&&(y.phoneNumber=f.phoneNumber);const I=sn(g,u,y);return I.customData._tokenResponse=f,I}function Qr(g){return void 0!==g&&void 0!==g.getResponse}function Vn(g){return void 0!==g&&void 0!==g.enterprise}class vi{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===u)return ur(f.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function tr(){return(tr=(0,k.A)(function*(g){return(yield pe(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function bi(g,u){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,k.A)(function*(g,u){return pe(g,"GET","/v2/recaptchaConfig",te(g,u))})).apply(this,arguments)}function Cc(){return(Cc=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Ac(){return(Ac=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Ri(g,u){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Pi(g){if(g)try{const u=new Date(Number(g));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function dr(){return(dr=(0,k.A)(function*(g,u=!1){const f=(0,ve.Ku)(g),y=yield f.getIdToken(u),I=Bs(y);Re(I&&I.exp&&I.auth_time&&I.iat,f.auth,"internal-error");const D="object"==typeof I.firebase?I.firebase:void 0,j=D?.sign_in_provider;return{claims:I,token:y,authTime:Pi(Na(I.auth_time)),issuedAtTime:Pi(Na(I.iat)),expirationTime:Pi(Na(I.exp)),signInProvider:j||null,signInSecondFactor:D?.sign_in_second_factor||null}})).apply(this,arguments)}function Na(g){return 1e3*Number(g)}function Bs(g){const[u,f,y]=g.split(".");if(void 0===u||void 0===f||void 0===y)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,ve.u)(f);return I?JSON.parse(I):(mn("Failed to decode base64 JWT payload"),null)}catch(I){return mn("Caught error parsing JWT payload as JSON",I?.toString()),null}}function Qo(g){const u=Bs(g);return Re(u,"internal-error"),Re(typeof u.exp<"u","internal-error"),Re(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Mi(g,u){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,k.A)(function*(g,u,f=!1){if(f)return u;try{return yield u}catch(y){throw y instanceof ve.g&&function Fa({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}(y)&&g.auth.currentUser===g&&(yield g.auth.signOut()),y}})).apply(this,arguments)}class $i{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var f;if(u){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const I=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(u=!1){var f=this;if(!this.isRunning)return;const y=this.getInterval(u);this.timerId=setTimeout((0,k.A)(function*(){yield f.iteration()}),y)}iteration(){var u=this;return(0,k.A)(function*(){try{yield u.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&u.schedule(!0))}u.schedule()})()}}class Cs{constructor(u,f){this.createdAt=u,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wi(g){return La.apply(this,arguments)}function La(){return(La=(0,k.A)(function*(g){var u;const f=g.auth,y=yield g.getIdToken(),I=yield Mi(g,Ri(f,{idToken:y}));Re(I?.users.length,f,"internal-error");const D=I.users[0];g._notifyReloadListener(D);const j=null!==(u=D.providerUserInfo)&&void 0!==u&&u.length?il(D.providerUserInfo):[],re=function cd(g,u){return[...g.filter(y=>!u.some(I=>I.providerId===y.providerId)),...u]}(g.providerData,j),et=!!g.isAnonymous&&!(g.email&&D.passwordHash||re?.length),Ze={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:re,metadata:new Cs(D.createdAt,D.lastLoginAt),isAnonymous:et};Object.assign(g,Ze)})).apply(this,arguments)}function Tc(){return(Tc=(0,k.A)(function*(g){const u=(0,ve.Ku)(g);yield Wi(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function il(g){return g.map(u=>{var{providerId:f}=u,y=(0,fn.Tt)(u,["providerId"]);return{providerId:f,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function Zo(){return(Zo=(0,k.A)(function*(g,u){const f=yield Me(g,{},(0,k.A)(function*(){const y=(0,ve.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:I,apiKey:D}=g.config,j=ln(g,I,"/v1/token",`key=${D}`),re=yield g._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Y.fetch()(j,{method:"POST",headers:re,body:y})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function U(){return(U=(0,k.A)(function*(g,u){return pe(g,"POST","/v2/accounts:revokeToken",te(g,u))})).apply(this,arguments)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){Re(u.idToken,"internal-error"),Re(typeof u.idToken<"u","internal-error"),Re(typeof u.refreshToken<"u","internal-error");const f="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):Qo(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,f)}updateFromIdToken(u){Re(0!==u.length,"internal-error");const f=Qo(u);this.updateTokensAndExpiration(u,null,f)}getToken(u,f=!1){var y=this;return(0,k.A)(function*(){return f||!y.accessToken||y.isExpired?(Re(y.refreshToken,u,"user-token-expired"),y.refreshToken?(yield y.refresh(u,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,f){var y=this;return(0,k.A)(function*(){const{accessToken:I,refreshToken:D,expiresIn:j}=yield function Dc(g,u){return Zo.apply(this,arguments)}(u,f);y.updateTokensAndExpiration(I,D,Number(j))})()}updateTokensAndExpiration(u,f,y){this.refreshToken=f||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(u,f){const{refreshToken:y,accessToken:I,expirationTime:D}=f,j=new G;return y&&(Re("string"==typeof y,"internal-error",{appName:u}),j.refreshToken=y),I&&(Re("string"==typeof I,"internal-error",{appName:u}),j.accessToken=I),D&&(Re("number"==typeof D,"internal-error",{appName:u}),j.expirationTime=D),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return er("not implemented")}}function ie(g,u){Re("string"==typeof g||typeof g>"u","internal-error",{appName:u})}class le{constructor(u){var{uid:f,auth:y,stsTokenManager:I}=u,D=(0,fn.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $i(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=y,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new Cs(D.createdAt||void 0,D.lastLoginAt||void 0)}getIdToken(u){var f=this;return(0,k.A)(function*(){const y=yield Mi(f,f.stsTokenManager.getToken(f.auth,u));return Re(y,f.auth,"internal-error"),f.accessToken!==y&&(f.accessToken=y,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),y})()}getIdTokenResult(u){return function Vs(g){return dr.apply(this,arguments)}(this,u)}reload(){return function rl(g){return Tc.apply(this,arguments)}(this)}_assign(u){this!==u&&(Re(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(f=>Object.assign({},f)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const f=new le(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(u){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,f=!1){var y=this;return(0,k.A)(function*(){let I=!1;u.idToken&&u.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(u),I=!0),f&&(yield Wi(y)),yield y.auth._persistUserIfCurrent(y),I&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var u=this;return(0,k.A)(function*(){if((0,Je._isFirebaseServerApp)(u.auth.app))return Promise.reject(ht(u.auth));const f=yield u.getIdToken();return yield Mi(u,function Ic(g,u){return Cc.apply(this,arguments)}(u.auth,{idToken:f})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,f){var y,I,D,j,re,Ce,je,et;const Ze=null!==(y=f.displayName)&&void 0!==y?y:void 0,gr=null!==(I=f.email)&&void 0!==I?I:void 0,Tr=null!==(D=f.phoneNumber)&&void 0!==D?D:void 0,$c=null!==(j=f.photoURL)&&void 0!==j?j:void 0,fp=null!==(re=f.tenantId)&&void 0!==re?re:void 0,pp=null!==(Ce=f._redirectEventId)&&void 0!==Ce?Ce:void 0,oh=null!==(je=f.createdAt)&&void 0!==je?je:void 0,nv=null!==(et=f.lastLoginAt)&&void 0!==et?et:void 0,{uid:ah,emailVerified:rv,isAnonymous:Ig,providerData:Ou,stsTokenManager:ch}=f;Re(ah&&ch,u,"internal-error");const m0=G.fromJSON(this.name,ch);Re("string"==typeof ah,u,"internal-error"),ie(Ze,u.name),ie(gr,u.name),Re("boolean"==typeof rv,u,"internal-error"),Re("boolean"==typeof Ig,u,"internal-error"),ie(Tr,u.name),ie($c,u.name),ie(fp,u.name),ie(pp,u.name),ie(oh,u.name),ie(nv,u.name);const Cg=new le({uid:ah,auth:u,email:gr,emailVerified:rv,displayName:Ze,isAnonymous:Ig,photoURL:$c,phoneNumber:Tr,tenantId:fp,stsTokenManager:m0,createdAt:oh,lastLoginAt:nv});return Ou&&Array.isArray(Ou)&&(Cg.providerData=Ou.map(mp=>Object.assign({},mp))),pp&&(Cg._redirectEventId=pp),Cg}static _fromIdTokenResponse(u,f,y=!1){return(0,k.A)(function*(){const I=new G;I.updateFromServerResponse(f);const D=new le({uid:f.localId,auth:u,stsTokenManager:I,isAnonymous:y});return yield Wi(D),D})()}static _fromGetAccountInfoResponse(u,f,y){return(0,k.A)(function*(){const I=f.users[0];Re(void 0!==I.localId,"internal-error");const D=void 0!==I.providerUserInfo?il(I.providerUserInfo):[],j=!(I.email&&I.passwordHash||D?.length),re=new G;re.updateFromIdToken(y);const Ce=new le({uid:I.localId,auth:u,stsTokenManager:re,isAnonymous:j}),je={uid:I.localId,displayName:I.displayName||null,photoURL:I.photoUrl||null,email:I.email||null,emailVerified:I.emailVerified||!1,phoneNumber:I.phoneNumber||null,tenantId:I.tenantId||null,providerData:D,metadata:new Cs(I.createdAt,I.lastLoginAt),isAnonymous:!(I.email&&I.passwordHash||D?.length)};return Object.assign(Ce,je),Ce})()}}const Qe=new Map;function Ke(g){Gn(g instanceof Function,"Expected a class definition");let u=Qe.get(g);return u?(Gn(u instanceof g,"Instance stored in cache mismatched with class"),u):(u=new g,Qe.set(g,u),u)}const Yr=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,k.A)(function*(){return!0})()}_set(f,y){var I=this;return(0,k.A)(function*(){I.storage[f]=y})()}_get(f){var y=this;return(0,k.A)(function*(){const I=y.storage[f];return void 0===I?null:I})()}_remove(f){var y=this;return(0,k.A)(function*(){delete y.storage[f]})()}_addListener(f,y){}_removeListener(f,y){}}return g.type="NONE",g})();function mt(g,u,f){return`firebase:${g}:${u}:${f}`}class kr{constructor(u,f,y){this.persistence=u,this.auth=f,this.userKey=y;const{config:I,name:D}=this.auth;this.fullUserKey=mt(this.userKey,I.apiKey,D),this.fullPersistenceKey=mt("persistence",I.apiKey,D),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,k.A)(function*(){const f=yield u.persistence._get(u.fullUserKey);return f?le._fromJSON(u.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var f=this;return(0,k.A)(function*(){if(f.persistence===u)return;const y=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=u,y?f.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,f,y="authUser"){return(0,k.A)(function*(){if(!f.length)return new kr(Ke(Yr),u,y);const I=(yield Promise.all(f.map(function(){var je=(0,k.A)(function*(et){if(yield et._isAvailable())return et});return function(et){return je.apply(this,arguments)}}()))).filter(je=>je);let D=I[0]||Ke(Yr);const j=mt(y,u.config.apiKey,u.name);let re=null;for(const je of f)try{const et=yield je._get(j);if(et){const Ze=le._fromJSON(u,et);je!==D&&(re=Ze),D=je;break}}catch{}const Ce=I.filter(je=>je._shouldAllowMigration);return D._shouldAllowMigration&&Ce.length?(D=Ce[0],re&&(yield D._set(j,re.toJSON())),yield Promise.all(f.map(function(){var je=(0,k.A)(function*(et){if(et!==D)try{yield et._remove(j)}catch{}});return function(et){return je.apply(this,arguments)}}())),new kr(D,u,y)):new kr(D,u,y)})()}}function gt(g){const u=g.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(bt(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Ei(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(sl(u))return"Blackberry";if(ff(u))return"Webos";if(Co(u))return"Safari";if((u.includes("chrome/")||wn(u))&&!u.includes("edge/"))return"Chrome";if(Ao(u))return"Android";{const y=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Ei(g=(0,ve.ZQ)()){return/firefox\//i.test(g)}function Co(g=(0,ve.ZQ)()){const u=g.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function wn(g=(0,ve.ZQ)()){return/crios\//i.test(g)}function bt(g=(0,ve.ZQ)()){return/iemobile/i.test(g)}function Ao(g=(0,ve.ZQ)()){return/android/i.test(g)}function sl(g=(0,ve.ZQ)()){return/blackberry/i.test(g)}function ff(g=(0,ve.ZQ)()){return/webos/i.test(g)}function Xo(g=(0,ve.ZQ)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function fe(g=(0,ve.ZQ)()){return Xo(g)||Ao(g)||ff(g)||sl(g)||/windows phone/i.test(g)||bt(g)}function $e(g,u=[]){let f;switch(g){case"Browser":f=gt((0,ve.ZQ)());break;case"Worker":f=`${gt((0,ve.ZQ)())}-${g}`;break;default:f=g}const y=u.length?u.join(","):"FirebaseCore-web";return`${f}/JsCore/${Je.SDK_VERSION}/${y}`}class St{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,f){const y=D=>new Promise((j,re)=>{try{j(u(D))}catch(Ce){re(Ce)}});y.onAbort=f,this.queue.push(y);const I=this.queue.length-1;return()=>{this.queue[I]=()=>Promise.resolve()}}runMiddleware(u){var f=this;return(0,k.A)(function*(){if(f.auth.currentUser===u)return;const y=[];try{for(const I of f.queue)yield I(u),I.onAbort&&y.push(I.onAbort)}catch(I){y.reverse();for(const D of y)try{D()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:I?.message})}})()}}function kt(){return(kt=(0,k.A)(function*(g,u={}){return pe(g,"GET","/v2/passwordPolicy",te(g,u))})).apply(this,arguments)}class hr{constructor(u){var f,y,I,D;const j=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=j.minPasswordLength)&&void 0!==f?f:6,j.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=j.maxPasswordLength),void 0!==j.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=j.containsLowercaseCharacter),void 0!==j.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=j.containsUppercaseCharacter),void 0!==j.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=j.containsNumericCharacter),void 0!==j.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=j.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(I=null===(y=u.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==I?I:"",this.forceUpgradeOnSignin=null!==(D=u.forceUpgradeOnSignin)&&void 0!==D&&D,this.schemaVersion=u.schemaVersion}validatePassword(u){var f,y,I,D,j,re;const Ce={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,Ce),this.validatePasswordCharacterOptions(u,Ce),Ce.isValid&&(Ce.isValid=null===(f=Ce.meetsMinPasswordLength)||void 0===f||f),Ce.isValid&&(Ce.isValid=null===(y=Ce.meetsMaxPasswordLength)||void 0===y||y),Ce.isValid&&(Ce.isValid=null===(I=Ce.containsLowercaseLetter)||void 0===I||I),Ce.isValid&&(Ce.isValid=null===(D=Ce.containsUppercaseLetter)||void 0===D||D),Ce.isValid&&(Ce.isValid=null===(j=Ce.containsNumericCharacter)||void 0===j||j),Ce.isValid&&(Ce.isValid=null===(re=Ce.containsNonAlphanumericCharacter)||void 0===re||re),Ce}validatePasswordLengthOptions(u,f){const y=this.customStrengthOptions.minPasswordLength,I=this.customStrengthOptions.maxPasswordLength;y&&(f.meetsMinPasswordLength=u.length>=y),I&&(f.meetsMaxPasswordLength=u.length<=I)}validatePasswordCharacterOptions(u,f){let y;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let I=0;I<u.length;I++)y=u.charAt(I),this.updatePasswordCharacterOptionsStatuses(f,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(u,f,y,I,D){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=I)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=D))}}class As{constructor(u,f,y,I){this.app=u,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=y,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new To(this),this.idTokenSubscription=new To(this),this.beforeStateQueue=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(u,f){var y=this;return f&&(this._popupRedirectResolver=Ke(f)),this._initializationPromise=this.queue((0,k.A)(function*(){var I,D;if(!y._deleted&&(y.persistenceManager=yield kr.create(y,u),!y._deleted)){if(null!==(I=y._popupRedirectResolver)&&void 0!==I&&I._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(f),y.lastNotifiedUid=(null===(D=y.currentUser)||void 0===D?void 0:D.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,k.A)(function*(){if(u._deleted)return;const f=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||f){if(u.currentUser&&f&&u.currentUser.uid===f.uid)return u._currentUser._assign(f),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(u){var f=this;return(0,k.A)(function*(){try{const y=yield Ri(f,{idToken:u}),I=yield le._fromGetAccountInfoResponse(f,y,u);yield f.directlySetCurrentUser(I)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var f=this;return(0,k.A)(function*(){var y;if((0,Je._isFirebaseServerApp)(f.app)){const re=f.app.settings.authIdToken;return re?new Promise(Ce=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(re).then(Ce,Ce))}):f.directlySetCurrentUser(null)}const I=yield f.assertedPersistence.getCurrentUser();let D=I,j=!1;if(u&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const re=null===(y=f.redirectUser)||void 0===y?void 0:y._redirectEventId,Ce=D?._redirectEventId,je=yield f.tryRedirectSignIn(u);(!re||re===Ce)&&je?.user&&(D=je.user,j=!0)}if(!D)return f.directlySetCurrentUser(null);if(!D._redirectEventId){if(j)try{yield f.beforeStateQueue.runMiddleware(D)}catch(re){D=I,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(re))}return D?f.reloadAndSetCurrentUserOrClear(D):f.directlySetCurrentUser(null)}return Re(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===D._redirectEventId?f.directlySetCurrentUser(D):f.reloadAndSetCurrentUserOrClear(D)})()}tryRedirectSignIn(u){var f=this;return(0,k.A)(function*(){let y=null;try{y=yield f._popupRedirectResolver._completeRedirectFn(f,u,!0)}catch{yield f._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(u){var f=this;return(0,k.A)(function*(){try{yield Wi(u)}catch(y){if("auth/network-request-failed"!==y?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function nl(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var u=this;return(0,k.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var f=this;return(0,k.A)(function*(){if((0,Je._isFirebaseServerApp)(f.app))return Promise.reject(ht(f));const y=u?(0,ve.Ku)(u):null;return y&&Re(y.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(y&&y._clone(f))})()}_updateCurrentUser(u,f=!1){var y=this;return(0,k.A)(function*(){if(!y._deleted)return u&&Re(y.tenantId===u.tenantId,y,"tenant-id-mismatch"),f||(yield y.beforeStateQueue.runMiddleware(u)),y.queue((0,k.A)(function*(){yield y.directlySetCurrentUser(u),y.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,k.A)(function*(){return(0,Je._isFirebaseServerApp)(u.app)?Promise.reject(ht(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var f=this;return(0,Je._isFirebaseServerApp)(this.app)?Promise.reject(ht(this)):this.queue((0,k.A)(function*(){yield f.assertedPersistence.setPersistence(Ke(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var f=this;return(0,k.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const y=f._getPasswordPolicyInternal();return y.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,k.A)(function*(){const f=yield function Rt(g){return kt.apply(this,arguments)}(u),y=new hr(f);null===u.tenantId?u._projectPasswordPolicy=y:u._tenantPasswordPolicies[u.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new ve.FA("auth","Firebase",u())}onAuthStateChanged(u,f,y){return this.registerStateListener(this.authStateSubscription,u,f,y)}beforeAuthStateChanged(u,f){return this.beforeStateQueue.pushCallback(u,f)}onIdTokenChanged(u,f,y){return this.registerStateListener(this.idTokenSubscription,u,f,y)}authStateReady(){return new Promise((u,f)=>{if(this.currentUser)u();else{const y=this.onAuthStateChanged(()=>{y(),u()},f)}})}revokeAccessToken(u){var f=this;return(0,k.A)(function*(){if(f.currentUser){const y=yield f.currentUser.getIdToken(),I={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:y};null!=f.tenantId&&(I.tenantId=f.tenantId),yield function V(g,u){return U.apply(this,arguments)}(f,I)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,f){var y=this;return(0,k.A)(function*(){const I=yield y.getOrInitRedirectPersistenceManager(f);return null===u?I.removeCurrentUser():I.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var f=this;return(0,k.A)(function*(){if(!f.redirectPersistenceManager){const y=u&&Ke(u)||f._popupRedirectResolver;Re(y,f,"argument-error"),f.redirectPersistenceManager=yield kr.create(f,[Ke(y._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(u){var f=this;return(0,k.A)(function*(){var y,I;return f._isInitialized&&(yield f.queue((0,k.A)(function*(){}))),(null===(y=f._currentUser)||void 0===y?void 0:y._redirectEventId)===u?f._currentUser:(null===(I=f.redirectUser)||void 0===I?void 0:I._redirectEventId)===u?f.redirectUser:null})()}_persistUserIfCurrent(u){var f=this;return(0,k.A)(function*(){if(u===f.currentUser)return f.queue((0,k.A)(function*(){return f.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(f=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,f,y,I){if(this._deleted)return()=>{};const D="function"==typeof f?f:f.next.bind(f);let j=!1;const re=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(re,this,"internal-error"),re.then(()=>{j||D(this.currentUser)}),"function"==typeof f){const Ce=u.addObserver(f,y,I);return()=>{j=!0,Ce()}}{const Ce=u.addObserver(f);return()=>{j=!0,Ce()}}}directlySetCurrentUser(u){var f=this;return(0,k.A)(function*(){f.currentUser&&f.currentUser!==u&&f._currentUser._stopProactiveRefresh(),u&&f.isProactiveRefreshEnabled&&u._startProactiveRefresh(),f.currentUser=u,u?yield f.assertedPersistence.setCurrentUser(u):yield f.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=$e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,k.A)(function*(){var f;const y={"X-Client-Version":u.clientVersion};u.app.options.appId&&(y["X-Firebase-gmpid"]=u.app.options.appId);const I=yield null===(f=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();I&&(y["X-Firebase-Client"]=I);const D=yield u._getAppCheckToken();return D&&(y["X-Firebase-AppCheck"]=D),y})()}_getAppCheckToken(){var u=this;return(0,k.A)(function*(){var f;const y=yield null===(f=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return y?.error&&function br(g,...u){Wn.logLevel<=Bt.$b.WARN&&Wn.warn(`Auth (${Je.SDK_VERSION}): ${g}`,...u)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function Cn(g){return(0,ve.Ku)(g)}class To{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,ve.tD)(f=>this.observer=f)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gl={loadJS:()=>(0,k.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pf(g){return Gl.loadJS(g)}function ql(g){return`__${g}${Math.floor(1e6*Math.random())}`}class Et{constructor(u){this.type="recaptcha-enterprise",this.auth=Cn(u)}verify(u="verify",f=!1){var y=this;return(0,k.A)(function*(){function D(){return D=(0,k.A)(function*(re){if(!f){if(null==re.tenantId&&null!=re._agentRecaptchaConfig)return re._agentRecaptchaConfig.siteKey;if(null!=re.tenantId&&void 0!==re._tenantRecaptchaConfigs[re.tenantId])return re._tenantRecaptchaConfigs[re.tenantId].siteKey}return new Promise(function(){var Ce=(0,k.A)(function*(je,et){bi(re,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ze=>{if(void 0!==Ze.recaptchaKey){const gr=new vi(Ze);return null==re.tenantId?re._agentRecaptchaConfig=gr:re._tenantRecaptchaConfigs[re.tenantId]=gr,je(gr.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(Ze=>{et(Ze)})});return function(je,et){return Ce.apply(this,arguments)}}())}),D.apply(this,arguments)}function j(re,Ce,je){const et=window.grecaptcha;Vn(et)?et.enterprise.ready(()=>{et.enterprise.execute(re,{action:u}).then(Ze=>{Ce(Ze)}).catch(()=>{Ce("NO_RECAPTCHA")})}):je(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((re,Ce)=>{(function I(re){return D.apply(this,arguments)})(y.auth).then(je=>{if(!f&&Vn(window.grecaptcha))j(je,re,Ce);else{if(typeof window>"u")return void Ce(new Error("RecaptchaVerifier is only supported in browser"));let et=function My(){return Gl.recaptchaEnterpriseScript}();0!==et.length&&(et+=je),pf(et).then(()=>{j(je,re,Ce)}).catch(Ze=>{Ce(Ze)})}}).catch(je=>{Ce(je)})})})()}}function Dm(g,u,f){return ld.apply(this,arguments)}function ld(){return(ld=(0,k.A)(function*(g,u,f,y=!1){const I=new Et(g);let D;try{D=yield I.verify(f)}catch{D=yield I.verify(f,!0)}const j=Object.assign({},u);return Object.assign(j,y?{captchaResp:D}:{captchaResponse:D}),Object.assign(j,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(j,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),j})).apply(this,arguments)}function ud(g,u,f,y){return Ue.apply(this,arguments)}function Ue(){return Ue=(0,k.A)(function*(g,u,f,y){var I;if(null!==(I=g._getRecaptchaConfig())&&void 0!==I&&I.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const D=yield Dm(g,u,f,"getOobCode"===f);return y(g,D)}return y(g,u).catch(function(){var D=(0,k.A)(function*(j){if("auth/missing-recaptcha-token"===j.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const re=yield Dm(g,u,f,"getOobCode"===f);return y(g,re)}return Promise.reject(j)});return function(j){return D.apply(this,arguments)}}())}),Ue.apply(this,arguments)}function Rm(g){const u=g.indexOf(":");return u<0?"":g.substr(0,u+1)}function ol(g){if(!g)return null;const u=Number(g);return isNaN(u)?null:u}class Va{constructor(u,f){this.providerId=u,this.signInMethod=f}toJSON(){return er("not implemented")}_getIdTokenResponse(u){return er("not implemented")}_linkToIdToken(u,f){return er("not implemented")}_getReauthenticationResolver(u){return er("not implemented")}}function Pm(g,u){return qt.apply(this,arguments)}function qt(){return(qt=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:resetPassword",te(g,u))})).apply(this,arguments)}function Ql(){return(Ql=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ls(g,u){return fd.apply(this,arguments)}function fd(){return(fd=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function Mn(){return(Mn=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:update",te(g,u))})).apply(this,arguments)}function Mm(g,u){return km.apply(this,arguments)}function km(){return(km=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithPassword",te(g,u))})).apply(this,arguments)}function ke(g,u){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:sendOobCode",te(g,u))})).apply(this,arguments)}function pd(){return(pd=(0,k.A)(function*(g,u){return ke(g,u)})).apply(this,arguments)}function Un(g,u){return kn.apply(this,arguments)}function kn(){return(kn=(0,k.A)(function*(g,u){return ke(g,u)})).apply(this,arguments)}function _f(g,u){return Om.apply(this,arguments)}function Om(){return(Om=(0,k.A)(function*(g,u){return ke(g,u)})).apply(this,arguments)}function Nm(){return(Nm=(0,k.A)(function*(g,u){return ke(g,u)})).apply(this,arguments)}function Fm(){return(Fm=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithEmailLink",te(g,u))})).apply(this,arguments)}function Zl(){return(Zl=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithEmailLink",te(g,u))})).apply(this,arguments)}class rr extends Va{constructor(u,f,y,I=null){super("password",y),this._email=u,this._password=f,this._tenantId=I}static _fromEmailAndPassword(u,f){return new rr(u,f,"password")}static _fromEmailAndCode(u,f,y=null){return new rr(u,f,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(u){var f=this;return(0,k.A)(function*(){switch(f.signInMethod){case"password":return ud(u,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mm);case"emailLink":return function c0(g,u){return Fm.apply(this,arguments)}(u,{email:f._email,oobCode:f._password});default:rn(u,"internal-error")}})()}_linkToIdToken(u,f){var y=this;return(0,k.A)(function*(){switch(y.signInMethod){case"password":return ud(u,{idToken:f,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ls);case"emailLink":return function al(g,u){return Zl.apply(this,arguments)}(u,{idToken:f,email:y._email,oobCode:y._password});default:rn(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Do(g,u){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithIdp",te(g,u))})).apply(this,arguments)}class Ts extends Va{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const f=new Ts(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(f.idToken=u.idToken),u.accessToken&&(f.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(f.nonce=u.nonce),u.pendingToken&&(f.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(f.accessToken=u.oauthToken,f.secret=u.oauthTokenSecret):rn("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u,{providerId:y,signInMethod:I}=f,D=(0,fn.Tt)(f,["providerId","signInMethod"]);if(!y||!I)return null;const j=new Ts(y,I);return j.idToken=D.idToken||void 0,j.accessToken=D.accessToken||void 0,j.secret=D.secret,j.nonce=D.nonce,j.pendingToken=D.pendingToken||null,j}_getIdTokenResponse(u){return Do(u,this.buildRequest())}_linkToIdToken(u,f){const y=this.buildRequest();return y.idToken=f,Do(u,y)}_getReauthenticationResolver(u){const f=this.buildRequest();return f.autoCreate=!1,Do(u,f)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),u.postBody=(0,ve.Am)(f)}return u}}function md(){return(md=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:sendVerificationCode",te(g,u))})).apply(this,arguments)}function gd(){return(gd=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithPhoneNumber",te(g,u))})).apply(this,arguments)}function Xl(){return(Xl=(0,k.A)(function*(g,u){const f=yield _n(g,"POST","/v1/accounts:signInWithPhoneNumber",te(g,u));if(f.temporaryProof)throw en(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Ge={USER_NOT_FOUND:"user-not-found"};function Jl(){return(Jl=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithPhoneNumber",te(g,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Ge)})).apply(this,arguments)}class Er extends Va{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,f){return new Er({verificationId:u,verificationCode:f})}static _fromTokenResponse(u,f){return new Er({phoneNumber:u,temporaryProof:f})}_getIdTokenResponse(u){return function ea(g,u){return gd.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,f){return function he(g,u){return Xl.apply(this,arguments)}(u,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function ki(g,u){return Jl.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:f,verificationId:y,verificationCode:I}=this.params;return u&&f?{temporaryProof:u,phoneNumber:f}:{sessionInfo:y,code:I}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:f,verificationCode:y,phoneNumber:I,temporaryProof:D}=u;return y||f||I||D?new Er({verificationId:f,verificationCode:y,phoneNumber:I,temporaryProof:D}):null}}class js{constructor(u){var f,y,I,D,j,re;const Ce=(0,ve.I9)((0,ve.hp)(u)),je=null!==(f=Ce.apiKey)&&void 0!==f?f:null,et=null!==(y=Ce.oobCode)&&void 0!==y?y:null,Ze=function Ny(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=Ce.mode)&&void 0!==I?I:null);Re(je&&et&&Ze,"argument-error"),this.apiKey=je,this.operation=Ze,this.code=et,this.continueUrl=null!==(D=Ce.continueUrl)&&void 0!==D?D:null,this.languageCode=null!==(j=Ce.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(re=Ce.tenantId)&&void 0!==re?re:null}static parseLink(u){const f=function Vm(g){const u=(0,ve.I9)((0,ve.hp)(g)).link,f=u?(0,ve.I9)((0,ve.hp)(u)).deep_link_id:null,y=(0,ve.I9)((0,ve.hp)(g)).deep_link_id;return(y?(0,ve.I9)((0,ve.hp)(y)).link:null)||y||f||u||g}(u);try{return new js(f)}catch{return null}}}let Ba=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,y){return rr._fromEmailAndPassword(f,y)}static credentialWithLink(f,y){const I=js.parseLink(y);return Re(I,"argument-error"),rr._fromEmailAndCode(f,I.code,I.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Ft{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class wr extends Ft{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Kt extends wr{static credentialFromJSON(u){const f="string"==typeof u?JSON.parse(u):u;return Re("providerId"in f&&"signInMethod"in f,"argument-error"),Ts._fromParams(f)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return Re(u.idToken||u.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Kt.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Kt.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:f,oauthAccessToken:y,oauthTokenSecret:I,pendingToken:D,nonce:j,providerId:re}=u;if(!y&&!I&&!f&&!D||!re)return null;try{return new Kt(re)._credential({idToken:f,accessToken:y,nonce:j,pendingToken:D})}catch{return null}}}let eu=(()=>{class g extends wr{constructor(){super("facebook.com")}static credential(f){return Ts._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),cl=(()=>{class g extends wr{constructor(){super("google.com"),this.addScope("profile")}static credential(f,y){return Ts._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:y})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:y,oauthAccessToken:I}=f;if(!y&&!I)return null;try{return g.credential(y,I)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),_d=(()=>{class g extends wr{constructor(){super("github.com")}static credential(f){return Ts._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class us extends Va{constructor(u,f){super(u,u),this.pendingToken=f}_getIdTokenResponse(u){return Do(u,this.buildRequest())}_linkToIdToken(u,f){const y=this.buildRequest();return y.idToken=f,Do(u,y)}_getReauthenticationResolver(u){const f=this.buildRequest();return f.autoCreate=!1,Do(u,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const f="string"==typeof u?JSON.parse(u):u,{providerId:y,signInMethod:I,pendingToken:D}=f;return y&&I&&D&&y===I?new us(y,D):null}static _create(u,f){return new us(u,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ua extends Ft{constructor(u){Re(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return Ua.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return Ua.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const f=us.fromJSON(u);return Re(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:f,providerId:y}=u;if(!f||!y)return null;try{return us._create(y,f)}catch{return null}}}let ja=(()=>{class g extends wr{constructor(){super("twitter.com")}static credential(f,y){return Ts._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:y})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:y,oauthTokenSecret:I}=f;if(!y||!I)return null;try{return g.credential(y,I)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function yd(g,u){return tu.apply(this,arguments)}function tu(){return(tu=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signUp",te(g,u))})).apply(this,arguments)}class ds{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,f,y,I=!1){return(0,k.A)(function*(){const D=yield le._fromIdTokenResponse(u,y,I),j=Ha(y);return new ds({user:D,providerId:j,_tokenResponse:y,operationType:f})})()}static _forOperation(u,f,y){return(0,k.A)(function*(){yield u._updateTokensIfNecessary(y,!0);const I=Ha(y);return new ds({user:u,providerId:I,_tokenResponse:y,operationType:f})})()}}function Ha(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function nu(){return(nu=(0,k.A)(function*(g){var u;if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const f=Cn(g);if(yield f._initializationPromise,null!==(u=f.currentUser)&&void 0!==u&&u.isAnonymous)return new ds({user:f.currentUser,providerId:null,operationType:"signIn"});const y=yield yd(f,{returnSecureToken:!0}),I=yield ds._fromIdTokenResponse(f,"signIn",y,!0);return yield f._updateCurrentUser(I.user),I})).apply(this,arguments)}class bd extends ve.g{constructor(u,f,y,I){var D;super(f.code,f.message),this.operationType=y,this.user=I,Object.setPrototypeOf(this,bd.prototype),this.customData={appName:u.name,tenantId:null!==(D=u.tenantId)&&void 0!==D?D:void 0,_serverResponse:f.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(u,f,y,I){return new bd(u,f,y,I)}}function ru(g,u,f,y){return("reauthenticate"===u?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(D=>{throw"auth/multi-factor-auth-required"===D.code?bd._fromErrorAndOperation(g,D,u,y):D})}function Ed(g){return new Set(g.map(({providerId:u})=>u).filter(u=>!!u))}function hs(){return hs=(0,k.A)(function*(g,u){const f=(0,ve.Ku)(g);yield za(!0,f,u);const{providerUserInfo:y}=yield function cs(g,u){return Ac.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[u]}),I=Ed(y||[]);return f.providerData=f.providerData.filter(D=>I.has(D.providerId)),I.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),hs.apply(this,arguments)}function Gi(g,u){return ul.apply(this,arguments)}function ul(){return(ul=(0,k.A)(function*(g,u,f=!1){const y=yield Mi(g,u._linkToIdToken(g.auth,yield g.getIdToken()),f);return ds._forOperation(g,"link",y)})).apply(this,arguments)}function za(g,u,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,k.A)(function*(g,u,f){yield Wi(u);const I=!1===g?"provider-already-linked":"no-such-provider";Re(Ed(u.providerData).has(f)===g,u.auth,I)})).apply(this,arguments)}function yf(g,u){return vf.apply(this,arguments)}function vf(){return(vf=(0,k.A)(function*(g,u,f=!1){const{auth:y}=g;if((0,Je._isFirebaseServerApp)(y.app))return Promise.reject(ht(y));const I="reauthenticate";try{const D=yield Mi(g,ru(y,I,u,g),f);Re(D.idToken,y,"internal-error");const j=Bs(D.idToken);Re(j,y,"internal-error");const{sub:re}=j;return Re(g.uid===re,y,"user-mismatch"),ds._forOperation(g,I,D)}catch(D){throw"auth/user-not-found"===D?.code&&rn(y,"user-mismatch"),D}})).apply(this,arguments)}function bf(g,u){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,k.A)(function*(g,u,f=!1){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y="signIn",I=yield ru(g,y,u),D=yield ds._fromIdTokenResponse(g,y,I);return f||(yield g._updateCurrentUser(D.user)),D})).apply(this,arguments)}function Id(g,u){return wf.apply(this,arguments)}function wf(){return(wf=(0,k.A)(function*(g,u){return bf(Cn(g),u)})).apply(this,arguments)}function Zr(g,u){return If.apply(this,arguments)}function If(){return(If=(0,k.A)(function*(g,u){const f=(0,ve.Ku)(g);return yield za(!1,f,u.providerId),Gi(f,u)})).apply(this,arguments)}function Um(g,u){return iu.apply(this,arguments)}function iu(){return(iu=(0,k.A)(function*(g,u){return yf((0,ve.Ku)(g),u)})).apply(this,arguments)}function So(){return(So=(0,k.A)(function*(g,u){return _n(g,"POST","/v1/accounts:signInWithCustomToken",te(g,u))})).apply(this,arguments)}function Ye(){return Ye=(0,k.A)(function*(g,u){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const f=Cn(g),y=yield function On(g,u){return So.apply(this,arguments)}(f,{token:u,returnSecureToken:!0}),I=yield ds._fromIdTokenResponse(f,"signIn",y);return yield f._updateCurrentUser(I.user),I}),Ye.apply(this,arguments)}class li{constructor(u,f){this.factorId=u,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(u,f){return"phoneInfo"in f?on._fromServerResponse(u,f):"totpInfo"in f?ir._fromServerResponse(u,f):rn(u,"internal-error")}}class on extends li{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,f){return new on(f)}}class ir extends li{constructor(u){super("totp",u)}static _fromServerResponse(u,f){return new ir(f)}}function Nn(g,u,f){var y;Re((null===(y=f.url)||void 0===y?void 0:y.length)>0,g,"invalid-continue-uri"),Re(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),u.continueUrl=f.url,u.dynamicLinkDomain=f.dynamicLinkDomain,u.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(Re(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),u.iOSBundleId=f.iOS.bundleId),f.android&&(Re(f.android.packageName.length>0,g,"missing-android-pkg-name"),u.androidInstallApp=f.android.installApp,u.androidMinimumVersionCode=f.android.minimumVersion,u.androidPackageName=f.android.packageName)}function ta(g){return qi.apply(this,arguments)}function qi(){return(qi=(0,k.A)(function*(g){const u=Cn(g);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function Cd(){return(Cd=(0,k.A)(function*(g,u,f){const y=Cn(g),I={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};f&&Nn(y,I,f),yield ud(y,I,"getOobCode",Un)})).apply(this,arguments)}function Cf(){return Cf=(0,k.A)(function*(g,u,f){yield Pm((0,ve.Ku)(g),{oobCode:u,newPassword:f}).catch(function(){var y=(0,k.A)(function*(I){throw"auth/password-does-not-meet-requirements"===I.code&&ta(g),I});return function(I){return y.apply(this,arguments)}}())}),Cf.apply(this,arguments)}function Q(){return Q=(0,k.A)(function*(g,u){yield function o0(g,u){return Mn.apply(this,arguments)}((0,ve.Ku)(g),{oobCode:u})}),Q.apply(this,arguments)}function Z(g,u){return ee.apply(this,arguments)}function ee(){return(ee=(0,k.A)(function*(g,u){const f=(0,ve.Ku)(g),y=yield Pm(f,{oobCode:u}),I=y.requestType;switch(Re(I,f,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Re(y.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Re(y.mfaInfo,f,"internal-error");default:Re(y.email,f,"internal-error")}let D=null;return y.mfaInfo&&(D=li._fromServerResponse(Cn(f),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:D},operation:I}})).apply(this,arguments)}function ct(){return(ct=(0,k.A)(function*(g,u){const{data:f}=yield Z((0,ve.Ku)(g),u);return f.email})).apply(this,arguments)}function an(){return(an=(0,k.A)(function*(g,u,f){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y=Cn(g),j=yield ud(y,{returnSecureToken:!0,email:u,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yd).catch(Ce=>{throw"auth/password-does-not-meet-requirements"===Ce.code&&ta(g),Ce}),re=yield ds._fromIdTokenResponse(y,"signIn",j);return yield y._updateCurrentUser(re.user),re})).apply(this,arguments)}function xo(){return(xo=(0,k.A)(function*(g,u,f){const y=Cn(g),I={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function D(j,re){Re(re.handleCodeInApp,y,"argument-error"),re&&Nn(y,j,re)})(I,f),yield ud(y,I,"getOobCode",_f)})).apply(this,arguments)}function xc(){return(xc=(0,k.A)(function*(g,u,f){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y=(0,ve.Ku)(g),I=Ba.credentialWithLink(u,f||os());return Re(I._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),Id(y,I)})).apply(this,arguments)}function ro(){return(ro=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:createAuthUri",te(g,u))})).apply(this,arguments)}function dn(){return dn=(0,k.A)(function*(g,u){const y={identifier:u,continueUri:Fs()?os():"http://localhost"},{signinMethods:I}=yield function Rc(g,u){return ro.apply(this,arguments)}((0,ve.Ku)(g),y);return I||[]}),dn.apply(this,arguments)}function Ds(){return Ds=(0,k.A)(function*(g,u){const f=(0,ve.Ku)(g),I={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};u&&Nn(f.auth,I,u);const{email:D}=yield function gf(g,u){return pd.apply(this,arguments)}(f.auth,I);D!==g.email&&(yield g.reload())}),Ds.apply(this,arguments)}function Dd(){return Dd=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g),D={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:u};f&&Nn(y.auth,D,f);const{email:j}=yield function a0(g,u){return Nm.apply(this,arguments)}(y.auth,D);j!==g.email&&(yield g.reload())}),Dd.apply(this,arguments)}function io(){return(io=(0,k.A)(function*(g,u){return pe(g,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function fs(){return fs=(0,k.A)(function*(g,{displayName:u,photoURL:f}){if(void 0===u&&void 0===f)return;const y=(0,ve.Ku)(g),D={idToken:yield y.getIdToken(),displayName:u,photoUrl:f,returnSecureToken:!0},j=yield Mi(y,function Wa(g,u){return io.apply(this,arguments)}(y.auth,D));y.displayName=j.displayName||null,y.photoURL=j.photoUrl||null;const re=y.providerData.find(({providerId:Ce})=>"password"===Ce);re&&(re.displayName=y.displayName,re.photoURL=y.photoURL),yield y._updateTokensIfNecessary(j)}),fs.apply(this,arguments)}function Pc(g,u,f){return ou.apply(this,arguments)}function ou(){return ou=(0,k.A)(function*(g,u,f){const{auth:y}=g,D={idToken:yield g.getIdToken(),returnSecureToken:!0};u&&(D.email=u),f&&(D.password=f);const j=yield Mi(g,function mf(g,u){return Ql.apply(this,arguments)}(y,D));yield g._updateTokensIfNecessary(j,!0)}),ou.apply(this,arguments)}class Hs{constructor(u,f,y={}){this.isNewUser=u,this.providerId=f,this.profile=y}}class qa extends Hs{constructor(u,f,y,I){super(u,f,y),this.username=I}}class na extends Hs{constructor(u,f){super(u,"facebook.com",f)}}class pr extends qa{constructor(u,f){super(u,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Af extends Hs{constructor(u,f){super(u,"google.com",f)}}class ps extends qa{constructor(u,f,y){super(u,"twitter.com",f,y)}}function Ki(g){const{user:u,_tokenResponse:f}=g;return u.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function so(g){var u,f;if(!g)return null;const{providerId:y}=g,I=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},D=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!y&&g?.idToken){const j=null===(f=null===(u=Bs(g.idToken))||void 0===u?void 0:u.firebase)||void 0===f?void 0:f.sign_in_provider;if(j)return new Hs(D,"anonymous"!==j&&"custom"!==j?j:null)}if(!y)return null;switch(y){case"facebook.com":return new na(D,I);case"github.com":return new pr(D,I);case"google.com":return new Af(D,I);case"twitter.com":return new ps(D,I,g.screenName||null);case"custom":case"anonymous":return new Hs(D,null);default:return new Hs(D,y,I)}}(f)}class fl{constructor(u,f,y){this.type=u,this.credential=f,this.user=y}static _fromIdtoken(u,f){return new fl("enroll",u,f)}static _fromMfaPendingCredential(u){return new fl("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var f,y;if(u?.multiFactorSession){if(null!==(f=u.multiFactorSession)&&void 0!==f&&f.pendingCredential)return fl._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(y=u.multiFactorSession)&&void 0!==y&&y.idToken)return fl._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Sd{constructor(u,f,y){this.session=u,this.hints=f,this.signInResolver=y}static _fromError(u,f){const y=Cn(u),I=f.customData._serverResponse,D=(I.mfaInfo||[]).map(re=>li._fromServerResponse(y,re));Re(I.mfaPendingCredential,y,"internal-error");const j=fl._fromMfaPendingCredential(I.mfaPendingCredential);return new Sd(j,D,function(){var re=(0,k.A)(function*(Ce){const je=yield Ce._process(y,j);delete I.mfaInfo,delete I.mfaPendingCredential;const et=Object.assign(Object.assign({},I),{idToken:je.idToken,refreshToken:je.refreshToken});switch(f.operationType){case"signIn":const Ze=yield ds._fromIdTokenResponse(y,f.operationType,et);return yield y._updateCurrentUser(Ze.user),Ze;case"reauthenticate":return Re(f.user,y,"internal-error"),ds._forOperation(f.user,f.operationType,et);default:rn(y,"internal-error")}});return function(Ce){return re.apply(this,arguments)}}())}resolveSignIn(u){var f=this;return(0,k.A)(function*(){return f.signInResolver(u)})()}}class Mc{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(y=>li._fromServerResponse(u.auth,y)))})}static _fromUser(u){return new Mc(u)}getSession(){var u=this;return(0,k.A)(function*(){return fl._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,f){var y=this;return(0,k.A)(function*(){const I=u,D=yield y.getSession(),j=yield Mi(y.user,I._process(y.user.auth,D,f));return yield y.user._updateTokensIfNecessary(j),y.user.reload()})()}unenroll(u){var f=this;return(0,k.A)(function*(){const y="string"==typeof u?u:u.uid,I=yield f.user.getIdToken();try{const D=yield Mi(f.user,function xf(g,u){return pe(g,"POST","/v2/accounts/mfaEnrollment:withdraw",te(g,u))}(f.user.auth,{idToken:I,mfaEnrollmentId:y}));f.enrolledFactors=f.enrolledFactors.filter(({uid:j})=>j!==y),yield f.user._updateTokensIfNecessary(D),yield f.user.reload()}catch(D){throw D}})()}}const Pd=new WeakMap,Rf="__sak";class Vy{constructor(u,f){this.storageRetriever=u,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,f){return this.storage.setItem(u,JSON.stringify(f)),Promise.resolve()}_get(u){const f=this.storage.getItem(u);return Promise.resolve(f?JSON.parse(f):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const Md=(()=>{class g extends Vy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,y)=>this.onStorageEvent(f,y),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fe(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const y of Object.keys(this.listeners)){const I=this.storage.getItem(y),D=this.localCache[y];I!==D&&f(y,D,I)}}onStorageEvent(f,y=!1){if(!f.key)return void this.forAllChangedKeys((re,Ce,je)=>{this.notifyListeners(re,je)});const I=f.key;y?this.detachListener():this.stopPolling();const D=()=>{const re=this.storage.getItem(I);!y&&this.localCache[I]===re||this.notifyListeners(I,re)},j=this.storage.getItem(I);!function z(){return(0,ve.lT)()&&10===document.documentMode}()||j===f.newValue||f.newValue===f.oldValue?D():setTimeout(D,10)}notifyListeners(f,y){this.localCache[f]=y;const I=this.listeners[f];if(I)for(const D of Array.from(I))D(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,y,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:y,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,y){var I=()=>super._set,D=this;return(0,k.A)(function*(){yield I().call(D,f,y),D.localCache[f]=JSON.stringify(y)})()}_get(f){var y=()=>super._get,I=this;return(0,k.A)(function*(){const D=yield y().call(I,f);return I.localCache[f]=JSON.stringify(D),D})()}_remove(f){var y=()=>super._remove,I=this;return(0,k.A)(function*(){yield y().call(I,f),delete I.localCache[f]})()}}return g.type="LOCAL",g})(),Dn=(()=>{class g extends Vy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,y){}_removeListener(f,y){}}return g.type="SESSION",g})();let mr=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const y=this.receivers.find(D=>D.isListeningto(f));if(y)return y;const I=new g(f);return this.receivers.push(I),I}isListeningto(f){return this.eventTarget===f}handleEvent(f){var y=this;return(0,k.A)(function*(){const I=f,{eventId:D,eventType:j,data:re}=I.data,Ce=y.handlersMap[j];if(!Ce?.size)return;I.ports[0].postMessage({status:"ack",eventId:D,eventType:j});const je=Array.from(Ce).map(function(){var Ze=(0,k.A)(function*(gr){return gr(I.origin,re)});return function(gr){return Ze.apply(this,arguments)}}()),et=yield function kc(g){return Promise.all(g.map(function(){var u=(0,k.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(y){return{fulfilled:!1,reason:y}}});return function(f){return u.apply(this,arguments)}}()))}(je);I.ports[0].postMessage({status:"done",eventId:D,eventType:j,response:et})})()}_subscribe(f,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(y)}_unsubscribe(f,y){this.handlersMap[f]&&y&&this.handlersMap[f].delete(y),(!y||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function jt(g="",u=10){let f="";for(let y=0;y<u;y++)f+=Math.floor(10*Math.random());return g+f}class Gm{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,f,y=50){var I=this;return(0,k.A)(function*(){const D=typeof MessageChannel<"u"?new MessageChannel:null;if(!D)throw new Error("connection_unavailable");let j,re;return new Promise((Ce,je)=>{const et=jt("",20);D.port1.start();const Ze=setTimeout(()=>{je(new Error("unsupported_event"))},y);re={messageChannel:D,onMessage(gr){const Tr=gr;if(Tr.data.eventId===et)switch(Tr.data.status){case"ack":clearTimeout(Ze),j=setTimeout(()=>{je(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Ce(Tr.data.response);break;default:clearTimeout(Ze),clearTimeout(j),je(new Error("invalid_response"))}}},I.handlers.add(re),D.port1.addEventListener("message",re.onMessage),I.target.postMessage({eventType:u,eventId:et,data:f},[D.port2])}).finally(()=>{re&&I.removeMessageHandler(re)})})()}}function Or(){return window}function ao(){return typeof Or().WorkerGlobalScope<"u"&&"function"==typeof Or().importScripts}function cu(){return(cu=(0,k.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Mf="firebaseLocalStorageDb",Oc="firebaseLocalStorage",pl="fbase_key";class Mo{constructor(u){this.request=u}toPromise(){return new Promise((u,f)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function lu(g,u){return g.transaction([Oc],u?"readwrite":"readonly").objectStore(Oc)}function ko(){const g=indexedDB.open(Mf,1);return new Promise((u,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const y=g.result;try{y.createObjectStore(Oc,{keyPath:pl})}catch(I){f(I)}}),g.addEventListener("success",(0,k.A)(function*(){const y=g.result;y.objectStoreNames.contains(Oc)?u(y):(y.close(),yield function d0(){const g=indexedDB.deleteDatabase(Mf);return new Mo(g).toPromise()}(),u(yield ko()))}))})}function By(g,u,f){return kf.apply(this,arguments)}function kf(){return(kf=(0,k.A)(function*(g,u,f){const y=lu(g,!0).put({[pl]:u,value:f});return new Mo(y).toPromise()})).apply(this,arguments)}function Ym(){return(Ym=(0,k.A)(function*(g,u){const f=lu(g,!1).get(u),y=yield new Mo(f).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function Of(g,u){const f=lu(g,!0).delete(u);return new Mo(f).toPromise()}const Zi=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,k.A)(function*(){return f.db||(f.db=yield ko()),f.db})()}_withRetries(f){var y=this;return(0,k.A)(function*(){let I=0;for(;;)try{const D=yield y._openDb();return yield f(D)}catch(D){if(I++>3)throw D;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,k.A)(function*(){return ao()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,k.A)(function*(){f.receiver=mr._getInstance(function Qm(){return ao()?self:null}()),f.receiver._subscribe("keyChanged",function(){var y=(0,k.A)(function*(I,D){return{keyProcessed:(yield f._poll()).includes(D.key)}});return function(I,D){return y.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var y=(0,k.A)(function*(I,D){return["keyChanged"]});return function(I,D){return y.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,k.A)(function*(){var y,I;if(f.activeServiceWorker=yield function Km(){return cu.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Gm(f.activeServiceWorker);const D=yield f.sender._send("ping",{},800);D&&null!==(y=D[0])&&void 0!==y&&y.fulfilled&&null!==(I=D[0])&&void 0!==I&&I.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var y=this;return(0,k.A)(function*(){if(y.sender&&y.activeServiceWorker&&function Pf(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:f},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,k.A)(function*(){try{if(!indexedDB)return!1;const f=yield ko();return yield By(f,Rf,"1"),yield Of(f,Rf),!0}catch{}return!1})()}_withPendingWrite(f){var y=this;return(0,k.A)(function*(){y.pendingWrites++;try{yield f()}finally{y.pendingWrites--}})()}_set(f,y){var I=this;return(0,k.A)(function*(){return I._withPendingWrite((0,k.A)(function*(){return yield I._withRetries(D=>By(D,f,y)),I.localCache[f]=y,I.notifyServiceWorker(f)}))})()}_get(f){var y=this;return(0,k.A)(function*(){const I=yield y._withRetries(D=>function Uy(g,u){return Ym.apply(this,arguments)}(D,f));return y.localCache[f]=I,I})()}_remove(f){var y=this;return(0,k.A)(function*(){return y._withPendingWrite((0,k.A)(function*(){return yield y._withRetries(I=>Of(I,f)),delete y.localCache[f],y.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,k.A)(function*(){const y=yield f._withRetries(j=>{const re=lu(j,!1).getAll();return new Mo(re).toPromise()});if(!y)return[];if(0!==f.pendingWrites)return[];const I=[],D=new Set;if(0!==y.length)for(const{fbase_key:j,value:re}of y)D.add(j),JSON.stringify(f.localCache[j])!==JSON.stringify(re)&&(f.notifyListeners(j,re),I.push(j));for(const j of Object.keys(f.localCache))f.localCache[j]&&!D.has(j)&&(f.notifyListeners(j,null),I.push(j));return I})()}notifyListeners(f,y){this.localCache[f]=y;const I=this.listeners[f];if(I)for(const D of Array.from(I))D(y)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,k.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(y)}_removeListener(f,y){this.listeners[f]&&(this.listeners[f].delete(y),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})(),uu=1e12;class eg{constructor(u){this.auth=u,this.counter=uu,this._widgets=new Map}render(u,f){const y=this.counter;return this._widgets.set(y,new tg(u,this.auth.name,f||{})),this.counter++,y}reset(u){var f;const y=u||uu;null===(f=this._widgets.get(y))||void 0===f||f.delete(),this._widgets.delete(y)}getResponse(u){var f;return(null===(f=this._widgets.get(u||uu))||void 0===f?void 0:f.getResponse())||""}execute(u){var f=this;return(0,k.A)(function*(){var y;return null===(y=f._widgets.get(u||uu))||void 0===y||y.execute(),""})()}}class tg{constructor(u,f,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof u?document.getElementById(u):u;Re(I,"argument-error",{appName:f}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $y(g){const u=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<g;y++)u.push(f.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":f}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ml=ql("rcb"),du=new Is(3e4,6e4);class Nf{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Or().grecaptcha)||void 0===u||!u.render)}load(u,f=""){return Re(function Wy(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),u,"argument-error"),this.shouldResolveImmediately(f)&&Qr(Or().grecaptcha)?Promise.resolve(Or().grecaptcha):new Promise((y,I)=>{const D=Or().setTimeout(()=>{I(sn(u,"network-request-failed"))},du.get());Or()[ml]=()=>{Or().clearTimeout(D),delete Or()[ml];const re=Or().grecaptcha;if(!re||!Qr(re))return void I(sn(u,"internal-error"));const Ce=re.render;re.render=(je,et)=>{const Ze=Ce(je,et);return this.counter++,Ze},this.hostLanguage=f,y(re)},pf(`${function Tm(){return Gl.recaptchaV2Script}()}?${(0,ve.Am)({onload:ml,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(D),I(sn(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var f;return!(null===(f=Or().grecaptcha)||void 0===f||!f.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xi{load(u){return(0,k.A)(function*(){return new eg(u)})()}clearedOneInstance(){}}const Ff="recaptcha",sa={theme:"light",type:"image"};class Lf{constructor(u,f,y=Object.assign({},sa)){this.parameters=y,this.type=Ff,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Cn(u),this.isInvisible="invisible"===this.parameters.size,Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof f?document.getElementById(f):f;Re(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xi:new Nf,this.validateStartingState()}verify(){var u=this;return(0,k.A)(function*(){u.assertNotDestroyed();const f=yield u.render(),y=u.getAssertedRecaptcha();return y.getResponse(f)||new Promise(D=>{const j=re=>{re&&(u.tokenChangeListeners.delete(j),D(re))};u.tokenChangeListeners.add(j),u.isInvisible&&y.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){Re(!this.parameters.sitekey,this.auth,"argument-error"),Re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return f=>{if(this.tokenChangeListeners.forEach(y=>y(f)),"function"==typeof u)u(f);else if("string"==typeof u){const y=Or()[u];"function"==typeof y&&y(f)}}}assertNotDestroyed(){Re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,k.A)(function*(){if(yield u.init(),!u.widgetId){let f=u.container;if(!u.isInvisible){const y=document.createElement("div");f.appendChild(y),f=y}u.widgetId=u.getAssertedRecaptcha().render(f,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,k.A)(function*(){Re(Fs()&&!ao(),u.auth,"internal-error"),yield function Ka(){let g=null;return new Promise(u=>{"complete"!==document.readyState?(g=()=>u(),window.addEventListener("load",g)):u()}).catch(u=>{throw g&&window.removeEventListener("load",g),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const f=yield function as(g){return tr.apply(this,arguments)}(u.auth);Re(f,u.auth,"internal-error"),u.parameters.sitekey=f})()}getAssertedRecaptcha(){return Re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ji{constructor(u,f){this.verificationId=u,this.onConfirmation=f}confirm(u){const f=Er._fromVerification(this.verificationId,u);return this.onConfirmation(f)}}function gl(){return(gl=(0,k.A)(function*(g,u,f){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y=Cn(g),I=yield Sn(y,u,(0,ve.Ku)(f));return new Ji(I,D=>Id(y,D))})).apply(this,arguments)}function Oi(){return(Oi=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);yield za(!1,y,"phone");const I=yield Sn(y.auth,u,(0,ve.Ku)(f));return new Ji(I,D=>Zr(y,D))})).apply(this,arguments)}function hu(){return(hu=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);if((0,Je._isFirebaseServerApp)(y.auth.app))return Promise.reject(ht(y.auth));const I=yield Sn(y.auth,u,(0,ve.Ku)(f));return new Ji(I,D=>Um(y,D))})).apply(this,arguments)}function Sn(g,u,f){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,k.A)(function*(g,u,f){var y;const I=yield f.verify();try{let D;if(Re("string"==typeof I,g,"argument-error"),Re(f.type===Ff,g,"argument-error"),D="string"==typeof u?{phoneNumber:u}:u,"session"in D){const j=D.session;if("phoneNumber"in D)return Re("enroll"===j.type,g,"internal-error"),(yield function $m(g,u){return pe(g,"POST","/v2/accounts/mfaEnrollment:start",te(g,u))}(g,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:D.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{Re("signin"===j.type,g,"internal-error");const re=(null===(y=D.multiFactorHint)||void 0===y?void 0:y.uid)||D.multiFactorUid;return Re(re,g,"missing-multi-factor-info"),(yield function h0(g,u){return pe(g,"POST","/v2/accounts/mfaSignIn:start",te(g,u))}(g,{mfaPendingCredential:j.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield function wi(g,u){return md.apply(this,arguments)}(g,{phoneNumber:D.phoneNumber,recaptchaToken:I});return j}}finally{f._reset()}}),Qa.apply(this,arguments)}function Ci(){return(Ci=(0,k.A)(function*(g,u){const f=(0,ve.Ku)(g);if((0,Je._isFirebaseServerApp)(f.auth.app))return Promise.reject(ht(f.auth));yield Gi(f,u)})).apply(this,arguments)}let Nr=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Cn(f)}verifyPhoneNumber(f,y){return Sn(this.auth,f,(0,ve.Ku)(y))}static credential(f,y){return Er._fromVerification(f,y)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:y,temporaryProof:I}=f;return y&&I?Er._fromTokenResponse(y,I):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Oo(g,u){return u?Ke(u):(Re(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class aa extends Va{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Do(u,this._buildIdpRequest())}_linkToIdToken(u,f){return Do(u,this._buildIdpRequest(f))}_getReauthenticationResolver(u){return Do(u,this._buildIdpRequest())}_buildIdpRequest(u){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(f.idToken=u),f}}function Ir(g){return bf(g.auth,new aa(g),g.bypassAuthState)}function Vf(g){const{auth:u,user:f}=g;return Re(f,u,"internal-error"),yf(f,new aa(g),g.bypassAuthState)}function Od(g){return ca.apply(this,arguments)}function ca(){return(ca=(0,k.A)(function*(g){const{auth:u,user:f}=g;return Re(f,u,"internal-error"),Gi(f,new aa(g),g.bypassAuthState)})).apply(this,arguments)}class No{constructor(u,f,y,I,D=!1){this.auth=u,this.resolver=y,this.user=I,this.bypassAuthState=D,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var u=this;return new Promise(function(){var f=(0,k.A)(function*(y,I){u.pendingPromise={resolve:y,reject:I};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(D){u.reject(D)}});return function(y,I){return f.apply(this,arguments)}}())}onAuthEvent(u){var f=this;return(0,k.A)(function*(){const{urlResponse:y,sessionId:I,postBody:D,tenantId:j,error:re,type:Ce}=u;if(re)return void f.reject(re);const je={auth:f.auth,requestUri:y,sessionId:I,tenantId:j||void 0,postBody:D||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Ce)(je))}catch(et){f.reject(et)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return Ir;case"linkViaPopup":case"linkViaRedirect":return Od;case"reauthViaPopup":case"reauthViaRedirect":return Vf;default:rn(this.auth,"internal-error")}}resolve(u){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ni=new Is(2e3,1e4);function Nd(){return(Nd=(0,k.A)(function*(g,u,f){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(sn(g,"operation-not-supported-in-this-environment"));const y=Cn(g);Pr(g,u,Ft);const I=Oo(y,f);return new Ya(y,"signInViaPopup",u,I).executeNotNull()})).apply(this,arguments)}function Fd(){return(Fd=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);if((0,Je._isFirebaseServerApp)(y.auth.app))return Promise.reject(sn(y.auth,"operation-not-supported-in-this-environment"));Pr(y.auth,u,Ft);const I=Oo(y.auth,f);return new Ya(y.auth,"reauthViaPopup",u,I,y).executeNotNull()})).apply(this,arguments)}function wt(){return(wt=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);Pr(y.auth,u,Ft);const I=Oo(y.auth,f);return new Ya(y.auth,"linkViaPopup",u,I,y).executeNotNull()})).apply(this,arguments)}let Ya=(()=>{class g extends No{constructor(f,y,I,D,j){super(f,y,D,j),this.provider=I,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,k.A)(function*(){const y=yield f.execute();return Re(y,f.auth,"internal-error"),y})()}onExecution(){var f=this;return(0,k.A)(function*(){Gn(1===f.filter.length,"Popup operations only handle one event");const y=jt();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],y),f.authWindow.associatedEvent=y,f.resolver._originValidation(f.auth).catch(I=>{f.reject(I)}),f.resolver._isIframeWebStorageSupported(f.auth,I=>{I||f.reject(sn(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var y,I;this.pollId=null!==(I=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==I&&I.closed?window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Ni.get())};f()}}return g.currentPopupAction=null,g})();const qy="pendingRedirect",fu=new Map;class Ky extends No{constructor(u,f,y=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,y),this.eventId=null}execute(){var u=()=>super.execute,f=this;return(0,k.A)(function*(){let y=fu.get(f.auth._key());if(!y){try{const D=(yield function pu(g,u){return Ld.apply(this,arguments)}(f.resolver,f.auth))?yield u().call(f):null;y=()=>Promise.resolve(D)}catch(I){y=()=>Promise.reject(I)}fu.set(f.auth._key(),y)}return f.bypassAuthState||fu.set(f.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(u){var f=()=>super.onAuthEvent,y=this;return(0,k.A)(function*(){if("signInViaRedirect"===u.type)return f().call(y,u);if("unknown"!==u.type){if(u.eventId){const I=yield y.auth._redirectUserForId(u.eventId);if(I)return y.user=I,f().call(y,u);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,k.A)(function*(){})()}cleanUp(){}}function Ld(){return(Ld=(0,k.A)(function*(g,u){const f=og(u),y=sg(g);if(!(yield y._isAvailable()))return!1;const I="true"===(yield y._get(f));return yield y._remove(f),I})).apply(this,arguments)}function Za(g,u){return mu.apply(this,arguments)}function mu(){return(mu=(0,k.A)(function*(g,u){return sg(g)._set(og(u),"true")})).apply(this,arguments)}function jf(g,u){fu.set(g._key(),u)}function sg(g){return Ke(g._redirectPersistence)}function og(g){return mt(qy,g.config.apiKey,g.name)}function xe(g,u,f){return function cn(g,u,f){return Xr.apply(this,arguments)}(g,u,f)}function Xr(){return(Xr=(0,k.A)(function*(g,u,f){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y=Cn(g);Pr(g,u,Ft),yield y._initializationPromise;const I=Oo(y,f);return yield Za(I,y),I._openRedirect(y,u,"signInViaRedirect")})).apply(this,arguments)}function Jr(g,u,f){return function di(g,u,f){return gu.apply(this,arguments)}(g,u,f)}function gu(){return(gu=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);if(Pr(y.auth,u,Ft),(0,Je._isFirebaseServerApp)(y.auth.app))return Promise.reject(ht(y.auth));yield y.auth._initializationPromise;const I=Oo(y.auth,f);yield Za(I,y.auth);const D=yield Fi(y);return I._openRedirect(y.auth,u,"reauthViaRedirect",D)})).apply(this,arguments)}function _l(g,u,f){return function Ss(g,u,f){return _u.apply(this,arguments)}(g,u,f)}function _u(){return(_u=(0,k.A)(function*(g,u,f){const y=(0,ve.Ku)(g);Pr(y.auth,u,Ft),yield y.auth._initializationPromise;const I=Oo(y.auth,f);yield za(!1,y,u.providerId),yield Za(I,y.auth);const D=yield Fi(y);return I._openRedirect(y.auth,u,"linkViaRedirect",D)})).apply(this,arguments)}function Bd(){return(Bd=(0,k.A)(function*(g,u){return yield Cn(g)._initializationPromise,Hf(g,u,!1)})).apply(this,arguments)}function Hf(g,u){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.A)(function*(g,u,f=!1){if((0,Je._isFirebaseServerApp)(g.app))return Promise.reject(ht(g));const y=Cn(g),I=Oo(y,u),j=yield new Ky(y,I,f).execute();return j&&!f&&(delete j.user._redirectEventId,yield y._persistUserIfCurrent(j.user),yield y._setRedirectUser(null,u)),j})).apply(this,arguments)}function Fi(g){return xs.apply(this,arguments)}function xs(){return(xs=(0,k.A)(function*(g){const u=jt(`${g.uid}:::`);return g._redirectEventId=u,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),u})).apply(this,arguments)}class la{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let f=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(u,y)&&(f=!0,this.sendToConsumer(u,y),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function $t(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ud(g);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=u,f=!0)),f}sendToConsumer(u,f){var y;if(u.error&&!Ud(u)){const I=(null===(y=u.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";f.onError(sn(this.auth,I))}else f.onAuthEvent(u)}isEventForConsumer(u,f){const y=null===f.eventId||!!u.eventId&&u.eventId===f.eventId;return f.filter.includes(u.type)&&y}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fo(u))}saveEventToCache(u){this.cachedEventUids.add(Fo(u)),this.lastProcessedEventTime=Date.now()}}function Fo(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(u=>u).join("-")}function Ud({type:g,error:u}){return"unknown"===g&&"auth/no-auth-event"===u?.code}function ag(g){return $f.apply(this,arguments)}function $f(){return($f=(0,k.A)(function*(g,u={}){return pe(g,"GET","/v1/projects",u)})).apply(this,arguments)}const Nc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jd=/^https?/;function vu(){return(vu=(0,k.A)(function*(g){if(g.config.emulator)return;const{authorizedDomains:u}=yield ag(g);for(const f of u)try{if(zs(f))return}catch{}rn(g,"unauthorized-domain")})).apply(this,arguments)}function zs(g){const u=os(),{protocol:f,hostname:y}=new URL(u);if(g.startsWith("chrome-extension://")){const j=new URL(g);return""===j.hostname&&""===y?"chrome-extension:"===f&&g.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===f&&j.hostname===y}if(!jd.test(f))return!1;if(Nc.test(g))return y===g;const I=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(y)}const lg=new Is(3e4,6e4);function Fc(){const g=Or().___jsl;if(g?.H)for(const u of Object.keys(g.H))if(g.H[u].r=g.H[u].r||[],g.H[u].L=g.H[u].L||[],g.H[u].r=[...g.H[u].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let yl=null;const ms=new Is(5e3,15e3),Lo="__/auth/iframe",Gf="emulator/auth/iframe",ug={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xa(g){const u=g.config;Re(u.authDomain,g,"auth-domain-config-required");const f=u.emulator?yi(u,Gf):`https://${g.config.authDomain}/${Lo}`,y={apiKey:u.apiKey,appName:g.name,v:Je.SDK_VERSION},I=hi.get(g.config.apiHost);I&&(y.eid=I);const D=g._getFrameworks();return D.length&&(y.fw=D.join(",")),`${f}?${(0,ve.Am)(y).slice(1)}`}function Ja(){return Ja=(0,k.A)(function*(g){const u=yield function Wf(g){return yl=yl||function Hd(g){return new Promise((u,f)=>{var y,I,D;function j(){Fc(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{Fc(),f(sn(g,"network-request-failed"))},timeout:lg.get()})}if(null!==(I=null===(y=Or().gapi)||void 0===y?void 0:y.iframes)&&void 0!==I&&I.Iframe)u(gapi.iframes.getContext());else{if(null===(D=Or().gapi)||void 0===D||!D.load){const re=ql("iframefcb");return Or()[re]=()=>{gapi.load?j():f(sn(g,"network-request-failed"))},pf(`${function ky(){return Gl.gapiScript}()}?onload=${re}`).catch(Ce=>f(Ce))}j()}}).catch(u=>{throw yl=null,u})}(g),yl}(g),f=Or().gapi;return Re(f,g,"internal-error"),u.open({where:document.body,url:Xa(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ug,dontclear:!0},y=>new Promise(function(){var I=(0,k.A)(function*(D,j){yield y.restyle({setHideOnLeave:!1});const re=sn(g,"network-request-failed"),Ce=Or().setTimeout(()=>{j(re)},ms.get());function je(){Or().clearTimeout(Ce),D(y)}y.ping(je).then(je,()=>{j(re)})});return function(D,j){return I.apply(this,arguments)}}()))}),Ja.apply(this,arguments)}const qf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vl{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $d="__/auth/handler",Wd="emulator/auth/handler",Gd=encodeURIComponent("fac");function bl(g,u,f,y,I,D){return bu.apply(this,arguments)}function bu(){return(bu=(0,k.A)(function*(g,u,f,y,I,D){Re(g.config.authDomain,g,"auth-domain-config-required"),Re(g.config.apiKey,g,"invalid-api-key");const j={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:y,v:Je.SDK_VERSION,eventId:I};if(u instanceof Ft){u.setDefaultLanguage(g.languageCode),j.providerId=u.providerId||"",(0,ve.Im)(u.getCustomParameters())||(j.customParameters=JSON.stringify(u.getCustomParameters()));for(const[et,Ze]of Object.entries(D||{}))j[et]=Ze}if(u instanceof wr){const et=u.getScopes().filter(Ze=>""!==Ze);et.length>0&&(j.scopes=et.join(","))}g.tenantId&&(j.tid=g.tenantId);const re=j;for(const et of Object.keys(re))void 0===re[et]&&delete re[et];const Ce=yield g._getAppCheckToken(),je=Ce?`#${Gd}=${encodeURIComponent(Ce)}`:"";return`${function hg({config:g}){return g.emulator?yi(g,Wd):`https://${g.authDomain}/${$d}`}(g)}?${(0,ve.Am)(re).slice(1)}${je}`})).apply(this,arguments)}const qd="webStorageSupport",ai=class Lc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dn,this._completeRedirectFn=Hf,this._overrideRedirectResult=jf}_openPopup(u,f,y,I){var D=this;return(0,k.A)(function*(){var j;Gn(null===(j=D.eventManagers[u._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const re=yield bl(u,f,y,os(),I);return function da(g,u,f,y=500,I=600){const D=Math.max((window.screen.availHeight-I)/2,0).toString(),j=Math.max((window.screen.availWidth-y)/2,0).toString();let re="";const Ce=Object.assign(Object.assign({},qf),{width:y.toString(),height:I.toString(),top:D,left:j}),je=(0,ve.ZQ)().toLowerCase();f&&(re=wn(je)?"_blank":f),Ei(je)&&(u=u||"http://localhost",Ce.scrollbars="yes");const et=Object.entries(Ce).reduce((gr,[Tr,$c])=>`${gr}${Tr}=${$c},`,"");if(function me(g=(0,ve.ZQ)()){var u;return Xo(g)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(je)&&"_self"!==re)return function Kf(g,u){const f=document.createElement("a");f.href=g,f.target=u;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(y)}(u||"",re),new vl(null);const Ze=window.open(u||"",re,et);Re(Ze,g,"popup-blocked");try{Ze.focus()}catch{}return new vl(Ze)}(u,re,jt())})()}_openRedirect(u,f,y,I){var D=this;return(0,k.A)(function*(){return yield D._originValidation(u),function qm(g){Or().location.href=g}(yield bl(u,f,y,os(),I)),new Promise(()=>{})})()}_initialize(u){const f=u._key();if(this.eventManagers[f]){const{manager:I,promise:D}=this.eventManagers[f];return I?Promise.resolve(I):(Gn(D,"If manager is not set, promise should be"),D)}const y=this.initAndGetManager(u);return this.eventManagers[f]={promise:y},y.catch(()=>{delete this.eventManagers[f]}),y}initAndGetManager(u){var f=this;return(0,k.A)(function*(){const y=yield function Zn(g){return Ja.apply(this,arguments)}(u),I=new la(u);return y.register("authEvent",D=>(Re(D?.authEvent,u,"invalid-auth-event"),{status:I.onEvent(D.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[u._key()]={manager:I},f.iframes[u._key()]=y,I})()}_isIframeWebStorageSupported(u,f){this.iframes[u._key()].send(qd,{type:qd},I=>{var D;const j=null===(D=I?.[0])||void 0===D?void 0:D[qd];void 0!==j&&f(!!j),rn(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const f=u._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function cg(g){return vu.apply(this,arguments)}(u)),this.originValidationPromises[f]}get _shouldInitProactively(){return fe()||Co()||Xo()}};class co{constructor(u){this.factorId=u}_process(u,f,y){switch(f.type){case"enroll":return this._finalizeEnroll(u,f.credential,y);case"signin":return this._finalizeSignIn(u,f.credential);default:return er("unexpected MultiFactorSessionType")}}}class fg extends co{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new fg(u)}_finalizeEnroll(u,f,y){return function au(g,u){return pe(g,"POST","/v2/accounts/mfaEnrollment:finalize",te(g,u))}(u,{idToken:f,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,f){return function Hy(g,u){return pe(g,"POST","/v2/accounts/mfaSignIn:finalize",te(g,u))}(u,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qf=(()=>{class g{constructor(){}static assertion(f){return fg._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Qy="@firebase/auth";class Vo{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var f=this;return(0,k.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const f=this.auth.onIdTokenChanged(y=>{u(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,f),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const f=this.internalListeners.get(u);f&&(this.internalListeners.delete(u),f(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ci(){return window}(0,ve.XA)("authIdTokenMaxAge"),function Py(g){Gl=g}({loadJS:g=>new Promise((u,f)=>{const y=document.createElement("script");y.setAttribute("src",g),y.onload=u,y.onerror=I=>{const D=sn("internal-error");D.customData=I,f(D)},y.type="text/javascript",y.charset="UTF-8",function Xf(){var g,u;return null!==(u=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==u?u:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Iu(g){(0,Je._registerComponent)(new lr.uA("auth",(u,{options:f})=>{const y=u.getProvider("app").getImmediate(),I=u.getProvider("heartbeat"),D=u.getProvider("app-check-internal"),{apiKey:j,authDomain:re}=y.options;Re(j&&!j.includes(":"),"invalid-api-key",{appName:y.name});const Ce={apiKey:j,authDomain:re,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$e(g)},je=new As(y,I,D,Ce);return function xm(g,u){const f=u?.persistence||[],y=(Array.isArray(f)?f:[f]).map(Ke);u?.errorMap&&g._updateErrorMap(u.errorMap),g._initializeWithPersistence(y,u?.popupRedirectResolver)}(je,f),je},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,f,y)=>{u.getProvider("auth-internal").initialize()})),(0,Je._registerComponent)(new lr.uA("auth-internal",u=>{const f=Cn(u.getProvider("auth").getImmediate());return new Vo(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Je.registerVersion)(Qy,"1.7.9",function wu(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(g)),(0,Je.registerVersion)(Qy,"1.7.9","esm2017")}("Browser");function nc(){return nc=(0,k.A)(function*(g,u,f){var y;const{BuildInfo:I}=ci();Gn(u.sessionId,"AuthEvent did not contain a session ID");const D=yield function np(g){return Xd.apply(this,arguments)}(u.sessionId),j={};return Xo()?j.ibi=I.packageName:Ao()?j.apn=I.packageName:rn(g,"operation-not-supported-in-this-environment"),I.displayName&&(j.appDisplayName=I.displayName),j.sessionId=D,bl(g,f,u.type,void 0,null!==(y=u.eventId)&&void 0!==y?y:void 0,j)}),nc.apply(this,arguments)}function rc(){return(rc=(0,k.A)(function*(g){const{BuildInfo:u}=ci(),f={};Xo()?f.iosBundleId=u.packageName:Ao()?f.androidPackageName=u.packageName:rn(g,"operation-not-supported-in-this-environment"),yield ag(g,f)})).apply(this,arguments)}function $s(){return($s=(0,k.A)(function*(g,u,f){const{cordova:y}=ci();let I=()=>{};try{yield new Promise((D,j)=>{let re=null;function Ce(){var Ze;D();const gr=null===(Ze=y.plugins.browsertab)||void 0===Ze?void 0:Ze.close;"function"==typeof gr&&gr(),"function"==typeof f?.close&&f.close()}function je(){re||(re=window.setTimeout(()=>{j(sn(g,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&je()}u.addPassiveListener(Ce),document.addEventListener("resume",je,!1),Ao()&&document.addEventListener("visibilitychange",et,!1),I=()=>{u.removePassiveListener(Ce),document.removeEventListener("resume",je,!1),document.removeEventListener("visibilitychange",et,!1),re&&window.clearTimeout(re)}})}finally{I()}})).apply(this,arguments)}function Xd(){return(Xd=(0,k.A)(function*(g){const u=function gg(g){if(Gn(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const u=new ArrayBuffer(g.length),f=new Uint8Array(u);for(let y=0;y<g.length;y++)f[y]=g.charCodeAt(y);return f}(g),f=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(f)).map(I=>I.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Vc extends la{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(f=>f(u)),super.onEvent(u)}initialized(){var u=this;return(0,k.A)(function*(){yield u.initPromise})()}}function Tu(g){return fa.apply(this,arguments)}function fa(){return(fa=(0,k.A)(function*(g){const u=yield _t()._get(Cr(g));return u&&(yield _t()._remove(Cr(g))),u})).apply(this,arguments)}function ei(){const g=[];for(let f=0;f<20;f++){const y=Math.floor(62*Math.random());g.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return g.join("")}function _t(){return Ke(Md)}function Cr(g){return mt("authEvent",g.config.apiKey,g.name)}function Su(g){if(!g?.includes("?"))return{};const[u,...f]=g.split("?");return(0,ve.I9)(f.join("?"))}const Fr=class Uc{constructor(){this._redirectPersistence=Dn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hf,this._overrideRedirectResult=jf}_initialize(u){var f=this;return(0,k.A)(function*(){const y=u._key();let I=f.eventManagers.get(y);return I||(I=new Vc(u),f.eventManagers.set(y,I),f.attachCallbackListeners(u,I)),I})()}_openPopup(u){rn(u,"operation-not-supported-in-this-environment")}_openRedirect(u,f,y,I){var D=this;return(0,k.A)(function*(){!function tp(g){var u,f,y,I,D,j,re,Ce,je,et;const Ze=ci();Re("function"==typeof(null===(u=Ze?.universalLinks)||void 0===u?void 0:u.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Re(typeof(null===(f=Ze?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Re("function"==typeof(null===(D=null===(I=null===(y=Ze?.cordova)||void 0===y?void 0:y.plugins)||void 0===I?void 0:I.browsertab)||void 0===D?void 0:D.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(Ce=null===(re=null===(j=Ze?.cordova)||void 0===j?void 0:j.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ce?void 0:Ce.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Re("function"==typeof(null===(et=null===(je=Ze?.cordova)||void 0===je?void 0:je.InAppBrowser)||void 0===et?void 0:et.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const j=yield D._initialize(u);yield j.initialized(),j.resetRedirect(),function ig(){fu.clear()}(),yield D._originValidation(u);const re=function ha(g,u,f=null){return{type:u,eventId:f,urlResponse:null,sessionId:ei(),postBody:null,tenantId:g.tenantId,error:sn(g,"no-auth-event")}}(u,y,I);yield function eh(g,u){return _t()._set(Cr(g),u)}(u,re);const Ce=yield function Au(g,u,f){return nc.apply(this,arguments)}(u,re,f),je=yield function ep(g){const{cordova:u}=ci();return new Promise(f=>{u.plugins.browsertab.isAvailable(y=>{let I=null;y?u.plugins.browsertab.openUrl(g):I=u.InAppBrowser.open(g,function _e(g=(0,ve.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(I)})})}(Ce);return function mg(g,u,f){return $s.apply(this,arguments)}(u,j,je)})()}_isIframeWebStorageSupported(u,f){throw new Error("Method not implemented.")}_originValidation(u){const f=u._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Jf(g){return rc.apply(this,arguments)}(u)),this.originValidationPromises[f]}attachCallbackListeners(u,f){const{universalLinks:y,handleOpenURL:I,BuildInfo:D}=ci(),j=setTimeout((0,k.A)(function*(){yield Tu(u),f.onEvent(jc())}),500),re=function(){var et=(0,k.A)(function*(Ze){clearTimeout(j);const gr=yield Tu(u);let Tr=null;gr&&Ze?.url&&(Tr=function th(g,u){var f,y;const I=function Bc(g){const u=Su(g),f=u.link?decodeURIComponent(u.link):void 0,y=Su(f).link,I=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return Su(I).link||I||y||f||g}(u);if(I.includes("/__/auth/callback")){const D=Su(I),j=D.firebaseError?function Du(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(D.firebaseError)):null,re=null===(y=null===(f=j?.code)||void 0===f?void 0:f.split("auth/"))||void 0===y?void 0:y[1],Ce=re?sn(re):null;return Ce?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Ce,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:I,postBody:null}}return null}(gr,Ze.url)),f.onEvent(Tr||jc())});return function(gr){return et.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,re);const Ce=I,je=`${D.packageName.toLowerCase()}://`;ci().handleOpenURL=function(){var et=(0,k.A)(function*(Ze){if(Ze.toLowerCase().startsWith(je)&&re({url:Ze}),"function"==typeof Ce)try{Ce(Ze)}catch(gr){console.error(gr)}});return function(Ze){return et.apply(this,arguments)}}()}};function jc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:sn("no-auth-event")}}function xu(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function Xy(g=(0,ve.ZQ)()){return!("file:"!==xu()&&"ionic:"!==xu()&&"capacitor:"!==xu()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function pa(){try{const g=self.localStorage,u=jt();if(g)return g.setItem(u,"1"),g.removeItem(u),!function p0(g=(0,ve.ZQ)()){return function gs(){return(0,ve.lT)()&&11===document?.documentMode}()||function yg(g=(0,ve.ZQ)()){return/Edge\/\d+/.test(g)}(g)}()||(0,ve.zW)()}catch{return rp()&&(0,ve.zW)()}return!1}function rp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ip(){return(function f0(){return"http:"===xu()||"https:"===xu()}()||(0,ve.sr)()||Xy())&&!function ic(){return(0,ve.lV)()||(0,ve.Ll)()}()&&pa()&&!rp()}function or(){return Xy()&&typeof document<"u"}function sc(){return(sc=(0,k.A)(function*(){return!!or()&&new Promise(g=>{const u=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),g(!0)})})})).apply(this,arguments)}const ar={LOCAL:"local",NONE:"none",SESSION:"session"},Bo=Re,sp="persistence";function oc(g){return op.apply(this,arguments)}function op(){return(op=(0,k.A)(function*(g){yield g._initializationPromise;const u=ap(),f=mt(sp,g.config.apiKey,g.name);u&&u.setItem(f,g._getPersistence())})).apply(this,arguments)}function ap(){var g;try{return(null===(g=function Jy(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const rh=Re;class Ar{constructor(){this.browserResolver=Ke(ai),this.cordovaResolver=Ke(Fr),this.underlyingResolver=null,this._redirectPersistence=Dn,this._completeRedirectFn=Hf,this._overrideRedirectResult=jf}_initialize(u){var f=this;return(0,k.A)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,f,y,I){var D=this;return(0,k.A)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openPopup(u,f,y,I)})()}_openRedirect(u,f,y,I){var D=this;return(0,k.A)(function*(){return yield D.selectUnderlyingResolver(),D.assertedUnderlyingResolver._openRedirect(u,f,y,I)})()}_isIframeWebStorageSupported(u,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,f)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return or()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return rh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,k.A)(function*(){if(u.underlyingResolver)return;const f=yield function vg(){return sc.apply(this,arguments)}();u.underlyingResolver=f?u.cordovaResolver:u.browserResolver})()}}function Pu(g){return g.unwrap()}function cp(g){return lo(g)}function lo(g){const{_tokenResponse:u}=g instanceof ve.g?g.customData:g;if(!u)return null;if(!(g instanceof ve.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Nr.credentialFromResult(g);const f=u.providerId;if(!f||f===Qt.PASSWORD)return null;let y;switch(f){case Qt.GOOGLE:y=cl;break;case Qt.FACEBOOK:y=eu;break;case Qt.GITHUB:y=_d;break;case Qt.TWITTER:y=ja;break;default:const{oauthIdToken:I,oauthAccessToken:D,oauthTokenSecret:j,pendingToken:re,nonce:Ce}=u;return D||j||I||re?re?f.startsWith("saml.")?us._create(f,re):Ts._fromParams({providerId:f,signInMethod:f,pendingToken:re,idToken:I,accessToken:D}):new Kt(f).credential({idToken:I,accessToken:D,rawNonce:Ce}):null}return g instanceof ve.g?y.credentialFromError(g):y.credentialFromResult(g)}function ti(g,u){return u.catch(f=>{throw f instanceof ve.g&&function lp(g,u){var f;const y=null===(f=u.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new ev(g,function xd(g,u){var f;const y=(0,ve.Ku)(g),I=u;return Re(u.customData.operationType,y,"argument-error"),Re(null===(f=I.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,y,"argument-error"),Sd._fromError(y,I)}(g,u));else if(y){const I=lo(u),D=u;I&&(D.credential=I,D.tenantId=y.tenantId||void 0,D.email=y.email||void 0,D.phoneNumber=y.phoneNumber||void 0)}}(g,f),f}).then(f=>{const I=f.user;return{operationType:f.operationType,credential:cp(f),additionalUserInfo:Ki(f),user:ma.getOrCreate(I)}})}function up(g,u){return ih.apply(this,arguments)}function ih(){return(ih=(0,k.A)(function*(g,u){const f=yield u;return{verificationId:f.verificationId,confirm:y=>ti(g,f.confirm(y))}})).apply(this,arguments)}class ev{constructor(u,f){this.resolver=f,this.auth=function Hc(g){return g.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return ti(Pu(this.auth),this.resolver.resolveSignIn(u))}}class ma{constructor(u){this._delegate=u,this.multiFactor=function Wm(g){const u=(0,ve.Ku)(g);return Pd.has(u)||Pd.set(u,Mc._fromUser(u)),Pd.get(u)}(u)}static getOrCreate(u){return ma.USER_MAP.has(u)||ma.USER_MAP.set(u,new ma(u)),ma.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var f=this;return(0,k.A)(function*(){return ti(f.auth,Zr(f._delegate,u))})()}linkWithPhoneNumber(u,f){var y=this;return(0,k.A)(function*(){return up(y.auth,function ng(g,u,f){return Oi.apply(this,arguments)}(y._delegate,u,f))})()}linkWithPopup(u){var f=this;return(0,k.A)(function*(){return ti(f.auth,function Uf(g,u,f){return wt.apply(this,arguments)}(f._delegate,u,Ar))})()}linkWithRedirect(u){var f=this;return(0,k.A)(function*(){return yield oc(Cn(f.auth)),_l(f._delegate,u,Ar)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var f=this;return(0,k.A)(function*(){return ti(f.auth,Um(f._delegate,u))})()}reauthenticateWithPhoneNumber(u,f){return up(this.auth,function oa(g,u,f){return hu.apply(this,arguments)}(this._delegate,u,f))}reauthenticateWithPopup(u){return ti(this.auth,function rg(g,u,f){return Fd.apply(this,arguments)}(this._delegate,u,Ar))}reauthenticateWithRedirect(u){var f=this;return(0,k.A)(function*(){return yield oc(Cn(f.auth)),Jr(f._delegate,u,Ar)})()}sendEmailVerification(u){return function dl(g,u){return Ds.apply(this,arguments)}(this._delegate,u)}unlink(u){var f=this;return(0,k.A)(function*(){return yield function Fy(g,u){return hs.apply(this,arguments)}(f._delegate,u),f})()}updateEmail(u){return function zt(g,u){const f=(0,ve.Ku)(g);return(0,Je._isFirebaseServerApp)(f.auth.app)?Promise.reject(ht(f.auth)):Pc(f,u,null)}(this._delegate,u)}updatePassword(u){return function Ly(g,u){return Pc((0,ve.Ku)(g),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function kd(g,u){return Ci.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Ga(g,u){return fs.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,f){return function $a(g,u,f){return Dd.apply(this,arguments)}(this._delegate,u,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ma.USER_MAP=new WeakMap;const zc=Re;let Mu=(()=>{class g{constructor(f,y){if(this.app=f,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=f.options;zc(I,"invalid-api-key",{appName:f.name}),zc(I,"invalid-api-key",{appName:f.name});const D=typeof window<"u"?Ar:void 0;this._delegate=y.initialize({options:{persistence:ku(I,f.name),popupRedirectResolver:D}}),this._delegate._updateErrorMap(Kr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ma.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,y){!function dd(g,u,f){const y=Cn(g);Re(y._canInitEmulator,y,"emulator-config-failed"),Re(/^https?:\/\//.test(u),y,"invalid-emulator-scheme");const I=!!f?.disableWarnings,D=Rm(u),{host:j,port:re}=function Kl(g){const u=Rm(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(u.length));if(!f)return{host:"",port:null};const y=f[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(y);if(I){const D=I[1];return{host:D,port:ol(y.substr(D.length+1))}}{const[D,j]=y.split(":");return{host:D,port:ol(j)}}}(u);y.config.emulator={url:`${D}//${j}${null===re?"":`:${re}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:j,port:re,protocol:D.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function hd(){function g(){const u=document.createElement("p"),f=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,y)}applyActionCode(f){return function Td(g,u){return Q.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Z(this._delegate,f)}confirmPasswordReset(f,y){return function Ad(g,u,f){return Cf.apply(this,arguments)}(this._delegate,f,y)}createUserWithEmailAndPassword(f,y){var I=this;return(0,k.A)(function*(){return ti(I._delegate,function un(g,u,f){return an.apply(this,arguments)}(I._delegate,f,y))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function sr(g,u){return dn.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Ii(g,u){const f=js.parseLink(u);return"EMAIL_SIGNIN"===f?.operation}(0,f)}getRedirectResult(){var f=this;return(0,k.A)(function*(){zc(ip(),f._delegate,"operation-not-supported-in-this-environment");const y=yield function Vd(g,u){return Bd.apply(this,arguments)}(f._delegate,Ar);return y?ti(f._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function _g(g,u){Cn(g)._logFramework(u)}(this._delegate,f)}onAuthStateChanged(f,y,I){const{next:D,error:j,complete:re}=Eg(f,y,I);return this._delegate.onAuthStateChanged(D,j,re)}onIdTokenChanged(f,y,I){const{next:D,error:j,complete:re}=Eg(f,y,I);return this._delegate.onIdTokenChanged(D,j,re)}sendSignInLinkToEmail(f,y){return function fr(g,u,f){return xo.apply(this,arguments)}(this._delegate,f,y)}sendPasswordResetEmail(f,y){return function jm(g,u,f){return Cd.apply(this,arguments)}(this._delegate,f,y||void 0)}setPersistence(f){var y=this;return(0,k.A)(function*(){let I;switch(function Ru(g,u){Bo(Object.values(ar).includes(u),g,"invalid-persistence-type"),(0,ve.lV)()?Bo(u!==ar.SESSION,g,"unsupported-persistence-type"):(0,ve.Ll)()?Bo(u===ar.NONE,g,"unsupported-persistence-type"):rp()?Bo(u===ar.NONE||u===ar.LOCAL&&(0,ve.zW)(),g,"unsupported-persistence-type"):Bo(u===ar.NONE||pa(),g,"unsupported-persistence-type")}(y._delegate,f),f){case ar.SESSION:I=Dn;break;case ar.LOCAL:I=(yield Ke(Zi)._isAvailable())?Zi:Md;break;case ar.NONE:I=Yr;break;default:return rn("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return ti(this._delegate,function vd(g){return nu.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return ti(this._delegate,Id(this._delegate,f))}signInWithCustomToken(f){return ti(this._delegate,function su(g,u){return Ye.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,y){return ti(this._delegate,function vn(g,u,f){return(0,Je._isFirebaseServerApp)(g.app)?Promise.reject(ht(g)):Id((0,ve.Ku)(g),Ba.credential(u,f)).catch(function(){var y=(0,k.A)(function*(I){throw"auth/password-does-not-meet-requirements"===I.code&&ta(g),I});return function(I){return y.apply(this,arguments)}}())}(this._delegate,f,y))}signInWithEmailLink(f,y){return ti(this._delegate,function At(g,u,f){return xc.apply(this,arguments)}(this._delegate,f,y))}signInWithPhoneNumber(f,y){return up(this._delegate,function Gy(g,u,f){return gl.apply(this,arguments)}(this._delegate,f,y))}signInWithPopup(f){var y=this;return(0,k.A)(function*(){return zc(ip(),y._delegate,"operation-not-supported-in-this-environment"),ti(y._delegate,function Bf(g,u,f){return Nd.apply(this,arguments)}(y._delegate,f,Ar))})()}signInWithRedirect(f){var y=this;return(0,k.A)(function*(){return zc(ip(),y._delegate,"operation-not-supported-in-this-environment"),yield oc(y._delegate),xe(y._delegate,f,Ar)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Ve(g,u){return ct.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=ar,g})();function Eg(g,u,f){let y=g;"function"!=typeof g&&({next:y,error:u,complete:f}=g);const I=y;return{next:j=>I(j&&ma.getOrCreate(j)),error:u,complete:f}}function ku(g,u){const f=function bg(g,u){const f=ap();if(!f)return[];const y=mt(sp,g,u);switch(f.getItem(y)){case ar.NONE:return[Yr];case ar.LOCAL:return[Zi,Dn];case ar.SESSION:return[Dn];default:return[]}}(g,u);if(typeof self<"u"&&!f.includes(Zi)&&f.push(Zi),typeof window<"u")for(const y of[Md,Dn])f.includes(y)||f.push(y);return f.includes(Yr)||f.push(Yr),f}class dp{constructor(){this.providerId="phone",this._delegate=new Nr(Pu(O.A.auth()))}static credential(u,f){return Nr.credential(u,f)}verifyPhoneNumber(u,f){return this._delegate.verifyPhoneNumber(u,f)}unwrap(){return this._delegate}}dp.PHONE_SIGN_IN_METHOD=Nr.PHONE_SIGN_IN_METHOD,dp.PROVIDER_ID=Nr.PROVIDER_ID;const sh=Re;class tv{constructor(u,f,y=O.A.app()){var I;sh(null===(I=y.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new Lf(y.auth(),u,f),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hp(g){g.INTERNAL.registerComponent(new lr.uA("auth-compat",u=>{const f=u.getProvider("app-compat").getImmediate(),y=u.getProvider("auth");return new Mu(f,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ba,FacebookAuthProvider:eu,GithubAuthProvider:_d,GoogleAuthProvider:cl,OAuthProvider:Kt,SAMLAuthProvider:Ua,PhoneAuthProvider:dp,PhoneMultiFactorGenerator:Qf,RecaptchaVerifier:tv,TwitterAuthProvider:ja,Auth:Mu,AuthCredential:Va,Error:ve.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.5.14")}(O.A)},467:(Hi,Gr,Pt)=>{"use strict";function k(Je,ve,Bt,fn,lr,qr,Qt){try{var Te=Je[qr](Qt),Ne=Te.value}catch(tt){return void Bt(tt)}Te.done?ve(Ne):Promise.resolve(Ne).then(fn,lr)}function O(Je){return function(){var ve=this,Bt=arguments;return new Promise(function(fn,lr){var qr=Je.apply(ve,Bt);function Qt(Ne){k(qr,fn,lr,Qt,Te,"next",Ne)}function Te(Ne){k(qr,fn,lr,Qt,Te,"throw",Ne)}Qt(void 0)})}}Pt.d(Gr,{A:()=>O})},635:(Hi,Gr,Pt)=>{"use strict";function ve(Y,ge){var Ie={};for(var te in Y)Object.prototype.hasOwnProperty.call(Y,te)&&ge.indexOf(te)<0&&(Ie[te]=Y[te]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(te=Object.getOwnPropertySymbols(Y);pe<te.length;pe++)ge.indexOf(te[pe])<0&&Object.prototype.propertyIsEnumerable.call(Y,te[pe])&&(Ie[te[pe]]=Y[te[pe]])}return Ie}function tt(Y,ge,Ie,te){return new(Ie||(Ie=Promise))(function(Le,Me){function Mt(ln){try{pt(te.next(ln))}catch(ur){Me(ur)}}function _n(ln){try{pt(te.throw(ln))}catch(ur){Me(ur)}}function pt(ln){ln.done?Le(ln.value):function pe(Le){return Le instanceof Ie?Le:new Ie(function(Me){Me(Le)})}(ln.value).then(Mt,_n)}pt((te=te.apply(Y,ge||[])).next())})}function mn(Y){return this instanceof mn?(this.v=Y,this):new mn(Y)}function rn(Y,ge,Ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,te=Ie.apply(Y,ge||[]),Le=[];return pe=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),Mt("next"),Mt("throw"),Mt("return",function Me(en){return function(Qr){return Promise.resolve(Qr).then(en,ur)}}),pe[Symbol.asyncIterator]=function(){return this},pe;function Mt(en,Qr){te[en]&&(pe[en]=function(Vn){return new Promise(function(vi,as){Le.push([en,Vn,vi,as])>1||_n(en,Vn)})},Qr&&(pe[en]=Qr(pe[en])))}function _n(en,Qr){try{!function pt(en){en.value instanceof mn?Promise.resolve(en.value.v).then(ln,ur):Mr(Le[0][2],en)}(te[en](Qr))}catch(Vn){Mr(Le[0][3],Vn)}}function ln(en){_n("next",en)}function ur(en){_n("throw",en)}function Mr(en,Qr){en(Qr),Le.shift(),Le.length&&_n(Le[0][0],Le[0][1])}}function oi(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,ge=Y[Symbol.asyncIterator];return ge?ge.call(Y):(Y=function Nt(Y){var ge="function"==typeof Symbol&&Symbol.iterator,Ie=ge&&Y[ge],te=0;if(Ie)return Ie.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&te>=Y.length&&(Y=void 0),{value:Y&&Y[te++],done:!Y}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),Ie={},te("next"),te("throw"),te("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie);function te(Le){Ie[Le]=Y[Le]&&function(Me){return new Promise(function(Mt,_n){!function pe(Le,Me,Mt,_n){Promise.resolve(_n).then(function(pt){Le({value:pt,done:Mt})},Me)}(Mt,_n,(Me=Y[Le](Me)).done,Me.value)})}}}Pt.d(Gr,{AQ:()=>rn,N3:()=>mn,Tt:()=>ve,sH:()=>tt,xN:()=>oi}),"function"==typeof SuppressedError&&SuppressedError}},Hi=>{Hi(Hi.s=92)}]);